function iT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sT={exports:{}},Ph={},aT={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=Symbol.for("react.element"),dA=Symbol.for("react.portal"),fA=Symbol.for("react.fragment"),hA=Symbol.for("react.strict_mode"),pA=Symbol.for("react.profiler"),mA=Symbol.for("react.provider"),gA=Symbol.for("react.context"),vA=Symbol.for("react.forward_ref"),yA=Symbol.for("react.suspense"),bA=Symbol.for("react.memo"),kA=Symbol.for("react.lazy"),jk=Symbol.iterator;function SA(e){return e===null||typeof e!="object"?null:(e=jk&&e[jk]||e["@@iterator"],typeof e=="function"?e:null)}var lT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cT=Object.assign,uT={};function Nl(e,t,n){this.props=e,this.context=t,this.refs=uT,this.updater=n||lT}Nl.prototype.isReactComponent={};Nl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dT(){}dT.prototype=Nl.prototype;function R0(e,t,n){this.props=e,this.context=t,this.refs=uT,this.updater=n||lT}var I0=R0.prototype=new dT;I0.constructor=R0;cT(I0,Nl.prototype);I0.isPureReactComponent=!0;var zk=Array.isArray,fT=Object.prototype.hasOwnProperty,O0={current:null},hT={key:!0,ref:!0,__self:!0,__source:!0};function pT(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)fT.call(t,r)&&!hT.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Iu,type:e,key:o,ref:s,props:i,_owner:O0.current}}function CA(e,t){return{$$typeof:Iu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function M0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Iu}function wA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bk=/\/+/g;function Am(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wA(""+e.key):t.toString(36)}function sf(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Iu:case dA:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Am(s,0):r,zk(i)?(n="",e!=null&&(n=e.replace(Bk,"$&/")+"/"),sf(i,t,n,"",function(d){return d})):i!=null&&(M0(i)&&(i=CA(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Bk,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",zk(e))for(var l=0;l<e.length;l++){o=e[l];var u=r+Am(o,l);s+=sf(o,t,n,u,i)}else if(u=SA(e),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=r+Am(o,l++),s+=sf(o,t,n,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Od(e,t,n){if(e==null)return e;var r=[],i=0;return sf(e,r,"","",function(o){return t.call(n,o,i++)}),r}function TA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qn={current:null},af={transition:null},EA={ReactCurrentDispatcher:qn,ReactCurrentBatchConfig:af,ReactCurrentOwner:O0};Xe.Children={map:Od,forEach:function(e,t,n){Od(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Od(e,function(){t++}),t},toArray:function(e){return Od(e,function(t){return t})||[]},only:function(e){if(!M0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=Nl;Xe.Fragment=fA;Xe.Profiler=pA;Xe.PureComponent=R0;Xe.StrictMode=hA;Xe.Suspense=yA;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EA;Xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cT({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=O0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)fT.call(t,u)&&!hT.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Iu,type:e.type,key:i,ref:o,props:r,_owner:s}};Xe.createContext=function(e){return e={$$typeof:gA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mA,_context:e},e.Consumer=e};Xe.createElement=pT;Xe.createFactory=function(e){var t=pT.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:vA,render:e}};Xe.isValidElement=M0;Xe.lazy=function(e){return{$$typeof:kA,_payload:{_status:-1,_result:e},_init:TA}};Xe.memo=function(e,t){return{$$typeof:bA,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=af.transition;af.transition={};try{e()}finally{af.transition=t}};Xe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Xe.useCallback=function(e,t){return qn.current.useCallback(e,t)};Xe.useContext=function(e){return qn.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return qn.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return qn.current.useEffect(e,t)};Xe.useId=function(){return qn.current.useId()};Xe.useImperativeHandle=function(e,t,n){return qn.current.useImperativeHandle(e,t,n)};Xe.useInsertionEffect=function(e,t){return qn.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return qn.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return qn.current.useMemo(e,t)};Xe.useReducer=function(e,t,n){return qn.current.useReducer(e,t,n)};Xe.useRef=function(e){return qn.current.useRef(e)};Xe.useState=function(e){return qn.current.useState(e)};Xe.useSyncExternalStore=function(e,t,n){return qn.current.useSyncExternalStore(e,t,n)};Xe.useTransition=function(){return qn.current.useTransition()};Xe.version="18.2.0";aT.exports=Xe;var b=aT.exports;const re=oT(b),_A=iT({__proto__:null,default:re},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA=b,xA=Symbol.for("react.element"),RA=Symbol.for("react.fragment"),IA=Object.prototype.hasOwnProperty,OA=PA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MA={key:!0,ref:!0,__self:!0,__source:!0};function mT(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)IA.call(t,r)&&!MA.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:xA,type:e,key:o,ref:s,props:i,_owner:OA.current}}Ph.Fragment=RA;Ph.jsx=mT;Ph.jsxs=mT;sT.exports=Ph;var de=sT.exports,Vg={},gT={exports:{}},_r={},vT={exports:{}},yT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,se){var Ee=te.length;te.push(se);e:for(;0<Ee;){var ke=Ee-1>>>1,xe=te[ke];if(0<i(xe,se))te[ke]=se,te[Ee]=xe,Ee=ke;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var se=te[0],Ee=te.pop();if(Ee!==se){te[0]=Ee;e:for(var ke=0,xe=te.length,ze=xe>>>1;ke<ze;){var Et=2*(ke+1)-1,mt=te[Et],lt=Et+1,Xt=te[lt];if(0>i(mt,Ee))lt<xe&&0>i(Xt,mt)?(te[ke]=Xt,te[lt]=Ee,ke=lt):(te[ke]=mt,te[Et]=Ee,ke=Et);else if(lt<xe&&0>i(Xt,Ee))te[ke]=Xt,te[lt]=Ee,ke=lt;else break e}}return se}function i(te,se){var Ee=te.sortIndex-se.sortIndex;return Ee!==0?Ee:te.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],d=[],h=1,p=null,m=3,y=!1,S=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(te){for(var se=n(d);se!==null;){if(se.callback===null)r(d);else if(se.startTime<=te)r(d),se.sortIndex=se.expirationTime,t(u,se);else break;se=n(d)}}function _(te){if(k=!1,x(te),!S)if(n(u)!==null)S=!0,Je(I);else{var se=n(d);se!==null&&Ne(_,se.startTime-te)}}function I(te,se){S=!1,k&&(k=!1,v(T),T=-1),y=!0;var Ee=m;try{for(x(se),p=n(u);p!==null&&(!(p.expirationTime>se)||te&&!$());){var ke=p.callback;if(typeof ke=="function"){p.callback=null,m=p.priorityLevel;var xe=ke(p.expirationTime<=se);se=e.unstable_now(),typeof xe=="function"?p.callback=xe:p===n(u)&&r(u),x(se)}else r(u);p=n(u)}if(p!==null)var ze=!0;else{var Et=n(d);Et!==null&&Ne(_,Et.startTime-se),ze=!1}return ze}finally{p=null,m=Ee,y=!1}}var M=!1,U=null,T=-1,B=5,j=-1;function $(){return!(e.unstable_now()-j<B)}function K(){if(U!==null){var te=e.unstable_now();j=te;var se=!0;try{se=U(!0,te)}finally{se?ve():(M=!1,U=null)}}else M=!1}var ve;if(typeof w=="function")ve=function(){w(K)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,nt=me.port2;me.port1.onmessage=K,ve=function(){nt.postMessage(null)}}else ve=function(){P(K,0)};function Je(te){U=te,M||(M=!0,ve())}function Ne(te,se){T=P(function(){te(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){S||y||(S=!0,Je(I))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(te){switch(m){case 1:case 2:case 3:var se=3;break;default:se=m}var Ee=m;m=se;try{return te()}finally{m=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,se){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ee=m;m=te;try{return se()}finally{m=Ee}},e.unstable_scheduleCallback=function(te,se,Ee){var ke=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ke+Ee:ke):Ee=ke,te){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Ee+xe,te={id:h++,callback:se,priorityLevel:te,startTime:Ee,expirationTime:xe,sortIndex:-1},Ee>ke?(te.sortIndex=Ee,t(d,te),n(u)===null&&te===n(d)&&(k?(v(T),T=-1):k=!0,Ne(_,Ee-ke))):(te.sortIndex=xe,t(u,te),S||y||(S=!0,Je(I))),te},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(te){var se=m;return function(){var Ee=m;m=se;try{return te.apply(this,arguments)}finally{m=Ee}}}})(yT);vT.exports=yT;var LA=vT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT=b,wr=LA;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kT=new Set,nu={};function ia(e,t){Cl(e,t),Cl(e+"Capture",t)}function Cl(e,t){for(nu[e]=t,e=0;e<t.length;e++)kT.add(t[e])}var uo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$g=Object.prototype.hasOwnProperty,AA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vk={},$k={};function DA(e){return $g.call($k,e)?!0:$g.call(Vk,e)?!1:AA.test(e)?$k[e]=!0:(Vk[e]=!0,!1)}function NA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UA(e,t,n,r){if(t===null||typeof t>"u"||NA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Kn(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var _n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_n[e]=new Kn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_n[t]=new Kn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_n[e]=new Kn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_n[e]=new Kn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_n[e]=new Kn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_n[e]=new Kn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_n[e]=new Kn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_n[e]=new Kn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_n[e]=new Kn(e,5,!1,e.toLowerCase(),null,!1,!1)});var L0=/[\-:]([a-z])/g;function A0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(L0,A0);_n[t]=new Kn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(L0,A0);_n[t]=new Kn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(L0,A0);_n[t]=new Kn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_n[e]=new Kn(e,1,!1,e.toLowerCase(),null,!1,!1)});_n.xlinkHref=new Kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_n[e]=new Kn(e,1,!1,e.toLowerCase(),null,!0,!0)});function D0(e,t,n,r){var i=_n.hasOwnProperty(t)?_n[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UA(t,n,i,r)&&(n=null),r||i===null?DA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var bo=bT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Md=Symbol.for("react.element"),Ha=Symbol.for("react.portal"),Ga=Symbol.for("react.fragment"),N0=Symbol.for("react.strict_mode"),Wg=Symbol.for("react.profiler"),ST=Symbol.for("react.provider"),CT=Symbol.for("react.context"),U0=Symbol.for("react.forward_ref"),Hg=Symbol.for("react.suspense"),Gg=Symbol.for("react.suspense_list"),F0=Symbol.for("react.memo"),Vo=Symbol.for("react.lazy"),wT=Symbol.for("react.offscreen"),Wk=Symbol.iterator;function dc(e){return e===null||typeof e!="object"?null:(e=Wk&&e[Wk]||e["@@iterator"],typeof e=="function"?e:null)}var Vt=Object.assign,Dm;function Ic(e){if(Dm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dm=t&&t[1]||""}return`
`+Dm+e}var Nm=!1;function Um(e,t){if(!e||Nm)return"";Nm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=l);break}}}finally{Nm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ic(e):""}function FA(e){switch(e.tag){case 5:return Ic(e.type);case 16:return Ic("Lazy");case 13:return Ic("Suspense");case 19:return Ic("SuspenseList");case 0:case 2:case 15:return e=Um(e.type,!1),e;case 11:return e=Um(e.type.render,!1),e;case 1:return e=Um(e.type,!0),e;default:return""}}function qg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ga:return"Fragment";case Ha:return"Portal";case Wg:return"Profiler";case N0:return"StrictMode";case Hg:return"Suspense";case Gg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CT:return(e.displayName||"Context")+".Consumer";case ST:return(e._context.displayName||"Context")+".Provider";case U0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F0:return t=e.displayName||null,t!==null?t:qg(e.type)||"Memo";case Vo:t=e._payload,e=e._init;try{return qg(e(t))}catch{}}return null}function jA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qg(t);case 8:return t===N0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function as(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function TT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zA(e){var t=TT(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ld(e){e._valueTracker||(e._valueTracker=zA(e))}function ET(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=TT(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Df(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kg(e,t){var n=t.checked;return Vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Hk(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=as(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _T(e,t){t=t.checked,t!=null&&D0(e,"checked",t,!1)}function Jg(e,t){_T(e,t);var n=as(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Qg(e,t.type,as(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gk(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Qg(e,t,n){(t!=="number"||Df(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Oc=Array.isArray;function sl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+as(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Yg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qk(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ie(92));if(Oc(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:as(n)}}function PT(e,t){var n=as(t.value),r=as(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Kk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ad,RT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ad=Ad||document.createElement("div"),Ad.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ad.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ru(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BA=["Webkit","ms","Moz","O"];Object.keys(jc).forEach(function(e){BA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jc[t]=jc[e]})});function IT(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jc.hasOwnProperty(e)&&jc[e]?(""+t).trim():t+"px"}function OT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IT(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var VA=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zg(e,t){if(t){if(VA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function ev(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tv=null;function j0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nv=null,al=null,ll=null;function Jk(e){if(e=Lu(e)){if(typeof nv!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=Mh(t),nv(e.stateNode,e.type,t))}}function MT(e){al?ll?ll.push(e):ll=[e]:al=e}function LT(){if(al){var e=al,t=ll;if(ll=al=null,Jk(e),t)for(e=0;e<t.length;e++)Jk(t[e])}}function AT(e,t){return e(t)}function DT(){}var Fm=!1;function NT(e,t,n){if(Fm)return e(t,n);Fm=!0;try{return AT(e,t,n)}finally{Fm=!1,(al!==null||ll!==null)&&(DT(),LT())}}function iu(e,t){var n=e.stateNode;if(n===null)return null;var r=Mh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ie(231,t,typeof n));return n}var rv=!1;if(uo)try{var fc={};Object.defineProperty(fc,"passive",{get:function(){rv=!0}}),window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{rv=!1}function $A(e,t,n,r,i,o,s,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var zc=!1,Nf=null,Uf=!1,iv=null,WA={onError:function(e){zc=!0,Nf=e}};function HA(e,t,n,r,i,o,s,l,u){zc=!1,Nf=null,$A.apply(WA,arguments)}function GA(e,t,n,r,i,o,s,l,u){if(HA.apply(this,arguments),zc){if(zc){var d=Nf;zc=!1,Nf=null}else throw Error(ie(198));Uf||(Uf=!0,iv=d)}}function oa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function UT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qk(e){if(oa(e)!==e)throw Error(ie(188))}function qA(e){var t=e.alternate;if(!t){if(t=oa(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qk(i),e;if(o===r)return Qk(i),t;o=o.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?e:t}function FT(e){return e=qA(e),e!==null?jT(e):null}function jT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jT(e);if(t!==null)return t;e=e.sibling}return null}var zT=wr.unstable_scheduleCallback,Yk=wr.unstable_cancelCallback,KA=wr.unstable_shouldYield,JA=wr.unstable_requestPaint,Qt=wr.unstable_now,QA=wr.unstable_getCurrentPriorityLevel,z0=wr.unstable_ImmediatePriority,BT=wr.unstable_UserBlockingPriority,Ff=wr.unstable_NormalPriority,YA=wr.unstable_LowPriority,VT=wr.unstable_IdlePriority,xh=null,Ni=null;function XA(e){if(Ni&&typeof Ni.onCommitFiberRoot=="function")try{Ni.onCommitFiberRoot(xh,e,void 0,(e.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:tD,ZA=Math.log,eD=Math.LN2;function tD(e){return e>>>=0,e===0?32:31-(ZA(e)/eD|0)|0}var Dd=64,Nd=4194304;function Mc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Mc(l):(o&=s,o!==0&&(r=Mc(o)))}else s=n&~i,s!==0?r=Mc(s):o!==0&&(r=Mc(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vi(t),i=1<<n,r|=e[n],t&=~i;return r}function nD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rD(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-vi(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=nD(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}function ov(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $T(){var e=Dd;return Dd<<=1,!(Dd&4194240)&&(Dd=64),e}function jm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ou(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vi(t),e[t]=n}function iD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vi(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function B0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ft=0;function WT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var HT,V0,GT,qT,KT,sv=!1,Ud=[],Yo=null,Xo=null,Zo=null,ou=new Map,su=new Map,Wo=[],oD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xk(e,t){switch(e){case"focusin":case"focusout":Yo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":ou.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(t.pointerId)}}function hc(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Lu(t),t!==null&&V0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function sD(e,t,n,r,i){switch(t){case"focusin":return Yo=hc(Yo,e,t,n,r,i),!0;case"dragenter":return Xo=hc(Xo,e,t,n,r,i),!0;case"mouseover":return Zo=hc(Zo,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ou.set(o,hc(ou.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,su.set(o,hc(su.get(o)||null,e,t,n,r,i)),!0}return!1}function JT(e){var t=Ds(e.target);if(t!==null){var n=oa(t);if(n!==null){if(t=n.tag,t===13){if(t=UT(n),t!==null){e.blockedOn=t,KT(e.priority,function(){GT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=av(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);tv=r,n.target.dispatchEvent(r),tv=null}else return t=Lu(n),t!==null&&V0(t),e.blockedOn=n,!1;t.shift()}return!0}function Zk(e,t,n){lf(e)&&n.delete(t)}function aD(){sv=!1,Yo!==null&&lf(Yo)&&(Yo=null),Xo!==null&&lf(Xo)&&(Xo=null),Zo!==null&&lf(Zo)&&(Zo=null),ou.forEach(Zk),su.forEach(Zk)}function pc(e,t){e.blockedOn===t&&(e.blockedOn=null,sv||(sv=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,aD)))}function au(e){function t(i){return pc(i,e)}if(0<Ud.length){pc(Ud[0],e);for(var n=1;n<Ud.length;n++){var r=Ud[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Yo!==null&&pc(Yo,e),Xo!==null&&pc(Xo,e),Zo!==null&&pc(Zo,e),ou.forEach(t),su.forEach(t),n=0;n<Wo.length;n++)r=Wo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wo.length&&(n=Wo[0],n.blockedOn===null);)JT(n),n.blockedOn===null&&Wo.shift()}var cl=bo.ReactCurrentBatchConfig,zf=!0;function lD(e,t,n,r){var i=ft,o=cl.transition;cl.transition=null;try{ft=1,$0(e,t,n,r)}finally{ft=i,cl.transition=o}}function cD(e,t,n,r){var i=ft,o=cl.transition;cl.transition=null;try{ft=4,$0(e,t,n,r)}finally{ft=i,cl.transition=o}}function $0(e,t,n,r){if(zf){var i=av(e,t,n,r);if(i===null)Jm(e,t,r,Bf,n),Xk(e,r);else if(sD(i,e,t,n,r))r.stopPropagation();else if(Xk(e,r),t&4&&-1<oD.indexOf(e)){for(;i!==null;){var o=Lu(i);if(o!==null&&HT(o),o=av(e,t,n,r),o===null&&Jm(e,t,r,Bf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Jm(e,t,r,null,n)}}var Bf=null;function av(e,t,n,r){if(Bf=null,e=j0(r),e=Ds(e),e!==null)if(t=oa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=UT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bf=e,null}function QT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QA()){case z0:return 1;case BT:return 4;case Ff:case YA:return 16;case VT:return 536870912;default:return 16}default:return 16}}var Go=null,W0=null,cf=null;function YT(){if(cf)return cf;var e,t=W0,n=t.length,r,i="value"in Go?Go.value:Go.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return cf=i.slice(e,1<r?1-r:void 0)}function uf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fd(){return!0}function eS(){return!1}function Pr(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fd:eS,this.isPropagationStopped=eS,this}return Vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fd)},persist:function(){},isPersistent:Fd}),t}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H0=Pr(Ul),Mu=Vt({},Ul,{view:0,detail:0}),uD=Pr(Mu),zm,Bm,mc,Rh=Vt({},Mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:G0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mc&&(mc&&e.type==="mousemove"?(zm=e.screenX-mc.screenX,Bm=e.screenY-mc.screenY):Bm=zm=0,mc=e),zm)},movementY:function(e){return"movementY"in e?e.movementY:Bm}}),tS=Pr(Rh),dD=Vt({},Rh,{dataTransfer:0}),fD=Pr(dD),hD=Vt({},Mu,{relatedTarget:0}),Vm=Pr(hD),pD=Vt({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),mD=Pr(pD),gD=Vt({},Ul,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vD=Pr(gD),yD=Vt({},Ul,{data:0}),nS=Pr(yD),bD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SD[e])?!!t[e]:!1}function G0(){return CD}var wD=Vt({},Mu,{key:function(e){if(e.key){var t=bD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:G0,charCode:function(e){return e.type==="keypress"?uf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),TD=Pr(wD),ED=Vt({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rS=Pr(ED),_D=Vt({},Mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:G0}),PD=Pr(_D),xD=Vt({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),RD=Pr(xD),ID=Vt({},Rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OD=Pr(ID),MD=[9,13,27,32],q0=uo&&"CompositionEvent"in window,Bc=null;uo&&"documentMode"in document&&(Bc=document.documentMode);var LD=uo&&"TextEvent"in window&&!Bc,XT=uo&&(!q0||Bc&&8<Bc&&11>=Bc),iS=String.fromCharCode(32),oS=!1;function ZT(e,t){switch(e){case"keyup":return MD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qa=!1;function AD(e,t){switch(e){case"compositionend":return eE(t);case"keypress":return t.which!==32?null:(oS=!0,iS);case"textInput":return e=t.data,e===iS&&oS?null:e;default:return null}}function DD(e,t){if(qa)return e==="compositionend"||!q0&&ZT(e,t)?(e=YT(),cf=W0=Go=null,qa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XT&&t.locale!=="ko"?null:t.data;default:return null}}var ND={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ND[e.type]:t==="textarea"}function tE(e,t,n,r){MT(r),t=Vf(t,"onChange"),0<t.length&&(n=new H0("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vc=null,lu=null;function UD(e){fE(e,0)}function Ih(e){var t=Qa(e);if(ET(t))return e}function FD(e,t){if(e==="change")return t}var nE=!1;if(uo){var $m;if(uo){var Wm="oninput"in document;if(!Wm){var aS=document.createElement("div");aS.setAttribute("oninput","return;"),Wm=typeof aS.oninput=="function"}$m=Wm}else $m=!1;nE=$m&&(!document.documentMode||9<document.documentMode)}function lS(){Vc&&(Vc.detachEvent("onpropertychange",rE),lu=Vc=null)}function rE(e){if(e.propertyName==="value"&&Ih(lu)){var t=[];tE(t,lu,e,j0(e)),NT(UD,t)}}function jD(e,t,n){e==="focusin"?(lS(),Vc=t,lu=n,Vc.attachEvent("onpropertychange",rE)):e==="focusout"&&lS()}function zD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ih(lu)}function BD(e,t){if(e==="click")return Ih(t)}function VD(e,t){if(e==="input"||e==="change")return Ih(t)}function $D(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bi=typeof Object.is=="function"?Object.is:$D;function cu(e,t){if(bi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$g.call(t,i)||!bi(e[i],t[i]))return!1}return!0}function cS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uS(e,t){var n=cS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cS(n)}}function iE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?iE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oE(){for(var e=window,t=Df();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Df(e.document)}return t}function K0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WD(e){var t=oE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&iE(n.ownerDocument.documentElement,n)){if(r!==null&&K0(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=uS(n,o);var s=uS(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HD=uo&&"documentMode"in document&&11>=document.documentMode,Ka=null,lv=null,$c=null,cv=!1;function dS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cv||Ka==null||Ka!==Df(r)||(r=Ka,"selectionStart"in r&&K0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$c&&cu($c,r)||($c=r,r=Vf(lv,"onSelect"),0<r.length&&(t=new H0("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ka)))}function jd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ja={animationend:jd("Animation","AnimationEnd"),animationiteration:jd("Animation","AnimationIteration"),animationstart:jd("Animation","AnimationStart"),transitionend:jd("Transition","TransitionEnd")},Hm={},sE={};uo&&(sE=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Oh(e){if(Hm[e])return Hm[e];if(!Ja[e])return e;var t=Ja[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sE)return Hm[e]=t[n];return e}var aE=Oh("animationend"),lE=Oh("animationiteration"),cE=Oh("animationstart"),uE=Oh("transitionend"),dE=new Map,fS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(e,t){dE.set(e,t),ia(t,[e])}for(var Gm=0;Gm<fS.length;Gm++){var qm=fS[Gm],GD=qm.toLowerCase(),qD=qm[0].toUpperCase()+qm.slice(1);hs(GD,"on"+qD)}hs(aE,"onAnimationEnd");hs(lE,"onAnimationIteration");hs(cE,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(uE,"onTransitionEnd");Cl("onMouseEnter",["mouseout","mouseover"]);Cl("onMouseLeave",["mouseout","mouseover"]);Cl("onPointerEnter",["pointerout","pointerover"]);Cl("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lc));function hS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,GA(r,t,void 0,e),e.currentTarget=null}function fE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;hS(i,l,d),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,d=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;hS(i,l,d),o=u}}}if(Uf)throw e=iv,Uf=!1,iv=null,e}function Mt(e,t){var n=t[pv];n===void 0&&(n=t[pv]=new Set);var r=e+"__bubble";n.has(r)||(hE(t,e,2,!1),n.add(r))}function Km(e,t,n){var r=0;t&&(r|=4),hE(n,e,r,t)}var zd="_reactListening"+Math.random().toString(36).slice(2);function uu(e){if(!e[zd]){e[zd]=!0,kT.forEach(function(n){n!=="selectionchange"&&(KD.has(n)||Km(n,!1,e),Km(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zd]||(t[zd]=!0,Km("selectionchange",!1,t))}}function hE(e,t,n,r){switch(QT(t)){case 1:var i=lD;break;case 4:i=cD;break;default:i=$0}n=i.bind(null,t,n,e),i=void 0,!rv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Jm(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Ds(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}NT(function(){var d=o,h=j0(n),p=[];e:{var m=dE.get(e);if(m!==void 0){var y=H0,S=e;switch(e){case"keypress":if(uf(n)===0)break e;case"keydown":case"keyup":y=TD;break;case"focusin":S="focus",y=Vm;break;case"focusout":S="blur",y=Vm;break;case"beforeblur":case"afterblur":y=Vm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=tS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=fD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=PD;break;case aE:case lE:case cE:y=mD;break;case uE:y=RD;break;case"scroll":y=uD;break;case"wheel":y=OD;break;case"copy":case"cut":case"paste":y=vD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=rS}var k=(t&4)!==0,P=!k&&e==="scroll",v=k?m!==null?m+"Capture":null:m;k=[];for(var w=d,x;w!==null;){x=w;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,v!==null&&(_=iu(w,v),_!=null&&k.push(du(w,_,x)))),P)break;w=w.return}0<k.length&&(m=new y(m,S,null,n,h),p.push({event:m,listeners:k}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==tv&&(S=n.relatedTarget||n.fromElement)&&(Ds(S)||S[fo]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=d,S=S?Ds(S):null,S!==null&&(P=oa(S),S!==P||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=d),y!==S)){if(k=tS,_="onMouseLeave",v="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(k=rS,_="onPointerLeave",v="onPointerEnter",w="pointer"),P=y==null?m:Qa(y),x=S==null?m:Qa(S),m=new k(_,w+"leave",y,n,h),m.target=P,m.relatedTarget=x,_=null,Ds(h)===d&&(k=new k(v,w+"enter",S,n,h),k.target=x,k.relatedTarget=P,_=k),P=_,y&&S)t:{for(k=y,v=S,w=0,x=k;x;x=Aa(x))w++;for(x=0,_=v;_;_=Aa(_))x++;for(;0<w-x;)k=Aa(k),w--;for(;0<x-w;)v=Aa(v),x--;for(;w--;){if(k===v||v!==null&&k===v.alternate)break t;k=Aa(k),v=Aa(v)}k=null}else k=null;y!==null&&pS(p,m,y,k,!1),S!==null&&P!==null&&pS(p,P,S,k,!0)}}e:{if(m=d?Qa(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var I=FD;else if(sS(m))if(nE)I=VD;else{I=zD;var M=jD}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=BD);if(I&&(I=I(e,d))){tE(p,I,n,h);break e}M&&M(e,m,d),e==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Qg(m,"number",m.value)}switch(M=d?Qa(d):window,e){case"focusin":(sS(M)||M.contentEditable==="true")&&(Ka=M,lv=d,$c=null);break;case"focusout":$c=lv=Ka=null;break;case"mousedown":cv=!0;break;case"contextmenu":case"mouseup":case"dragend":cv=!1,dS(p,n,h);break;case"selectionchange":if(HD)break;case"keydown":case"keyup":dS(p,n,h)}var U;if(q0)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else qa?ZT(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(XT&&n.locale!=="ko"&&(qa||T!=="onCompositionStart"?T==="onCompositionEnd"&&qa&&(U=YT()):(Go=h,W0="value"in Go?Go.value:Go.textContent,qa=!0)),M=Vf(d,T),0<M.length&&(T=new nS(T,e,null,n,h),p.push({event:T,listeners:M}),U?T.data=U:(U=eE(n),U!==null&&(T.data=U)))),(U=LD?AD(e,n):DD(e,n))&&(d=Vf(d,"onBeforeInput"),0<d.length&&(h=new nS("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=U))}fE(p,t)})}function du(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vf(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=iu(e,n),o!=null&&r.unshift(du(e,o,i)),o=iu(e,t),o!=null&&r.push(du(e,o,i))),e=e.return}return r}function Aa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pS(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=iu(n,o),u!=null&&s.unshift(du(n,u,l))):i||(u=iu(n,o),u!=null&&s.push(du(n,u,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var JD=/\r\n?/g,QD=/\u0000|\uFFFD/g;function mS(e){return(typeof e=="string"?e:""+e).replace(JD,`
`).replace(QD,"")}function Bd(e,t,n){if(t=mS(t),mS(e)!==t&&n)throw Error(ie(425))}function $f(){}var uv=null,dv=null;function fv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hv=typeof setTimeout=="function"?setTimeout:void 0,YD=typeof clearTimeout=="function"?clearTimeout:void 0,gS=typeof Promise=="function"?Promise:void 0,XD=typeof queueMicrotask=="function"?queueMicrotask:typeof gS<"u"?function(e){return gS.resolve(null).then(e).catch(ZD)}:hv;function ZD(e){setTimeout(function(){throw e})}function Qm(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),au(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);au(t)}function es(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Fl=Math.random().toString(36).slice(2),Ai="__reactFiber$"+Fl,fu="__reactProps$"+Fl,fo="__reactContainer$"+Fl,pv="__reactEvents$"+Fl,eN="__reactListeners$"+Fl,tN="__reactHandles$"+Fl;function Ds(e){var t=e[Ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fo]||n[Ai]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vS(e);e!==null;){if(n=e[Ai])return n;e=vS(e)}return t}e=n,n=e.parentNode}return null}function Lu(e){return e=e[Ai]||e[fo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function Mh(e){return e[fu]||null}var mv=[],Ya=-1;function ps(e){return{current:e}}function Lt(e){0>Ya||(e.current=mv[Ya],mv[Ya]=null,Ya--)}function Tt(e,t){Ya++,mv[Ya]=e.current,e.current=t}var ls={},Fn=ps(ls),ir=ps(!1),qs=ls;function wl(e,t){var n=e.type.contextTypes;if(!n)return ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function or(e){return e=e.childContextTypes,e!=null}function Wf(){Lt(ir),Lt(Fn)}function yS(e,t,n){if(Fn.current!==ls)throw Error(ie(168));Tt(Fn,t),Tt(ir,n)}function pE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ie(108,jA(e)||"Unknown",i));return Vt({},n,r)}function Hf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ls,qs=Fn.current,Tt(Fn,e),Tt(ir,ir.current),!0}function bS(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=pE(e,t,qs),r.__reactInternalMemoizedMergedChildContext=e,Lt(ir),Lt(Fn),Tt(Fn,e)):Lt(ir),Tt(ir,n)}var eo=null,Lh=!1,Ym=!1;function mE(e){eo===null?eo=[e]:eo.push(e)}function nN(e){Lh=!0,mE(e)}function ms(){if(!Ym&&eo!==null){Ym=!0;var e=0,t=ft;try{var n=eo;for(ft=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}eo=null,Lh=!1}catch(i){throw eo!==null&&(eo=eo.slice(e+1)),zT(z0,ms),i}finally{ft=t,Ym=!1}}return null}var Xa=[],Za=0,Gf=null,qf=0,Br=[],Vr=0,Ks=null,io=1,oo="";function Is(e,t){Xa[Za++]=qf,Xa[Za++]=Gf,Gf=e,qf=t}function gE(e,t,n){Br[Vr++]=io,Br[Vr++]=oo,Br[Vr++]=Ks,Ks=e;var r=io;e=oo;var i=32-vi(r)-1;r&=~(1<<i),n+=1;var o=32-vi(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,io=1<<32-vi(t)+i|n<<i|r,oo=o+e}else io=1<<o|n<<i|r,oo=e}function J0(e){e.return!==null&&(Is(e,1),gE(e,1,0))}function Q0(e){for(;e===Gf;)Gf=Xa[--Za],Xa[Za]=null,qf=Xa[--Za],Xa[Za]=null;for(;e===Ks;)Ks=Br[--Vr],Br[Vr]=null,oo=Br[--Vr],Br[Vr]=null,io=Br[--Vr],Br[Vr]=null}var kr=null,yr=null,Nt=!1,hi=null;function vE(e,t){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function kS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kr=e,yr=es(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kr=e,yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ks!==null?{id:io,overflow:oo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kr=e,yr=null,!0):!1;default:return!1}}function gv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vv(e){if(Nt){var t=yr;if(t){var n=t;if(!kS(e,t)){if(gv(e))throw Error(ie(418));t=es(n.nextSibling);var r=kr;t&&kS(e,t)?vE(r,n):(e.flags=e.flags&-4097|2,Nt=!1,kr=e)}}else{if(gv(e))throw Error(ie(418));e.flags=e.flags&-4097|2,Nt=!1,kr=e}}}function SS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kr=e}function Vd(e){if(e!==kr)return!1;if(!Nt)return SS(e),Nt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fv(e.type,e.memoizedProps)),t&&(t=yr)){if(gv(e))throw yE(),Error(ie(418));for(;t;)vE(e,t),t=es(t.nextSibling)}if(SS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yr=es(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yr=null}}else yr=kr?es(e.stateNode.nextSibling):null;return!0}function yE(){for(var e=yr;e;)e=es(e.nextSibling)}function Tl(){yr=kr=null,Nt=!1}function Y0(e){hi===null?hi=[e]:hi.push(e)}var rN=bo.ReactCurrentBatchConfig;function ci(e,t){if(e&&e.defaultProps){t=Vt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Kf=ps(null),Jf=null,el=null,X0=null;function Z0(){X0=el=Jf=null}function ey(e){var t=Kf.current;Lt(Kf),e._currentValue=t}function yv(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ul(e,t){Jf=e,X0=el=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rr=!0),e.firstContext=null)}function Qr(e){var t=e._currentValue;if(X0!==e)if(e={context:e,memoizedValue:t,next:null},el===null){if(Jf===null)throw Error(ie(308));el=e,Jf.dependencies={lanes:0,firstContext:e}}else el=el.next=e;return t}var Ns=null;function ty(e){Ns===null?Ns=[e]:Ns.push(e)}function bE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ty(t)):(n.next=i.next,i.next=n),t.interleaved=n,ho(e,r)}function ho(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var $o=!1;function ny(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function so(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ts(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ot&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ho(e,n)}return i=r.interleaved,i===null?(t.next=t,ty(r)):(t.next=i.next,i.next=t),r.interleaved=t,ho(e,n)}function df(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,B0(e,n)}}function CS(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qf(e,t,n,r){var i=e.updateQueue;$o=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,s===null?o=d:s.next=d,s=u;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,h=d=u=null,l=o;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=e,k=l;switch(m=t,y=n,k.tag){case 1:if(S=k.payload,typeof S=="function"){p=S.call(y,p,m);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,m=typeof S=="function"?S.call(y,p,m):S,m==null)break e;p=Vt({},p,m);break e;case 2:$o=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,u=p):h=h.next=y,s|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Qs|=s,e.lanes=s,e.memoizedState=p}}function wS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var SE=new bT.Component().refs;function bv(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Vt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ah={isMounted:function(e){return(e=e._reactInternals)?oa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gn(),i=rs(e),o=so(r,i);o.payload=t,n!=null&&(o.callback=n),t=ts(e,o,i),t!==null&&(yi(t,e,i,r),df(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gn(),i=rs(e),o=so(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ts(e,o,i),t!==null&&(yi(t,e,i,r),df(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gn(),r=rs(e),i=so(n,r);i.tag=2,t!=null&&(i.callback=t),t=ts(e,i,r),t!==null&&(yi(t,e,r,n),df(t,e,r))}};function TS(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!cu(n,r)||!cu(i,o):!0}function CE(e,t,n){var r=!1,i=ls,o=t.contextType;return typeof o=="object"&&o!==null?o=Qr(o):(i=or(t)?qs:Fn.current,r=t.contextTypes,o=(r=r!=null)?wl(e,i):ls),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ah,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ES(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ah.enqueueReplaceState(t,t.state,null)}function kv(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=SE,ny(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Qr(o):(o=or(t)?qs:Fn.current,i.context=wl(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(bv(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ah.enqueueReplaceState(i,i.state,null),Qf(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function gc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var l=i.refs;l===SE&&(l=i.refs={}),s===null?delete l[o]:l[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function $d(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _S(e){var t=e._init;return t(e._payload)}function wE(e){function t(v,w){if(e){var x=v.deletions;x===null?(v.deletions=[w],v.flags|=16):x.push(w)}}function n(v,w){if(!e)return null;for(;w!==null;)t(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=is(v,w),v.index=0,v.sibling=null,v}function o(v,w,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<w?(v.flags|=2,w):x):(v.flags|=2,w)):(v.flags|=1048576,w)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,w,x,_){return w===null||w.tag!==6?(w=ig(x,v.mode,_),w.return=v,w):(w=i(w,x),w.return=v,w)}function u(v,w,x,_){var I=x.type;return I===Ga?h(v,w,x.props.children,_,x.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Vo&&_S(I)===w.type)?(_=i(w,x.props),_.ref=gc(v,w,x),_.return=v,_):(_=vf(x.type,x.key,x.props,null,v.mode,_),_.ref=gc(v,w,x),_.return=v,_)}function d(v,w,x,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=og(x,v.mode,_),w.return=v,w):(w=i(w,x.children||[]),w.return=v,w)}function h(v,w,x,_,I){return w===null||w.tag!==7?(w=Vs(x,v.mode,_,I),w.return=v,w):(w=i(w,x),w.return=v,w)}function p(v,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ig(""+w,v.mode,x),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Md:return x=vf(w.type,w.key,w.props,null,v.mode,x),x.ref=gc(v,null,w),x.return=v,x;case Ha:return w=og(w,v.mode,x),w.return=v,w;case Vo:var _=w._init;return p(v,_(w._payload),x)}if(Oc(w)||dc(w))return w=Vs(w,v.mode,x,null),w.return=v,w;$d(v,w)}return null}function m(v,w,x,_){var I=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return I!==null?null:l(v,w,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Md:return x.key===I?u(v,w,x,_):null;case Ha:return x.key===I?d(v,w,x,_):null;case Vo:return I=x._init,m(v,w,I(x._payload),_)}if(Oc(x)||dc(x))return I!==null?null:h(v,w,x,_,null);$d(v,x)}return null}function y(v,w,x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(x)||null,l(w,v,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Md:return v=v.get(_.key===null?x:_.key)||null,u(w,v,_,I);case Ha:return v=v.get(_.key===null?x:_.key)||null,d(w,v,_,I);case Vo:var M=_._init;return y(v,w,x,M(_._payload),I)}if(Oc(_)||dc(_))return v=v.get(x)||null,h(w,v,_,I,null);$d(w,_)}return null}function S(v,w,x,_){for(var I=null,M=null,U=w,T=w=0,B=null;U!==null&&T<x.length;T++){U.index>T?(B=U,U=null):B=U.sibling;var j=m(v,U,x[T],_);if(j===null){U===null&&(U=B);break}e&&U&&j.alternate===null&&t(v,U),w=o(j,w,T),M===null?I=j:M.sibling=j,M=j,U=B}if(T===x.length)return n(v,U),Nt&&Is(v,T),I;if(U===null){for(;T<x.length;T++)U=p(v,x[T],_),U!==null&&(w=o(U,w,T),M===null?I=U:M.sibling=U,M=U);return Nt&&Is(v,T),I}for(U=r(v,U);T<x.length;T++)B=y(U,v,T,x[T],_),B!==null&&(e&&B.alternate!==null&&U.delete(B.key===null?T:B.key),w=o(B,w,T),M===null?I=B:M.sibling=B,M=B);return e&&U.forEach(function($){return t(v,$)}),Nt&&Is(v,T),I}function k(v,w,x,_){var I=dc(x);if(typeof I!="function")throw Error(ie(150));if(x=I.call(x),x==null)throw Error(ie(151));for(var M=I=null,U=w,T=w=0,B=null,j=x.next();U!==null&&!j.done;T++,j=x.next()){U.index>T?(B=U,U=null):B=U.sibling;var $=m(v,U,j.value,_);if($===null){U===null&&(U=B);break}e&&U&&$.alternate===null&&t(v,U),w=o($,w,T),M===null?I=$:M.sibling=$,M=$,U=B}if(j.done)return n(v,U),Nt&&Is(v,T),I;if(U===null){for(;!j.done;T++,j=x.next())j=p(v,j.value,_),j!==null&&(w=o(j,w,T),M===null?I=j:M.sibling=j,M=j);return Nt&&Is(v,T),I}for(U=r(v,U);!j.done;T++,j=x.next())j=y(U,v,T,j.value,_),j!==null&&(e&&j.alternate!==null&&U.delete(j.key===null?T:j.key),w=o(j,w,T),M===null?I=j:M.sibling=j,M=j);return e&&U.forEach(function(K){return t(v,K)}),Nt&&Is(v,T),I}function P(v,w,x,_){if(typeof x=="object"&&x!==null&&x.type===Ga&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Md:e:{for(var I=x.key,M=w;M!==null;){if(M.key===I){if(I=x.type,I===Ga){if(M.tag===7){n(v,M.sibling),w=i(M,x.props.children),w.return=v,v=w;break e}}else if(M.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Vo&&_S(I)===M.type){n(v,M.sibling),w=i(M,x.props),w.ref=gc(v,M,x),w.return=v,v=w;break e}n(v,M);break}else t(v,M);M=M.sibling}x.type===Ga?(w=Vs(x.props.children,v.mode,_,x.key),w.return=v,v=w):(_=vf(x.type,x.key,x.props,null,v.mode,_),_.ref=gc(v,w,x),_.return=v,v=_)}return s(v);case Ha:e:{for(M=x.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(v,w.sibling),w=i(w,x.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else t(v,w);w=w.sibling}w=og(x,v.mode,_),w.return=v,v=w}return s(v);case Vo:return M=x._init,P(v,w,M(x._payload),_)}if(Oc(x))return S(v,w,x,_);if(dc(x))return k(v,w,x,_);$d(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,x),w.return=v,v=w):(n(v,w),w=ig(x,v.mode,_),w.return=v,v=w),s(v)):n(v,w)}return P}var El=wE(!0),TE=wE(!1),Au={},Ui=ps(Au),hu=ps(Au),pu=ps(Au);function Us(e){if(e===Au)throw Error(ie(174));return e}function ry(e,t){switch(Tt(pu,t),Tt(hu,e),Tt(Ui,Au),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xg(t,e)}Lt(Ui),Tt(Ui,t)}function _l(){Lt(Ui),Lt(hu),Lt(pu)}function EE(e){Us(pu.current);var t=Us(Ui.current),n=Xg(t,e.type);t!==n&&(Tt(hu,e),Tt(Ui,n))}function iy(e){hu.current===e&&(Lt(Ui),Lt(hu))}var zt=ps(0);function Yf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xm=[];function oy(){for(var e=0;e<Xm.length;e++)Xm[e]._workInProgressVersionPrimary=null;Xm.length=0}var ff=bo.ReactCurrentDispatcher,Zm=bo.ReactCurrentBatchConfig,Js=0,Bt=null,cn=null,pn=null,Xf=!1,Wc=!1,mu=0,iN=0;function Mn(){throw Error(ie(321))}function sy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bi(e[n],t[n]))return!1;return!0}function ay(e,t,n,r,i,o){if(Js=o,Bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ff.current=e===null||e.memoizedState===null?lN:cN,e=n(r,i),Wc){o=0;do{if(Wc=!1,mu=0,25<=o)throw Error(ie(301));o+=1,pn=cn=null,t.updateQueue=null,ff.current=uN,e=n(r,i)}while(Wc)}if(ff.current=Zf,t=cn!==null&&cn.next!==null,Js=0,pn=cn=Bt=null,Xf=!1,t)throw Error(ie(300));return e}function ly(){var e=mu!==0;return mu=0,e}function Ii(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Bt.memoizedState=pn=e:pn=pn.next=e,pn}function Yr(){if(cn===null){var e=Bt.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var t=pn===null?Bt.memoizedState:pn.next;if(t!==null)pn=t,cn=e;else{if(e===null)throw Error(ie(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},pn===null?Bt.memoizedState=pn=e:pn=pn.next=e}return pn}function gu(e,t){return typeof t=="function"?t(e):t}function eg(e){var t=Yr(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=cn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,d=o;do{var h=d.lane;if((Js&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,Bt.lanes|=h,Qs|=h}d=d.next}while(d!==null&&d!==o);u===null?s=r:u.next=l,bi(r,t.memoizedState)||(rr=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Bt.lanes|=o,Qs|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function tg(e){var t=Yr(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);bi(o,t.memoizedState)||(rr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _E(){}function PE(e,t){var n=Bt,r=Yr(),i=t(),o=!bi(r.memoizedState,i);if(o&&(r.memoizedState=i,rr=!0),r=r.queue,cy(IE.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,vu(9,RE.bind(null,n,r,i,t),void 0,null),mn===null)throw Error(ie(349));Js&30||xE(n,t,i)}return i}function xE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RE(e,t,n,r){t.value=n,t.getSnapshot=r,OE(t)&&ME(e)}function IE(e,t,n){return n(function(){OE(t)&&ME(e)})}function OE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bi(e,n)}catch{return!0}}function ME(e){var t=ho(e,1);t!==null&&yi(t,e,1,-1)}function PS(e){var t=Ii();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:e},t.queue=e,e=e.dispatch=aN.bind(null,Bt,e),[t.memoizedState,e]}function vu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function LE(){return Yr().memoizedState}function hf(e,t,n,r){var i=Ii();Bt.flags|=e,i.memoizedState=vu(1|t,n,void 0,r===void 0?null:r)}function Dh(e,t,n,r){var i=Yr();r=r===void 0?null:r;var o=void 0;if(cn!==null){var s=cn.memoizedState;if(o=s.destroy,r!==null&&sy(r,s.deps)){i.memoizedState=vu(t,n,o,r);return}}Bt.flags|=e,i.memoizedState=vu(1|t,n,o,r)}function xS(e,t){return hf(8390656,8,e,t)}function cy(e,t){return Dh(2048,8,e,t)}function AE(e,t){return Dh(4,2,e,t)}function DE(e,t){return Dh(4,4,e,t)}function NE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function UE(e,t,n){return n=n!=null?n.concat([e]):null,Dh(4,4,NE.bind(null,t,e),n)}function uy(){}function FE(e,t){var n=Yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jE(e,t){var n=Yr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&sy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zE(e,t,n){return Js&21?(bi(n,t)||(n=$T(),Bt.lanes|=n,Qs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rr=!0),e.memoizedState=n)}function oN(e,t){var n=ft;ft=n!==0&&4>n?n:4,e(!0);var r=Zm.transition;Zm.transition={};try{e(!1),t()}finally{ft=n,Zm.transition=r}}function BE(){return Yr().memoizedState}function sN(e,t,n){var r=rs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VE(e))$E(t,n);else if(n=bE(e,t,n,r),n!==null){var i=Gn();yi(n,e,r,i),WE(n,t,r)}}function aN(e,t,n){var r=rs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VE(e))$E(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,bi(l,s)){var u=t.interleaved;u===null?(i.next=i,ty(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=bE(e,t,i,r),n!==null&&(i=Gn(),yi(n,e,r,i),WE(n,t,r))}}function VE(e){var t=e.alternate;return e===Bt||t!==null&&t===Bt}function $E(e,t){Wc=Xf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function WE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,B0(e,n)}}var Zf={readContext:Qr,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},lN={readContext:Qr,useCallback:function(e,t){return Ii().memoizedState=[e,t===void 0?null:t],e},useContext:Qr,useEffect:xS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hf(4194308,4,NE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hf(4194308,4,e,t)},useInsertionEffect:function(e,t){return hf(4,2,e,t)},useMemo:function(e,t){var n=Ii();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ii();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sN.bind(null,Bt,e),[r.memoizedState,e]},useRef:function(e){var t=Ii();return e={current:e},t.memoizedState=e},useState:PS,useDebugValue:uy,useDeferredValue:function(e){return Ii().memoizedState=e},useTransition:function(){var e=PS(!1),t=e[0];return e=oN.bind(null,e[1]),Ii().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Bt,i=Ii();if(Nt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=t(),mn===null)throw Error(ie(349));Js&30||xE(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,xS(IE.bind(null,r,o,e),[e]),r.flags|=2048,vu(9,RE.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ii(),t=mn.identifierPrefix;if(Nt){var n=oo,r=io;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=mu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=iN++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cN={readContext:Qr,useCallback:FE,useContext:Qr,useEffect:cy,useImperativeHandle:UE,useInsertionEffect:AE,useLayoutEffect:DE,useMemo:jE,useReducer:eg,useRef:LE,useState:function(){return eg(gu)},useDebugValue:uy,useDeferredValue:function(e){var t=Yr();return zE(t,cn.memoizedState,e)},useTransition:function(){var e=eg(gu)[0],t=Yr().memoizedState;return[e,t]},useMutableSource:_E,useSyncExternalStore:PE,useId:BE,unstable_isNewReconciler:!1},uN={readContext:Qr,useCallback:FE,useContext:Qr,useEffect:cy,useImperativeHandle:UE,useInsertionEffect:AE,useLayoutEffect:DE,useMemo:jE,useReducer:tg,useRef:LE,useState:function(){return tg(gu)},useDebugValue:uy,useDeferredValue:function(e){var t=Yr();return cn===null?t.memoizedState=e:zE(t,cn.memoizedState,e)},useTransition:function(){var e=tg(gu)[0],t=Yr().memoizedState;return[e,t]},useMutableSource:_E,useSyncExternalStore:PE,useId:BE,unstable_isNewReconciler:!1};function Pl(e,t){try{var n="",r=t;do n+=FA(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function ng(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sv(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dN=typeof WeakMap=="function"?WeakMap:Map;function HE(e,t,n){n=so(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){th||(th=!0,Ov=r),Sv(e,t)},n}function GE(e,t,n){n=so(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Sv(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Sv(e,t),typeof r!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function RS(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new dN;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=EN.bind(null,e,t,n),t.then(e,e))}function IS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function OS(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=so(-1,1),t.tag=2,ts(n,t,1))),n.lanes|=1),e)}var fN=bo.ReactCurrentOwner,rr=!1;function Wn(e,t,n,r){t.child=e===null?TE(t,null,n,r):El(t,e.child,n,r)}function MS(e,t,n,r,i){n=n.render;var o=t.ref;return ul(t,i),r=ay(e,t,n,r,o,i),n=ly(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,po(e,t,i)):(Nt&&n&&J0(t),t.flags|=1,Wn(e,t,r,i),t.child)}function LS(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!yy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,qE(e,t,o,r,i)):(e=vf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:cu,n(s,r)&&e.ref===t.ref)return po(e,t,i)}return t.flags|=1,e=is(o,r),e.ref=t.ref,e.return=t,t.child=e}function qE(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(cu(o,r)&&e.ref===t.ref)if(rr=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(rr=!0);else return t.lanes=e.lanes,po(e,t,i)}return Cv(e,t,n,r,i)}function KE(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(nl,gr),gr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tt(nl,gr),gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Tt(nl,gr),gr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Tt(nl,gr),gr|=r;return Wn(e,t,i,n),t.child}function JE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cv(e,t,n,r,i){var o=or(n)?qs:Fn.current;return o=wl(t,o),ul(t,i),n=ay(e,t,n,r,o,i),r=ly(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,po(e,t,i)):(Nt&&r&&J0(t),t.flags|=1,Wn(e,t,n,i),t.child)}function AS(e,t,n,r,i){if(or(n)){var o=!0;Hf(t)}else o=!1;if(ul(t,i),t.stateNode===null)pf(e,t),CE(t,n,r),kv(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qr(d):(d=or(n)?qs:Fn.current,d=wl(t,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==d)&&ES(t,s,r,d),$o=!1;var m=t.memoizedState;s.state=m,Qf(t,r,s,i),u=t.memoizedState,l!==r||m!==u||ir.current||$o?(typeof h=="function"&&(bv(t,n,h,r),u=t.memoizedState),(l=$o||TS(t,n,l,r,m,u,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,kE(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ci(t.type,l),s.props=d,p=t.pendingProps,m=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qr(u):(u=or(n)?qs:Fn.current,u=wl(t,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||m!==u)&&ES(t,s,r,u),$o=!1,m=t.memoizedState,s.state=m,Qf(t,r,s,i);var S=t.memoizedState;l!==p||m!==S||ir.current||$o?(typeof y=="function"&&(bv(t,n,y,r),S=t.memoizedState),(d=$o||TS(t,n,d,r,m,S,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,S,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,S,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),s.props=r,s.state=S,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return wv(e,t,n,r,o,i)}function wv(e,t,n,r,i,o){JE(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&bS(t,n,!1),po(e,t,o);r=t.stateNode,fN.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=El(t,e.child,null,o),t.child=El(t,null,l,o)):Wn(e,t,l,o),t.memoizedState=r.state,i&&bS(t,n,!0),t.child}function QE(e){var t=e.stateNode;t.pendingContext?yS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yS(e,t.context,!1),ry(e,t.containerInfo)}function DS(e,t,n,r,i){return Tl(),Y0(i),t.flags|=256,Wn(e,t,n,r),t.child}var Tv={dehydrated:null,treeContext:null,retryLane:0};function Ev(e){return{baseLanes:e,cachePool:null,transitions:null}}function YE(e,t,n){var r=t.pendingProps,i=zt.current,o=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Tt(zt,i&1),e===null)return vv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Fh(s,r,0,null),e=Vs(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ev(n),t.memoizedState=Tv,e):dy(t,s));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return hN(e,t,s,r,l,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=is(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=is(l,o):(o=Vs(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Ev(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=Tv,r}return o=e.child,e=o.sibling,r=is(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function dy(e,t){return t=Fh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wd(e,t,n,r){return r!==null&&Y0(r),El(t,e.child,null,n),e=dy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hN(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=ng(Error(ie(422))),Wd(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fh({mode:"visible",children:r.children},i,0,null),o=Vs(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&El(t,e.child,null,s),t.child.memoizedState=Ev(s),t.memoizedState=Tv,o);if(!(t.mode&1))return Wd(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ie(419)),r=ng(o,r,void 0),Wd(e,t,s,r)}if(l=(s&e.childLanes)!==0,rr||l){if(r=mn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ho(e,i),yi(r,e,i,-1))}return vy(),r=ng(Error(ie(421))),Wd(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=_N.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,yr=es(i.nextSibling),kr=t,Nt=!0,hi=null,e!==null&&(Br[Vr++]=io,Br[Vr++]=oo,Br[Vr++]=Ks,io=e.id,oo=e.overflow,Ks=t),t=dy(t,r.children),t.flags|=4096,t)}function NS(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yv(e.return,t,n)}function rg(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function XE(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Wn(e,t,r.children,n),r=zt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&NS(e,n,t);else if(e.tag===19)NS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Tt(zt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Yf(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rg(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Yf(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rg(t,!0,n,null,o);break;case"together":rg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function po(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,n=is(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=is(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pN(e,t,n){switch(t.tag){case 3:QE(t),Tl();break;case 5:EE(t);break;case 1:or(t.type)&&Hf(t);break;case 4:ry(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Tt(Kf,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Tt(zt,zt.current&1),t.flags|=128,null):n&t.child.childLanes?YE(e,t,n):(Tt(zt,zt.current&1),e=po(e,t,n),e!==null?e.sibling:null);Tt(zt,zt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return XE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(zt,zt.current),r)break;return null;case 22:case 23:return t.lanes=0,KE(e,t,n)}return po(e,t,n)}var ZE,_v,e_,t_;ZE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_v=function(){};e_=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Us(Ui.current);var o=null;switch(n){case"input":i=Kg(e,i),r=Kg(e,r),o=[];break;case"select":i=Vt({},i,{value:void 0}),r=Vt({},r,{value:void 0}),o=[];break;case"textarea":i=Yg(e,i),r=Yg(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$f)}Zg(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(nu.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(l=i?.[d],r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(nu.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Mt("scroll",e),o||l===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};t_=function(e,t,n,r){n!==r&&(t.flags|=4)};function vc(e,t){if(!Nt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ln(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function mN(e,t,n){var r=t.pendingProps;switch(Q0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(t),null;case 1:return or(t.type)&&Wf(),Ln(t),null;case 3:return r=t.stateNode,_l(),Lt(ir),Lt(Fn),oy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hi!==null&&(Av(hi),hi=null))),_v(e,t),Ln(t),null;case 5:iy(t);var i=Us(pu.current);if(n=t.type,e!==null&&t.stateNode!=null)e_(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ie(166));return Ln(t),null}if(e=Us(Ui.current),Vd(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ai]=t,r[fu]=o,e=(t.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(i=0;i<Lc.length;i++)Mt(Lc[i],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":Hk(r,o),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Mt("invalid",r);break;case"textarea":qk(r,o),Mt("invalid",r)}Zg(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Bd(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Bd(r.textContent,l,e),i=["children",""+l]):nu.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Mt("scroll",r)}switch(n){case"input":Ld(r),Gk(r,o,!0);break;case"textarea":Ld(r),Kk(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=$f)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xT(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Ai]=t,e[fu]=r,ZE(e,t,!1,!1),t.stateNode=e;e:{switch(s=ev(n,r),n){case"dialog":Mt("cancel",e),Mt("close",e),i=r;break;case"iframe":case"object":case"embed":Mt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lc.length;i++)Mt(Lc[i],e);i=r;break;case"source":Mt("error",e),i=r;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),i=r;break;case"details":Mt("toggle",e),i=r;break;case"input":Hk(e,r),i=Kg(e,r),Mt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Vt({},r,{value:void 0}),Mt("invalid",e);break;case"textarea":qk(e,r),i=Yg(e,r),Mt("invalid",e);break;default:i=r}Zg(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?OT(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&RT(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ru(e,u):typeof u=="number"&&ru(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(nu.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Mt("scroll",e):u!=null&&D0(e,o,u,s))}switch(n){case"input":Ld(e),Gk(e,r,!1);break;case"textarea":Ld(e),Kk(e);break;case"option":r.value!=null&&e.setAttribute("value",""+as(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?sl(e,!!r.multiple,o,!1):r.defaultValue!=null&&sl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=$f)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ln(t),null;case 6:if(e&&t.stateNode!=null)t_(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ie(166));if(n=Us(pu.current),Us(Ui.current),Vd(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ai]=t,(o=r.nodeValue!==n)&&(e=kr,e!==null))switch(e.tag){case 3:Bd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bd(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ai]=t,t.stateNode=r}return Ln(t),null;case 13:if(Lt(zt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Nt&&yr!==null&&t.mode&1&&!(t.flags&128))yE(),Tl(),t.flags|=98560,o=!1;else if(o=Vd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ie(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ie(317));o[Ai]=t}else Tl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ln(t),o=!1}else hi!==null&&(Av(hi),hi=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||zt.current&1?un===0&&(un=3):vy())),t.updateQueue!==null&&(t.flags|=4),Ln(t),null);case 4:return _l(),_v(e,t),e===null&&uu(t.stateNode.containerInfo),Ln(t),null;case 10:return ey(t.type._context),Ln(t),null;case 17:return or(t.type)&&Wf(),Ln(t),null;case 19:if(Lt(zt),o=t.memoizedState,o===null)return Ln(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)vc(o,!1);else{if(un!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Yf(e),s!==null){for(t.flags|=128,vc(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tt(zt,zt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Qt()>xl&&(t.flags|=128,r=!0,vc(o,!1),t.lanes=4194304)}else{if(!r)if(e=Yf(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Nt)return Ln(t),null}else 2*Qt()-o.renderingStartTime>xl&&n!==1073741824&&(t.flags|=128,r=!0,vc(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qt(),t.sibling=null,n=zt.current,Tt(zt,r?n&1|2:n&1),t):(Ln(t),null);case 22:case 23:return gy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gr&1073741824&&(Ln(t),t.subtreeFlags&6&&(t.flags|=8192)):Ln(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function gN(e,t){switch(Q0(t),t.tag){case 1:return or(t.type)&&Wf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _l(),Lt(ir),Lt(Fn),oy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iy(t),null;case 13:if(Lt(zt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));Tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Lt(zt),null;case 4:return _l(),null;case 10:return ey(t.type._context),null;case 22:case 23:return gy(),null;case 24:return null;default:return null}}var Hd=!1,Nn=!1,vN=typeof WeakSet=="function"?WeakSet:Set,ge=null;function tl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(e,t,r)}else n.current=null}function Pv(e,t,n){try{n()}catch(r){Ht(e,t,r)}}var US=!1;function yN(e,t){if(uv=zf,e=oE(),K0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,d=0,h=0,p=e,m=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===e)break t;if(m===n&&++d===i&&(l=s),m===o&&++h===r&&(u=s),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dv={focusedElem:e,selectionRange:n},zf=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,P=S.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?k:ci(t.type,k),P);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(_){Ht(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return S=US,US=!1,S}function Hc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Pv(t,n,o)}i=i.next}while(i!==r)}}function Nh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function n_(e){var t=e.alternate;t!==null&&(e.alternate=null,n_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ai],delete t[fu],delete t[pv],delete t[eN],delete t[tN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function r_(e){return e.tag===5||e.tag===3||e.tag===4}function FS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$f));else if(r!==4&&(e=e.child,e!==null))for(Rv(e,t,n),e=e.sibling;e!==null;)Rv(e,t,n),e=e.sibling}function Iv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Iv(e,t,n),e=e.sibling;e!==null;)Iv(e,t,n),e=e.sibling}var Sn=null,ui=!1;function Uo(e,t,n){for(n=n.child;n!==null;)i_(e,t,n),n=n.sibling}function i_(e,t,n){if(Ni&&typeof Ni.onCommitFiberUnmount=="function")try{Ni.onCommitFiberUnmount(xh,n)}catch{}switch(n.tag){case 5:Nn||tl(n,t);case 6:var r=Sn,i=ui;Sn=null,Uo(e,t,n),Sn=r,ui=i,Sn!==null&&(ui?(e=Sn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Sn.removeChild(n.stateNode));break;case 18:Sn!==null&&(ui?(e=Sn,n=n.stateNode,e.nodeType===8?Qm(e.parentNode,n):e.nodeType===1&&Qm(e,n),au(e)):Qm(Sn,n.stateNode));break;case 4:r=Sn,i=ui,Sn=n.stateNode.containerInfo,ui=!0,Uo(e,t,n),Sn=r,ui=i;break;case 0:case 11:case 14:case 15:if(!Nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Pv(n,t,s),i=i.next}while(i!==r)}Uo(e,t,n);break;case 1:if(!Nn&&(tl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ht(n,t,l)}Uo(e,t,n);break;case 21:Uo(e,t,n);break;case 22:n.mode&1?(Nn=(r=Nn)||n.memoizedState!==null,Uo(e,t,n),Nn=r):Uo(e,t,n);break;default:Uo(e,t,n)}}function jS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vN),t.forEach(function(r){var i=PN.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function si(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Sn=l.stateNode,ui=!1;break e;case 3:Sn=l.stateNode.containerInfo,ui=!0;break e;case 4:Sn=l.stateNode.containerInfo,ui=!0;break e}l=l.return}if(Sn===null)throw Error(ie(160));i_(o,s,i),Sn=null,ui=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ht(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)o_(t,e),t=t.sibling}function o_(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(si(t,e),Pi(e),r&4){try{Hc(3,e,e.return),Nh(3,e)}catch(k){Ht(e,e.return,k)}try{Hc(5,e,e.return)}catch(k){Ht(e,e.return,k)}}break;case 1:si(t,e),Pi(e),r&512&&n!==null&&tl(n,n.return);break;case 5:if(si(t,e),Pi(e),r&512&&n!==null&&tl(n,n.return),e.flags&32){var i=e.stateNode;try{ru(i,"")}catch(k){Ht(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&_T(i,o),ev(l,s);var d=ev(l,o);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];h==="style"?OT(i,p):h==="dangerouslySetInnerHTML"?RT(i,p):h==="children"?ru(i,p):D0(i,h,p,d)}switch(l){case"input":Jg(i,o);break;case"textarea":PT(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?sl(i,!!o.multiple,y,!1):m!==!!o.multiple&&(o.defaultValue!=null?sl(i,!!o.multiple,o.defaultValue,!0):sl(i,!!o.multiple,o.multiple?[]:"",!1))}i[fu]=o}catch(k){Ht(e,e.return,k)}}break;case 6:if(si(t,e),Pi(e),r&4){if(e.stateNode===null)throw Error(ie(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(k){Ht(e,e.return,k)}}break;case 3:if(si(t,e),Pi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{au(t.containerInfo)}catch(k){Ht(e,e.return,k)}break;case 4:si(t,e),Pi(e);break;case 13:si(t,e),Pi(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(py=Qt())),r&4&&jS(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Nn=(d=Nn)||h,si(t,e),Nn=d):si(t,e),Pi(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(ge=e,h=e.child;h!==null;){for(p=ge=h;ge!==null;){switch(m=ge,y=m.child,m.tag){case 0:case 11:case 14:case 15:Hc(4,m,m.return);break;case 1:tl(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(k){Ht(r,n,k)}}break;case 5:tl(m,m.return);break;case 22:if(m.memoizedState!==null){BS(p);continue}}y!==null?(y.return=m,ge=y):BS(p)}h=h.sibling}e:for(h=null,p=e;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=IT("display",s))}catch(k){Ht(e,e.return,k)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){Ht(e,e.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:si(t,e),Pi(e),r&4&&jS(e);break;case 21:break;default:si(t,e),Pi(e)}}function Pi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(r_(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ru(i,""),r.flags&=-33);var o=FS(e);Iv(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=FS(e);Rv(e,l,s);break;default:throw Error(ie(161))}}catch(u){Ht(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bN(e,t,n){ge=e,s_(e)}function s_(e,t,n){for(var r=(e.mode&1)!==0;ge!==null;){var i=ge,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Hd;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Nn;l=Hd;var d=Nn;if(Hd=s,(Nn=u)&&!d)for(ge=i;ge!==null;)s=ge,u=s.child,s.tag===22&&s.memoizedState!==null?VS(i):u!==null?(u.return=s,ge=u):VS(i);for(;o!==null;)ge=o,s_(o),o=o.sibling;ge=i,Hd=l,Nn=d}zS(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ge=o):zS(e)}}function zS(e){for(;ge!==null;){var t=ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nn||Nh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Nn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ci(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&wS(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wS(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&au(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Nn||t.flags&512&&xv(t)}catch(m){Ht(t,t.return,m)}}if(t===e){ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,ge=n;break}ge=t.return}}function BS(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ge=n;break}ge=t.return}}function VS(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nh(4,t)}catch(u){Ht(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ht(t,i,u)}}var o=t.return;try{xv(t)}catch(u){Ht(t,o,u)}break;case 5:var s=t.return;try{xv(t)}catch(u){Ht(t,s,u)}}}catch(u){Ht(t,t.return,u)}if(t===e){ge=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ge=l;break}ge=t.return}}var kN=Math.ceil,eh=bo.ReactCurrentDispatcher,fy=bo.ReactCurrentOwner,Jr=bo.ReactCurrentBatchConfig,ot=0,mn=null,nn=null,En=0,gr=0,nl=ps(0),un=0,yu=null,Qs=0,Uh=0,hy=0,Gc=null,er=null,py=0,xl=1/0,Zi=null,th=!1,Ov=null,ns=null,Gd=!1,qo=null,nh=0,qc=0,Mv=null,mf=-1,gf=0;function Gn(){return ot&6?Qt():mf!==-1?mf:mf=Qt()}function rs(e){return e.mode&1?ot&2&&En!==0?En&-En:rN.transition!==null?(gf===0&&(gf=$T()),gf):(e=ft,e!==0||(e=window.event,e=e===void 0?16:QT(e.type)),e):1}function yi(e,t,n,r){if(50<qc)throw qc=0,Mv=null,Error(ie(185));Ou(e,n,r),(!(ot&2)||e!==mn)&&(e===mn&&(!(ot&2)&&(Uh|=n),un===4&&Ho(e,En)),sr(e,r),n===1&&ot===0&&!(t.mode&1)&&(xl=Qt()+500,Lh&&ms()))}function sr(e,t){var n=e.callbackNode;rD(e,t);var r=jf(e,e===mn?En:0);if(r===0)n!==null&&Yk(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yk(n),t===1)e.tag===0?nN($S.bind(null,e)):mE($S.bind(null,e)),XD(function(){!(ot&6)&&ms()}),n=null;else{switch(WT(r)){case 1:n=z0;break;case 4:n=BT;break;case 16:n=Ff;break;case 536870912:n=VT;break;default:n=Ff}n=p_(n,a_.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function a_(e,t){if(mf=-1,gf=0,ot&6)throw Error(ie(327));var n=e.callbackNode;if(dl()&&e.callbackNode!==n)return null;var r=jf(e,e===mn?En:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=rh(e,r);else{t=r;var i=ot;ot|=2;var o=c_();(mn!==e||En!==t)&&(Zi=null,xl=Qt()+500,Bs(e,t));do try{wN();break}catch(l){l_(e,l)}while(1);Z0(),eh.current=o,ot=i,nn!==null?t=0:(mn=null,En=0,t=un)}if(t!==0){if(t===2&&(i=ov(e),i!==0&&(r=i,t=Lv(e,i))),t===1)throw n=yu,Bs(e,0),Ho(e,r),sr(e,Qt()),n;if(t===6)Ho(e,r);else{if(i=e.current.alternate,!(r&30)&&!SN(i)&&(t=rh(e,r),t===2&&(o=ov(e),o!==0&&(r=o,t=Lv(e,o))),t===1))throw n=yu,Bs(e,0),Ho(e,r),sr(e,Qt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:Os(e,er,Zi);break;case 3:if(Ho(e,r),(r&130023424)===r&&(t=py+500-Qt(),10<t)){if(jf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Gn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=hv(Os.bind(null,e,er,Zi),t);break}Os(e,er,Zi);break;case 4:if(Ho(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-vi(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kN(r/1960))-r,10<r){e.timeoutHandle=hv(Os.bind(null,e,er,Zi),r);break}Os(e,er,Zi);break;case 5:Os(e,er,Zi);break;default:throw Error(ie(329))}}}return sr(e,Qt()),e.callbackNode===n?a_.bind(null,e):null}function Lv(e,t){var n=Gc;return e.current.memoizedState.isDehydrated&&(Bs(e,t).flags|=256),e=rh(e,t),e!==2&&(t=er,er=n,t!==null&&Av(t)),e}function Av(e){er===null?er=e:er.push.apply(er,e)}function SN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!bi(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(e,t){for(t&=~hy,t&=~Uh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vi(t),r=1<<n;e[n]=-1,t&=~r}}function $S(e){if(ot&6)throw Error(ie(327));dl();var t=jf(e,0);if(!(t&1))return sr(e,Qt()),null;var n=rh(e,t);if(e.tag!==0&&n===2){var r=ov(e);r!==0&&(t=r,n=Lv(e,r))}if(n===1)throw n=yu,Bs(e,0),Ho(e,t),sr(e,Qt()),n;if(n===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e,er,Zi),sr(e,Qt()),null}function my(e,t){var n=ot;ot|=1;try{return e(t)}finally{ot=n,ot===0&&(xl=Qt()+500,Lh&&ms())}}function Ys(e){qo!==null&&qo.tag===0&&!(ot&6)&&dl();var t=ot;ot|=1;var n=Jr.transition,r=ft;try{if(Jr.transition=null,ft=1,e)return e()}finally{ft=r,Jr.transition=n,ot=t,!(ot&6)&&ms()}}function gy(){gr=nl.current,Lt(nl)}function Bs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,YD(n)),nn!==null)for(n=nn.return;n!==null;){var r=n;switch(Q0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wf();break;case 3:_l(),Lt(ir),Lt(Fn),oy();break;case 5:iy(r);break;case 4:_l();break;case 13:Lt(zt);break;case 19:Lt(zt);break;case 10:ey(r.type._context);break;case 22:case 23:gy()}n=n.return}if(mn=e,nn=e=is(e.current,null),En=gr=t,un=0,yu=null,hy=Uh=Qs=0,er=Gc=null,Ns!==null){for(t=0;t<Ns.length;t++)if(n=Ns[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ns=null}return e}function l_(e,t){do{var n=nn;try{if(Z0(),ff.current=Zf,Xf){for(var r=Bt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xf=!1}if(Js=0,pn=cn=Bt=null,Wc=!1,mu=0,fy.current=null,n===null||n.return===null){un=1,yu=t,nn=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=En,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=IS(s);if(y!==null){y.flags&=-257,OS(y,s,l,o,t),y.mode&1&&RS(o,d,t),t=y,u=d;var S=t.updateQueue;if(S===null){var k=new Set;k.add(u),t.updateQueue=k}else S.add(u);break e}else{if(!(t&1)){RS(o,d,t),vy();break e}u=Error(ie(426))}}else if(Nt&&l.mode&1){var P=IS(s);if(P!==null){!(P.flags&65536)&&(P.flags|=256),OS(P,s,l,o,t),Y0(Pl(u,l));break e}}o=u=Pl(u,l),un!==4&&(un=2),Gc===null?Gc=[o]:Gc.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=HE(o,u,t);CS(o,v);break e;case 1:l=u;var w=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ns===null||!ns.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=GE(o,l,t);CS(o,_);break e}}o=o.return}while(o!==null)}d_(n)}catch(I){t=I,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(1)}function c_(){var e=eh.current;return eh.current=Zf,e===null?Zf:e}function vy(){(un===0||un===3||un===2)&&(un=4),mn===null||!(Qs&268435455)&&!(Uh&268435455)||Ho(mn,En)}function rh(e,t){var n=ot;ot|=2;var r=c_();(mn!==e||En!==t)&&(Zi=null,Bs(e,t));do try{CN();break}catch(i){l_(e,i)}while(1);if(Z0(),ot=n,eh.current=r,nn!==null)throw Error(ie(261));return mn=null,En=0,un}function CN(){for(;nn!==null;)u_(nn)}function wN(){for(;nn!==null&&!KA();)u_(nn)}function u_(e){var t=h_(e.alternate,e,gr);e.memoizedProps=e.pendingProps,t===null?d_(e):nn=t,fy.current=null}function d_(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=gN(n,t),n!==null){n.flags&=32767,nn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{un=6,nn=null;return}}else if(n=mN(n,t,gr),n!==null){nn=n;return}if(t=t.sibling,t!==null){nn=t;return}nn=t=e}while(t!==null);un===0&&(un=5)}function Os(e,t,n){var r=ft,i=Jr.transition;try{Jr.transition=null,ft=1,TN(e,t,n,r)}finally{Jr.transition=i,ft=r}return null}function TN(e,t,n,r){do dl();while(qo!==null);if(ot&6)throw Error(ie(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(iD(e,o),e===mn&&(nn=mn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gd||(Gd=!0,p_(Ff,function(){return dl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Jr.transition,Jr.transition=null;var s=ft;ft=1;var l=ot;ot|=4,fy.current=null,yN(e,n),o_(n,e),WD(dv),zf=!!uv,dv=uv=null,e.current=n,bN(n),JA(),ot=l,ft=s,Jr.transition=o}else e.current=n;if(Gd&&(Gd=!1,qo=e,nh=i),o=e.pendingLanes,o===0&&(ns=null),XA(n.stateNode),sr(e,Qt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(th)throw th=!1,e=Ov,Ov=null,e;return nh&1&&e.tag!==0&&dl(),o=e.pendingLanes,o&1?e===Mv?qc++:(qc=0,Mv=e):qc=0,ms(),null}function dl(){if(qo!==null){var e=WT(nh),t=Jr.transition,n=ft;try{if(Jr.transition=null,ft=16>e?16:e,qo===null)var r=!1;else{if(e=qo,qo=null,nh=0,ot&6)throw Error(ie(331));var i=ot;for(ot|=4,ge=e.current;ge!==null;){var o=ge,s=o.child;if(ge.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ge=d;ge!==null;){var h=ge;switch(h.tag){case 0:case 11:case 15:Hc(8,h,o)}var p=h.child;if(p!==null)p.return=h,ge=p;else for(;ge!==null;){h=ge;var m=h.sibling,y=h.return;if(n_(h),h===d){ge=null;break}if(m!==null){m.return=y,ge=m;break}ge=y}}}var S=o.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}ge=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ge=s;else e:for(;ge!==null;){if(o=ge,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Hc(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,ge=v;break e}ge=o.return}}var w=e.current;for(ge=w;ge!==null;){s=ge;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ge=x;else e:for(s=w;ge!==null;){if(l=ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Nh(9,l)}}catch(I){Ht(l,l.return,I)}if(l===s){ge=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ge=_;break e}ge=l.return}}if(ot=i,ms(),Ni&&typeof Ni.onPostCommitFiberRoot=="function")try{Ni.onPostCommitFiberRoot(xh,e)}catch{}r=!0}return r}finally{ft=n,Jr.transition=t}}return!1}function WS(e,t,n){t=Pl(n,t),t=HE(e,t,1),e=ts(e,t,1),t=Gn(),e!==null&&(Ou(e,1,t),sr(e,t))}function Ht(e,t,n){if(e.tag===3)WS(e,e,n);else for(;t!==null;){if(t.tag===3){WS(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ns===null||!ns.has(r))){e=Pl(n,e),e=GE(t,e,1),t=ts(t,e,1),e=Gn(),t!==null&&(Ou(t,1,e),sr(t,e));break}}t=t.return}}function EN(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Gn(),e.pingedLanes|=e.suspendedLanes&n,mn===e&&(En&n)===n&&(un===4||un===3&&(En&130023424)===En&&500>Qt()-py?Bs(e,0):hy|=n),sr(e,t)}function f_(e,t){t===0&&(e.mode&1?(t=Nd,Nd<<=1,!(Nd&130023424)&&(Nd=4194304)):t=1);var n=Gn();e=ho(e,t),e!==null&&(Ou(e,t,n),sr(e,n))}function _N(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),f_(e,n)}function PN(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(t),f_(e,n)}var h_;h_=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ir.current)rr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rr=!1,pN(e,t,n);rr=!!(e.flags&131072)}else rr=!1,Nt&&t.flags&1048576&&gE(t,qf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;pf(e,t),e=t.pendingProps;var i=wl(t,Fn.current);ul(t,n),i=ay(null,t,r,e,i,n);var o=ly();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,or(r)?(o=!0,Hf(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ny(t),i.updater=Ah,t.stateNode=i,i._reactInternals=t,kv(t,r,e,n),t=wv(null,t,r,!0,o,n)):(t.tag=0,Nt&&o&&J0(t),Wn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(pf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=RN(r),e=ci(r,e),i){case 0:t=Cv(null,t,r,e,n);break e;case 1:t=AS(null,t,r,e,n);break e;case 11:t=MS(null,t,r,e,n);break e;case 14:t=LS(null,t,r,ci(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),Cv(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),AS(e,t,r,i,n);case 3:e:{if(QE(t),e===null)throw Error(ie(387));r=t.pendingProps,o=t.memoizedState,i=o.element,kE(e,t),Qf(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Pl(Error(ie(423)),t),t=DS(e,t,r,n,i);break e}else if(r!==i){i=Pl(Error(ie(424)),t),t=DS(e,t,r,n,i);break e}else for(yr=es(t.stateNode.containerInfo.firstChild),kr=t,Nt=!0,hi=null,n=TE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tl(),r===i){t=po(e,t,n);break e}Wn(e,t,r,n)}t=t.child}return t;case 5:return EE(t),e===null&&vv(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,fv(r,i)?s=null:o!==null&&fv(r,o)&&(t.flags|=32),JE(e,t),Wn(e,t,s,n),t.child;case 6:return e===null&&vv(t),null;case 13:return YE(e,t,n);case 4:return ry(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=El(t,null,r,n):Wn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),MS(e,t,r,i,n);case 7:return Wn(e,t,t.pendingProps,n),t.child;case 8:return Wn(e,t,t.pendingProps.children,n),t.child;case 12:return Wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Tt(Kf,r._currentValue),r._currentValue=s,o!==null)if(bi(o.value,s)){if(o.children===i.children&&!ir.current){t=po(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=so(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),yv(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ie(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),yv(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Wn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ul(t,n),i=Qr(i),r=r(i),t.flags|=1,Wn(e,t,r,n),t.child;case 14:return r=t.type,i=ci(r,t.pendingProps),i=ci(r.type,i),LS(e,t,r,i,n);case 15:return qE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ci(r,i),pf(e,t),t.tag=1,or(r)?(e=!0,Hf(t)):e=!1,ul(t,n),CE(t,r,i),kv(t,r,i,n),wv(null,t,r,!0,e,n);case 19:return XE(e,t,n);case 22:return KE(e,t,n)}throw Error(ie(156,t.tag))};function p_(e,t){return zT(e,t)}function xN(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(e,t,n,r){return new xN(e,t,n,r)}function yy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RN(e){if(typeof e=="function")return yy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===U0)return 11;if(e===F0)return 14}return 2}function is(e,t){var n=e.alternate;return n===null?(n=Gr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vf(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")yy(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ga:return Vs(n.children,i,o,t);case N0:s=8,i|=8;break;case Wg:return e=Gr(12,n,t,i|2),e.elementType=Wg,e.lanes=o,e;case Hg:return e=Gr(13,n,t,i),e.elementType=Hg,e.lanes=o,e;case Gg:return e=Gr(19,n,t,i),e.elementType=Gg,e.lanes=o,e;case wT:return Fh(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ST:s=10;break e;case CT:s=9;break e;case U0:s=11;break e;case F0:s=14;break e;case Vo:s=16,r=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=Gr(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Vs(e,t,n,r){return e=Gr(7,e,r,t),e.lanes=n,e}function Fh(e,t,n,r){return e=Gr(22,e,r,t),e.elementType=wT,e.lanes=n,e.stateNode={isHidden:!1},e}function ig(e,t,n){return e=Gr(6,e,null,t),e.lanes=n,e}function og(e,t,n){return t=Gr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IN(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jm(0),this.expirationTimes=jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function by(e,t,n,r,i,o,s,l,u){return e=new IN(e,t,n,l,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Gr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ny(o),e}function ON(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ha,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function m_(e){if(!e)return ls;e=e._reactInternals;e:{if(oa(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var n=e.type;if(or(n))return pE(e,n,t)}return t}function g_(e,t,n,r,i,o,s,l,u){return e=by(n,r,!0,e,i,o,s,l,u),e.context=m_(null),n=e.current,r=Gn(),i=rs(n),o=so(r,i),o.callback=t??null,ts(n,o,i),e.current.lanes=i,Ou(e,i,r),sr(e,r),e}function jh(e,t,n,r){var i=t.current,o=Gn(),s=rs(i);return n=m_(n),t.context===null?t.context=n:t.pendingContext=n,t=so(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ts(i,t,s),e!==null&&(yi(e,i,s,o),df(e,i,s)),s}function ih(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function HS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ky(e,t){HS(e,t),(e=e.alternate)&&HS(e,t)}function MN(){return null}var v_=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sy(e){this._internalRoot=e}zh.prototype.render=Sy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));jh(e,t,null,null)};zh.prototype.unmount=Sy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ys(function(){jh(null,e,null,null)}),t[fo]=null}};function zh(e){this._internalRoot=e}zh.prototype.unstable_scheduleHydration=function(e){if(e){var t=qT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wo.length&&t!==0&&t<Wo[n].priority;n++);Wo.splice(n,0,e),n===0&&JT(e)}};function Cy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function GS(){}function LN(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=ih(s);o.call(d)}}var s=g_(t,r,e,0,null,!1,!1,"",GS);return e._reactRootContainer=s,e[fo]=s.current,uu(e.nodeType===8?e.parentNode:e),Ys(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=ih(u);l.call(d)}}var u=by(e,0,!1,null,null,!1,!1,"",GS);return e._reactRootContainer=u,e[fo]=u.current,uu(e.nodeType===8?e.parentNode:e),Ys(function(){jh(t,u,n,r)}),u}function Vh(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=ih(s);l.call(u)}}jh(t,s,e,i)}else s=LN(n,t,e,i,r);return ih(s)}HT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mc(t.pendingLanes);n!==0&&(B0(t,n|1),sr(t,Qt()),!(ot&6)&&(xl=Qt()+500,ms()))}break;case 13:Ys(function(){var r=ho(e,1);if(r!==null){var i=Gn();yi(r,e,1,i)}}),ky(e,1)}};V0=function(e){if(e.tag===13){var t=ho(e,134217728);if(t!==null){var n=Gn();yi(t,e,134217728,n)}ky(e,134217728)}};GT=function(e){if(e.tag===13){var t=rs(e),n=ho(e,t);if(n!==null){var r=Gn();yi(n,e,t,r)}ky(e,t)}};qT=function(){return ft};KT=function(e,t){var n=ft;try{return ft=e,t()}finally{ft=n}};nv=function(e,t,n){switch(t){case"input":if(Jg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mh(r);if(!i)throw Error(ie(90));ET(r),Jg(r,i)}}}break;case"textarea":PT(e,n);break;case"select":t=n.value,t!=null&&sl(e,!!n.multiple,t,!1)}};AT=my;DT=Ys;var AN={usingClientEntryPoint:!1,Events:[Lu,Qa,Mh,MT,LT,my]},yc={findFiberByHostInstance:Ds,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},DN={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=FT(e),e===null?null:e.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||MN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{xh=qd.inject(DN),Ni=qd}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AN;_r.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cy(t))throw Error(ie(200));return ON(e,t,null,n)};_r.createRoot=function(e,t){if(!Cy(e))throw Error(ie(299));var n=!1,r="",i=v_;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=by(e,1,!1,null,null,n,!1,r,i),e[fo]=t.current,uu(e.nodeType===8?e.parentNode:e),new Sy(t)};_r.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=FT(t),e=e===null?null:e.stateNode,e};_r.flushSync=function(e){return Ys(e)};_r.hydrate=function(e,t,n){if(!Bh(t))throw Error(ie(200));return Vh(null,e,t,!0,n)};_r.hydrateRoot=function(e,t,n){if(!Cy(e))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=v_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=g_(t,null,e,1,n??null,i,!1,o,s),e[fo]=t.current,uu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new zh(t)};_r.render=function(e,t,n){if(!Bh(t))throw Error(ie(200));return Vh(null,e,t,!1,n)};_r.unmountComponentAtNode=function(e){if(!Bh(e))throw Error(ie(40));return e._reactRootContainer?(Ys(function(){Vh(null,null,e,!1,function(){e._reactRootContainer=null,e[fo]=null})}),!0):!1};_r.unstable_batchedUpdates=my;_r.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bh(n))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return Vh(e,t,n,!1,r)};_r.version="18.2.0-next-9e3b772b8-20220608";function y_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y_)}catch(e){console.error(e)}}y_(),gT.exports=_r;var $h=gT.exports;const NN=oT($h),UN=iT({__proto__:null,default:NN},[$h]);var qS=$h;Vg.createRoot=qS.createRoot,Vg.hydrateRoot=qS.hydrateRoot;var FN=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function b_({packageName:e,customMessages:t}){let n=e;const r={...FN,...t};function i(o,s){if(!s)return`${n}: ${o}`;let l=o;const u=o.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const d of u){const h=(s[d[1]]||"").toString();l=l.replace(`{{${d[1]}}}`,h)}return`${n}: ${l}`}return{setPackageName({packageName:o}){return typeof o=="string"&&(n=o),this},setMessages({customMessages:o}){return Object.assign(r,o||{}),this},throwInvalidPublishableKeyError(o){throw new Error(i(r.InvalidPublishableKeyErrorMessage,o))},throwInvalidProxyUrl(o){throw new Error(i(r.InvalidProxyUrlErrorMessage,o))},throwMissingPublishableKeyError(){throw new Error(i(r.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(i(r.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(o){throw new Error(i(r.MissingClerkProvider,o))},throw(o){throw new Error(i(o))}}}var k_=Object.defineProperty,jN=Object.getOwnPropertyDescriptor,zN=Object.getOwnPropertyNames,BN=Object.prototype.hasOwnProperty,VN=(e,t)=>{for(var n in t)k_(e,n,{get:t[n],enumerable:!0})},KS=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of zN(t))!BN.call(e,i)&&i!==n&&k_(e,i,{get:()=>t[i],enumerable:!(r=jN(t,i))||r.enumerable});return e},$N=(e,t,n)=>(KS(e,t,"default"),n&&KS(n,t,"default")),S_={"A1.10min":10,"A2.1hr":60,"A3.4hr":240,"A4.1day":1440,"A5.1wk":10080},WN=new Set(Object.keys(S_)),HN=new Set(["L1.firstFactor","L2.secondFactor","L3.multiFactor"]),GN=e=>WN.has(e),qN=e=>HN.has(e),KN=(e,t)=>{const{orgId:n,orgRole:r,orgPermissions:i}=t;return!e.role&&!e.permission||!n||!r||!i?null:e.permission?i.includes(e.permission):e.role?r===e.role:null},JN=(e,{__experimental_factorVerificationAge:t})=>{if(!e.__experimental_assurance||!t)return null;const{level:n,maxAge:r}=e.__experimental_assurance;if(!qN(n)||!GN(r))return null;const[i,o]=t,s=S_[r],l=i!==-1?s>i:null,u=o!==-1?s>o:null;switch(n){case"L1.firstFactor":return l;case"L2.secondFactor":return o!==-1?u:l;case"L3.multiFactor":return o===-1?l:l&&u}},QN=e=>t=>{if(!e.userId)return!1;const n=KN(t,e),r=JN(t,e);return[n,r].some(i=>i===null)?[n,r].some(i=>i===!0):[n,r].every(i=>i===!0)},C_={exports:{}},w_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rl=b;function YN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var XN=typeof Object.is=="function"?Object.is:YN,ZN=Rl.useState,e4=Rl.useEffect,t4=Rl.useLayoutEffect,n4=Rl.useDebugValue;function r4(e,t){var n=t(),r=ZN({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return t4(function(){i.value=n,i.getSnapshot=t,sg(i)&&o({inst:i})},[e,n,t]),e4(function(){return sg(i)&&o({inst:i}),e(function(){sg(i)&&o({inst:i})})},[e]),n4(n),n}function sg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!XN(e,n)}catch{return!0}}function i4(e,t){return t()}var o4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?i4:r4;w_.useSyncExternalStore=Rl.useSyncExternalStore!==void 0?Rl.useSyncExternalStore:o4;C_.exports=w_;var wy=C_.exports;const Ko=()=>{},tn=Ko(),Kc=Object,we=e=>e===tn,nr=e=>typeof e=="function",zi=(e,t)=>({...e,...t}),s4=e=>nr(e.then),Kd=new WeakMap;let a4=0;const bu=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let i,o;if(Kc(e)===e&&!r&&n!=RegExp){if(i=Kd.get(e),i)return i;if(i=++a4+"~",Kd.set(e,i),n==Array){for(i="@",o=0;o<e.length;o++)i+=bu(e[o])+",";Kd.set(e,i)}if(n==Kc){i="#";const s=Kc.keys(e).sort();for(;!we(o=s.pop());)we(e[o])||(i+=o+":"+bu(e[o])+",");Kd.set(e,i)}}else i=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},Wr=new WeakMap,ag={},Jd={},Ty="undefined",Wh=typeof window!=Ty,Dv=typeof document!=Ty,l4=()=>Wh&&typeof window.requestAnimationFrame!=Ty,to=(e,t)=>{const n=Wr.get(e);return[()=>!we(t)&&e.get(t)||ag,r=>{if(!we(t)){const i=e.get(t);t in Jd||(Jd[t]=i),n[5](t,zi(i,r),i||ag)}},n[6],()=>!we(t)&&t in Jd?Jd[t]:!we(t)&&e.get(t)||ag]};let Nv=!0;const c4=()=>Nv,[Uv,Fv]=Wh&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ko,Ko],u4=()=>{const e=Dv&&document.visibilityState;return we(e)||e!=="hidden"},d4=e=>(Dv&&document.addEventListener("visibilitychange",e),Uv("focus",e),()=>{Dv&&document.removeEventListener("visibilitychange",e),Fv("focus",e)}),f4=e=>{const t=()=>{Nv=!0,e()},n=()=>{Nv=!1};return Uv("online",t),Uv("offline",n),()=>{Fv("online",t),Fv("offline",n)}},h4={isOnline:c4,isVisible:u4},p4={initFocus:d4,initReconnect:f4},oh=!re.useId,Xs=!Wh||"Deno"in window,T_=e=>l4()?window.requestAnimationFrame(e):setTimeout(e,1),os=Xs?b.useEffect:b.useLayoutEffect,lg=typeof navigator<"u"&&navigator.connection,JS=!Xs&&lg&&(["slow-2g","2g"].includes(lg.effectiveType)||lg.saveData),mo=e=>{if(nr(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?bu(e):"",[e,t]};let m4=0;const sh=()=>++m4,E_=0,__=1,P_=2,g4=3;var Di={__proto__:null,ERROR_REVALIDATE_EVENT:g4,FOCUS_EVENT:E_,MUTATE_EVENT:P_,RECONNECT_EVENT:__};async function Ey(...e){const[t,n,r,i]=e,o=zi({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let s=o.populateCache;const l=o.rollbackOnError;let u=o.optimisticData;const d=m=>typeof l=="function"?l(m):l!==!1,h=o.throwOnError;if(nr(n)){const m=n,y=[],S=t.keys();for(const k of S)!/^\$(inf|sub)\$/.test(k)&&m(t.get(k)._k)&&y.push(k);return Promise.all(y.map(p))}return p(n);async function p(m){const[y]=mo(m);if(!y)return;const[S,k]=to(t,y),[P,v,w,x]=Wr.get(t),_=()=>{const ve=P[y];return(nr(o.revalidate)?o.revalidate(S().data,m):o.revalidate!==!1)&&(delete w[y],delete x[y],ve&&ve[0])?ve[0](P_).then(()=>S().data):S().data};if(e.length<3)return _();let I=r,M;const U=sh();v[y]=[U,0];const T=!we(u),B=S(),j=B.data,$=B._c,K=we($)?j:$;if(T&&(u=nr(u)?u(K,j):u,k({data:u,_c:K})),nr(I))try{I=I(K)}catch(ve){M=ve}if(I&&s4(I))if(I=await I.catch(ve=>{M=ve}),U!==v[y][0]){if(M)throw M;return I}else M&&T&&d(M)&&(s=!0,k({data:K,_c:tn}));if(s&&!M)if(nr(s)){const ve=s(I,K);k({data:ve,error:tn,_c:tn})}else k({data:I,error:tn,_c:tn});if(v[y][1]=sh(),Promise.resolve(_()).then(()=>{k({_c:tn})}),M){if(h)throw M;return}return I}}const QS=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},x_=(e,t)=>{if(!Wr.has(e)){const n=zi(p4,t),r={},i=Ey.bind(tn,e);let o=Ko;const s={},l=(h,p)=>{const m=s[h]||[];return s[h]=m,m.push(p),()=>m.splice(m.indexOf(p),1)},u=(h,p,m)=>{e.set(h,p);const y=s[h];if(y)for(const S of y)S(p,m)},d=()=>{if(!Wr.has(e)&&(Wr.set(e,[r,{},{},{},i,u,l]),!Xs)){const h=n.initFocus(setTimeout.bind(tn,QS.bind(tn,r,E_))),p=n.initReconnect(setTimeout.bind(tn,QS.bind(tn,r,__)));o=()=>{h&&h(),p&&p(),Wr.delete(e)}}};return d(),[e,i,d,o]}return[e,Wr.get(e)[4]]},v4=(e,t,n,r,i)=>{const o=n.errorRetryCount,s=i.retryCount,l=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!we(o)&&s>o||setTimeout(r,l,i)},y4=(e,t)=>bu(e)==bu(t),[Du,R_]=x_(new Map),_y=zi({onLoadingSlow:Ko,onSuccess:Ko,onError:Ko,onErrorRetry:v4,onDiscarded:Ko,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:JS?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:JS?5e3:3e3,compare:y4,isPaused:()=>!1,cache:Du,mutate:R_,fallback:{}},h4),I_=(e,t)=>{const n=zi(e,t);if(t){const{use:r,fallback:i}=e,{use:o,fallback:s}=t;r&&o&&(n.use=r.concat(o)),i&&s&&(n.fallback=zi(i,s))}return n},jv=b.createContext({}),O_=e=>{const{value:t}=e,n=b.useContext(jv),r=nr(t),i=b.useMemo(()=>r?t(n):t,[r,n,t]),o=b.useMemo(()=>r?i:I_(n,i),[r,n,i]),s=i&&i.provider,l=b.useRef(tn);s&&!l.current&&(l.current=x_(s(o.cache||Du),i));const u=l.current;return u&&(o.cache=u[0],o.mutate=u[1]),os(()=>{if(u)return u[2]&&u[2](),u[3]},[]),b.createElement(jv.Provider,zi(e,{value:o}))},M_="$inf$",L_=Wh&&window.__SWR_DEVTOOLS_USE__,b4=L_?window.__SWR_DEVTOOLS_USE__:[],k4=()=>{L_&&(window.__SWR_DEVTOOLS_REACT__=re)},A_=e=>nr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],D_=()=>zi(_y,b.useContext(jv)),S4=(e,t)=>{const[n,r]=mo(e),[,,,i]=Wr.get(Du);if(i[n])return i[n];const o=t(r);return i[n]=o,o},C4=e=>(t,n,r)=>e(t,n&&((...o)=>{const[s]=mo(t),[,,,l]=Wr.get(Du);if(s.startsWith(M_))return n(...o);const u=l[s];return we(u)?n(...o):(delete l[s],u)}),r),w4=b4.concat(C4),N_=e=>function(...n){const r=D_(),[i,o,s]=A_(n),l=I_(r,s);let u=e;const{use:d}=l,h=(d||[]).concat(w4);for(let p=h.length;p--;)u=h[p](u);return u(i,o||l.fetcher||null,l)},U_=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}},T4=(e,t)=>(...n)=>{const[r,i,o]=A_(n),s=(o.use||[]).concat(t);return e(r,i,{...o,use:s})};k4();const E4=e=>mo(e)[0],YS=re.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),cg={dedupe:!0},_4=(e,t,n)=>{const{cache:r,compare:i,suspense:o,fallbackData:s,revalidateOnMount:l,revalidateIfStale:u,refreshInterval:d,refreshWhenHidden:h,refreshWhenOffline:p,keepPreviousData:m}=n,[y,S,k,P]=Wr.get(r),[v,w]=mo(e),x=b.useRef(!1),_=b.useRef(!1),I=b.useRef(v),M=b.useRef(t),U=b.useRef(n),T=()=>U.current,B=()=>T().isVisible()&&T().isOnline(),[j,$,K,ve]=to(r,v),me=b.useRef({}).current,nt=we(s)?n.fallback[v]:s,Je=(Te,Re)=>{for(const ye in me){const Ie=ye;if(Ie==="data"){if(!i(Te[Ie],Re[Ie])&&(!we(Te[Ie])||!i(mt,Re[Ie])))return!1}else if(Re[Ie]!==Te[Ie])return!1}return!0},Ne=b.useMemo(()=>{const Te=(()=>!v||!t?!1:we(l)?T().isPaused()||o?!1:we(u)?!0:u:l)(),Re=Ze=>{const gt=zi(Ze);return delete gt._k,Te?{isValidating:!0,isLoading:!0,...gt}:gt},ye=j(),Ie=ve(),St=Re(ye),_t=ye===Ie?St:Re(Ie);let Ue=St;return[()=>{const Ze=Re(j());return Je(Ze,Ue)?(Ue.data=Ze.data,Ue.isLoading=Ze.isLoading,Ue.isValidating=Ze.isValidating,Ue.error=Ze.error,Ue):(Ue=Ze,Ze)},()=>_t]},[r,v]),te=wy.useSyncExternalStore(b.useCallback(Te=>K(v,(Re,ye)=>{Je(ye,Re)||Te()}),[r,v]),Ne[0],Ne[1]),se=!x.current,Ee=y[v]&&y[v].length>0,ke=te.data,xe=we(ke)?nt:ke,ze=te.error,Et=b.useRef(xe),mt=m?we(ke)?Et.current:ke:xe,lt=(()=>Ee&&!we(ze)?!1:se&&!we(l)?l:T().isPaused()?!1:o?we(xe)?!1:u:we(xe)||u)(),Xt=!!(v&&t&&se&&lt),gn=we(te.isValidating)?Xt:te.isValidating,Zr=we(te.isLoading)?Xt:te.isLoading,fn=b.useCallback(async Te=>{const Re=M.current;if(!v||!Re||_.current||T().isPaused())return!1;let ye,Ie,St=!0;const _t=Te||{},Ue=!k[v]||!_t.dedupe,Ze=()=>oh?!_.current&&v===I.current&&x.current:v===I.current,gt={isValidating:!1,isLoading:!1},Zt=()=>{$(gt)},ar=()=>{const ut=k[v];ut&&ut[1]===Ie&&delete k[v]},Rr={isValidating:!0};we(j().data)&&(Rr.isLoading=!0);try{if(Ue&&($(Rr),n.loadingTimeout&&we(j().data)&&setTimeout(()=>{St&&Ze()&&T().onLoadingSlow(v,n)},n.loadingTimeout),k[v]=[Re(w),sh()]),[ye,Ie]=k[v],ye=await ye,Ue&&setTimeout(ar,n.dedupingInterval),!k[v]||k[v][1]!==Ie)return Ue&&Ze()&&T().onDiscarded(v),!1;gt.error=tn;const ut=S[v];if(!we(ut)&&(Ie<=ut[0]||Ie<=ut[1]||ut[1]===0))return Zt(),Ue&&Ze()&&T().onDiscarded(v),!1;const vt=j().data;gt.data=i(vt,ye)?vt:ye,Ue&&Ze()&&T().onSuccess(ye,v,n)}catch(ut){ar();const vt=T(),{shouldRetryOnError:vn}=vt;vt.isPaused()||(gt.error=ut,Ue&&Ze()&&(vt.onError(ut,v,vt),(vn===!0||nr(vn)&&vn(ut))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||B())&&vt.onErrorRetry(ut,v,vt,jn=>{const yn=y[v];yn&&yn[0]&&yn[0](Di.ERROR_REVALIDATE_EVENT,jn)},{retryCount:(_t.retryCount||0)+1,dedupe:!0})))}return St=!1,Zt(),!0},[v,r]),xr=b.useCallback((...Te)=>Ey(r,I.current,...Te),[]);if(os(()=>{M.current=t,U.current=n,we(ke)||(Et.current=ke)}),os(()=>{if(!v)return;const Te=fn.bind(tn,cg);let Re=0;const Ie=U_(v,y,(St,_t={})=>{if(St==Di.FOCUS_EVENT){const Ue=Date.now();T().revalidateOnFocus&&Ue>Re&&B()&&(Re=Ue+T().focusThrottleInterval,Te())}else if(St==Di.RECONNECT_EVENT)T().revalidateOnReconnect&&B()&&Te();else{if(St==Di.MUTATE_EVENT)return fn();if(St==Di.ERROR_REVALIDATE_EVENT)return fn(_t)}});return _.current=!1,I.current=v,x.current=!0,$({_k:w}),lt&&(we(xe)||Xs?Te():T_(Te)),()=>{_.current=!0,Ie()}},[v]),os(()=>{let Te;function Re(){const Ie=nr(d)?d(j().data):d;Ie&&Te!==-1&&(Te=setTimeout(ye,Ie))}function ye(){!j().error&&(h||T().isVisible())&&(p||T().isOnline())?fn(cg).then(Re):Re()}return Re(),()=>{Te&&(clearTimeout(Te),Te=-1)}},[d,h,p,v]),b.useDebugValue(mt),o&&we(xe)&&v){if(!oh&&Xs)throw new Error("Fallback data is required when using suspense in SSR.");M.current=t,U.current=n,_.current=!1;const Te=P[v];if(!we(Te)){const Re=xr(Te);YS(Re)}if(we(ze)){const Re=fn(cg);we(mt)||(Re.status="fulfilled",Re.value=!0),YS(Re)}else throw ze}return{mutate:xr,get data(){return me.data=!0,mt},get error(){return me.error=!0,ze},get isValidating(){return me.isValidating=!0,gn},get isLoading(){return me.isLoading=!0,Zr}}},Py=Kc.defineProperty(O_,"defaultValue",{value:_y}),F_=N_(_4),P4=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Py,default:F_,mutate:R_,preload:S4,unstable_serialize:E4,useSWRConfig:D_},Symbol.toStringTag,{value:"Module"})),XS=re.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),ug={dedupe:!0},x4=(e,t,n)=>{const{cache:r,compare:i,suspense:o,fallbackData:s,revalidateOnMount:l,revalidateIfStale:u,refreshInterval:d,refreshWhenHidden:h,refreshWhenOffline:p,keepPreviousData:m}=n,[y,S,k,P]=Wr.get(r),[v,w]=mo(e),x=b.useRef(!1),_=b.useRef(!1),I=b.useRef(v),M=b.useRef(t),U=b.useRef(n),T=()=>U.current,B=()=>T().isVisible()&&T().isOnline(),[j,$,K,ve]=to(r,v),me=b.useRef({}).current,nt=we(s)?n.fallback[v]:s,Je=(Te,Re)=>{for(const ye in me){const Ie=ye;if(Ie==="data"){if(!i(Te[Ie],Re[Ie])&&(!we(Te[Ie])||!i(mt,Re[Ie])))return!1}else if(Re[Ie]!==Te[Ie])return!1}return!0},Ne=b.useMemo(()=>{const Te=(()=>!v||!t?!1:we(l)?T().isPaused()||o?!1:we(u)?!0:u:l)(),Re=Ze=>{const gt=zi(Ze);return delete gt._k,Te?{isValidating:!0,isLoading:!0,...gt}:gt},ye=j(),Ie=ve(),St=Re(ye),_t=ye===Ie?St:Re(Ie);let Ue=St;return[()=>{const Ze=Re(j());return Je(Ze,Ue)?(Ue.data=Ze.data,Ue.isLoading=Ze.isLoading,Ue.isValidating=Ze.isValidating,Ue.error=Ze.error,Ue):(Ue=Ze,Ze)},()=>_t]},[r,v]),te=wy.useSyncExternalStore(b.useCallback(Te=>K(v,(Re,ye)=>{Je(ye,Re)||Te()}),[r,v]),Ne[0],Ne[1]),se=!x.current,Ee=y[v]&&y[v].length>0,ke=te.data,xe=we(ke)?nt:ke,ze=te.error,Et=b.useRef(xe),mt=m?we(ke)?Et.current:ke:xe,lt=(()=>Ee&&!we(ze)?!1:se&&!we(l)?l:T().isPaused()?!1:o?we(xe)?!1:u:we(xe)||u)(),Xt=!!(v&&t&&se&&lt),gn=we(te.isValidating)?Xt:te.isValidating,Zr=we(te.isLoading)?Xt:te.isLoading,fn=b.useCallback(async Te=>{const Re=M.current;if(!v||!Re||_.current||T().isPaused())return!1;let ye,Ie,St=!0;const _t=Te||{},Ue=!k[v]||!_t.dedupe,Ze=()=>oh?!_.current&&v===I.current&&x.current:v===I.current,gt={isValidating:!1,isLoading:!1},Zt=()=>{$(gt)},ar=()=>{const ut=k[v];ut&&ut[1]===Ie&&delete k[v]},Rr={isValidating:!0};we(j().data)&&(Rr.isLoading=!0);try{if(Ue&&($(Rr),n.loadingTimeout&&we(j().data)&&setTimeout(()=>{St&&Ze()&&T().onLoadingSlow(v,n)},n.loadingTimeout),k[v]=[Re(w),sh()]),[ye,Ie]=k[v],ye=await ye,Ue&&setTimeout(ar,n.dedupingInterval),!k[v]||k[v][1]!==Ie)return Ue&&Ze()&&T().onDiscarded(v),!1;gt.error=tn;const ut=S[v];if(!we(ut)&&(Ie<=ut[0]||Ie<=ut[1]||ut[1]===0))return Zt(),Ue&&Ze()&&T().onDiscarded(v),!1;const vt=j().data;gt.data=i(vt,ye)?vt:ye,Ue&&Ze()&&T().onSuccess(ye,v,n)}catch(ut){ar();const vt=T(),{shouldRetryOnError:vn}=vt;vt.isPaused()||(gt.error=ut,Ue&&Ze()&&(vt.onError(ut,v,vt),(vn===!0||nr(vn)&&vn(ut))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||B())&&vt.onErrorRetry(ut,v,vt,jn=>{const yn=y[v];yn&&yn[0]&&yn[0](Di.ERROR_REVALIDATE_EVENT,jn)},{retryCount:(_t.retryCount||0)+1,dedupe:!0})))}return St=!1,Zt(),!0},[v,r]),xr=b.useCallback((...Te)=>Ey(r,I.current,...Te),[]);if(os(()=>{M.current=t,U.current=n,we(ke)||(Et.current=ke)}),os(()=>{if(!v)return;const Te=fn.bind(tn,ug);let Re=0;const Ie=U_(v,y,(St,_t={})=>{if(St==Di.FOCUS_EVENT){const Ue=Date.now();T().revalidateOnFocus&&Ue>Re&&B()&&(Re=Ue+T().focusThrottleInterval,Te())}else if(St==Di.RECONNECT_EVENT)T().revalidateOnReconnect&&B()&&Te();else{if(St==Di.MUTATE_EVENT)return fn();if(St==Di.ERROR_REVALIDATE_EVENT)return fn(_t)}});return _.current=!1,I.current=v,x.current=!0,$({_k:w}),lt&&(we(xe)||Xs?Te():T_(Te)),()=>{_.current=!0,Ie()}},[v]),os(()=>{let Te;function Re(){const Ie=nr(d)?d(j().data):d;Ie&&Te!==-1&&(Te=setTimeout(ye,Ie))}function ye(){!j().error&&(h||T().isVisible())&&(p||T().isOnline())?fn(ug).then(Re):Re()}return Re(),()=>{Te&&(clearTimeout(Te),Te=-1)}},[d,h,p,v]),b.useDebugValue(mt),o&&we(xe)&&v){if(!oh&&Xs)throw new Error("Fallback data is required when using suspense in SSR.");M.current=t,U.current=n,_.current=!1;const Te=P[v];if(!we(Te)){const Re=xr(Te);XS(Re)}if(we(ze)){const Re=fn(ug);we(mt)||(Re.status="fulfilled",Re.value=!0),XS(Re)}else throw ze}return{mutate:xr,get data(){return me.data=!0,mt},get error(){return me.error=!0,ze},get isValidating(){return me.isValidating=!0,gn},get isLoading(){return me.isLoading=!0,Zr}}};Kc.defineProperty(O_,"defaultValue",{value:_y});const R4=N_(x4),I4=e=>mo(e?e(0,null):null)[0],dg=Promise.resolve(),O4=e=>(t,n,r)=>{const i=b.useRef(!1),{cache:o,initialSize:s=1,revalidateAll:l=!1,persistSize:u=!1,revalidateFirstPage:d=!0,revalidateOnMount:h=!1,parallel:p=!1}=r,[,,,m]=Wr.get(Du);let y;try{y=I4(t),y&&(y=M_+y)}catch{}const[S,k,P]=to(o,y),v=b.useCallback(()=>we(S()._l)?s:S()._l,[o,y,s]);wy.useSyncExternalStore(b.useCallback(T=>y?P(y,()=>{T()}):()=>{},[o,y]),v,v);const w=b.useCallback(()=>{const T=S()._l;return we(T)?s:T},[y,s]),x=b.useRef(w());os(()=>{if(!i.current){i.current=!0;return}y&&k({_l:u?x.current:w()})},[y,o]);const _=h&&!i.current,I=e(y,async T=>{const B=S()._i,j=S()._r;k({_r:tn});const $=[],K=w(),[ve]=to(o,T),me=ve().data,nt=[];let Je=null;for(let Ne=0;Ne<K;++Ne){const[te,se]=mo(t(Ne,p?null:Je));if(!te)break;const[Ee,ke]=to(o,te);let xe=Ee().data;const ze=l||B||we(xe)||d&&!Ne&&!we(me)||_||me&&!we(me[Ne])&&!r.compare(me[Ne],xe);if(n&&(typeof j=="function"?j(xe,se):ze)){const Et=async()=>{if(!(te in m))xe=await n(se);else{const lt=m[te];delete m[te],xe=await lt}ke({data:xe,_k:se}),$[Ne]=xe};p?nt.push(Et):await Et()}else $[Ne]=xe;p||(Je=xe)}return p&&await Promise.all(nt.map(Ne=>Ne())),k({_i:tn}),$},r),M=b.useCallback(function(T,B){const j=typeof B=="boolean"?{revalidate:B}:B||{},$=j.revalidate!==!1;return y?($&&(we(T)?k({_i:!0,_r:j.revalidate}):k({_i:!1,_r:j.revalidate})),arguments.length?I.mutate(T,{...j,revalidate:$}):I.mutate()):dg},[y,o]),U=b.useCallback(T=>{if(!y)return dg;const[,B]=to(o,y);let j;if(nr(T)?j=T(w()):typeof T=="number"&&(j=T),typeof j!="number")return dg;B({_l:j}),x.current=j;const $=[],[K]=to(o,y);let ve=null;for(let me=0;me<j;++me){const[nt]=mo(t(me,ve)),[Je]=to(o,nt),Ne=nt?Je().data:tn;if(we(Ne))return M(K().data);$.push(Ne),ve=Ne}return M($)},[y,o,M,w]);return{size:w(),setSize:U,mutate:M,get data(){return I.data},get error(){return I.error},get isValidating(){return I.isValidating},get isLoading(){return I.isLoading}}},M4=T4(R4,O4);function L4(e,t){if(!e)throw typeof t=="string"?new Error(t):new Error(`${t.displayName} not found`)}var jl=(e,t)=>{const{assertCtxFn:n=L4}=t||{},r=re.createContext(void 0);return r.displayName=e,[r,()=>{const s=re.useContext(r);return n(s,`${e} not found`),s.value},()=>{const s=re.useContext(r);return s?s.value:{}}]},j_={};VN(j_,{SWRConfig:()=>Py,useSWR:()=>F_,useSWRInfinite:()=>M4});$N(j_,P4);var[z_,A4]=jl("ClerkInstanceContext"),[D4,N4]=jl("UserContext"),[U4,pW]=jl("ClientContext"),[F4,mW]=jl("SessionContext");re.createContext({});var[j4,gW]=jl("OrganizationContext"),z4=({children:e,organization:t,swrConfig:n})=>re.createElement(Py,{value:n},re.createElement(j4.Provider,{value:{value:{organization:t}}},e));function B_(e){if(!re.useContext(z_)){if(typeof e=="function"){e();return}throw new Error(`${e} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider`)}}typeof window<"u"?re.useLayoutEffect:re.useEffect;function B4(){B_("useUser");const e=N4();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}var ZS=Object.prototype.hasOwnProperty;function eC(e,t,n){for(n of e.keys())if(Jc(n,t))return n}function Jc(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Jc(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=eC(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=eC(t,i),!i)||!Jc(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ZS.call(e,n)&&++r&&!ZS.call(t,n)||!(n in t)||!Jc(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}var V4=Jc,V_=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,$4=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],$_="pk_live_",W4="pk_test_";function tC(e,t={}){if(e=e||"",!e||!W_(e)){if(t.fatal)throw new Error("Publishable key not valid.");return null}const n=e.startsWith($_)?"production":"development";let r=V_(e.split("_")[2]);return r=r.slice(0,-1),t.proxyUrl?r=t.proxyUrl:n!=="development"&&t.domain&&(r=`clerk.${t.domain}`),{instanceType:n,frontendApi:r}}function W_(e){e=e||"";const t=e.startsWith($_)||e.startsWith(W4),n=V_(e.split("_")[2]||"").endsWith("$");return t&&n}function H4(){const e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;const n=typeof t=="string"?t:t.hostname;let r=e.get(n);return r===void 0&&(r=$4.some(i=>n.endsWith(i)),e.set(n,r)),r}}}var Fi=b_({packageName:"@clerk/clerk-react"});function G4(e){Fi.setMessages(e).setPackageName(e)}var[q4,H_]=jl("AuthContext"),K4=z_,G_=A4,J4="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",Q4=e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,Y4="Invalid state. Feel free to submit a bug or reach out to support here: https://clerk.com/support",fg="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",X4="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",Z4="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",e9="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",t9="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",n9=e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored.`,r9=e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,i9=e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`,o9="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored.",s9="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored.",a9="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",l9="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",c9="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",u9="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",d9="Missing props. <UserButton.Action /> component requires the following props: label.",xy=e=>{B_(()=>{Fi.throwMissingClerkProviderError({source:e})})},q_=e=>new Promise(t=>{e.loaded&&t(),e.addOnLoaded(t)}),f9=e=>async t=>(await q_(e),e.session?e.session.getToken(t):null),h9=e=>async(...t)=>(await q_(e),e.signOut(...t)),p9=()=>{xy("useAuth");const{sessionId:e,userId:t,actor:n,orgId:r,orgRole:i,orgSlug:o,orgPermissions:s,__experimental_factorVerificationAge:l}=H_(),u=G_(),d=b.useCallback(f9(u),[u]),h=b.useCallback(h9(u),[u]),p=b.useCallback(m=>QN({userId:t,orgId:r,orgRole:i,orgPermissions:s,__experimental_factorVerificationAge:l})(m),[t,l,r,i,s]);return e===void 0&&t===void 0?{isLoaded:!1,isSignedIn:void 0,sessionId:e,userId:t,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:h,getToken:d}:e===null&&t===null?{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:t,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:h,getToken:d}:e&&t&&r&&i?{isLoaded:!0,isSignedIn:!0,sessionId:e,userId:t,actor:n||null,orgId:r,orgRole:i,orgSlug:o||null,has:p,signOut:h,getToken:d}:e&&t&&!r?{isLoaded:!0,isSignedIn:!0,sessionId:e,userId:t,actor:n||null,orgId:null,orgRole:null,orgSlug:null,has:p,signOut:h,getToken:d}:Fi.throw(Y4)},rn=(e,t)=>{t=t||e.displayName||e.name||"Component",e.displayName=t;const n=r=>{xy(t||"withClerk");const i=G_();return i.loaded?re.createElement(e,{...r,clerk:i}):null};return n.displayName=`withClerk(${t})`,n},m9=({children:e})=>{xy("SignedIn");const{userId:t}=H_();return t?re.createElement(re.Fragment,null,e):null};rn(({clerk:e,...t})=>{const{client:n,session:r}=e,i=n.activeSessions&&n.activeSessions.length>0;return re.useEffect(()=>{r===null&&i?e.redirectToAfterSignOut():e.redirectToSignIn(t)},[]),null},"RedirectToSignIn");rn(({clerk:e,...t})=>(re.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp");rn(({clerk:e})=>(re.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");rn(({clerk:e})=>(re.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");rn(({clerk:e})=>(re.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");rn(({clerk:e,...t})=>(re.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");var K_=e=>{throw TypeError(e)},Ry=(e,t,n)=>t.has(e)||K_("Cannot "+n),le=(e,t,n)=>(Ry(e,t,"read from private field"),n?n.call(e):t.get(e)),Ba=(e,t,n)=>t.has(e)?K_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Da=(e,t,n,r)=>(Ry(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),nC=(e,t,n)=>(Ry(e,t,"access private method"),n),g9=(e,t="5.22.2")=>{if(e)return e;const n=v9(t);return n?n==="snapshot"?"5.22.2":n:y9(t)},v9=e=>{var t;return(t=e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:t[1]},y9=e=>e.trim().replace(/^v/,"").split(".")[0];function b9(e){return e?k9(e)||J_(e):!0}function k9(e){return/^http(s)?:\/\//.test(e||"")}function J_(e){return e.startsWith("/")}function S9(e){return e?J_(e)?new URL(e,window.location.origin).toString():e:""}function C9(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}return`clerk.${e.replace(t,"")}`}var w9="loadScript cannot be called when document does not exist",T9="loadScript cannot be called without a src";async function E9(e="",t){const{async:n,defer:r,beforeLoad:i,crossOrigin:o,nonce:s}=t||{};return new Promise((l,u)=>{e||u(T9),(!document||!document.body)&&u(w9);const d=document.createElement("script");o&&d.setAttribute("crossorigin",o),d.async=n||!1,d.defer=r||!1,d.addEventListener("load",()=>{d.remove(),l(d)}),d.addEventListener("error",()=>{d.remove(),u()}),d.src=e,d.nonce=s,i?.(d),document.body.appendChild(d)})}var rC="Clerk: Failed to load Clerk",{isDevOrStagingUrl:_9}=H4(),Q_=b_({packageName:"@clerk/shared"});function P9(e){Q_.setPackageName({packageName:e})}var x9=async e=>{const t=document.querySelector("script[data-clerk-js-script]");if(t)return new Promise((n,r)=>{t.addEventListener("load",()=>{n(t)}),t.addEventListener("error",()=>{r(rC)})});if(!e?.publishableKey){Q_.throwMissingPublishableKeyError();return}return E9(R9(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:O9(e)}).catch(()=>{throw new Error(rC)})},R9=e=>{var t,n;const{clerkJSUrl:r,clerkJSVariant:i,clerkJSVersion:o,proxyUrl:s,domain:l,publishableKey:u}=e;if(r)return r;let d="";s&&b9(s)?d=S9(s).replace(/http(s)?:\/\//,""):l&&!_9(((t=tC(u))==null?void 0:t.frontendApi)||"")?d=C9(l):d=((n=tC(u))==null?void 0:n.frontendApi)||"";const h=i?`${i.replace(/\.+$/,"")}.`:"",p=g9(o);return`https://${d}/npm/@clerk/clerk-js@${p}/dist/clerk.${h}browser.js`},I9=e=>{const t={};return e.publishableKey&&(t["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(t["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(t["data-clerk-domain"]=e.domain),e.nonce&&(t.nonce=e.nonce),t},O9=e=>t=>{const n=I9(e);for(const r in n)t.setAttribute(r,n[r])},iC=(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n},M9=()=>{try{return!1}catch{}return!1};function hg(e,t,n){if(typeof e=="function")return e(t);if(typeof e<"u")return e;if(typeof n<"u")return n}function oC(){return typeof window<"u"}var Hn=e=>{M9()&&console.error(`Clerk: ${e}`)};typeof window<"u"&&!window.global&&(window.global=typeof global>"u"?window:global);var Hh=e=>t=>{try{return re.Children.only(e)}catch{return Fi.throw(Q4(t))}},Gh=(e,t)=>(e||(e=t),typeof e=="string"&&(e=re.createElement("button",null,e)),e),qh=e=>(...t)=>{if(e&&typeof e=="function")return e(...t)};function L9(e){return typeof e=="function"}var Qd=new Map;function A9(e,t,n=1){re.useEffect(()=>{const r=Qd.get(e)||0;return r==n?Fi.throw(t):(Qd.set(e,r+1),()=>{Qd.set(e,(Qd.get(e)||1)-1)})},[])}function D9(e,t,n){const r=e.displayName||e.name||t||"Component",i=o=>(A9(t,n),re.createElement(e,{...o}));return i.displayName=`withMaxAllowedInstancesGuard(${r})`,i}var Qc=e=>{const t=Array(e.length).fill(null),[n,r]=b.useState(t);return e.map((i,o)=>({id:i.id,mount:s=>r(l=>l.map((u,d)=>d===o?s:u)),unmount:()=>r(s=>s.map((l,u)=>u===o?null:l)),portal:()=>re.createElement(re.Fragment,null,n[o]?$h.createPortal(i.component,n[o]):null)}))},Zn=(e,t)=>!!e&&re.isValidElement(e)&&e?.type===t,Y_=e=>Z_({children:e,reorderItemsLabels:["account","security"],LinkComponent:Jh,PageComponent:Kh,MenuItemsComponent:Iy,componentName:"UserProfile"}),X_=e=>Z_({children:e,reorderItemsLabels:["general","members"],LinkComponent:My,PageComponent:Oy,componentName:"OrganizationProfile"}),Z_=({children:e,LinkComponent:t,PageComponent:n,MenuItemsComponent:r,reorderItemsLabels:i,componentName:o})=>{const s=[];re.Children.forEach(e,k=>{if(!Zn(k,n)&&!Zn(k,t)&&!Zn(k,r)){k&&Hn(n9(o));return}const{props:P}=k,{children:v,label:w,url:x,labelIcon:_}=P;if(Zn(k,n))if(sC(P,i))s.push({label:w});else if(pg(P))s.push({label:w,labelIcon:_,children:v,url:x});else{Hn(r9(o));return}if(Zn(k,t))if(mg(P))s.push({label:w,labelIcon:_,url:x});else{Hn(i9(o));return}});const l=[],u=[],d=[];s.forEach((k,P)=>{if(pg(k)){l.push({component:k.children,id:P}),u.push({component:k.labelIcon,id:P});return}mg(k)&&d.push({component:k.labelIcon,id:P})});const h=Qc(l),p=Qc(u),m=Qc(d),y=[],S=[];return s.forEach((k,P)=>{if(sC(k,i)){y.push({label:k.label});return}if(pg(k)){const{portal:v,mount:w,unmount:x}=h.find(U=>U.id===P),{portal:_,mount:I,unmount:M}=p.find(U=>U.id===P);y.push({label:k.label,url:k.url,mount:w,unmount:x,mountIcon:I,unmountIcon:M}),S.push(v),S.push(_);return}if(mg(k)){const{portal:v,mount:w,unmount:x}=m.find(_=>_.id===P);y.push({label:k.label,url:k.url,mountIcon:w,unmountIcon:x}),S.push(v);return}}),{customPages:y,customPagesPortals:S}},sC=(e,t)=>{const{children:n,label:r,url:i,labelIcon:o}=e;return!n&&!i&&!o&&t.some(s=>s===r)},pg=e=>{const{children:t,label:n,url:r,labelIcon:i}=e;return!!t&&!!r&&!!i&&!!n},mg=e=>{const{children:t,label:n,url:r,labelIcon:i}=e;return!t&&!!r&&!!i&&!!n},N9=e=>U9({children:e,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:Iy,MenuActionComponent:eP,MenuLinkComponent:tP,UserProfileLinkComponent:Jh,UserProfilePageComponent:Kh}),U9=({children:e,MenuItemsComponent:t,MenuActionComponent:n,MenuLinkComponent:r,UserProfileLinkComponent:i,UserProfilePageComponent:o,reorderItemsLabels:s})=>{const l=[],u=[],d=[];re.Children.forEach(e,S=>{if(!Zn(S,t)&&!Zn(S,i)&&!Zn(S,o)){S&&Hn(o9);return}if(Zn(S,i)||Zn(S,o))return;const{props:k}=S;re.Children.forEach(k.children,P=>{if(!Zn(P,n)&&!Zn(P,r)){P&&Hn(s9);return}const{props:v}=P,{label:w,labelIcon:x,href:_,onClick:I,open:M}=v;if(Zn(P,n))if(aC(v,s))l.push({label:w});else if(gg(v)){const U={label:w,labelIcon:x};if(I!==void 0)l.push({...U,onClick:I});else if(M!==void 0)l.push({...U,open:M.startsWith("/")?M:`/${M}`});else{Hn("Custom menu item must have either onClick or open property");return}}else{Hn(d9);return}if(Zn(P,r))if(vg(v))l.push({label:w,labelIcon:x,href:_});else{Hn(u9);return}})});const h=[],p=[];l.forEach((S,k)=>{gg(S)&&h.push({component:S.labelIcon,id:k}),vg(S)&&p.push({component:S.labelIcon,id:k})});const m=Qc(h),y=Qc(p);return l.forEach((S,k)=>{if(aC(S,s)&&u.push({label:S.label}),gg(S)){const{portal:P,mount:v,unmount:w}=m.find(_=>_.id===k),x={label:S.label,mountIcon:v,unmountIcon:w};"onClick"in S?x.onClick=S.onClick:"open"in S&&(x.open=S.open),u.push(x),d.push(P)}if(vg(S)){const{portal:P,mount:v,unmount:w}=y.find(x=>x.id===k);u.push({label:S.label,href:S.href,mountIcon:v,unmountIcon:w}),d.push(P)}}),{customMenuItems:u,customMenuItemsPortals:d}},aC=(e,t)=>{const{children:n,label:r,onClick:i,labelIcon:o}=e;return!n&&!i&&!o&&t.some(s=>s===r)},gg=e=>{const{label:t,labelIcon:n,onClick:r,open:i}=e;return!!n&&!!t&&(typeof r=="function"||typeof i=="string")},vg=e=>{const{label:t,href:n,labelIcon:r}=e;return!!n&&!!r&&!!t},Na=e=>"mount"in e,lC=e=>"open"in e,Vi=class extends re.PureComponent{constructor(){super(...arguments),this.portalRef=re.createRef()}componentDidUpdate(e){var t,n,r,i;if(!Na(e)||!Na(this.props))return;const o=iC(e.props,"customPages","customMenuItems","children"),s=iC(this.props.props,"customPages","customMenuItems","children"),l=((t=o.customPages)==null?void 0:t.length)!==((n=s.customPages)==null?void 0:n.length),u=((r=o.customMenuItems)==null?void 0:r.length)!==((i=s.customMenuItems)==null?void 0:i.length);(!V4(o,s)||l||u)&&this.props.updateProps({node:this.portalRef.current,props:this.props.props})}componentDidMount(){this.portalRef.current&&(Na(this.props)&&this.props.mount(this.portalRef.current,this.props.props),lC(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.portalRef.current&&(Na(this.props)&&this.props.unmount(this.portalRef.current),lC(this.props)&&this.props.close())}render(){var e,t,n,r;return re.createElement(re.Fragment,null,re.createElement("div",{ref:this.portalRef}),Na(this.props)&&((t=(e=this.props)==null?void 0:e.customPagesPortals)==null?void 0:t.map((i,o)=>b.createElement(i,{key:o}))),Na(this.props)&&((r=(n=this.props)==null?void 0:n.customMenuItemsPortals)==null?void 0:r.map((i,o)=>b.createElement(i,{key:o}))))}},F9=rn(({clerk:e,...t})=>re.createElement(Vi,{mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:t}),"SignIn"),j9=rn(({clerk:e,...t})=>re.createElement(Vi,{mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:t}),"SignUp");function Kh({children:e}){return Hn(X4),re.createElement(re.Fragment,null,e)}function Jh({children:e}){return Hn(Z4),re.createElement(re.Fragment,null,e)}var z9=rn(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=Y_(t.children);return re.createElement(Vi,{mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...t,customPages:n},customPagesPortals:r})},"UserProfile");Object.assign(z9,{Page:Kh,Link:Jh});var B9=rn(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=Y_(t.children),i=Object.assign(t.userProfileProps||{},{customPages:n}),{customMenuItems:o,customMenuItemsPortals:s}=N9(t.children);return re.createElement(Vi,{mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...t,userProfileProps:i,customMenuItems:o},customPagesPortals:r,customMenuItemsPortals:s})},"UserButton");function Iy({children:e}){return Hn(a9),re.createElement(re.Fragment,null,e)}function eP({children:e}){return Hn(l9),re.createElement(re.Fragment,null,e)}function tP({children:e}){return Hn(c9),re.createElement(re.Fragment,null,e)}var V9=Object.assign(B9,{UserProfilePage:Kh,UserProfileLink:Jh,MenuItems:Iy,Action:eP,Link:tP});rn(({clerk:e,...t})=>re.createElement(Vi,{mount:e.__experimental_mountUserVerification,unmount:e.__experimental_unmountUserVerification,updateProps:e.__unstable__updateProps,props:t}),"__experimental_UserVerification");function Oy({children:e}){return Hn(e9),re.createElement(re.Fragment,null,e)}function My({children:e}){return Hn(t9),re.createElement(re.Fragment,null,e)}var $9=rn(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=X_(t.children);return re.createElement(Vi,{mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...t,customPages:n},customPagesPortals:r})},"OrganizationProfile");Object.assign($9,{Page:Oy,Link:My});rn(({clerk:e,...t})=>re.createElement(Vi,{mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:t}),"CreateOrganization");var W9=rn(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=X_(t.children),i=Object.assign(t.organizationProfileProps||{},{customPages:n});return re.createElement(Vi,{mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...t,organizationProfileProps:i},customPagesPortals:r})},"OrganizationSwitcher");Object.assign(W9,{OrganizationProfilePage:Oy,OrganizationProfileLink:My});rn(({clerk:e,...t})=>re.createElement(Vi,{mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:t}),"OrganizationList");rn(({clerk:e,...t})=>re.createElement(Vi,{open:e.openGoogleOneTap,close:e.closeGoogleOneTap,props:t}),"GoogleOneTap");rn(({clerk:e,children:t,...n})=>{const{signUpFallbackRedirectUrl:r,forceRedirectUrl:i,fallbackRedirectUrl:o,signUpForceRedirectUrl:s,mode:l,...u}=n;t=Gh(t,"Sign in");const d=Hh(t)("SignInButton"),h=()=>{const y={forceRedirectUrl:i,fallbackRedirectUrl:o,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:s};return l==="modal"?e.openSignIn(y):e.redirectToSignIn({...y,signInFallbackRedirectUrl:o,signInForceRedirectUrl:i})},m={...u,onClick:async y=>(d&&typeof d=="object"&&"props"in d&&await qh(d.props.onClick)(y),h())};return re.cloneElement(d,m)},"SignInButton");rn(({clerk:e,children:t,...n})=>{const{fallbackRedirectUrl:r,forceRedirectUrl:i,signInFallbackRedirectUrl:o,signInForceRedirectUrl:s,mode:l,unsafeMetadata:u,...d}=n;t=Gh(t,"Sign up");const h=Hh(t)("SignUpButton"),p=()=>{const S={fallbackRedirectUrl:r,forceRedirectUrl:i,signInFallbackRedirectUrl:o,signInForceRedirectUrl:s,unsafeMetadata:u};return l==="modal"?e.openSignUp(S):e.redirectToSignUp({...S,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:i})},y={...d,onClick:async S=>(h&&typeof h=="object"&&"props"in h&&await qh(h.props.onClick)(S),p())};return re.cloneElement(h,y)},"SignUpButton");rn(({clerk:e,children:t,...n})=>{const{redirectUrl:r="/",signOutOptions:i,...o}=n;t=Gh(t,"Sign out");const s=Hh(t)("SignOutButton"),l=()=>e.signOut({redirectUrl:r}),d={...o,onClick:async h=>(await qh(s.props.onClick)(h),l())};return re.cloneElement(s,d)},"SignOutButton");rn(({clerk:e,children:t,...n})=>{const{redirectUrl:r,...i}=n;t=Gh(t,"Sign in with Metamask");const o=Hh(t)("SignInWithMetamaskButton"),s=async()=>{async function d(){await e.authenticateWithMetamask({redirectUrl:r||void 0})}d()},u={...i,onClick:async d=>(await qh(o.props.onClick)(d),s())};return re.cloneElement(o,u)},"SignInWithMetamask");var H9={name:"@clerk/clerk-react",version:"5.9.1",environment:"production"},pe,Va,$a,Ms,Ls,yf,zv,nP=class rP{constructor(t){Ba(this,yf),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountUserVerificationNodes=new Map,this.premountMethodCalls=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],Ba(this,pe,!1),Ba(this,Va),Ba(this,$a),Ba(this,Ms),this.buildSignInUrl=i=>{const o=()=>{var s;return((s=this.clerkjs)==null?void 0:s.buildSignInUrl(i))||""};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("buildSignInUrl",o)},this.buildSignUpUrl=i=>{const o=()=>{var s;return((s=this.clerkjs)==null?void 0:s.buildSignUpUrl(i))||""};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("buildSignUpUrl",o)},this.buildAfterSignInUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignInUrl())||""};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("buildAfterSignInUrl",i)},this.buildAfterSignUpUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignUpUrl())||""};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("buildAfterSignUpUrl",i)},this.buildAfterSignOutUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignOutUrl())||""};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("buildAfterSignOutUrl",i)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",i)},this.buildUserProfileUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildUserProfileUrl())||""};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("buildUserProfileUrl",i)},this.buildCreateOrganizationUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildCreateOrganizationUrl())||""};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("buildCreateOrganizationUrl",i)},this.buildOrganizationProfileUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildOrganizationProfileUrl())||""};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("buildOrganizationProfileUrl",i)},this.buildUrlWithAuth=i=>{const o=()=>{var s;return((s=this.clerkjs)==null?void 0:s.buildUrlWithAuth(i))||""};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("buildUrlWithAuth",o)},this.handleUnauthenticated=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.handleUnauthenticated()};this.clerkjs&&le(this,pe)?i():this.premountMethodCalls.set("handleUnauthenticated",i)},this.addOnLoaded=i=>{this.loadedListeners.push(i),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(i=>i()),this.loadedListeners=[]},this.hydrateClerkJS=i=>{if(!i)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=i,this.premountMethodCalls.forEach(o=>o()),this.premountAddListenerCalls.forEach((o,s)=>{o.nativeUnsubscribe=i.addListener(s)}),this.preopenSignIn!==null&&i.openSignIn(this.preopenSignIn),this.preopenSignUp!==null&&i.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&i.openUserProfile(this.preopenUserProfile),this.preopenUserVerification!==null&&i.__experimental_openUserVerification(this.preopenUserVerification),this.preopenOneTap!==null&&i.openGoogleOneTap(this.preopenOneTap),this.preopenOrganizationProfile!==null&&i.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&i.openCreateOrganization(this.preopenCreateOrganization),this.premountSignInNodes.forEach((o,s)=>{i.mountSignIn(s,o)}),this.premountSignUpNodes.forEach((o,s)=>{i.mountSignUp(s,o)}),this.premountUserProfileNodes.forEach((o,s)=>{i.mountUserProfile(s,o)}),this.premountUserVerificationNodes.forEach((o,s)=>{i.__experimental_mountUserVerification(s,o)}),this.premountUserButtonNodes.forEach((o,s)=>{i.mountUserButton(s,o)}),this.premountOrganizationListNodes.forEach((o,s)=>{i.mountOrganizationList(s,o)}),Da(this,pe,!0),this.emitLoaded(),this.clerkjs},this.__unstable__updateProps=async i=>{const o=await nC(this,yf,zv).call(this);if(o&&"__unstable__updateProps"in o)return o.__unstable__updateProps(i)},this.setActive=({session:i,organization:o,beforeEmit:s})=>this.clerkjs?this.clerkjs.setActive({session:i,organization:o,beforeEmit:s}):Promise.reject(),this.openSignIn=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.openSignIn(i):this.preopenSignIn=i},this.closeSignIn=()=>{this.clerkjs&&le(this,pe)?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__experimental_openUserVerification=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.__experimental_openUserVerification(i):this.preopenUserVerification=i},this.__experimental_closeUserVerification=()=>{this.clerkjs&&le(this,pe)?this.clerkjs.__experimental_closeUserVerification():this.preopenUserVerification=null},this.openGoogleOneTap=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.openGoogleOneTap(i):this.preopenOneTap=i},this.closeGoogleOneTap=()=>{this.clerkjs&&le(this,pe)?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.openUserProfile(i):this.preopenUserProfile=i},this.closeUserProfile=()=>{this.clerkjs&&le(this,pe)?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.openOrganizationProfile(i):this.preopenOrganizationProfile=i},this.closeOrganizationProfile=()=>{this.clerkjs&&le(this,pe)?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.openCreateOrganization(i):this.preopenCreateOrganization=i},this.closeCreateOrganization=()=>{this.clerkjs&&le(this,pe)?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openSignUp=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.openSignUp(i):this.preopenSignUp=i},this.closeSignUp=()=>{this.clerkjs&&le(this,pe)?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountSignIn(i,o):this.premountSignInNodes.set(i,o)},this.unmountSignIn=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountSignIn(i):this.premountSignInNodes.delete(i)},this.__experimental_mountUserVerification=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.__experimental_mountUserVerification(i,o):this.premountUserVerificationNodes.set(i,o)},this.__experimental_unmountUserVerification=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.__experimental_unmountUserVerification(i):this.premountUserVerificationNodes.delete(i)},this.mountSignUp=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountSignUp(i,o):this.premountSignUpNodes.set(i,o)},this.unmountSignUp=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountSignUp(i):this.premountSignUpNodes.delete(i)},this.mountUserProfile=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountUserProfile(i,o):this.premountUserProfileNodes.set(i,o)},this.unmountUserProfile=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountUserProfile(i):this.premountUserProfileNodes.delete(i)},this.mountOrganizationProfile=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountOrganizationProfile(i,o):this.premountOrganizationProfileNodes.set(i,o)},this.unmountOrganizationProfile=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountOrganizationProfile(i):this.premountOrganizationProfileNodes.delete(i)},this.mountCreateOrganization=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountCreateOrganization(i,o):this.premountCreateOrganizationNodes.set(i,o)},this.unmountCreateOrganization=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountCreateOrganization(i):this.premountCreateOrganizationNodes.delete(i)},this.mountOrganizationSwitcher=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountOrganizationSwitcher(i,o):this.premountOrganizationSwitcherNodes.set(i,o)},this.unmountOrganizationSwitcher=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountOrganizationSwitcher(i):this.premountOrganizationSwitcherNodes.delete(i)},this.mountOrganizationList=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountOrganizationList(i,o):this.premountOrganizationListNodes.set(i,o)},this.unmountOrganizationList=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountOrganizationList(i):this.premountOrganizationListNodes.delete(i)},this.mountUserButton=(i,o)=>{this.clerkjs&&le(this,pe)?this.clerkjs.mountUserButton(i,o):this.premountUserButtonNodes.set(i,o)},this.unmountUserButton=i=>{this.clerkjs&&le(this,pe)?this.clerkjs.unmountUserButton(i):this.premountUserButtonNodes.delete(i)},this.addListener=i=>{if(this.clerkjs)return this.clerkjs.addListener(i);{const o=()=>{var s;const l=this.premountAddListenerCalls.get(i);l&&((s=l.nativeUnsubscribe)==null||s.call(l),this.premountAddListenerCalls.delete(i))};return this.premountAddListenerCalls.set(i,{unsubscribe:o,nativeUnsubscribe:void 0}),o}},this.navigate=i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.navigate(i)};this.clerkjs&&le(this,pe)?o():this.premountMethodCalls.set("navigate",o)},this.redirectWithAuth=async(...i)=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.redirectWithAuth(...i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("redirectWithAuth",o)},this.redirectToSignIn=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.redirectToSignIn(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("redirectToSignIn",o)},this.redirectToSignUp=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.redirectToSignUp(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("redirectToSignUp",o)},this.redirectToUserProfile=async()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToUserProfile()};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("redirectToUserProfile",i)},this.redirectToAfterSignUp=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToAfterSignUp()};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("redirectToAfterSignUp",i)},this.redirectToAfterSignIn=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToAfterSignIn()};this.clerkjs&&le(this,pe)?i():this.premountMethodCalls.set("redirectToAfterSignIn",i)},this.redirectToAfterSignOut=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToAfterSignOut()};this.clerkjs&&le(this,pe)?i():this.premountMethodCalls.set("redirectToAfterSignOut",i)},this.redirectToOrganizationProfile=async()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToOrganizationProfile()};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("redirectToOrganizationProfile",i)},this.redirectToCreateOrganization=async()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToCreateOrganization()};if(this.clerkjs&&le(this,pe))return i();this.premountMethodCalls.set("redirectToCreateOrganization",i)},this.handleRedirectCallback=i=>{var o;const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.handleRedirectCallback(i)};this.clerkjs&&le(this,pe)?(o=s())==null||o.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",s)},this.handleGoogleOneTapCallback=(i,o)=>{var s;const l=()=>{var u;return(u=this.clerkjs)==null?void 0:u.handleGoogleOneTapCallback(i,o)};this.clerkjs&&le(this,pe)?(s=l())==null||s.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",l)},this.handleEmailLinkVerification=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.handleEmailLinkVerification(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("handleEmailLinkVerification",o)},this.authenticateWithMetamask=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.authenticateWithMetamask(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("authenticateWithMetamask",o)},this.authenticateWithCoinbaseWallet=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.authenticateWithCoinbaseWallet(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",o)},this.authenticateWithWeb3=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.authenticateWithWeb3(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("authenticateWithWeb3",o)},this.authenticateWithGoogleOneTap=async i=>(await nC(this,yf,zv).call(this)).authenticateWithGoogleOneTap(i),this.createOrganization=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.createOrganization(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("createOrganization",o)},this.getOrganization=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.getOrganization(i)};if(this.clerkjs&&le(this,pe))return o();this.premountMethodCalls.set("getOrganization",o)},this.signOut=async(i,o)=>{const s=()=>{var l;return(l=this.clerkjs)==null?void 0:l.signOut(i,o)};if(this.clerkjs&&le(this,pe))return s();this.premountMethodCalls.set("signOut",s)};const{Clerk:n=null,publishableKey:r}=t||{};Da(this,Ms,r),Da(this,$a,t?.proxyUrl),Da(this,Va,t?.domain),this.options=t,this.Clerk=n,this.mode=oC()?"browser":"server",this.options.sdkMetadata||(this.options.sdkMetadata=H9),this.loadClerkJS()}get publishableKey(){return le(this,Ms)}get loaded(){return le(this,pe)}static getOrCreateInstance(t){return(!oC()||!le(this,Ls)||t.Clerk&&le(this,Ls).Clerk!==t.Clerk)&&Da(this,Ls,new rP(t)),le(this,Ls)}static clearInstance(){Da(this,Ls,null)}get domain(){return typeof window<"u"&&window.location?hg(le(this,Va),new URL(window.location.href),""):typeof le(this,Va)=="function"?Fi.throw(fg):le(this,Va)||""}get proxyUrl(){return typeof window<"u"&&window.location?hg(le(this,$a),new URL(window.location.href),""):typeof le(this,$a)=="function"?Fi.throw(fg):le(this,$a)||""}get sdkMetadata(){var t;return((t=this.clerkjs)==null?void 0:t.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var t;return(t=this.clerkjs)==null?void 0:t.instanceType}get frontendApi(){var t;return((t=this.clerkjs)==null?void 0:t.frontendApi)||""}get isStandardBrowser(){var t;return((t=this.clerkjs)==null?void 0:t.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return typeof window<"u"&&window.location?hg(this.options.isSatellite,new URL(window.location.href),!1):typeof this.options.isSatellite=="function"?Fi.throw(fg):!1}async loadClerkJS(){var t;if(!(this.mode!=="browser"||le(this,pe))){typeof window<"u"&&(window.__clerk_publishable_key=le(this,Ms),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let n;L9(this.Clerk)?(n=new this.Clerk(le(this,Ms),{proxyUrl:this.proxyUrl,domain:this.domain}),await n.load(this.options)):(n=this.Clerk,n.loaded||await n.load(this.options)),global.Clerk=n}else{if(global.Clerk||await x9({...this.options,publishableKey:le(this,Ms),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");await global.Clerk.load(this.options)}return(t=global.Clerk)!=null&&t.loaded?this.hydrateClerkJS(global.Clerk):void 0}catch(n){const r=n;console.error(r.stack||r.message||r);return}}}get version(){var t;return(t=this.clerkjs)==null?void 0:t.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get telemetry(){if(this.clerkjs)return this.clerkjs.telemetry}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}__unstable__setEnvironment(...t){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(t);else return}};pe=new WeakMap;Va=new WeakMap;$a=new WeakMap;Ms=new WeakMap;Ls=new WeakMap;yf=new WeakSet;zv=function(){return new Promise(e=>{this.addOnLoaded(()=>e(this.clerkjs))})};Ba(nP,Ls);var cC=nP,G9=(e,t,n)=>!e&&n?q9(n):K9(t),q9=e=>{const t=e.userId,n=e.user,r=e.sessionId,i=e.session,o=e.organization,s=e.orgId,l=e.orgRole,u=e.orgPermissions,d=e.orgSlug,h=e.actor,p=e.__experimental_factorVerificationAge;return{userId:t,user:n,sessionId:r,session:i,organization:o,orgId:s,orgRole:l,orgPermissions:u,orgSlug:d,actor:h,__experimental_factorVerificationAge:p}},K9=e=>{var t;const n=e.user?e.user.id:e.user,r=e.user,i=e.session?e.session.id:e.session,o=e.session,s=e.session?e.session.__experimental_factorVerificationAge:null,l=o?.actor,u=e.organization,d=e.organization?e.organization.id:e.organization,h=u?.slug,p=u&&((t=r?.organizationMemberships)==null?void 0:t.find(S=>S.organization.id===d)),m=p&&p.permissions,y=p&&p.role;return{userId:n,user:r,sessionId:i,session:o,organization:u,orgId:d,orgRole:y,orgSlug:h,orgPermissions:m,actor:l,__experimental_factorVerificationAge:s}};function J9(e){const{isomorphicClerkOptions:t,initialState:n,children:r}=e,{isomorphicClerk:i,loaded:o}=Q9(t),[s,l]=re.useState({client:i.client,session:i.session,user:i.user,organization:i.organization});re.useEffect(()=>i.addListener(j=>l({...j})),[]);const u=G9(o,s,n),d=re.useMemo(()=>({value:i}),[o]),h=re.useMemo(()=>({value:s.client}),[s.client]),{sessionId:p,session:m,userId:y,user:S,orgId:k,actor:P,organization:v,orgRole:w,orgSlug:x,orgPermissions:_,__experimental_factorVerificationAge:I}=u,M=re.useMemo(()=>({value:{sessionId:p,userId:y,actor:P,orgId:k,orgRole:w,orgSlug:x,orgPermissions:_,__experimental_factorVerificationAge:I}}),[p,y,P,k,w,x,I]),U=re.useMemo(()=>({value:m}),[p,m]),T=re.useMemo(()=>({value:S}),[y,S]),B=re.useMemo(()=>({value:{organization:v}}),[k,v]);return re.createElement(K4.Provider,{value:d},re.createElement(U4.Provider,{value:h},re.createElement(F4.Provider,{value:U},re.createElement(z4,{...B.value},re.createElement(q4.Provider,{value:M},re.createElement(D4.Provider,{value:T},r))))))}var Q9=e=>{const[t,n]=re.useState(!1),r=re.useMemo(()=>cC.getOrCreateInstance(e),[]);return re.useEffect(()=>{r.__unstable__updateProps({appearance:e.appearance})},[e.appearance]),re.useEffect(()=>{r.__unstable__updateProps({options:e})},[e.localization]),re.useEffect(()=>{r.addOnLoaded(()=>n(!0))},[]),re.useEffect(()=>()=>{cC.clearInstance()},[]),{isomorphicClerk:r,loaded:t}};function Y9(e){const{initialState:t,children:n,...r}=e,{publishableKey:i="",Clerk:o}=r;return o||(i?i&&!W_(i)&&Fi.throwInvalidPublishableKeyError({key:i}):Fi.throwMissingPublishableKeyError()),re.createElement(J9,{initialState:t,isomorphicClerkOptions:r},n)}var iP=D9(Y9,"ClerkProvider",J4);iP.displayName="ClerkProvider";G4({packageName:"@clerk/clerk-react"});P9("@clerk/clerk-react");/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(this,arguments)}var Jt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jt||(Jt={}));const uC="popstate";function X9(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:s,hash:l}=r.location;return ku("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Zs(i)}return e6(t,n,null,e)}function Ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Il(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z9(){return Math.random().toString(36).substr(2,8)}function dC(e,t){return{usr:e.state,key:e.key,idx:t}}function ku(e,t,n,r){return n===void 0&&(n=null),jt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ko(t):t,{state:n,key:t&&t.key||r||Z9()})}function Zs(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ko(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function e6(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=Jt.Pop,u=null,d=h();d==null&&(d=0,s.replaceState(jt({},s.state,{idx:d}),""));function h(){return(s.state||{idx:null}).idx}function p(){l=Jt.Pop;let P=h(),v=P==null?null:P-d;d=P,u&&u({action:l,location:k.location,delta:v})}function m(P,v){l=Jt.Push;let w=ku(k.location,P,v);n&&n(w,P),d=h()+1;let x=dC(w,d),_=k.createHref(w);try{s.pushState(x,"",_)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(_)}o&&u&&u({action:l,location:k.location,delta:1})}function y(P,v){l=Jt.Replace;let w=ku(k.location,P,v);n&&n(w,P),d=h();let x=dC(w,d),_=k.createHref(w);s.replaceState(x,"",_),o&&u&&u({action:l,location:k.location,delta:0})}function S(P){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof P=="string"?P:Zs(P);return w=w.replace(/ $/,"%20"),Ge(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let k={get action(){return l},get location(){return e(i,s)},listen(P){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(uC,p),u=P,()=>{i.removeEventListener(uC,p),u=null}},createHref(P){return t(i,P)},createURL:S,encodeLocation(P){let v=S(P);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(P){return s.go(P)}};return k}var ht;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ht||(ht={}));const t6=new Set(["lazy","caseSensitive","path","id","index","children"]);function n6(e){return e.index===!0}function Su(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,o)=>{let s=[...n,String(o)],l=typeof i.id=="string"?i.id:s.join("-");if(Ge(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ge(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),n6(i)){let u=jt({},i,t(i),{id:l});return r[l]=u,u}else{let u=jt({},i,t(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=Su(i.children,t,s,r)),u}})}function As(e,t,n){return n===void 0&&(n="/"),bf(e,t,n,!1)}function bf(e,t,n,r){let i=typeof t=="string"?ko(t):t,o=zl(i.pathname||"/",n);if(o==null)return null;let s=oP(e);i6(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let d=m6(o);l=h6(s[u],d,r)}return l}function r6(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function oP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(Ge(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=ao([r,u.relativePath]),h=n.concat(u);o.children&&o.children.length>0&&(Ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),oP(o.children,t,h,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:d6(d,o.index),routesMeta:h})};return e.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let u of sP(o.path))i(o,s,u)}),t}function sP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=sP(r.join("/")),l=[];return l.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&l.push(...s),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function i6(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:f6(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const o6=/^:[\w-]+$/,s6=3,a6=2,l6=1,c6=10,u6=-2,fC=e=>e==="*";function d6(e,t){let n=e.split("/"),r=n.length;return n.some(fC)&&(r+=u6),t&&(r+=a6),n.filter(i=>!fC(i)).reduce((i,o)=>i+(o6.test(o)?s6:o===""?l6:c6),r)}function f6(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function h6(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",p=hC({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=hC({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:ao([o,p.pathname]),pathnameBase:y6(ao([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=ao([o,p.pathnameBase]))}return s}function hC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=p6(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let k=l[p]||"";s=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const S=l[p];return y&&!S?d[m]=void 0:d[m]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:s,pattern:e}}function p6(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Il(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function m6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Il(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function g6(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ko(e):e;return{pathname:n?n.startsWith("/")?n:v6(n,t):t,search:b6(r),hash:k6(i)}}function v6(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function yg(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ly(e,t){let n=aP(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ay(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ko(e):(i=jt({},e),Ge(!i.pathname||!i.pathname.includes("?"),yg("?","pathname","search",i)),Ge(!i.pathname||!i.pathname.includes("#"),yg("#","pathname","hash",i)),Ge(!i.search||!i.search.includes("#"),yg("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let p=t.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?t[p]:"/"}let u=g6(i,l),d=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const ao=e=>e.join("/").replace(/\/\/+/g,"/"),y6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),b6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,k6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class ah{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Qh(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lP=["post","put","patch","delete"],S6=new Set(lP),C6=["get",...lP],w6=new Set(C6),T6=new Set([301,302,303,307,308]),E6=new Set([307,308]),bg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Dy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P6=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),cP="remix-router-transitions";function x6(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;Ge(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let L=e.detectErrorBoundary;i=N=>({hasErrorBoundary:L(N)})}else i=P6;let o={},s=Su(e.routes,i,void 0,o),l,u=e.basename||"/",d=e.unstable_dataStrategy||A6,h=e.unstable_patchRoutesOnNavigation,p=jt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),m=null,y=new Set,S=1e3,k=new Set,P=null,v=null,w=null,x=e.hydrationData!=null,_=As(s,e.history.location,u),I=null;if(_==null&&!h){let L=$n(404,{pathname:e.history.location.pathname}),{matches:N,route:V}=CC(s);_=N,I={[V.id]:L}}_&&!e.hydrationData&&ga(_,s,e.history.location.pathname).active&&(_=null);let M;if(_)if(_.some(L=>L.route.lazy))M=!1;else if(!_.some(L=>L.route.loader))M=!0;else if(p.v7_partialHydration){let L=e.hydrationData?e.hydrationData.loaderData:null,N=e.hydrationData?e.hydrationData.errors:null,V=ee=>ee.route.loader?typeof ee.route.loader=="function"&&ee.route.loader.hydrate===!0?!1:L&&L[ee.route.id]!==void 0||N&&N[ee.route.id]!==void 0:!0;if(N){let ee=_.findIndex(fe=>N[fe.route.id]!==void 0);M=_.slice(0,ee+1).every(V)}else M=_.every(V)}else M=e.hydrationData!=null;else if(M=!1,_=[],p.v7_partialHydration){let L=ga(null,s,e.history.location.pathname);L.active&&L.matches&&(_=L.matches)}let U,T={historyAction:e.history.action,location:e.history.location,matches:_,initialized:M,navigation:bg,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||I,fetchers:new Map,blockers:new Map},B=Jt.Pop,j=!1,$,K=!1,ve=new Map,me=null,nt=!1,Je=!1,Ne=[],te=new Set,se=new Map,Ee=0,ke=-1,xe=new Map,ze=new Set,Et=new Map,mt=new Map,lt=new Set,Xt=new Map,gn=new Map,Zr=new Map,fn;function xr(){if(m=e.history.listen(L=>{let{action:N,location:V,delta:ee}=L;if(fn){fn(),fn=void 0;return}Il(gn.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fe=Wl({currentLocation:T.location,nextLocation:V,historyAction:N});if(fe&&ee!=null){let _e=new Promise(De=>{fn=De});e.history.go(ee*-1),ys(fe,{state:"blocked",location:V,proceed(){ys(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),_e.then(()=>e.history.go(ee))},reset(){let De=new Map(T.blockers);De.set(fe,bc),ye({blockers:De})}});return}return Ue(N,V)}),n){J6(t,ve);let L=()=>Q6(t,ve);t.addEventListener("pagehide",L),me=()=>t.removeEventListener("pagehide",L)}return T.initialized||Ue(Jt.Pop,T.location,{initialHydration:!0}),U}function Te(){m&&m(),me&&me(),y.clear(),$&&$.abort(),T.fetchers.forEach((L,N)=>Eo(N)),T.blockers.forEach((L,N)=>zu(N))}function Re(L){return y.add(L),()=>y.delete(L)}function ye(L,N){N===void 0&&(N={}),T=jt({},T,L);let V=[],ee=[];p.v7_fetcherPersist&&T.fetchers.forEach((fe,_e)=>{fe.state==="idle"&&(lt.has(_e)?ee.push(_e):V.push(_e))}),[...y].forEach(fe=>fe(T,{deletedFetchers:ee,unstable_viewTransitionOpts:N.viewTransitionOpts,unstable_flushSync:N.flushSync===!0})),p.v7_fetcherPersist&&(V.forEach(fe=>T.fetchers.delete(fe)),ee.forEach(fe=>Eo(fe)))}function Ie(L,N,V){var ee,fe;let{flushSync:_e}=V===void 0?{}:V,De=T.actionData!=null&&T.navigation.formMethod!=null&&di(T.navigation.formMethod)&&T.navigation.state==="loading"&&((ee=L.state)==null?void 0:ee._isRedirect)!==!0,ae;N.actionData?Object.keys(N.actionData).length>0?ae=N.actionData:ae=null:De?ae=T.actionData:ae=null;let Oe=N.loaderData?kC(T.loaderData,N.loaderData,N.matches||[],N.errors):T.loaderData,be=T.blockers;be.size>0&&(be=new Map(be),be.forEach((st,yt)=>be.set(yt,bc)));let Se=j===!0||T.navigation.formMethod!=null&&di(T.navigation.formMethod)&&((fe=L.state)==null?void 0:fe._isRedirect)!==!0;l&&(s=l,l=void 0),nt||B===Jt.Pop||(B===Jt.Push?e.history.push(L,L.state):B===Jt.Replace&&e.history.replace(L,L.state));let rt;if(B===Jt.Pop){let st=ve.get(T.location.pathname);st&&st.has(L.pathname)?rt={currentLocation:T.location,nextLocation:L}:ve.has(L.pathname)&&(rt={currentLocation:L,nextLocation:T.location})}else if(K){let st=ve.get(T.location.pathname);st?st.add(L.pathname):(st=new Set([L.pathname]),ve.set(T.location.pathname,st)),rt={currentLocation:T.location,nextLocation:L}}ye(jt({},N,{actionData:ae,loaderData:Oe,historyAction:B,location:L,initialized:!0,navigation:bg,revalidation:"idle",restoreScrollPosition:Bu(L,N.matches||T.matches),preventScrollReset:Se,blockers:be}),{viewTransitionOpts:rt,flushSync:_e===!0}),B=Jt.Pop,j=!1,K=!1,nt=!1,Je=!1,Ne=[]}async function St(L,N){if(typeof L=="number"){e.history.go(L);return}let V=Bv(T.location,T.matches,u,p.v7_prependBasename,L,p.v7_relativeSplatPath,N?.fromRouteId,N?.relative),{path:ee,submission:fe,error:_e}=pC(p.v7_normalizeFormMethod,!1,V,N),De=T.location,ae=ku(T.location,ee,N&&N.state);ae=jt({},ae,e.history.encodeLocation(ae));let Oe=N&&N.replace!=null?N.replace:void 0,be=Jt.Push;Oe===!0?be=Jt.Replace:Oe===!1||fe!=null&&di(fe.formMethod)&&fe.formAction===T.location.pathname+T.location.search&&(be=Jt.Replace);let Se=N&&"preventScrollReset"in N?N.preventScrollReset===!0:void 0,rt=(N&&N.unstable_flushSync)===!0,st=Wl({currentLocation:De,nextLocation:ae,historyAction:be});if(st){ys(st,{state:"blocked",location:ae,proceed(){ys(st,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),St(L,N)},reset(){let yt=new Map(T.blockers);yt.set(st,bc),ye({blockers:yt})}});return}return await Ue(be,ae,{submission:fe,pendingError:_e,preventScrollReset:Se,replace:N&&N.replace,enableViewTransition:N&&N.unstable_viewTransition,flushSync:rt})}function _t(){if(vs(),ye({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){Ue(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}Ue(B||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:K===!0})}}async function Ue(L,N,V){$&&$.abort(),$=null,B=L,nt=(V&&V.startUninterruptedRevalidation)===!0,wp(T.location,T.matches),j=(V&&V.preventScrollReset)===!0,K=(V&&V.enableViewTransition)===!0;let ee=l||s,fe=V&&V.overrideNavigation,_e=As(ee,N,u),De=(V&&V.flushSync)===!0,ae=ga(_e,ee,N.pathname);if(ae.active&&ae.matches&&(_e=ae.matches),!_e){let{error:He,notFoundMatches:en,route:Pt}=Hl(N.pathname);Ie(N,{matches:en,loaderData:{},errors:{[Pt.id]:He}},{flushSync:De});return}if(T.initialized&&!Je&&z6(T.location,N)&&!(V&&V.submission&&di(V.submission.formMethod))){Ie(N,{matches:_e},{flushSync:De});return}$=new AbortController;let Oe=Ua(e.history,N,$.signal,V&&V.submission),be;if(V&&V.pendingError)be=[rl(_e).route.id,{type:ht.error,error:V.pendingError}];else if(V&&V.submission&&di(V.submission.formMethod)){let He=await Ze(Oe,N,V.submission,_e,ae.active,{replace:V.replace,flushSync:De});if(He.shortCircuited)return;if(He.pendingActionResult){let[en,Pt]=He.pendingActionResult;if(vr(Pt)&&Qh(Pt.error)&&Pt.error.status===404){$=null,Ie(N,{matches:He.matches,loaderData:{},errors:{[en]:Pt.error}});return}}_e=He.matches||_e,be=He.pendingActionResult,fe=kg(N,V.submission),De=!1,ae.active=!1,Oe=Ua(e.history,Oe.url,Oe.signal)}let{shortCircuited:Se,matches:rt,loaderData:st,errors:yt}=await gt(Oe,N,_e,ae.active,fe,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,V&&V.initialHydration===!0,De,be);Se||($=null,Ie(N,jt({matches:rt||_e},SC(be),{loaderData:st,errors:yt})))}async function Ze(L,N,V,ee,fe,_e){_e===void 0&&(_e={}),vs();let De=q6(N,V);if(ye({navigation:De},{flushSync:_e.flushSync===!0}),fe){let be=await _o(ee,N.pathname,L.signal);if(be.type==="aborted")return{shortCircuited:!0};if(be.type==="error"){let{boundaryId:Se,error:rt}=ma(N.pathname,be);return{matches:be.partialMatches,pendingActionResult:[Se,{type:ht.error,error:rt}]}}else if(be.matches)ee=be.matches;else{let{notFoundMatches:Se,error:rt,route:st}=Hl(N.pathname);return{matches:Se,pendingActionResult:[st.id,{type:ht.error,error:rt}]}}}let ae,Oe=Ac(ee,N);if(!Oe.route.action&&!Oe.route.lazy)ae={type:ht.error,error:$n(405,{method:L.method,pathname:N.pathname,routeId:Oe.route.id})};else if(ae=(await jn("action",T,L,[Oe],ee,null))[Oe.route.id],L.signal.aborted)return{shortCircuited:!0};if(Fs(ae)){let be;return _e&&_e.replace!=null?be=_e.replace:be=vC(ae.response.headers.get("Location"),new URL(L.url),u)===T.location.pathname+T.location.search,await vn(L,ae,!0,{submission:V,replace:be}),{shortCircuited:!0}}if(Jo(ae))throw $n(400,{type:"defer-action"});if(vr(ae)){let be=rl(ee,Oe.route.id);return(_e&&_e.replace)!==!0&&(B=Jt.Push),{matches:ee,pendingActionResult:[be.route.id,ae]}}return{matches:ee,pendingActionResult:[Oe.route.id,ae]}}async function gt(L,N,V,ee,fe,_e,De,ae,Oe,be,Se){let rt=fe||kg(N,_e),st=_e||De||TC(rt),yt=!nt&&(!p.v7_partialHydration||!Oe);if(ee){if(yt){let xt=Zt(Se);ye(jt({navigation:rt},xt!==void 0?{actionData:xt}:{}),{flushSync:be})}let Be=await _o(V,N.pathname,L.signal);if(Be.type==="aborted")return{shortCircuited:!0};if(Be.type==="error"){let{boundaryId:xt,error:Rn}=ma(N.pathname,Be);return{matches:Be.partialMatches,loaderData:{},errors:{[xt]:Rn}}}else if(Be.matches)V=Be.matches;else{let{error:xt,notFoundMatches:Rn,route:Rt}=Hl(N.pathname);return{matches:Rn,loaderData:{},errors:{[Rt.id]:xt}}}}let He=l||s,[en,Pt]=mC(e.history,T,V,st,N,p.v7_partialHydration&&Oe===!0,p.v7_skipActionErrorRevalidation,Je,Ne,te,lt,Et,ze,He,u,Se);if(Gl(Be=>!(V&&V.some(xt=>xt.route.id===Be))||en&&en.some(xt=>xt.route.id===Be)),ke=++Ee,en.length===0&&Pt.length===0){let Be=pa();return Ie(N,jt({matches:V,loaderData:{},errors:Se&&vr(Se[1])?{[Se[0]]:Se[1].error}:null},SC(Se),Be?{fetchers:new Map(T.fetchers)}:{}),{flushSync:be}),{shortCircuited:!0}}if(yt){let Be={};if(!ee){Be.navigation=rt;let xt=Zt(Se);xt!==void 0&&(Be.actionData=xt)}Pt.length>0&&(Be.fetchers=ar(Pt)),ye(Be,{flushSync:be})}Pt.forEach(Be=>{se.has(Be.key)&&Or(Be.key),Be.controller&&se.set(Be.key,Be.controller)});let bs=()=>Pt.forEach(Be=>Or(Be.key));$&&$.signal.addEventListener("abort",bs);let{loaderResults:ei,fetcherResults:Po}=await yn(T,V,en,Pt,L);if(L.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",bs),Pt.forEach(Be=>se.delete(Be.key));let ti=Yd(ei);if(ti)return await vn(L,ti.result,!0,{replace:ae}),{shortCircuited:!0};if(ti=Yd(Po),ti)return ze.add(ti.key),await vn(L,ti.result,!0,{replace:ae}),{shortCircuited:!0};let{loaderData:ks,errors:Mr}=bC(T,V,en,ei,Se,Pt,Po,Xt);Xt.forEach((Be,xt)=>{Be.subscribe(Rn=>{(Rn||Be.done)&&Xt.delete(xt)})}),p.v7_partialHydration&&Oe&&T.errors&&Object.entries(T.errors).filter(Be=>{let[xt]=Be;return!en.some(Rn=>Rn.route.id===xt)}).forEach(Be=>{let[xt,Rn]=Be;Mr=Object.assign(Mr||{},{[xt]:Rn})});let va=pa(),ya=ju(ke),ba=va||ya||Pt.length>0;return jt({matches:V,loaderData:ks,errors:Mr},ba?{fetchers:new Map(T.fetchers)}:{})}function Zt(L){if(L&&!vr(L[1]))return{[L[0]]:L[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function ar(L){return L.forEach(N=>{let V=T.fetchers.get(N.key),ee=kc(void 0,V?V.data:void 0);T.fetchers.set(N.key,ee)}),new Map(T.fetchers)}function Rr(L,N,V,ee){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");se.has(L)&&Or(L);let fe=(ee&&ee.unstable_flushSync)===!0,_e=l||s,De=Bv(T.location,T.matches,u,p.v7_prependBasename,V,p.v7_relativeSplatPath,N,ee?.relative),ae=As(_e,De,u),Oe=ga(ae,_e,De);if(Oe.active&&Oe.matches&&(ae=Oe.matches),!ae){lr(L,N,$n(404,{pathname:De}),{flushSync:fe});return}let{path:be,submission:Se,error:rt}=pC(p.v7_normalizeFormMethod,!0,De,ee);if(rt){lr(L,N,rt,{flushSync:fe});return}let st=Ac(ae,be);if(j=(ee&&ee.preventScrollReset)===!0,Se&&di(Se.formMethod)){ut(L,N,be,st,ae,Oe.active,fe,Se);return}Et.set(L,{routeId:N,path:be}),vt(L,N,be,st,ae,Oe.active,fe,Se)}async function ut(L,N,V,ee,fe,_e,De,ae){vs(),Et.delete(L);function Oe(Rt){if(!Rt.route.action&&!Rt.route.lazy){let cr=$n(405,{method:ae.formMethod,pathname:V,routeId:N});return lr(L,N,cr,{flushSync:De}),!0}return!1}if(!_e&&Oe(ee))return;let be=T.fetchers.get(L);Ir(L,K6(ae,be),{flushSync:De});let Se=new AbortController,rt=Ua(e.history,V,Se.signal,ae);if(_e){let Rt=await _o(fe,V,rt.signal);if(Rt.type==="aborted")return;if(Rt.type==="error"){let{error:cr}=ma(V,Rt);lr(L,N,cr,{flushSync:De});return}else if(Rt.matches){if(fe=Rt.matches,ee=Ac(fe,V),Oe(ee))return}else{lr(L,N,$n(404,{pathname:V}),{flushSync:De});return}}se.set(L,Se);let st=Ee,He=(await jn("action",T,rt,[ee],fe,L))[ee.route.id];if(rt.signal.aborted){se.get(L)===Se&&se.delete(L);return}if(p.v7_fetcherPersist&&lt.has(L)){if(Fs(He)||vr(He)){Ir(L,zo(void 0));return}}else{if(Fs(He))if(se.delete(L),ke>st){Ir(L,zo(void 0));return}else return ze.add(L),Ir(L,kc(ae)),vn(rt,He,!1,{fetcherSubmission:ae});if(vr(He)){lr(L,N,He.error);return}}if(Jo(He))throw $n(400,{type:"defer-action"});let en=T.navigation.location||T.location,Pt=Ua(e.history,en,Se.signal),bs=l||s,ei=T.navigation.state!=="idle"?As(bs,T.navigation.location,u):T.matches;Ge(ei,"Didn't find any matches after fetcher action");let Po=++Ee;xe.set(L,Po);let ti=kc(ae,He.data);T.fetchers.set(L,ti);let[ks,Mr]=mC(e.history,T,ei,ae,en,!1,p.v7_skipActionErrorRevalidation,Je,Ne,te,lt,Et,ze,bs,u,[ee.route.id,He]);Mr.filter(Rt=>Rt.key!==L).forEach(Rt=>{let cr=Rt.key,$u=T.fetchers.get(cr),Wu=kc(void 0,$u?$u.data:void 0);T.fetchers.set(cr,Wu),se.has(cr)&&Or(cr),Rt.controller&&se.set(cr,Rt.controller)}),ye({fetchers:new Map(T.fetchers)});let va=()=>Mr.forEach(Rt=>Or(Rt.key));Se.signal.addEventListener("abort",va);let{loaderResults:ya,fetcherResults:ba}=await yn(T,ei,ks,Mr,Pt);if(Se.signal.aborted)return;Se.signal.removeEventListener("abort",va),xe.delete(L),se.delete(L),Mr.forEach(Rt=>se.delete(Rt.key));let Be=Yd(ya);if(Be)return vn(Pt,Be.result,!1);if(Be=Yd(ba),Be)return ze.add(Be.key),vn(Pt,Be.result,!1);let{loaderData:xt,errors:Rn}=bC(T,ei,ks,ya,void 0,Mr,ba,Xt);if(T.fetchers.has(L)){let Rt=zo(He.data);T.fetchers.set(L,Rt)}ju(Po),T.navigation.state==="loading"&&Po>ke?(Ge(B,"Expected pending action"),$&&$.abort(),Ie(T.navigation.location,{matches:ei,loaderData:xt,errors:Rn,fetchers:new Map(T.fetchers)})):(ye({errors:Rn,loaderData:kC(T.loaderData,xt,ei,Rn),fetchers:new Map(T.fetchers)}),Je=!1)}async function vt(L,N,V,ee,fe,_e,De,ae){let Oe=T.fetchers.get(L);Ir(L,kc(ae,Oe?Oe.data:void 0),{flushSync:De});let be=new AbortController,Se=Ua(e.history,V,be.signal);if(_e){let He=await _o(fe,V,Se.signal);if(He.type==="aborted")return;if(He.type==="error"){let{error:en}=ma(V,He);lr(L,N,en,{flushSync:De});return}else if(He.matches)fe=He.matches,ee=Ac(fe,V);else{lr(L,N,$n(404,{pathname:V}),{flushSync:De});return}}se.set(L,be);let rt=Ee,yt=(await jn("loader",T,Se,[ee],fe,L))[ee.route.id];if(Jo(yt)&&(yt=await Ny(yt,Se.signal,!0)||yt),se.get(L)===be&&se.delete(L),!Se.signal.aborted){if(lt.has(L)){Ir(L,zo(void 0));return}if(Fs(yt))if(ke>rt){Ir(L,zo(void 0));return}else{ze.add(L),await vn(Se,yt,!1);return}if(vr(yt)){lr(L,N,yt.error);return}Ge(!Jo(yt),"Unhandled fetcher deferred data"),Ir(L,zo(yt.data))}}async function vn(L,N,V,ee){let{submission:fe,fetcherSubmission:_e,replace:De}=ee===void 0?{}:ee;N.response.headers.has("X-Remix-Revalidate")&&(Je=!0);let ae=N.response.headers.get("Location");Ge(ae,"Expected a Location header on the redirect Response"),ae=vC(ae,new URL(L.url),u);let Oe=ku(T.location,ae,{_isRedirect:!0});if(n){let He=!1;if(N.response.headers.has("X-Remix-Reload-Document"))He=!0;else if(Dy.test(ae)){const en=e.history.createURL(ae);He=en.origin!==t.location.origin||zl(en.pathname,u)==null}if(He){De?t.location.replace(ae):t.location.assign(ae);return}}$=null;let be=De===!0||N.response.headers.has("X-Remix-Replace")?Jt.Replace:Jt.Push,{formMethod:Se,formAction:rt,formEncType:st}=T.navigation;!fe&&!_e&&Se&&rt&&st&&(fe=TC(T.navigation));let yt=fe||_e;if(E6.has(N.response.status)&&yt&&di(yt.formMethod))await Ue(be,Oe,{submission:jt({},yt,{formAction:ae}),preventScrollReset:j,enableViewTransition:V?K:void 0});else{let He=kg(Oe,fe);await Ue(be,Oe,{overrideNavigation:He,fetcherSubmission:_e,preventScrollReset:j,enableViewTransition:V?K:void 0})}}async function jn(L,N,V,ee,fe,_e){let De,ae={};try{De=await D6(d,L,N,V,ee,fe,_e,o,i)}catch(Oe){return ee.forEach(be=>{ae[be.route.id]={type:ht.error,error:Oe}}),ae}for(let[Oe,be]of Object.entries(De))if(V6(be)){let Se=be.result;ae[Oe]={type:ht.redirect,response:F6(Se,V,Oe,fe,u,p.v7_relativeSplatPath)}}else ae[Oe]=await U6(be);return ae}async function yn(L,N,V,ee,fe){let _e=L.matches,De=jn("loader",L,fe,V,N,null),ae=Promise.all(ee.map(async Se=>{if(Se.matches&&Se.match&&Se.controller){let st=(await jn("loader",L,Ua(e.history,Se.path,Se.controller.signal),[Se.match],Se.matches,Se.key))[Se.match.route.id];return{[Se.key]:st}}else return Promise.resolve({[Se.key]:{type:ht.error,error:$n(404,{pathname:Se.path})}})})),Oe=await De,be=(await ae).reduce((Se,rt)=>Object.assign(Se,rt),{});return await Promise.all([H6(N,Oe,fe.signal,_e,L.loaderData),G6(N,be,ee)]),{loaderResults:Oe,fetcherResults:be}}function vs(){Je=!0,Ne.push(...Gl()),Et.forEach((L,N)=>{se.has(N)&&(te.add(N),Or(N))})}function Ir(L,N,V){V===void 0&&(V={}),T.fetchers.set(L,N),ye({fetchers:new Map(T.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function lr(L,N,V,ee){ee===void 0&&(ee={});let fe=rl(T.matches,N);Eo(L),ye({errors:{[fe.route.id]:V},fetchers:new Map(T.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function fa(L){return p.v7_fetcherPersist&&(mt.set(L,(mt.get(L)||0)+1),lt.has(L)&&lt.delete(L)),T.fetchers.get(L)||_6}function Eo(L){let N=T.fetchers.get(L);se.has(L)&&!(N&&N.state==="loading"&&xe.has(L))&&Or(L),Et.delete(L),xe.delete(L),ze.delete(L),lt.delete(L),te.delete(L),T.fetchers.delete(L)}function $l(L){if(p.v7_fetcherPersist){let N=(mt.get(L)||0)-1;N<=0?(mt.delete(L),lt.add(L)):mt.set(L,N)}else Eo(L);ye({fetchers:new Map(T.fetchers)})}function Or(L){let N=se.get(L);Ge(N,"Expected fetch controller: "+L),N.abort(),se.delete(L)}function ha(L){for(let N of L){let V=fa(N),ee=zo(V.data);T.fetchers.set(N,ee)}}function pa(){let L=[],N=!1;for(let V of ze){let ee=T.fetchers.get(V);Ge(ee,"Expected fetcher: "+V),ee.state==="loading"&&(ze.delete(V),L.push(V),N=!0)}return ha(L),N}function ju(L){let N=[];for(let[V,ee]of xe)if(ee<L){let fe=T.fetchers.get(V);Ge(fe,"Expected fetcher: "+V),fe.state==="loading"&&(Or(V),xe.delete(V),N.push(V))}return ha(N),N.length>0}function Sp(L,N){let V=T.blockers.get(L)||bc;return gn.get(L)!==N&&gn.set(L,N),V}function zu(L){T.blockers.delete(L),gn.delete(L)}function ys(L,N){let V=T.blockers.get(L)||bc;Ge(V.state==="unblocked"&&N.state==="blocked"||V.state==="blocked"&&N.state==="blocked"||V.state==="blocked"&&N.state==="proceeding"||V.state==="blocked"&&N.state==="unblocked"||V.state==="proceeding"&&N.state==="unblocked","Invalid blocker state transition: "+V.state+" -> "+N.state);let ee=new Map(T.blockers);ee.set(L,N),ye({blockers:ee})}function Wl(L){let{currentLocation:N,nextLocation:V,historyAction:ee}=L;if(gn.size===0)return;gn.size>1&&Il(!1,"A router only supports one blocker at a time");let fe=Array.from(gn.entries()),[_e,De]=fe[fe.length-1],ae=T.blockers.get(_e);if(!(ae&&ae.state==="proceeding")&&De({currentLocation:N,nextLocation:V,historyAction:ee}))return _e}function Hl(L){let N=$n(404,{pathname:L}),V=l||s,{matches:ee,route:fe}=CC(V);return Gl(),{notFoundMatches:ee,route:fe,error:N}}function ma(L,N){return{boundaryId:rl(N.partialMatches).route.id,error:$n(400,{type:"route-discovery",pathname:L,message:N.error!=null&&"message"in N.error?N.error:String(N.error)})}}function Gl(L){let N=[];return Xt.forEach((V,ee)=>{(!L||L(ee))&&(V.cancel(),N.push(ee),Xt.delete(ee))}),N}function Cp(L,N,V){if(P=L,w=N,v=V||null,!x&&T.navigation===bg){x=!0;let ee=Bu(T.location,T.matches);ee!=null&&ye({restoreScrollPosition:ee})}return()=>{P=null,w=null,v=null}}function ql(L,N){return v&&v(L,N.map(ee=>r6(ee,T.loaderData)))||L.key}function wp(L,N){if(P&&w){let V=ql(L,N);P[V]=w()}}function Bu(L,N){if(P){let V=ql(L,N),ee=P[V];if(typeof ee=="number")return ee}return null}function ga(L,N,V){if(h){if(k.has(V))return{active:!1,matches:L};if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:bf(N,V,u,!0)}}else return{active:!0,matches:bf(N,V,u,!0)||[]}}return{active:!1,matches:null}}async function _o(L,N,V){let ee=L;for(;;){let fe=l==null,_e=l||s;try{await M6(h,N,ee,_e,o,i,Zr,V)}catch(Oe){return{type:"error",error:Oe,partialMatches:ee}}finally{fe&&(s=[...s])}if(V.aborted)return{type:"aborted"};let De=As(_e,N,u);if(De)return Vu(N,k),{type:"success",matches:De};let ae=bf(_e,N,u,!0);if(!ae||ee.length===ae.length&&ee.every((Oe,be)=>Oe.route.id===ae[be].route.id))return Vu(N,k),{type:"success",matches:null};ee=ae}}function Vu(L,N){if(N.size>=S){let V=N.values().next().value;N.delete(V)}N.add(L)}function Kl(L){o={},l=Su(L,i,void 0,o)}function Tp(L,N){let V=l==null;dP(L,N,l||s,o,i),V&&(s=[...s],ye({}))}return U={get basename(){return u},get future(){return p},get state(){return T},get routes(){return s},get window(){return t},initialize:xr,subscribe:Re,enableScrollRestoration:Cp,navigate:St,fetch:Rr,revalidate:_t,createHref:L=>e.history.createHref(L),encodeLocation:L=>e.history.encodeLocation(L),getFetcher:fa,deleteFetcher:$l,dispose:Te,getBlocker:Sp,deleteBlocker:zu,patchRoutes:Tp,_internalFetchControllers:se,_internalActiveDeferreds:Xt,_internalSetRoutes:Kl},U}function R6(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Bv(e,t,n,r,i,o,s,l){let u,d;if(s){u=[];for(let p of t)if(u.push(p),p.route.id===s){d=p;break}}else u=t,d=t[t.length-1];let h=Ay(i||".",Ly(u,o),zl(e.pathname,n)||e.pathname,l==="path");return i==null&&(h.search=e.search,h.hash=e.hash),(i==null||i===""||i===".")&&d&&d.route.index&&!Uy(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:ao([n,h.pathname])),Zs(h)}function pC(e,t,n,r){if(!r||!R6(r))return{path:n};if(r.formMethod&&!W6(r.formMethod))return{path:n,error:$n(405,{method:r.formMethod})};let i=()=>({path:n,error:$n(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=e?o.toUpperCase():o.toLowerCase(),l=fP(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!di(s))return i();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,S)=>{let[k,P]=S;return""+y+k+"="+P+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!di(s))return i();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}Ge(typeof FormData=="function","FormData is not available in this environment");let u,d;if(r.formData)u=Vv(r.formData),d=r.formData;else if(r.body instanceof FormData)u=Vv(r.body),d=r.body;else if(r.body instanceof URLSearchParams)u=r.body,d=yC(u);else if(r.body==null)u=new URLSearchParams,d=new FormData;else try{u=new URLSearchParams(r.body),d=yC(u)}catch{return i()}let h={formMethod:s,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(di(h.formMethod))return{path:n,submission:h};let p=ko(n);return t&&p.search&&Uy(p.search)&&u.append("index",""),p.search="?"+u,{path:Zs(p),submission:h}}function I6(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function mC(e,t,n,r,i,o,s,l,u,d,h,p,m,y,S,k){let P=k?vr(k[1])?k[1].error:k[1].data:void 0,v=e.createURL(t.location),w=e.createURL(i),x=k&&vr(k[1])?k[0]:void 0,_=x?I6(n,x):n,I=k?k[1].statusCode:void 0,M=s&&I&&I>=400,U=_.filter((B,j)=>{let{route:$}=B;if($.lazy)return!0;if($.loader==null)return!1;if(o)return typeof $.loader!="function"||$.loader.hydrate?!0:t.loaderData[$.id]===void 0&&(!t.errors||t.errors[$.id]===void 0);if(O6(t.loaderData,t.matches[j],B)||u.some(me=>me===B.route.id))return!0;let K=t.matches[j],ve=B;return gC(B,jt({currentUrl:v,currentParams:K.params,nextUrl:w,nextParams:ve.params},r,{actionResult:P,actionStatus:I,defaultShouldRevalidate:M?!1:l||v.pathname+v.search===w.pathname+w.search||v.search!==w.search||uP(K,ve)}))}),T=[];return p.forEach((B,j)=>{if(o||!n.some(nt=>nt.route.id===B.routeId)||h.has(j))return;let $=As(y,B.path,S);if(!$){T.push({key:j,routeId:B.routeId,path:B.path,matches:null,match:null,controller:null});return}let K=t.fetchers.get(j),ve=Ac($,B.path),me=!1;m.has(j)?me=!1:d.has(j)?(d.delete(j),me=!0):K&&K.state!=="idle"&&K.data===void 0?me=l:me=gC(ve,jt({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:P,actionStatus:I,defaultShouldRevalidate:M?!1:l})),me&&T.push({key:j,routeId:B.routeId,path:B.path,matches:$,match:ve,controller:new AbortController})}),[U,T]}function O6(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function uP(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function gC(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function M6(e,t,n,r,i,o,s,l){let u=[t,...n.map(d=>d.route.id)].join("-");try{let d=s.get(u);d||(d=e({path:t,matches:n,patch:(h,p)=>{l.aborted||dP(h,p,r,i,o)}}),s.set(u,d)),d&&B6(d)&&await d}finally{s.delete(u)}}function dP(e,t,n,r,i){if(e){var o;let s=r[e];Ge(s,"No route found to patch children into: routeId = "+e);let l=Su(t,i,[e,"patch",String(((o=s.children)==null?void 0:o.length)||"0")],r);s.children?s.children.push(...l):s.children=l}else{let s=Su(t,i,["patch",String(n.length||"0")],r);n.push(...s)}}async function L6(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];Ge(i,"No route found in manifest");let o={};for(let s in r){let u=i[s]!==void 0&&s!=="hasErrorBoundary";Il(!u,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!u&&!t6.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,jt({},t(i),{lazy:void 0}))}async function A6(e){let{matches:t}=e,n=t.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,o,s)=>Object.assign(i,{[n[s].route.id]:o}),{})}async function D6(e,t,n,r,i,o,s,l,u,d){let h=o.map(y=>y.route.lazy?L6(y.route,u,l):void 0),p=o.map((y,S)=>{let k=h[S],P=i.some(w=>w.route.id===y.route.id);return jt({},y,{shouldLoad:P,resolve:async w=>(w&&r.method==="GET"&&(y.route.lazy||y.route.loader)&&(P=!0),P?N6(t,r,y,k,w,d):Promise.resolve({type:ht.data,result:void 0}))})}),m=await e({matches:p,request:r,params:o[0].params,fetcherKey:s,context:d});try{await Promise.all(h)}catch{}return m}async function N6(e,t,n,r,i,o){let s,l,u=d=>{let h,p=new Promise((S,k)=>h=k);l=()=>h(),t.signal.addEventListener("abort",l);let m=S=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):d({request:t,params:n.params,context:o},...S!==void 0?[S]:[]),y=(async()=>{try{return{type:"data",result:await(i?i(k=>m(k)):m())}}catch(S){return{type:"error",result:S}}})();return Promise.race([y,p])};try{let d=n.route[e];if(r)if(d){let h,[p]=await Promise.all([u(d).catch(m=>{h=m}),r]);if(h!==void 0)throw h;s=p}else if(await r,d=n.route[e],d)s=await u(d);else if(e==="action"){let h=new URL(t.url),p=h.pathname+h.search;throw $n(405,{method:t.method,pathname:p,routeId:n.route.id})}else return{type:ht.data,result:void 0};else if(d)s=await u(d);else{let h=new URL(t.url),p=h.pathname+h.search;throw $n(404,{pathname:p})}Ge(s.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:ht.error,result:d}}finally{l&&t.signal.removeEventListener("abort",l)}return s}async function U6(e){let{result:t,type:n}=e;if(hP(t)){let d;try{let h=t.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?t.body==null?d=null:d=await t.json():d=await t.text()}catch(h){return{type:ht.error,error:h}}return n===ht.error?{type:ht.error,error:new ah(t.status,t.statusText,d),statusCode:t.status,headers:t.headers}:{type:ht.data,data:d,statusCode:t.status,headers:t.headers}}if(n===ht.error){if(wC(t)){var r;if(t.data instanceof Error){var i;return{type:ht.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new ah(((r=t.init)==null?void 0:r.status)||500,void 0,t.data)}return{type:ht.error,error:t,statusCode:Qh(t)?t.status:void 0}}if($6(t)){var o,s;return{type:ht.deferred,deferredData:t,statusCode:(o=t.init)==null?void 0:o.status,headers:((s=t.init)==null?void 0:s.headers)&&new Headers(t.init.headers)}}if(wC(t)){var l,u;return{type:ht.data,data:t.data,statusCode:(l=t.init)==null?void 0:l.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}}return{type:ht.data,data:t}}function F6(e,t,n,r,i,o){let s=e.headers.get("Location");if(Ge(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Dy.test(s)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);s=Bv(new URL(t.url),l,i,!0,s,o),e.headers.set("Location",s)}return e}function vC(e,t,n){if(Dy.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),o=zl(i.pathname,n)!=null;if(i.origin===t.origin&&o)return i.pathname+i.search+i.hash}return e}function Ua(e,t,n,r){let i=e.createURL(fP(t)).toString(),o={signal:n};if(r&&di(r.formMethod)){let{formMethod:s,formEncType:l}=r;o.method=s.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=Vv(r.formData):o.body=r.formData}return new Request(i,o)}function Vv(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function yC(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function j6(e,t,n,r,i){let o={},s=null,l,u=!1,d={},h=n&&vr(n[1])?n[1].error:void 0;return e.forEach(p=>{if(!(p.route.id in t))return;let m=p.route.id,y=t[m];if(Ge(!Fs(y),"Cannot handle redirect results in processLoaderData"),vr(y)){let S=y.error;if(h!==void 0&&(S=h,h=void 0),s=s||{},i)s[m]=S;else{let k=rl(e,m);s[k.route.id]==null&&(s[k.route.id]=S)}o[m]=void 0,u||(u=!0,l=Qh(y.error)?y.error.status:500),y.headers&&(d[m]=y.headers)}else Jo(y)?(r.set(m,y.deferredData),o[m]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!u&&(l=y.statusCode),y.headers&&(d[m]=y.headers)):(o[m]=y.data,y.statusCode&&y.statusCode!==200&&!u&&(l=y.statusCode),y.headers&&(d[m]=y.headers))}),h!==void 0&&n&&(s={[n[0]]:h},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:l||200,loaderHeaders:d}}function bC(e,t,n,r,i,o,s,l){let{loaderData:u,errors:d}=j6(t,r,i,l,!1);return o.forEach(h=>{let{key:p,match:m,controller:y}=h,S=s[p];if(Ge(S,"Did not find corresponding fetcher result"),!(y&&y.signal.aborted))if(vr(S)){let k=rl(e.matches,m?.route.id);d&&d[k.route.id]||(d=jt({},d,{[k.route.id]:S.error})),e.fetchers.delete(p)}else if(Fs(S))Ge(!1,"Unhandled fetcher revalidation redirect");else if(Jo(S))Ge(!1,"Unhandled fetcher deferred data");else{let k=zo(S.data);e.fetchers.set(p,k)}}),{loaderData:u,errors:d}}function kC(e,t,n,r){let i=jt({},t);for(let o of n){let s=o.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(i[s]=t[s]):e[s]!==void 0&&o.route.loader&&(i[s]=e[s]),r&&r.hasOwnProperty(s))break}return i}function SC(e){return e?vr(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function rl(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function CC(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function $n(e,t){let{pathname:n,routeId:r,method:i,type:o,message:s}=t===void 0?{}:t,l="Unknown Server Error",u="Unknown @remix-run/router error";return e===400?(l="Bad Request",o==="route-discovery"?u='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+s):i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?u="defer() is not supported in actions":o==="invalid-body"&&(u="Unable to encode submission body")):e===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):e===404?(l="Not Found",u='No route matches URL "'+n+'"'):e===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new ah(e||500,l,new Error(u),!0)}function Yd(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,i]=t[n];if(Fs(i))return{key:r,result:i}}}function fP(e){let t=typeof e=="string"?ko(e):e;return Zs(jt({},t,{hash:""}))}function z6(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function B6(e){return typeof e=="object"&&e!=null&&"then"in e}function V6(e){return hP(e.result)&&T6.has(e.result.status)}function Jo(e){return e.type===ht.deferred}function vr(e){return e.type===ht.error}function Fs(e){return(e&&e.type)===ht.redirect}function wC(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function $6(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function hP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function W6(e){return w6.has(e.toLowerCase())}function di(e){return S6.has(e.toLowerCase())}async function H6(e,t,n,r,i){let o=Object.entries(t);for(let s=0;s<o.length;s++){let[l,u]=o[s],d=e.find(m=>m?.route.id===l);if(!d)continue;let h=r.find(m=>m.route.id===d.route.id),p=h!=null&&!uP(h,d)&&(i&&i[d.route.id])!==void 0;Jo(u)&&p&&await Ny(u,n,!1).then(m=>{m&&(t[l]=m)})}}async function G6(e,t,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:s}=n[r],l=t[i];e.find(d=>d?.route.id===o)&&Jo(l)&&(Ge(s,"Expected an AbortController for revalidating fetcher deferred result"),await Ny(l,s.signal,!0).then(d=>{d&&(t[i]=d)}))}}async function Ny(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ht.data,data:e.deferredData.unwrappedData}}catch(i){return{type:ht.error,error:i}}return{type:ht.data,data:e.deferredData.data}}}function Uy(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ac(e,t){let n=typeof t=="string"?ko(t).search:t.search;if(e[e.length-1].route.index&&Uy(n||""))return e[e.length-1];let r=aP(e);return r[r.length-1]}function TC(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:o,json:s}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function kg(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function q6(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function kc(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function K6(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function zo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function J6(e,t){try{let n=e.sessionStorage.getItem(cP);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&t.set(i,new Set(o||[]))}}catch{}}function Q6(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem(cP,JSON.stringify(n))}catch(r){Il(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cu.apply(this,arguments)}const Yh=b.createContext(null),pP=b.createContext(null),sa=b.createContext(null),Xh=b.createContext(null),gs=b.createContext({outlet:null,matches:[],isDataRoute:!1}),mP=b.createContext(null);function Y6(e,t){let{relative:n}=t===void 0?{}:t;Nu()||Ge(!1);let{basename:r,navigator:i}=b.useContext(sa),{hash:o,pathname:s,search:l}=vP(e,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:ao([r,s])),i.createHref({pathname:u,search:l,hash:o})}function Nu(){return b.useContext(Xh)!=null}function Zh(){return Nu()||Ge(!1),b.useContext(Xh).location}function gP(e){b.useContext(sa).static||b.useLayoutEffect(e)}function Fy(){let{isDataRoute:e}=b.useContext(gs);return e?dU():X6()}function X6(){Nu()||Ge(!1);let e=b.useContext(Yh),{basename:t,future:n,navigator:r}=b.useContext(sa),{matches:i}=b.useContext(gs),{pathname:o}=Zh(),s=JSON.stringify(Ly(i,n.v7_relativeSplatPath)),l=b.useRef(!1);return gP(()=>{l.current=!0}),b.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Ay(d,JSON.parse(s),o,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ao([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,s,o,e])}const Z6=b.createContext(null);function eU(e){let t=b.useContext(gs).outlet;return t&&b.createElement(Z6.Provider,{value:e},t)}function vP(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(sa),{matches:i}=b.useContext(gs),{pathname:o}=Zh(),s=JSON.stringify(Ly(i,r.v7_relativeSplatPath));return b.useMemo(()=>Ay(e,JSON.parse(s),o,n==="path"),[e,s,o,n])}function tU(e,t,n,r){Nu()||Ge(!1);let{navigator:i}=b.useContext(sa),{matches:o}=b.useContext(gs),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let d=Zh(),h;if(t){var p;let P=typeof t=="string"?ko(t):t;u==="/"||(p=P.pathname)!=null&&p.startsWith(u)||Ge(!1),h=P}else h=d;let m=h.pathname||"/",y=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let S=As(e,{pathname:y}),k=sU(S&&S.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:ao([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:ao([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),o,n,r);return t&&k?b.createElement(Xh.Provider,{value:{location:Cu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Jt.Pop}},k):k}function nU(){let e=uU(),t=Qh(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:i},n):null,o)}const rU=b.createElement(nU,null);class iU extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(gs.Provider,{value:this.props.routeContext},b.createElement(mP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oU(e){let{routeContext:t,match:n,children:r}=e,i=b.useContext(Yh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(gs.Provider,{value:t},r)}function sU(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=s.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||Ge(!1),s=s.slice(0,Math.min(s.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:y}=n,S=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||S){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,p,m)=>{let y,S=!1,k=null,P=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,k=p.route.errorElement||rU,u&&(d<0&&m===0?(fU("route-fallback",!1),S=!0,P=null):d===m&&(S=!0,P=p.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,m+1)),w=()=>{let x;return y?x=k:S?x=P:p.route.Component?x=b.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=h,b.createElement(oU,{match:p,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:x})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?b.createElement(iU,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var yP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(yP||{}),lh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lh||{});function aU(e){let t=b.useContext(Yh);return t||Ge(!1),t}function lU(e){let t=b.useContext(pP);return t||Ge(!1),t}function cU(e){let t=b.useContext(gs);return t||Ge(!1),t}function bP(e){let t=cU(),n=t.matches[t.matches.length-1];return n.route.id||Ge(!1),n.route.id}function uU(){var e;let t=b.useContext(mP),n=lU(lh.UseRouteError),r=bP(lh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function dU(){let{router:e}=aU(yP.UseNavigateStable),t=bP(lh.UseNavigateStable),n=b.useRef(!1);return gP(()=>{n.current=!0}),b.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Cu({fromRouteId:t},o)))},[e,t])}const EC={};function fU(e,t,n){!t&&!EC[e]&&(EC[e]=!0)}function kP(e){return eU(e.context)}function hU(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Jt.Pop,navigator:o,static:s=!1,future:l}=e;Nu()&&Ge(!1);let u=t.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:o,static:s,future:Cu({v7_relativeSplatPath:!1},l)}),[u,l,o,s]);typeof r=="string"&&(r=ko(r));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:S="default"}=r,k=b.useMemo(()=>{let P=zl(h,u);return P==null?null:{location:{pathname:P,search:p,hash:m,state:y,key:S},navigationType:i}},[u,h,p,m,y,S,i]);return k==null?null:b.createElement(sa.Provider,{value:d},b.createElement(Xh.Provider,{children:n,value:k}))}new Promise(()=>{});function pU(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:b.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:b.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:b.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wu.apply(this,arguments)}function mU(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function gU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vU(e,t){return e.button===0&&(!t||t==="_self")&&!gU(e)}const yU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],bU="6";try{window.__reactRouterVersion=bU}catch{}function kU(e,t){return x6({basename:t?.basename,future:wu({},t?.future,{v7_prependBasename:!0}),history:X9({window:t?.window}),hydrationData:t?.hydrationData||SU(),routes:e,mapRouteProperties:pU,unstable_dataStrategy:t?.unstable_dataStrategy,unstable_patchRoutesOnNavigation:t?.unstable_patchRoutesOnNavigation,window:t?.window}).initialize()}function SU(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=wu({},t,{errors:CU(t.errors)})),t}function CU(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new ah(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const wU=b.createContext({isTransitioning:!1}),TU=b.createContext(new Map),EU="startTransition",_C=_A[EU],_U="flushSync",PC=UN[_U];function PU(e){_C?_C(e):e()}function Sc(e){PC?PC(e):e()}class xU{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function RU(e){let{fallbackElement:t,router:n,future:r}=e,[i,o]=b.useState(n.state),[s,l]=b.useState(),[u,d]=b.useState({isTransitioning:!1}),[h,p]=b.useState(),[m,y]=b.useState(),[S,k]=b.useState(),P=b.useRef(new Map),{v7_startTransition:v}=r||{},w=b.useCallback(T=>{v?PU(T):T()},[v]),x=b.useCallback((T,B)=>{let{deletedFetchers:j,unstable_flushSync:$,unstable_viewTransitionOpts:K}=B;j.forEach(me=>P.current.delete(me)),T.fetchers.forEach((me,nt)=>{me.data!==void 0&&P.current.set(nt,me.data)});let ve=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!K||ve){$?Sc(()=>o(T)):w(()=>o(T));return}if($){Sc(()=>{m&&(h&&h.resolve(),m.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:K.currentLocation,nextLocation:K.nextLocation})});let me=n.window.document.startViewTransition(()=>{Sc(()=>o(T))});me.finished.finally(()=>{Sc(()=>{p(void 0),y(void 0),l(void 0),d({isTransitioning:!1})})}),Sc(()=>y(me));return}m?(h&&h.resolve(),m.skipTransition(),k({state:T,currentLocation:K.currentLocation,nextLocation:K.nextLocation})):(l(T),d({isTransitioning:!0,flushSync:!1,currentLocation:K.currentLocation,nextLocation:K.nextLocation}))},[n.window,m,h,P,w]);b.useLayoutEffect(()=>n.subscribe(x),[n,x]),b.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new xU)},[u]),b.useEffect(()=>{if(h&&s&&n.window){let T=s,B=h.promise,j=n.window.document.startViewTransition(async()=>{w(()=>o(T)),await B});j.finished.finally(()=>{p(void 0),y(void 0),l(void 0),d({isTransitioning:!1})}),y(j)}},[w,s,h,n.window]),b.useEffect(()=>{h&&s&&i.location.key===s.location.key&&h.resolve()},[h,m,i.location,s]),b.useEffect(()=>{!u.isTransitioning&&S&&(l(S.state),d({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),k(void 0))},[u.isTransitioning,S]),b.useEffect(()=>{},[]);let _=b.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,B,j)=>n.navigate(T,{state:B,preventScrollReset:j?.preventScrollReset}),replace:(T,B,j)=>n.navigate(T,{replace:!0,state:B,preventScrollReset:j?.preventScrollReset})}),[n]),I=n.basename||"/",M=b.useMemo(()=>({router:n,navigator:_,static:!1,basename:I}),[n,_,I]),U=b.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return b.createElement(b.Fragment,null,b.createElement(Yh.Provider,{value:M},b.createElement(pP.Provider,{value:i},b.createElement(TU.Provider,{value:P.current},b.createElement(wU.Provider,{value:u},b.createElement(hU,{basename:I,location:i.location,navigationType:i.historyAction,navigator:_,future:U},i.initialized||n.future.v7_partialHydration?b.createElement(IU,{routes:n.routes,future:n.future,state:i}):t))))),null)}const IU=b.memo(OU);function OU(e){let{routes:t,future:n,state:r}=e;return tU(t,void 0,r,n)}const MU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xC=b.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:u,to:d,preventScrollReset:h,unstable_viewTransition:p}=t,m=mU(t,yU),{basename:y}=b.useContext(sa),S,k=!1;if(typeof d=="string"&&LU.test(d)&&(S=d,MU))try{let x=new URL(window.location.href),_=d.startsWith("//")?new URL(x.protocol+d):new URL(d),I=zl(_.pathname,y);_.origin===x.origin&&I!=null?d=I+_.search+_.hash:k=!0}catch{}let P=Y6(d,{relative:i}),v=AU(d,{replace:s,state:l,target:u,preventScrollReset:h,relative:i,unstable_viewTransition:p});function w(x){r&&r(x),x.defaultPrevented||v(x)}return b.createElement("a",wu({},m,{href:S||P,onClick:k||o?r:w,ref:n,target:u}))});var RC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(RC||(RC={}));var IC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(IC||(IC={}));function AU(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:l}=t===void 0?{}:t,u=Fy(),d=Zh(),h=vP(e,{relative:s});return b.useCallback(p=>{if(vU(p,n)){p.preventDefault();let m=r!==void 0?r:Zs(d)===Zs(h);u(e,{replace:m,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:l})}},[d,u,h,r,i,n,e,o,s,l])}const ch=["light","dark"],jy="(prefers-color-scheme: dark)",DU=typeof window>"u",SP=b.createContext(void 0),NU=e=>b.useContext(SP)?re.createElement(b.Fragment,null,e.children):re.createElement(FU,e),UU=["light","dark"],FU=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:o=UU,defaultTheme:s=n?"system":"light",attribute:l="data-theme",value:u,children:d,nonce:h})=>{const[p,m]=b.useState(()=>OC(i,s)),[y,S]=b.useState(()=>OC(i)),k=u?Object.values(u):o,P=b.useCallback(_=>{let I=_;if(!I)return;_==="system"&&n&&(I=MC());const M=u?u[I]:I,U=t?zU():null,T=document.documentElement;if(l==="class"?(T.classList.remove(...k),M&&T.classList.add(M)):M?T.setAttribute(l,M):T.removeAttribute(l),r){const B=ch.includes(s)?s:null,j=ch.includes(I)?I:B;T.style.colorScheme=j}U?.()},[]),v=b.useCallback(_=>{m(_);try{localStorage.setItem(i,_)}catch{}},[e]),w=b.useCallback(_=>{const I=MC(_);S(I),p==="system"&&n&&!e&&P("system")},[p,e]);b.useEffect(()=>{const _=window.matchMedia(jy);return _.addListener(w),w(_),()=>_.removeListener(w)},[w]),b.useEffect(()=>{const _=I=>{I.key===i&&v(I.newValue||s)};return window.addEventListener("storage",_),()=>window.removeEventListener("storage",_)},[v]),b.useEffect(()=>{P(e??p)},[e,p]);const x=b.useMemo(()=>({theme:p,setTheme:v,forcedTheme:e,resolvedTheme:p==="system"?y:p,themes:n?[...o,"system"]:o,systemTheme:n?y:void 0}),[p,v,e,y,n,o]);return re.createElement(SP.Provider,{value:x},re.createElement(jU,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:i,themes:o,defaultTheme:s,attribute:l,value:u,children:d,attrs:k,nonce:h}),d)},jU=b.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:s,attrs:l,nonce:u})=>{const d=o==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;c.remove(${l.map(S=>`'${S}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,p=i?ch.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(S,k=!1,P=!0)=>{const v=s?s[S]:S,w=k?S+"|| ''":`'${v}'`;let x="";return i&&P&&!k&&ch.includes(S)&&(x+=`d.style.colorScheme = '${S}';`),n==="class"?x+=k||v?`c.add(${w})`:"null":v&&(x+=`d[s](n,${w})`),x},y=e?`!function(){${h}${m(e)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${jy}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${m(s?"x[e]":"e",!0)}}${d?"":"else{"+m(o,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${m(s?"x[e]":"e",!0)}}else{${m(o,!1,!1)};}${p}}catch(t){}}();`;return re.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:y}})},()=>!0),OC=(e,t)=>{if(DU)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},zU=()=>{const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},MC=e=>(e||(e=window.matchMedia(jy)),e.matches?"dark":"light");function BU({children:e,...t}){return de.jsx(NU,{...t,children:e})}const VU="modulepreload",$U=function(e){return"/"+e},LC={},uh=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=$U(o),o in LC)return;LC[o]=!0;const s=o.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const p=i[h];if(p.href===o&&(!s||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":VU,s||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),s)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function CP(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=CP(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function zy(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=CP(e))&&(r&&(r+=" "),r+=t);return r}function WU(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=wP(t))&&(r&&(r+=" "),r+=n);return r}function wP(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=wP(e[r]))&&(n&&(n+=" "),n+=t);return n}var By="-";function HU(e){var t=qU(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,i=r===void 0?{}:r;function o(l){var u=l.split(By);return u[0]===""&&u.length!==1&&u.shift(),TP(u,t)||GU(l)}function s(l,u){var d=n[l]||[];return u&&i[l]?[].concat(d,i[l]):d}return{getClassGroupId:o,getConflictingClassGroupIds:s}}function TP(e,t){if(e.length===0)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),i=r?TP(e.slice(1),r):void 0;if(i)return i;if(t.validators.length!==0){var o=e.join(By);return t.validators.find(function(s){var l=s.validator;return l(o)})?.classGroupId}}var AC=/^\[(.+)\]$/;function GU(e){if(AC.test(e)){var t=AC.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function qU(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},i=JU(Object.entries(e.classGroups),n);return i.forEach(function(o){var s=o[0],l=o[1];$v(l,r,s,t)}),r}function $v(e,t,n,r){e.forEach(function(i){if(typeof i=="string"){var o=i===""?t:DC(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(KU(i)){$v(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(s){var l=s[0],u=s[1];$v(u,DC(t,l),n,r)})})}function DC(e,t){var n=e;return t.split(By).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function KU(e){return e.isThemeGetter}function JU(e,t){return t?e.map(function(n){var r=n[0],i=n[1],o=i.map(function(s){return typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(function(l){var u=l[0],d=l[1];return[t+u,d]})):s});return[r,o]}):e}function QU(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function i(o,s){n.set(o,s),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(s){var l=n.get(s);if(l!==void 0)return l;if((l=r.get(s))!==void 0)return i(s,l),l},set:function(s,l){n.has(s)?n.set(s,l):i(s,l)}}}var EP="!";function YU(e){var t=e.separator||":",n=t.length===1,r=t[0],i=t.length;return function(s){for(var l=[],u=0,d=0,h,p=0;p<s.length;p++){var m=s[p];if(u===0){if(m===r&&(n||s.slice(p,p+i)===t)){l.push(s.slice(d,p)),d=p+i;continue}if(m==="/"){h=p;continue}}m==="["?u++:m==="]"&&u--}var y=l.length===0?s:s.substring(d),S=y.startsWith(EP),k=S?y.substring(1):y,P=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:S,baseClassName:k,maybePostfixModifierPosition:P}}}function XU(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var i=r[0]==="[";i?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function ZU(e){return{cache:QU(e.cacheSize),splitModifiers:YU(e),...HU(e)}}var e8=/\s+/;function t8(e,t){var n=t.splitModifiers,r=t.getClassGroupId,i=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(e8).map(function(s){var l=n(s),u=l.modifiers,d=l.hasImportantModifier,h=l.baseClassName,p=l.maybePostfixModifierPosition,m=r(p?h.substring(0,p):h),y=!!p;if(!m){if(!p)return{isTailwindClass:!1,originalClassName:s};if(m=r(h),!m)return{isTailwindClass:!1,originalClassName:s};y=!1}var S=XU(u).join(":"),k=d?S+EP:S;return{isTailwindClass:!0,modifierId:k,classGroupId:m,originalClassName:s,hasPostfixModifier:y}}).reverse().filter(function(s){if(!s.isTailwindClass)return!0;var l=s.modifierId,u=s.classGroupId,d=s.hasPostfixModifier,h=l+u;return o.has(h)?!1:(o.add(h),i(u,d).forEach(function(p){return o.add(l+p)}),!0)}).reverse().map(function(s){return s.originalClassName}).join(" ")}function n8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,o,s=l;function l(d){var h=t[0],p=t.slice(1),m=p.reduce(function(y,S){return S(y)},h());return r=ZU(m),i=r.cache.get,o=r.cache.set,s=u,u(d)}function u(d){var h=i(d);if(h)return h;var p=t8(d,r);return o(d,p),p}return function(){return s(WU.apply(null,arguments))}}function Ot(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var _P=/^\[(?:([a-z-]+):)?(.+)\]$/i,r8=/^\d+\/\d+$/,i8=new Set(["px","full","screen"]),o8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,a8=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ai(e){return js(e)||i8.has(e)||r8.test(e)||Wv(e)}function Wv(e){return aa(e,"length",h8)}function l8(e){return aa(e,"size",PP)}function c8(e){return aa(e,"position",PP)}function u8(e){return aa(e,"url",p8)}function Xd(e){return aa(e,"number",js)}function js(e){return!Number.isNaN(Number(e))}function d8(e){return e.endsWith("%")&&js(e.slice(0,-1))}function Cc(e){return NC(e)||aa(e,"number",NC)}function Ye(e){return _P.test(e)}function wc(){return!0}function Fo(e){return o8.test(e)}function f8(e){return aa(e,"",m8)}function aa(e,t,n){var r=_P.exec(e);return r?r[1]?r[1]===t:n(r[2]):!1}function h8(e){return s8.test(e)}function PP(){return!1}function p8(e){return e.startsWith("url(")}function NC(e){return Number.isInteger(Number(e))}function m8(e){return a8.test(e)}function g8(){var e=Ot("colors"),t=Ot("spacing"),n=Ot("blur"),r=Ot("brightness"),i=Ot("borderColor"),o=Ot("borderRadius"),s=Ot("borderSpacing"),l=Ot("borderWidth"),u=Ot("contrast"),d=Ot("grayscale"),h=Ot("hueRotate"),p=Ot("invert"),m=Ot("gap"),y=Ot("gradientColorStops"),S=Ot("gradientColorStopPositions"),k=Ot("inset"),P=Ot("margin"),v=Ot("opacity"),w=Ot("padding"),x=Ot("saturate"),_=Ot("scale"),I=Ot("sepia"),M=Ot("skew"),U=Ot("space"),T=Ot("translate"),B=function(){return["auto","contain","none"]},j=function(){return["auto","hidden","clip","visible","scroll"]},$=function(){return["auto",Ye,t]},K=function(){return[Ye,t]},ve=function(){return["",ai]},me=function(){return["auto",js,Ye]},nt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Je=function(){return["solid","dashed","dotted","double","none"]},Ne=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},te=function(){return["start","end","center","between","around","evenly","stretch"]},se=function(){return["","0",Ye]},Ee=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ke=function(){return[js,Xd]},xe=function(){return[js,Ye]};return{cacheSize:500,theme:{colors:[wc],spacing:[ai],blur:["none","",Fo,Ye],brightness:ke(),borderColor:[e],borderRadius:["none","","full",Fo,Ye],borderSpacing:K(),borderWidth:ve(),contrast:ke(),grayscale:se(),hueRotate:xe(),invert:se(),gap:K(),gradientColorStops:[e],gradientColorStopPositions:[d8,Wv],inset:$(),margin:$(),opacity:ke(),padding:K(),saturate:ke(),scale:ke(),sepia:se(),skew:xe(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",Ye]}],container:["container"],columns:[{columns:[Fo]}],"break-after":[{"break-after":Ee()}],"break-before":[{"break-before":Ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(nt(),[Ye])}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Cc]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ye]}],grow:[{grow:se()}],shrink:[{shrink:se()}],order:[{order:["first","last","none",Cc]}],"grid-cols":[{"grid-cols":[wc]}],"col-start-end":[{col:["auto",{span:["full",Cc]},Ye]}],"col-start":[{"col-start":me()}],"col-end":[{"col-end":me()}],"grid-rows":[{"grid-rows":[wc]}],"row-start-end":[{row:["auto",{span:[Cc]},Ye]}],"row-start":[{"row-start":me()}],"row-end":[{"row-end":me()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ye]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(te())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(te(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(te(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ye,t]}],"min-w":[{"min-w":["min","max","fit",Ye,ai]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Fo]},Fo,Ye]}],h:[{h:[Ye,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ye,ai]}],"max-h":[{"max-h":[Ye,t,"min","max","fit"]}],"font-size":[{text:["base",Fo,Wv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xd]}],"font-family":[{font:[wc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ye]}],"line-clamp":[{"line-clamp":["none",js,Xd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ye,ai]}],"list-image":[{"list-image":["none",Ye]}],"list-style-type":[{list:["none","disc","decimal",Ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Je(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ai]}],"underline-offset":[{"underline-offset":["auto",Ye,ai]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(nt(),[c8])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",l8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},u8]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(Je(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:Je()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Je())}],"outline-offset":[{"outline-offset":[Ye,ai]}],"outline-w":[{outline:[ai]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ai]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Fo,f8]}],"shadow-color":[{shadow:[wc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":Ne()}],"bg-blend":[{"bg-blend":Ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Fo,Ye]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[x]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ye]}],duration:[{duration:xe()}],ease:[{ease:["linear","in","out","in-out",Ye]}],delay:[{delay:xe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Cc,Ye]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ye]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ai,Xd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var xP=n8(g8),UC,RP={exports:{}},Tc={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */RP.exports=function(){if(UC)return Tc;UC=1;var e=re,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(l,u,d){var h,p={},m=null,y=null;for(h in d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(y=u.ref),u)r.call(u,h)&&!o.hasOwnProperty(h)&&(p[h]=u[h]);if(l&&l.defaultProps)for(h in u=l.defaultProps)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:t,type:l,key:m,ref:y,props:p,_owner:i.current}}return Tc.Fragment=n,Tc.jsx=s,Tc.jsxs=s,Tc}();var Pe=RP.exports;function gi(...e){return xP(zy(e))}const ep=b.createContext({appWindow:null,isWindowMaximized:!1,minimizeWindow:()=>Promise.resolve(),maximizeWindow:()=>Promise.resolve(),fullscreenWindow:()=>Promise.resolve(),closeWindow:()=>Promise.resolve()}),v8=({children:e})=>{const[t,n]=b.useState(null),[r,i]=b.useState(!1);b.useEffect(()=>{typeof window<"u"&&uh(()=>import("./index.min-87da6a88.js"),[]).then(s=>{n(s.appWindow)})},[]);const o=b.useCallback(async()=>{if(t){const s=await t.isMaximized();i(s)}},[t]);return b.useEffect(()=>{o();let s=()=>{};return(async()=>t&&(s=await t.onResized(()=>{o()})))(),()=>s&&s()},[t,o]),Pe.jsx(ep.Provider,{value:{appWindow:t,isWindowMaximized:r,minimizeWindow:async()=>{t&&await t.minimize()},maximizeWindow:async()=>{t&&await t.toggleMaximize()},fullscreenWindow:async()=>{t&&(await t.isFullscreen()?await t.setFullscreen(!1):await t.setFullscreen(!0))},closeWindow:async()=>{t&&await t.close()}},children:e})},qr={minimizeWin:e=>Pe.jsx("svg",{width:"10",height:"1",viewBox:"0 0 10 1",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("path",{d:"M0.498047 1.00098C0.429688 1.00098 0.364583 0.987956 0.302734 0.961914C0.244141 0.935872 0.192057 0.900065 0.146484 0.854492C0.100911 0.808919 0.0651042 0.756836 0.0390625 0.698242C0.0130208 0.636393 0 0.571289 0 0.50293C0 0.43457 0.0130208 0.371094 0.0390625 0.3125C0.0651042 0.250651 0.100911 0.19694 0.146484 0.151367C0.192057 0.102539 0.244141 0.0651042 0.302734 0.0390625C0.364583 0.0130208 0.429688 0 0.498047 0H9.50195C9.57031 0 9.63379 0.0130208 9.69238 0.0390625C9.75423 0.0651042 9.80794 0.102539 9.85352 0.151367C9.89909 0.19694 9.9349 0.250651 9.96094 0.3125C9.98698 0.371094 10 0.43457 10 0.50293C10 0.571289 9.98698 0.636393 9.96094 0.698242C9.9349 0.756836 9.89909 0.808919 9.85352 0.854492C9.80794 0.900065 9.75423 0.935872 9.69238 0.961914C9.63379 0.987956 9.57031 1.00098 9.50195 1.00098H0.498047Z",fill:"currentColor",fillOpacity:"0.8956"})}),maximizeWin:e=>Pe.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("path",{d:"M1.47461 10.001C1.2793 10.001 1.09212 9.96191 0.913086 9.88379C0.734049 9.80241 0.576172 9.69499 0.439453 9.56152C0.30599 9.4248 0.198568 9.26693 0.117188 9.08789C0.0390625 8.90885 0 8.72168 0 8.52637V1.47559C0 1.28027 0.0390625 1.0931 0.117188 0.914062C0.198568 0.735026 0.30599 0.578776 0.439453 0.445312C0.576172 0.308594 0.734049 0.201172 0.913086 0.123047C1.09212 0.0416667 1.2793 0.000976562 1.47461 0.000976562H8.52539C8.7207 0.000976562 8.90788 0.0416667 9.08691 0.123047C9.26595 0.201172 9.4222 0.308594 9.55566 0.445312C9.69238 0.578776 9.7998 0.735026 9.87793 0.914062C9.95931 1.0931 10 1.28027 10 1.47559V8.52637C10 8.72168 9.95931 8.90885 9.87793 9.08789C9.7998 9.26693 9.69238 9.4248 9.55566 9.56152C9.4222 9.69499 9.26595 9.80241 9.08691 9.88379C8.90788 9.96191 8.7207 10.001 8.52539 10.001H1.47461ZM8.50098 9C8.56934 9 8.63281 8.98698 8.69141 8.96094C8.75326 8.9349 8.80697 8.89909 8.85254 8.85352C8.89811 8.80794 8.93392 8.75586 8.95996 8.69727C8.986 8.63542 8.99902 8.57031 8.99902 8.50195V1.5C8.99902 1.43164 8.986 1.36816 8.95996 1.30957C8.93392 1.24772 8.89811 1.19401 8.85254 1.14844C8.80697 1.10286 8.75326 1.06706 8.69141 1.04102C8.63281 1.01497 8.56934 1.00195 8.50098 1.00195H1.49902C1.43066 1.00195 1.36556 1.01497 1.30371 1.04102C1.24512 1.06706 1.19303 1.10286 1.14746 1.14844C1.10189 1.19401 1.06608 1.24772 1.04004 1.30957C1.014 1.36816 1.00098 1.43164 1.00098 1.5V8.50195C1.00098 8.57031 1.014 8.63542 1.04004 8.69727C1.06608 8.75586 1.10189 8.80794 1.14746 8.85352C1.19303 8.89909 1.24512 8.9349 1.30371 8.96094C1.36556 8.98698 1.43066 9 1.49902 9H8.50098Z",fill:"currentColor",fillOpacity:"0.8956"})}),maximizeRestoreWin:e=>Pe.jsx("svg",{width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("path",{d:"M8.99902 2.98096C8.99902 2.71077 8.94531 2.45687 8.83789 2.21924C8.73047 1.97835 8.58398 1.77002 8.39844 1.59424C8.21615 1.4152 8.00293 1.27523 7.75879 1.17432C7.5179 1.07015 7.264 1.01807 6.99707 1.01807H2.08496C2.13704 0.868327 2.21029 0.731608 2.30469 0.60791C2.39909 0.484212 2.50814 0.378418 2.63184 0.290527C2.75553 0.202637 2.89062 0.135905 3.03711 0.090332C3.18685 0.0415039 3.34147 0.0170898 3.50098 0.0170898H6.99707C7.41048 0.0170898 7.79948 0.0968424 8.16406 0.256348C8.52865 0.412598 8.84603 0.625814 9.11621 0.895996C9.38965 1.16618 9.60449 1.48356 9.76074 1.84814C9.92025 2.21273 10 2.60173 10 3.01514V6.51611C10 6.67562 9.97559 6.83024 9.92676 6.97998C9.88118 7.12646 9.81445 7.26156 9.72656 7.38525C9.63867 7.50895 9.53288 7.618 9.40918 7.7124C9.28548 7.8068 9.14876 7.88005 8.99902 7.93213V2.98096ZM1.47461 10.0171C1.2793 10.0171 1.09212 9.97803 0.913086 9.8999C0.734049 9.81852 0.576172 9.7111 0.439453 9.57764C0.30599 9.44092 0.198568 9.28304 0.117188 9.104C0.0390625 8.92497 0 8.73779 0 8.54248V3.49365C0 3.29508 0.0390625 3.10791 0.117188 2.93213C0.198568 2.75309 0.30599 2.59684 0.439453 2.46338C0.576172 2.32666 0.732422 2.21924 0.908203 2.14111C1.08724 2.05973 1.27604 2.01904 1.47461 2.01904H6.52344C6.72201 2.01904 6.91081 2.05973 7.08984 2.14111C7.26888 2.21924 7.42513 2.32503 7.55859 2.4585C7.69206 2.59196 7.79785 2.74821 7.87598 2.92725C7.95736 3.10628 7.99805 3.29508 7.99805 3.49365V8.54248C7.99805 8.74105 7.95736 8.92985 7.87598 9.10889C7.79785 9.28467 7.69043 9.44092 7.55371 9.57764C7.42025 9.7111 7.264 9.81852 7.08496 9.8999C6.90918 9.97803 6.72201 10.0171 6.52344 10.0171H1.47461ZM6.49902 9.01611C6.56738 9.01611 6.63086 9.00309 6.68945 8.97705C6.7513 8.95101 6.80501 8.9152 6.85059 8.86963C6.89941 8.82406 6.93685 8.77197 6.96289 8.71338C6.98893 8.65153 7.00195 8.58643 7.00195 8.51807V3.51807C7.00195 3.44971 6.98893 3.3846 6.96289 3.32275C6.93685 3.2609 6.90104 3.20719 6.85547 3.16162C6.8099 3.11605 6.75618 3.08024 6.69434 3.0542C6.63249 3.02816 6.56738 3.01514 6.49902 3.01514H1.49902C1.43066 3.01514 1.36556 3.02816 1.30371 3.0542C1.24512 3.08024 1.19303 3.11768 1.14746 3.1665C1.10189 3.21208 1.06608 3.26579 1.04004 3.32764C1.014 3.38623 1.00098 3.44971 1.00098 3.51807V8.51807C1.00098 8.58643 1.014 8.65153 1.04004 8.71338C1.06608 8.77197 1.10189 8.82406 1.14746 8.86963C1.19303 8.9152 1.24512 8.95101 1.30371 8.97705C1.36556 9.00309 1.43066 9.01611 1.49902 9.01611H6.49902Z",fill:"currentColor",fillOpacity:"0.8956"})}),closeWin:e=>Pe.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("path",{d:"M5 5.70898L0.854492 9.85449C0.756836 9.95215 0.639648 10.001 0.50293 10.001C0.359701 10.001 0.239258 9.95378 0.141602 9.85938C0.0472005 9.76172 0 9.64128 0 9.49805C0 9.36133 0.0488281 9.24414 0.146484 9.14648L4.29199 5.00098L0.146484 0.855469C0.0488281 0.757812 0 0.638997 0 0.499023C0 0.430664 0.0130208 0.36556 0.0390625 0.303711C0.0651042 0.241862 0.100911 0.189779 0.146484 0.147461C0.192057 0.101888 0.245768 0.0660807 0.307617 0.0400391C0.369466 0.0139974 0.43457 0.000976562 0.50293 0.000976562C0.639648 0.000976562 0.756836 0.0498047 0.854492 0.147461L5 4.29297L9.14551 0.147461C9.24316 0.0498047 9.36198 0.000976562 9.50195 0.000976562C9.57031 0.000976562 9.63379 0.0139974 9.69238 0.0400391C9.75423 0.0660807 9.80794 0.101888 9.85352 0.147461C9.89909 0.193034 9.9349 0.246745 9.96094 0.308594C9.98698 0.367188 10 0.430664 10 0.499023C10 0.638997 9.95117 0.757812 9.85352 0.855469L5.70801 5.00098L9.85352 9.14648C9.95117 9.24414 10 9.36133 10 9.49805C10 9.56641 9.98698 9.63151 9.96094 9.69336C9.9349 9.75521 9.89909 9.80892 9.85352 9.85449C9.8112 9.90007 9.75911 9.93587 9.69727 9.96191C9.63542 9.98796 9.57031 10.001 9.50195 10.001C9.36198 10.001 9.24316 9.95215 9.14551 9.85449L5 5.70898Z",fill:"currentColor",fillOpacity:"0.8956"})}),closeMac:e=>Pe.jsx("svg",{width:"6",height:"6",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("path",{d:"M15.7522 4.44381L11.1543 9.04165L15.7494 13.6368C16.0898 13.9771 16.078 14.5407 15.724 14.8947L13.8907 16.728C13.5358 17.0829 12.9731 17.0938 12.6328 16.7534L8.03766 12.1583L3.44437 16.7507C3.10402 17.091 2.54132 17.0801 2.18645 16.7253L0.273257 14.8121C-0.0807018 14.4572 -0.0925004 13.8945 0.247845 13.5542L4.84024 8.96087L0.32499 4.44653C-0.0153555 4.10619 -0.00355681 3.54258 0.350402 3.18862L2.18373 1.35529C2.53859 1.00042 3.1013 0.989533 3.44164 1.32988L7.95689 5.84422L12.5556 1.24638C12.8951 0.906035 13.4587 0.917833 13.8126 1.27179L15.7267 3.18589C16.0807 3.53985 16.0925 4.10346 15.7522 4.44381Z",fill:"currentColor"})}),minMac:e=>Pe.jsx("svg",{width:"8",height:"8",viewBox:"0 0 17 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("g",{clipPath:"url(#clip0_20_2051)",children:Pe.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.47211 1.18042H15.4197C15.8052 1.18042 16.1179 1.50551 16.1179 1.90769V3.73242C16.1179 4.13387 15.8052 4.80006 15.4197 4.80006H1.47211C1.08665 4.80006 0.773926 4.47497 0.773926 4.07278V1.90769C0.773926 1.50551 1.08665 1.18042 1.47211 1.18042Z",fill:"currentColor"})})}),fullMac:e=>Pe.jsx("svg",{width:"6",height:"6",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("g",{clipPath:"url(#clip0_20_2057)",children:Pe.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.53068 0.433838L15.0933 12.0409C15.0933 12.0409 15.0658 5.35028 15.0658 4.01784C15.0658 1.32095 14.1813 0.433838 11.5378 0.433838C10.6462 0.433838 3.53068 0.433838 3.53068 0.433838ZM12.4409 15.5378L0.87735 3.93073C0.87735 3.93073 0.905794 10.6214 0.905794 11.9538C0.905794 14.6507 1.79024 15.5378 4.43291 15.5378C5.32535 15.5378 12.4409 15.5378 12.4409 15.5378Z",fill:"currentColor"})})}),plusMac:e=>Pe.jsx("svg",{width:"8",height:"8",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:Pe.jsx("g",{clipPath:"url(#clip0_20_2053)",children:Pe.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5308 9.80147H10.3199V15.0095C10.3199 15.3949 9.9941 15.7076 9.59265 15.7076H7.51555C7.11337 15.7076 6.78828 15.3949 6.78828 15.0095V9.80147H1.58319C1.19774 9.80147 0.88501 9.47638 0.88501 9.07419V6.90619C0.88501 6.50401 1.19774 6.17892 1.58319 6.17892H6.78828V1.06183C6.78828 0.676375 7.11337 0.363647 7.51555 0.363647H9.59265C9.9941 0.363647 10.3199 0.676375 10.3199 1.06183V6.17892H15.5308C15.9163 6.17892 16.229 6.50401 16.229 6.90619V9.07419C16.229 9.47638 15.9163 9.80147 15.5308 9.80147Z",fill:"currentColor"})})})};function lo({className:e,children:t,...n}){return Pe.jsx("button",{className:gi("inline-flex cursor-default items-center justify-center",e),...n,children:t})}function y8({className:e,...t}){const{isWindowMaximized:n,minimizeWindow:r,maximizeWindow:i,closeWindow:o}=b.useContext(ep);return Pe.jsxs("div",{className:gi("h-8",e),...t,children:[Pe.jsx(lo,{onClick:r,className:"max-h-8 w-[46px] cursor-default rounded-none bg-transparent text-black/90 hover:bg-black/[.05] active:bg-black/[.03]  dark:text-white dark:hover:bg-white/[.06] dark:active:bg-white/[.04]",children:Pe.jsx(qr.minimizeWin,{})}),Pe.jsx(lo,{onClick:i,className:gi("max-h-8 w-[46px] cursor-default rounded-none bg-transparent","text-black/90 hover:bg-black/[.05] active:bg-black/[.03] dark:text-white dark:hover:bg-white/[.06] dark:active:bg-white/[.04]"),children:n?Pe.jsx(qr.maximizeRestoreWin,{}):Pe.jsx(qr.maximizeWin,{})}),Pe.jsx(lo,{onClick:o,className:"max-h-8 w-[46px] cursor-default rounded-none bg-transparent text-black/90 hover:bg-[#c42b1c] hover:text-white active:bg-[#c42b1c]/90 dark:text-white",children:Pe.jsx(qr.closeWin,{})})]})}function b8({className:e,...t}){const{minimizeWindow:n,maximizeWindow:r,fullscreenWindow:i,closeWindow:o}=b.useContext(ep),[s,l]=b.useState(!1),[u,d]=b.useState(!1),h=s?Pe.jsx(qr.plusMac,{}):Pe.jsx(qr.fullMac,{}),p=y=>{y.key==="Alt"&&l(!0)},m=y=>{y.key==="Alt"&&l(!1)};return b.useEffect(()=>{window.addEventListener("keydown",p),window.addEventListener("keyup",m)},[]),Pe.jsxs("div",{className:gi("px-2 text-black active:text-black dark:text-black",e),onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},...t,children:[Pe.jsx(lo,{onClick:o,className:"mr-2 aspect-square h-3 w-3 cursor-default content-center items-center justify-center self-center rounded-full border border-black/[.12] bg-[#ff544d] text-center text-black/60 hover:bg-[#ff544d] active:bg-[#bf403a] active:text-black/60 dark:border-none",children:u&&Pe.jsx(qr.closeMac,{})}),Pe.jsx(lo,{onClick:n,className:"mr-2 aspect-square h-3 w-3 cursor-default content-center items-center justify-center self-center rounded-full border border-black/[.12]  bg-[#ffbd2e] text-center text-black/60 hover:bg-[#ffbd2e] active:bg-[#bf9122] active:text-black/60 dark:border-none",children:u&&Pe.jsx(qr.minMac,{})}),Pe.jsx(lo,{onClick:s?r:i,className:"aspect-square h-3 w-3 cursor-default content-center items-center justify-center self-center rounded-full border border-black/[.12] bg-[#28c93f] text-center text-black/60 hover:bg-[#28c93f] active:bg-[#1e9930] active:text-black/60 dark:border-none",children:u&&h})]})}function k8({className:e,...t}){const{isWindowMaximized:n,minimizeWindow:r,maximizeWindow:i,closeWindow:o}=b.useContext(ep);return Pe.jsxs("div",{className:gi("h-auto items-center px-2",e),...t,children:[Pe.jsx(lo,{onClick:r,className:"m-0 mr-4 aspect-square h-6 w-6 cursor-default rounded-full bg-[#dadada] p-0 text-[#3d3d3d] hover:bg-[#d1d1d1] active:bg-[#bfbfbf] dark:bg-[#373737] dark:text-white dark:hover:bg-[#424242] dark:active:bg-[#565656]",children:Pe.jsx(qr.minimizeWin,{className:"w-[9px]"})}),Pe.jsx(lo,{onClick:i,className:"m-0 mr-4 aspect-square h-6 w-6 cursor-default rounded-full bg-[#dadada] p-0 text-[#3d3d3d] hover:bg-[#d1d1d1] active:bg-[#bfbfbf] dark:bg-[#373737] dark:text-white dark:hover:bg-[#424242] dark:active:bg-[#565656]",children:n?Pe.jsx(qr.maximizeRestoreWin,{className:"h-[9px] w-[9px]"}):Pe.jsx(qr.maximizeWin,{className:"h-2 w-2"})}),Pe.jsx(lo,{onClick:o,className:"m-0 aspect-square h-6 w-6 cursor-default rounded-full bg-[#dadada] p-0 text-[#3d3d3d] hover:bg-[#d1d1d1] active:bg-[#bfbfbf] dark:bg-[#373737] dark:text-white dark:hover:bg-[#424242] dark:active:bg-[#565656]",children:Pe.jsx(qr.closeWin,{className:"h-2 w-2"})})]})}let IP,OP=null;function MP(){return OP||Promise.resolve(IP)}function FC({platform:e,justify:t=!1,hide:n=!1,hideMethod:r="display",className:i,...o}){const[s,l]=b.useState(void 0);b.useEffect(()=>{MP().then(d=>{l(d)})},[]);const u=gi("flex",i,n&&(r==="display"?"hidden":"invisible"));if(!e)switch(s){case"Darwin":e="macos";break;case"Linux":e="gnome";break;default:e="windows"}return Pe.jsx(v8,{children:Pe.jsx(()=>{switch(e){case"windows":default:return Pe.jsx(y8,{className:gi(u,t&&"ml-auto"),...o});case"macos":return Pe.jsx(b8,{className:gi(u,t&&"ml-0"),...o});case"gnome":return Pe.jsx(k8,{className:gi(u,t&&"ml-auto"),...o})}},{})})}function S8({children:e,controlsOrder:t="system",className:n,windowControlsProps:r,...i}){const[o,s]=b.useState(void 0);b.useEffect(()=>{MP().then(d=>{s(d)})},[]);const l=t==="left"||t==="platform"&&r?.platform==="macos"||t==="system"&&o==="Darwin",u=d=>{if(r?.justify!==void 0)return r;const{justify:h,className:p,...m}=r||{};return{justify:!1,className:gi(p,d),...m}};return Pe.jsx("div",{className:gi("bg-background flex select-none flex-row overflow-hidden",n),"data-tauri-drag-region":!0,...i,children:l?Pe.jsxs(Pe.Fragment,{children:[Pe.jsx(FC,{...u("ml-0")}),e]}):Pe.jsxs(Pe.Fragment,{children:[e,Pe.jsx(FC,{...u("ml-auto")})]})})}typeof window<"u"&&(OP=uh(()=>import("./index.min-74dbd1cc.js"),[]).then(e=>e.type().then(t=>(IP=t,t))));var C8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const w8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T8=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:l,...u},d)=>b.createElement("svg",{ref:d,...C8,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:`lucide lucide-${w8(e)}`,...u},[...t.map(([h,p])=>b.createElement(h,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var Vy=T8;const E8=Vy("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),_8=Vy("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),P8=Vy("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function x8(){const e=b.useCallback(async()=>{const{appWindow:n}=await uh(()=>import("./index.min-87da6a88.js"),[]);n.close()},[]),t=b.useCallback(async()=>{const{appWindow:n}=await uh(()=>import("./index.min-87da6a88.js"),[]);n.minimize()},[]);return de.jsxs("div",{className:"h-auto items-center ml-auto flex",children:[de.jsx("div",{onClick:t,className:"inline-flex items-center justify-center m-0 aspect-square h-8 w-8 cursor-default p-2 text-white hover:bg-[#424242] active:bg-[#565656]",children:de.jsx(E8,{})}),de.jsx("div",{className:"inline-flex items-center justify-center m-0 aspect-square h-8 w-8 cursor-default p-2 text-white hover:bg-[#424242] active:bg-[#565656]",children:de.jsx(_8,{})}),de.jsx("div",{onClick:e,className:"inline-flex items-center justify-center m-0 aspect-square h-8 w-8 cursor-default p-2 text-white hover:bg-red-700 active:bg-red-500",children:de.jsx(P8,{})})]})}function LP(){return de.jsx(S8,{windowControlsProps:{hide:!0},className:"sticky top-0 z-50 bg-[#242424]",children:de.jsx(x8,{})})}function R8(){const{userId:e,isLoaded:t}=p9(),n=Fy();return console.log("test",e),b.useEffect(()=>{t&&!e&&n("/sign-in")},[t]),t?de.jsxs("div",{children:[de.jsx(LP,{}),de.jsx(kP,{})]}):"Loading..."}function I8(){return Fy(),de.jsxs(de.Fragment,{children:[de.jsx(LP,{}),de.jsx("main",{children:de.jsx(kP,{})})]})}function O8(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}function Gt(e,t){if(!e)throw new Error(t)}const M8=34028234663852886e22,L8=-34028234663852886e22,A8=4294967295,D8=2147483647,N8=-2147483648;function kf(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>D8||e<N8)throw new Error("invalid int 32: "+e)}function Hv(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>A8||e<0)throw new Error("invalid uint 32: "+e)}function AP(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>M8||e<L8))throw new Error("invalid float 32: "+e)}const DP=Symbol("@bufbuild/protobuf/enum-type");function U8(e){const t=e[DP];return Gt(t,"missing enum type on enum object"),t}function NP(e,t,n,r){e[DP]=UP(t,n.map(i=>({no:i.no,name:i.name,localName:e[i.no]})))}function UP(e,t,n){const r=Object.create(null),i=Object.create(null),o=[];for(const s of t){const l=FP(s);o.push(l),r[s.name]=l,i[s.no]=l}return{typeName:e,values:o,findName(s){return r[s]},findNumber(s){return i[s]}}}function F8(e,t,n){const r={};for(const i of t){const o=FP(i);r[o.localName]=o.no,r[o.no]=o.localName}return NP(r,e,t),r}function FP(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class $y{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(t),t.byteLength,o),this}fromJson(t,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,t,o,this),this}fromJsonString(t,n){let r;try{r=JSON.parse(t)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(t){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(t),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(t){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(t);return r.writeMessage(this,i)}toJsonString(t){var n;const r=this.toJson(t);return JSON.stringify(r,null,(n=t?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function j8(e,t,n,r){var i;const o=(i=r?.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),s={[o]:function(l){e.util.initFields(this),e.util.initPartial(l,this)}}[o];return Object.setPrototypeOf(s.prototype,new $y),Object.assign(s,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(l,u){return new s().fromBinary(l,u)},fromJson(l,u){return new s().fromJson(l,u)},fromJsonString(l,u){return new s().fromJsonString(l,u)},equals(l,u){return e.util.equals(s,l,u)}}),s}function z8(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Sg(e,t,n){for(let o=0;o<28;o=o+7){const s=e>>>o,l=!(!(s>>>7)&&t==0),u=(l?s|128:s)&255;if(n.push(u),!l)return}const r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const s=t>>>o,l=!!(s>>>7),u=(l?s|128:s)&255;if(n.push(u),!l)return}n.push(t>>>31&1)}}const Sf=4294967296;function jC(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function o(s,l){const u=Number(e.slice(s,l));i*=n,r=r*n+u,r>=Sf&&(i=i+(r/Sf|0),r=r%Sf)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?zP(r,i):Wy(r,i)}function B8(e,t){let n=Wy(e,t);const r=n.hi&2147483648;r&&(n=zP(n.lo,n.hi));const i=jP(n.lo,n.hi);return r?"-"+i:i}function jP(e,t){if({lo:e,hi:t}=V8(e,t),t<=2097151)return String(Sf*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,i=t>>16&65535;let o=n+r*6777216+i*6710656,s=r+i*8147497,l=i*2;const u=1e7;return o>=u&&(s+=Math.floor(o/u),o%=u),s>=u&&(l+=Math.floor(s/u),s%=u),l.toString()+zC(s)+zC(o)}function V8(e,t){return{lo:e>>>0,hi:t>>>0}}function Wy(e,t){return{lo:e|0,hi:t|0}}function zP(e,t){return t=~t,e?e=~e+1:t+=1,Wy(e,t)}const zC=e=>{const t=String(e);return"0000000".slice(t.length)+t};function BC(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function $8(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function W8(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(u){const d=typeof u=="bigint"?u:BigInt(u);if(d>o||d<i)throw new Error("int64 invalid: ".concat(u));return d},uParse(u){const d=typeof u=="bigint"?u:BigInt(u);if(d>l||d<s)throw new Error("uint64 invalid: ".concat(u));return d},enc(u){return e.setBigInt64(0,this.parse(u),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(u){return e.setBigInt64(0,this.uParse(u),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(u,d){return e.setInt32(0,u,!0),e.setInt32(4,d,!0),e.getBigInt64(0,!0)},uDec(u,d){return e.setInt32(0,u,!0),e.setInt32(4,d,!0),e.getBigUint64(0,!0)}}}const n=i=>Gt(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>Gt(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),jC(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),jC(i)},dec(i,o){return B8(i,o)},uDec(i,o){return jP(i,o)}}}const Ut=W8();var Z;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(Z||(Z={}));var cs;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(cs||(cs={}));function jo(e,t,n){if(t===n)return!0;if(e==Z.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return t==n}return!1}function Ol(e,t){switch(e){case Z.BOOL:return!1;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return t==0?Ut.zero:"0";case Z.DOUBLE:case Z.FLOAT:return 0;case Z.BYTES:return new Uint8Array(0);case Z.STRING:return"";default:return 0}}function BP(e,t){switch(e){case Z.BOOL:return t===!1;case Z.STRING:return t==="";case Z.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var Yt;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(Yt||(Yt={}));class H8{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Hv(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return kf(t),BC(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){AP(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Hv(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){kf(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return kf(t),t=(t<<1^t>>31)>>>0,BC(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Ut.enc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Ut.uEnc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=Ut.enc(t);return Sg(n.lo,n.hi,this.buf),this}sint64(t){let n=Ut.enc(t),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return Sg(i,o,this.buf),this}uint64(t){let n=Ut.uEnc(t);return Sg(n.lo,n.hi,this.buf),this}}class G8{constructor(t,n){this.varint64=z8,this.uint32=$8,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case Yt.Varint:for(;this.buf[this.pos++]&128;);break;case Yt.Bit64:this.pos+=4;case Yt.Bit32:this.pos+=4;break;case Yt.LengthDelimited:let i=this.uint32();this.pos+=i;break;case Yt.StartGroup:for(;;){const[o,s]=this.tag();if(s===Yt.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(s,o)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Ut.dec(...this.varint64())}uint64(){return Ut.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,Ut.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ut.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ut.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function q8(e,t,n,r){let i;return{typeName:t,extendee:n,get field(){if(!i){const o=typeof r=="function"?r():r;o.name=t.split(".").pop(),o.jsonName="[".concat(t,"]"),i=e.util.newFieldList([o]).list()[0]}return i},runtime:e}}function VP(e){const t=e.field.localName,n=Object.create(null);return n[t]=K8(e),[n,()=>n[t]]}function K8(e){const t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Ol(t.T,t.L);case"message":const n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function J8(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}let ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),tp=[];for(let e=0;e<ro.length;e++)tp[ro[e].charCodeAt(0)]=e;tp["-".charCodeAt(0)]=ro.indexOf("+");tp["_".charCodeAt(0)]=ro.indexOf("/");const $P={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,o,s=0;for(let l=0;l<e.length;l++){if(o=tp[e.charCodeAt(l)],o===void 0)switch(e[l]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=o,i=1;break;case 1:n[r++]=s<<2|(o&48)>>4,s=o,i=2;break;case 2:n[r++]=(s&15)<<4|(o&60)>>2,s=o,i=3;break;case 3:n[r++]=(s&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,i=0;for(let o=0;o<e.length;o++)switch(r=e[o],n){case 0:t+=ro[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=ro[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=ro[i|r>>6],t+=ro[r&63],n=0;break}return n&&(t+=ro[i],t+="=",n==1&&(t+="=")),t}};function Q8(e,t,n){HP(t,e);const r=t.runtime.bin.makeReadOptions(n),i=J8(e.getType().runtime.bin.listUnknownFields(e),t.field),[o,s]=VP(t);for(const l of i)t.runtime.bin.readField(o,r.readerFactory(l.data),t.field,l.wireType,r);return s()}function Y8(e,t,n,r){HP(t,e);const i=t.runtime.bin.makeReadOptions(r),o=t.runtime.bin.makeWriteOptions(r);if(WP(e,t)){const d=e.getType().runtime.bin.listUnknownFields(e).filter(h=>h.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(const h of d)e.getType().runtime.bin.onUnknownField(e,h.no,h.wireType,h.data)}const s=o.writerFactory();let l=t.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(l,n,s,o);const u=i.readerFactory(s.finish());for(;u.pos<u.len;){const[d,h]=u.tag(),p=u.skip(h,d);e.getType().runtime.bin.onUnknownField(e,d,h,p)}}function WP(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(r=>r.no==t.field.no)}function HP(e,t){Gt(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function GP(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?t[n]!==void 0:e.kind=="enum"?t[n]!==e.T.values[0].no:!BP(e.T,t[n]);case"message":return t[n]!==void 0;case"map":return Object.keys(t[n]).length>0}}function VC(e,t){const n=e.localName,r=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=r?e.T.values[0].no:void 0;break;case"scalar":t[n]=r?Ol(e.T,e.L):void 0;break;case"message":t[n]=void 0;break}}function $s(e,t){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames($y.prototype).every(r=>r in e&&typeof e[r]=="function"))return!1;const n=e.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:t===void 0?!0:n.typeName==t.typeName}function qP(e,t){return $s(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}Z.DOUBLE,Z.FLOAT,Z.INT64,Z.UINT64,Z.INT32,Z.UINT32,Z.BOOL,Z.STRING,Z.BYTES;const $C={ignoreUnknownFields:!1},WC={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function X8(e){return e?Object.assign(Object.assign({},$C),e):$C}function Z8(e){return e?Object.assign(Object.assign({},WC),e):WC}const dh=Symbol(),Cf=Symbol();function e7(){return{makeReadOptions:X8,makeWriteOptions:Z8,readMessage(e,t,n,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Oi(t)));r=r??new e;const i=new Map,o=n.typeRegistry;for(const[s,l]of Object.entries(t)){const u=e.fields.findJsonName(s);if(u){if(u.oneof){if(l===null&&u.kind=="scalar")continue;const d=i.get(u.oneof);if(d!==void 0)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(u.oneof.name,'" present: "').concat(d,'", "').concat(s,'"'));i.set(u.oneof,s)}HC(r,l,u,n,e)}else{let d=!1;if(o?.findExtension&&s.startsWith("[")&&s.endsWith("]")){const h=o.findExtension(s.substring(1,s.length-1));if(h&&h.extendee.typeName==e.typeName){d=!0;const[p,m]=VP(h);HC(p,l,h.field,n,h),Y8(r,h,m(),n)}}if(!d&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(s,'" is unknown'))}}return r},writeMessage(e,t){const n=e.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!GP(i,e)){if(i.req)throw"required field not set";if(!t.emitDefaultValues||!n7(i))continue}const s=i.oneof?e[i.oneof.localName].value:e[i.localName],l=GC(i,s,t);l!==void 0&&(r[t.useProtoFieldName?i.name:i.jsonName]=l)}const o=t.typeRegistry;if(o?.findExtensionFor)for(const s of n.runtime.bin.listUnknownFields(e)){const l=o.findExtensionFor(n.typeName,s.no);if(l&&WP(e,l)){const u=Q8(e,l,t),d=GC(l.field,u,t);d!==void 0&&(r[l.field.jsonName]=d)}}}catch(o){const s=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=o instanceof Error?o.message:String(o);throw new Error(s+(l.length>0?": ".concat(l):""))}return r},readScalar(e,t,n){return Yc(e,t,n??cs.BIGINT,!0)},writeScalar(e,t,n){if(t!==void 0&&(n||BP(e,t)))return wf(e,t)},debug:Oi}}function Oi(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function HC(e,t,n,r,i){let o=n.localName;if(n.repeated){if(Gt(n.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Oi(t)));const s=e[o];for(const l of t){if(l===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Oi(l)));switch(n.kind){case"message":s.push(n.T.fromJson(l,r));break;case"enum":const u=Cg(n.T,l,r.ignoreUnknownFields,!0);u!==Cf&&s.push(u);break;case"scalar":try{s.push(Yc(n.T,l,n.L,!0))}catch(d){let h="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Oi(l));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Oi(t)));const s=e[o];for(const[l,u]of Object.entries(t)){if(u===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let d;try{d=t7(n.K,l)}catch(h){let p="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Oi(t));throw h instanceof Error&&h.message.length>0&&(p+=": ".concat(h.message)),new Error(p)}switch(n.V.kind){case"message":s[d]=n.V.T.fromJson(u,r);break;case"enum":const h=Cg(n.V.T,u,r.ignoreUnknownFields,!0);h!==Cf&&(s[d]=h);break;case"scalar":try{s[d]=Yc(n.V.T,u,cs.BIGINT,!0)}catch(p){let m="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Oi(t));throw p instanceof Error&&p.message.length>0&&(m+=": ".concat(p.message)),new Error(m)}break}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const s=n.T;if(t===null&&s.typeName!="google.protobuf.Value")return;let l=e[o];$s(l)?l.fromJson(t,r):(e[o]=l=s.fromJson(t,r),s.fieldWrapper&&!n.oneof&&(e[o]=s.fieldWrapper.unwrapField(l)));break;case"enum":const u=Cg(n.T,t,r.ignoreUnknownFields,!1);switch(u){case dh:VC(n,e);break;case Cf:break;default:e[o]=u;break}break;case"scalar":try{const d=Yc(n.T,t,n.L,!1);switch(d){case dh:VC(n,e);break;default:e[o]=d;break}}catch(d){let h="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(Oi(t));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}function t7(e,t){if(e===Z.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return Yc(e,t,cs.BIGINT,!0).toString()}function Yc(e,t,n,r){if(t===null)return r?Ol(e,n):dh;switch(e){case Z.DOUBLE:case Z.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return e==Z.FLOAT&&AP(i),i;case Z.INT32:case Z.FIXED32:case Z.SFIXED32:case Z.SINT32:case Z.UINT32:let o;if(typeof t=="number"?o=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(o=Number(t)),o===void 0)break;return e==Z.UINT32||e==Z.FIXED32?Hv(o):kf(o),o;case Z.INT64:case Z.SFIXED64:case Z.SINT64:if(typeof t!="number"&&typeof t!="string")break;const s=Ut.parse(t);return n?s.toString():s;case Z.FIXED64:case Z.UINT64:if(typeof t!="number"&&typeof t!="string")break;const l=Ut.uParse(t);return n?l.toString():l;case Z.BOOL:if(typeof t!="boolean")break;return t;case Z.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case Z.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return $P.dec(t)}throw new Error}function Cg(e,t,n,r){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:r?e.values[0].no:dh;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(i!==void 0)return i.no;if(n)return Cf;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Oi(t)))}function n7(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function GC(e,t,n){if(e.kind=="map"){Gt(typeof t=="object"&&t!=null);const r={},i=Object.entries(t);switch(e.V.kind){case"scalar":for(const[s,l]of i)r[s.toString()]=wf(e.V.T,l);break;case"message":for(const[s,l]of i)r[s.toString()]=l.toJson(n);break;case"enum":const o=e.V.T;for(const[s,l]of i)r[s.toString()]=wg(o,l,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(e.repeated){Gt(Array.isArray(t));const r=[];switch(e.kind){case"scalar":for(let i=0;i<t.length;i++)r.push(wf(e.T,t[i]));break;case"enum":for(let i=0;i<t.length;i++)r.push(wg(e.T,t[i],n.enumAsInteger));break;case"message":for(let i=0;i<t.length;i++)r.push(t[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(e.kind){case"scalar":return wf(e.T,t);case"enum":return wg(e.T,t,n.enumAsInteger);case"message":return qP(e.T,t).toJson(n)}}function wg(e,t,n){var r;if(Gt(typeof t=="number"),e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const i=e.findNumber(t);return(r=i?.name)!==null&&r!==void 0?r:t}function wf(e,t){switch(e){case Z.INT32:case Z.SFIXED32:case Z.SINT32:case Z.FIXED32:case Z.UINT32:return Gt(typeof t=="number"),t;case Z.FLOAT:case Z.DOUBLE:return Gt(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case Z.STRING:return Gt(typeof t=="string"),t;case Z.BOOL:return Gt(typeof t=="boolean"),t;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return Gt(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case Z.BYTES:return Gt(t instanceof Uint8Array),$P.enc(t)}}const Fa=Symbol("@bufbuild/protobuf/unknown-fields"),qC={readUnknownFields:!0,readerFactory:e=>new G8(e)},KC={writeUnknownFields:!0,writerFactory:()=>new H8};function r7(e){return e?Object.assign(Object.assign({},qC),e):qC}function i7(e){return e?Object.assign(Object.assign({},KC),e):KC}function o7(){return{makeReadOptions:r7,makeWriteOptions:i7,listUnknownFields(e){var t;return(t=e[Fa])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[Fa]},writeUnknownFields(e,t){const r=e[Fa];if(r)for(const i of r)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,r){const i=e;Array.isArray(i[Fa])||(i[Fa]=[]),i[Fa].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,i){const o=e.getType(),s=i?t.len:t.pos+n;let l,u;for(;t.pos<s&&([l,u]=t.tag(),!(i===!0&&u==Yt.EndGroup));){const d=o.fields.find(l);if(!d){const h=t.skip(u,l);r.readUnknownFields&&this.onUnknownField(e,l,u,h);continue}JC(e,t,d,u,r)}if(i&&(u!=Yt.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:JC,writeMessage(e,t,n){const r=e.getType();for(const i of r.fields.byNumber()){if(!GP(i,e)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const o=i.oneof?e[i.oneof.localName].value:e[i.localName];QC(i,o,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,r){t!==void 0&&QC(e,t,n,r)}}}function JC(e,t,n,r,i){let{repeated:o,localName:s}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=s&&delete e.value,e.case=s,s="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?Z.INT32:n.T;let u=fh;if(n.kind=="scalar"&&n.L>0&&(u=a7),o){let m=e[s];if(r==Yt.LengthDelimited&&l!=Z.STRING&&l!=Z.BYTES){let S=t.uint32()+t.pos;for(;t.pos<S;)m.push(u(t,l))}else m.push(u(t,l))}else e[s]=u(t,l);break;case"message":const d=n.T;o?e[s].push(Tf(t,new d,i,n)):$s(e[s])?Tf(t,e[s],i,n):(e[s]=Tf(t,new d,i,n),d.fieldWrapper&&!n.oneof&&!n.repeated&&(e[s]=d.fieldWrapper.unwrapField(e[s])));break;case"map":let[h,p]=s7(n,t,i);e[s][h]=p;break}}function Tf(e,t,n,r){const i=t.getType().runtime.bin,o=r?.delimited;return i.readMessage(t,e,o?r.no:e.uint32(),n,o),t}function s7(e,t,n){const r=t.uint32(),i=t.pos+r;let o,s;for(;t.pos<i;){const[l]=t.tag();switch(l){case 1:o=fh(t,e.K);break;case 2:switch(e.V.kind){case"scalar":s=fh(t,e.V.T);break;case"enum":s=t.int32();break;case"message":s=Tf(t,new e.V.T,n,void 0);break}break}}if(o===void 0&&(o=Ol(e.K,cs.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(e.V.kind){case"scalar":s=Ol(e.V.T,cs.BIGINT);break;case"enum":s=e.V.T.values[0].no;break;case"message":s=new e.V.T;break}return[o,s]}function a7(e,t){const n=fh(e,t);return typeof n=="bigint"?n.toString():n}function fh(e,t){switch(t){case Z.STRING:return e.string();case Z.BOOL:return e.bool();case Z.DOUBLE:return e.double();case Z.FLOAT:return e.float();case Z.INT32:return e.int32();case Z.INT64:return e.int64();case Z.UINT64:return e.uint64();case Z.FIXED64:return e.fixed64();case Z.BYTES:return e.bytes();case Z.FIXED32:return e.fixed32();case Z.SFIXED32:return e.sfixed32();case Z.SFIXED64:return e.sfixed64();case Z.SINT64:return e.sint64();case Z.UINT32:return e.uint32();case Z.SINT32:return e.sint32()}}function QC(e,t,n,r){Gt(t!==void 0);const i=e.repeated;switch(e.kind){case"scalar":case"enum":let o=e.kind=="enum"?Z.INT32:e.T;if(i)if(Gt(Array.isArray(t)),e.packed)c7(n,o,e.no,t);else for(const s of t)Xc(n,o,e.no,s);else Xc(n,o,e.no,t);break;case"message":if(i){Gt(Array.isArray(t));for(const s of t)YC(n,r,e,s)}else YC(n,r,e,t);break;case"map":Gt(typeof t=="object"&&t!=null);for(const[s,l]of Object.entries(t))l7(n,r,e,s,l);break}}function l7(e,t,n,r,i){e.tag(n.no,Yt.LengthDelimited),e.fork();let o=r;switch(n.K){case Z.INT32:case Z.FIXED32:case Z.UINT32:case Z.SFIXED32:case Z.SINT32:o=Number.parseInt(r);break;case Z.BOOL:Gt(r=="true"||r=="false"),o=r=="true";break}switch(Xc(e,n.K,1,o),n.V.kind){case"scalar":Xc(e,n.V.T,2,i);break;case"enum":Xc(e,Z.INT32,2,i);break;case"message":Gt(i!==void 0),e.tag(2,Yt.LengthDelimited).bytes(i.toBinary(t));break}e.join()}function YC(e,t,n,r){const i=qP(n.T,r);n.delimited?e.tag(n.no,Yt.StartGroup).raw(i.toBinary(t)).tag(n.no,Yt.EndGroup):e.tag(n.no,Yt.LengthDelimited).bytes(i.toBinary(t))}function Xc(e,t,n,r){Gt(r!==void 0);let[i,o]=KP(t);e.tag(n,i)[o](r)}function c7(e,t,n,r){if(!r.length)return;e.tag(n,Yt.LengthDelimited).fork();let[,i]=KP(t);for(let o=0;o<r.length;o++)e[i](r[o]);e.join()}function KP(e){let t=Yt.Varint;switch(e){case Z.BYTES:case Z.STRING:t=Yt.LengthDelimited;break;case Z.DOUBLE:case Z.FIXED64:case Z.SFIXED64:t=Yt.Bit64;break;case Z.FIXED32:case Z.SFIXED32:case Z.FLOAT:t=Yt.Bit32;break}const n=Z[e].toLowerCase();return[t,n]}function u7(){return{setEnumType:NP,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const r of n.fields.byMember()){const i=r.localName,o=t,s=e;if(s[i]!=null)switch(r.kind){case"oneof":const l=s[i].case;if(l===void 0)continue;const u=r.findField(l);let d=s[i].value;u&&u.kind=="message"&&!$s(d,u.T)?d=new u.T(d):u&&u.kind==="scalar"&&u.T===Z.BYTES&&(d=Ec(d)),o[i]={case:l,value:d};break;case"scalar":case"enum":let h=s[i];r.T===Z.BYTES&&(h=r.repeated?h.map(Ec):Ec(h)),o[i]=h;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===Z.BYTES)for(const[y,S]of Object.entries(s[i]))o[i][y]=Ec(S);else Object.assign(o[i],s[i]);break;case"message":const m=r.V.T;for(const y of Object.keys(s[i])){let S=s[i][y];m.fieldWrapper||(S=new m(S)),o[i][y]=S}break}break;case"message":const p=r.T;if(r.repeated)o[i]=s[i].map(m=>$s(m,p)?m:new p(m));else{const m=s[i];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?o[i]=Ec(m):o[i]=m:o[i]=$s(m,p)?m:new p(m)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{const i=t[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((s,l)=>r.T.equals(s,o[l]));case"scalar":return i.every((s,l)=>jo(r.T,s,o[l]));case"enum":return i.every((s,l)=>jo(Z.INT32,s,o[l]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return jo(Z.INT32,i,o);case"scalar":return jo(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const s=r.findField(i.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(i.value,o.value);case"enum":return jo(Z.INT32,i.value,o.value);case"scalar":return jo(s.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(s.kind));case"map":const l=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const u=r.V.T;return l.every(h=>u.equals(i[h],o[h]));case"enum":return l.every(h=>jo(Z.INT32,i[h],o[h]));case"scalar":const d=r.V.T;return l.every(h=>jo(d,i[h],o[h]))}break}})},clone(e){const t=e.getType(),n=new t,r=n;for(const i of t.fields.byMember()){const o=e[i.localName];let s;if(i.repeated)s=o.map(Zd);else if(i.kind=="map"){s=r[i.localName];for(const[l,u]of Object.entries(o))s[l]=Zd(u)}else i.kind=="oneof"?s=i.findField(o.case)?{case:o.case,value:Zd(o.value)}:{case:void 0}:s=Zd(o);r[i.localName]=s}for(const i of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function Zd(e){if(e===void 0)return e;if($s(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function Ec(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function d7(e,t,n){return{syntax:e,json:e7(),bin:o7(),util:Object.assign(Object.assign({},u7()),{newFieldList:t,initFields:n}),makeMessageType(r,i,o){return j8(this,r,i,o)},makeEnum:F8,makeEnumType:UP,getEnumType:U8,makeExtension(r,i,o){return q8(this,r,i,o)}}}class f7{constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,t.push(n)):t.push(r)}return this.members}}function JP(e,t){const n=QP(e);return t?n:y7(v7(n))}function h7(e){return JP(e,!1)}const p7=QP;function QP(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const m7=new Set(["constructor","toString","toJSON","valueOf"]),g7=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),YP=e=>"".concat(e,"$"),v7=e=>g7.has(e)?YP(e):e,y7=e=>m7.has(e)?YP(e):e;class b7{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=h7(t)}addField(t){Gt(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}function k7(e,t){var n,r,i,o,s,l;const u=[];let d;for(const h of typeof e=="function"?e():e){const p=h;if(p.localName=JP(h.name,h.oneof!==void 0),p.jsonName=(n=h.jsonName)!==null&&n!==void 0?n:p7(h.name),p.repeated=(r=h.repeated)!==null&&r!==void 0?r:!1,h.kind=="scalar"&&(p.L=(i=h.L)!==null&&i!==void 0?i:cs.BIGINT),p.delimited=(o=h.delimited)!==null&&o!==void 0?o:!1,p.req=(s=h.req)!==null&&s!==void 0?s:!1,p.opt=(l=h.opt)!==null&&l!==void 0?l:!1,h.packed===void 0&&(p.packed=h.kind=="enum"||h.kind=="scalar"&&h.T!=Z.BYTES&&h.T!=Z.STRING),h.oneof!==void 0){const m=typeof h.oneof=="string"?h.oneof:h.oneof.name;(!d||d.name!=m)&&(d=new b7(m)),p.oneof=d,d.addField(p)}u.push(p)}return u}const q=d7("proto3",e=>new f7(e,t=>k7(t)),e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Ol(t.T,t.L);break}}});class tr extends $y{constructor(t){super(),this.seconds=Ut.zero,this.nanos=0,q.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(q.json.debug(t)));const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Ut.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return tr.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new tr({seconds:Ut.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new tr().fromBinary(t,n)}static fromJson(t,n){return new tr().fromJson(t,n)}static fromJsonString(t,n){return new tr().fromJsonString(t,n)}static equals(t,n){return q.util.equals(tr,t,n)}}tr.runtime=q;tr.typeName="google.protobuf.Timestamp";tr.fields=q.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const S7=q.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:tr},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:C7,repeated:!0},{no:5,name:"events",kind:"message",T:T7,repeated:!0}]),C7=q.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:w7,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),w7=q.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:tr},{no:3,name:"value",kind:"scalar",T:2}]),T7=q.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:tr},{no:7,name:"normalized_end_timestamp",kind:"message",T:tr,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),pi=q.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),Dn=q.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),Hy=q.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Dc=q.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Tu=q.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),fl=q.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"}]),ja=q.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),E7=q.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Mi=q.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),Gy=q.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:hh,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:ox}]),hh=q.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),_7=q.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:q.getEnumType(Dn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Eu=q.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:q.getEnumType(Gv)},{no:4,name:"tracks",kind:"message",T:il,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:_7},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:q.getEnumType(ph)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:q.getEnumType(fl)}]),Gv=q.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ph=q.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),$r=q.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),P7=q.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Ws,repeated:!0}]),il=q.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:q.getEnumType(pi)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:q.getEnumType(Dn)},{no:10,name:"layers",kind:"message",T:Ws,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:P7,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:q.getEnumType($r)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:ox},{no:19,name:"audio_features",kind:"enum",T:q.getEnumType(Mi),repeated:!0}]),Ws=q.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:q.getEnumType(Hy)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),Nc=q.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:q.getEnumType(ln)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:ZP,oneof:"value"},{no:3,name:"speaker",kind:"message",T:x7,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:ex,oneof:"value"},{no:7,name:"transcription",kind:"message",T:R7,oneof:"value"},{no:8,name:"metrics",kind:"message",T:S7,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:qv,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:O7,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:M7,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:L7,oneof:"value"}]),ln=q.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),x7=q.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:XP,repeated:!0}]),XP=q.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),ZP=q.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0}]),ex=q.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),R7=q.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:I7,repeated:!0}]),I7=q.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),qv=q.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),O7=q.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),M7=q.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),L7=q.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:A7,oneof:"value"}]),A7=q.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),tx=q.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),D7=q.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:q.getEnumType(nx)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),nx=q.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),N7=q.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:q.getEnumType(rx)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),rx=q.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]),ix=q.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:XC},{no:2,name:"screen",kind:"message",T:XC},{no:3,name:"resume_connection",kind:"enum",T:q.getEnumType(Tu)},{no:4,name:"disabled_codecs",kind:"message",T:U7},{no:5,name:"force_relay",kind:"enum",T:q.getEnumType(Tu)}]),XC=q.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:q.getEnumType(Tu)}]),U7=q.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:hh,repeated:!0},{no:2,name:"publish",kind:"message",T:hh,repeated:!0}]),ox=q.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),mi=q.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),Kv=q.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),F7=q.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),j7=q.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:ea,oneof:"message"},{no:2,name:"answer",kind:"message",T:ea,oneof:"message"},{no:3,name:"trickle",kind:"message",T:qy,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Qv,oneof:"message"},{no:5,name:"mute",kind:"message",T:Ky,oneof:"message"},{no:6,name:"subscription",kind:"message",T:np,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:sx,oneof:"message"},{no:8,name:"leave",kind:"message",T:rp,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:lx,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:fx,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:hx,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Ri,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:cx,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:mx,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:ax,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:W7,oneof:"message"}]),ZC=q.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:z7,oneof:"message"},{no:2,name:"answer",kind:"message",T:ea,oneof:"message"},{no:3,name:"offer",kind:"message",T:ea,oneof:"message"},{no:4,name:"trickle",kind:"message",T:qy,oneof:"message"},{no:5,name:"update",kind:"message",T:$7,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Jy,oneof:"message"},{no:8,name:"leave",kind:"message",T:rp,oneof:"message"},{no:9,name:"mute",kind:"message",T:Ky,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:H7,oneof:"message"},{no:11,name:"room_update",kind:"message",T:G7,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:K7,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Q7,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:X7,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Z7,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:V7,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:B7,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:eF,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:rF,oneof:"message"},{no:22,name:"request_response",kind:"message",T:iF,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:oF,oneof:"message"}]),Jv=q.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),Qv=q.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:q.getEnumType(pi)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:q.getEnumType(Dn)},{no:9,name:"layers",kind:"message",T:Ws,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Jv,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:q.getEnumType($r)},{no:15,name:"stream",kind:"scalar",T:9}]),qy=q.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:q.getEnumType(mi)},{no:3,name:"final",kind:"scalar",T:8}]),Ky=q.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),z7=q.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Gy},{no:2,name:"participant",kind:"message",T:Eu},{no:3,name:"other_participants",kind:"message",T:Eu,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:ux,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:ix},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:D7},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:hh,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),B7=q.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:ux,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:ix}]),Jy=q.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:il}]),V7=q.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),ea=q.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),$7=q.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Eu,repeated:!0}]),np=q.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:tx,repeated:!0}]),sx=q.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:q.getEnumType(Hy)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),ax=q.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:q.getEnumType(Mi),repeated:!0}]),W7=q.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),rp=q.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:q.getEnumType(fl)},{no:3,name:"action",kind:"enum",T:q.getEnumType(hl)},{no:4,name:"regions",kind:"message",T:tF}]),hl=q.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),lx=q.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Ws,repeated:!0}]),cx=q.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),ux=q.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),H7=q.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:XP,repeated:!0}]),G7=q.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Gy}]),q7=q.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:q.getEnumType(Dc)},{no:3,name:"score",kind:"scalar",T:2}]),K7=q.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:q7,repeated:!0}]),J7=q.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:q.getEnumType(Kv)}]),Q7=q.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:J7,repeated:!0}]),Qy=q.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:q.getEnumType(Hy)},{no:2,name:"enabled",kind:"scalar",T:8}]),Y7=q.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Qy,repeated:!0}]),X7=q.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Qy,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Y7,repeated:!0}]),dx=q.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),fx=q.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:dx,repeated:!0}]),Z7=q.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),hx=q.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:ea},{no:2,name:"subscription",kind:"message",T:np},{no:3,name:"publish_tracks",kind:"message",T:Jy,repeated:!0},{no:4,name:"data_channels",kind:"message",T:px,repeated:!0},{no:5,name:"offer",kind:"message",T:ea},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),px=q.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:q.getEnumType(mi)}]),Ri=q.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:q.getEnumType(F7),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),mx=q.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),eF=q.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),tF=q.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:nF,repeated:!0}]),nF=q.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),rF=q.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:q.getEnumType(E7)}]),iF=q.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:q.getEnumType(gx)},{no:3,name:"message",kind:"scalar",T:9}]),gx=q.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),oF=q.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function sF(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ef={exports:{}},aF=Ef.exports,ew;function lF(){return ew||(ew=1,function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(aF,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function l(k,P){var v=k[P];if(typeof v.bind=="function")return v.bind(k);try{return Function.prototype.bind.call(v,k)}catch{return function(){return Function.prototype.apply.apply(v,[k,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(k){return k==="debug"&&(k="log"),typeof console===n?!1:k==="trace"&&r?u:console[k]!==void 0?l(console,k):console.log!==void 0?l(console,"log"):t}function h(){for(var k=this.getLevel(),P=0;P<i.length;P++){var v=i[P];this[v]=P<k?t:this.methodFactory(v,k,this.name)}if(this.log=this.debug,typeof console===n&&k<this.levels.SILENT)return"No console available for logging"}function p(k){return function(){typeof console!==n&&(h.call(this),this[k].apply(this,arguments))}}function m(k,P,v){return d(k)||p.apply(this,arguments)}function y(k,P){var v=this,w,x,_,I="loglevel";typeof k=="string"?I+=":"+k:typeof k=="symbol"&&(I=void 0);function M($){var K=(i[$]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=K;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+K+";"}catch{}}}function U(){var $;if(!(typeof window===n||!I)){try{$=window.localStorage[I]}catch{}if(typeof $===n)try{var K=window.document.cookie,ve=encodeURIComponent(I),me=K.indexOf(ve+"=");me!==-1&&($=/^([^;]+)/.exec(K.slice(me+ve.length+1))[1])}catch{}return v.levels[$]===void 0&&($=void 0),$}}function T(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function B($){var K=$;if(typeof K=="string"&&v.levels[K.toUpperCase()]!==void 0&&(K=v.levels[K.toUpperCase()]),typeof K=="number"&&K>=0&&K<=v.levels.SILENT)return K;throw new TypeError("log.setLevel() called with invalid level: "+$)}v.name=k,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=P||m,v.getLevel=function(){return _??x??w},v.setLevel=function($,K){return _=B($),K!==!1&&M(_),h.call(v)},v.setDefaultLevel=function($){x=B($),U()||v.setLevel($,!1)},v.resetLevel=function(){_=null,T(),h.call(v)},v.enableAll=function($){v.setLevel(v.levels.TRACE,$)},v.disableAll=function($){v.setLevel(v.levels.SILENT,$)},v.rebuild=function(){if(s!==v&&(w=B(s.getLevel())),h.call(v),s===v)for(var $ in o)o[$].rebuild()},w=B(s?s.getLevel():"WARN");var j=U();j!=null&&(_=B(j)),h.call(v)}s=new y,s.getLogger=function(P){if(typeof P!="symbol"&&typeof P!="string"||P==="")throw new TypeError("You must supply a name when creating a logger.");var v=o[P];return v||(v=o[P]=new y(P,s.methodFactory)),v};var S=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=S),s},s.getLoggers=function(){return o},s.default=s,s})}(Ef)),Ef.exports}var ip=lF(),Yv;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(Yv||(Yv={}));var ki;(function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(ki||(ki={}));let Ke=ip.getLogger("livekit");Object.values(ki).map(e=>ip.getLogger(e));Ke.setDefaultLevel(Yv.info);function go(e){const t=ip.getLogger(e);return t.setDefaultLevel(Ke.getLevel()),t}const cF=ip.getLogger("lk-e2ee"),_c=7e3,uF=[0,300,2*2*300,3*3*300,4*4*300,_c,_c,_c,_c,_c];class dF{constructor(t){this._retryDelays=t!==void 0?[...t]:uF}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function D(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(h){try{d(r.next(h))}catch(p){s(p)}}function u(h){try{d(r.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):i(h.value).then(l,u)}d((r=r.apply(e,t||[])).next())})}function tw(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wa(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof tw=="function"?tw(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(l,u){s=e[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(d){o({value:d,done:l})},s)}}var ef={exports:{}},nw;function fF(){if(nw)return ef.exports;nw=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(I,M,U){return Function.prototype.apply.call(I,M,U)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:n=function(I){return Object.getOwnPropertyNames(I)};function r(_){console&&console.warn&&console.warn(_)}var i=Number.isNaN||function(I){return I!==I};function o(){o.init.call(this)}ef.exports=o,ef.exports.once=v,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function l(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(_){if(typeof _!="number"||_<0||i(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");s=_}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||i(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function u(_){return _._maxListeners===void 0?o.defaultMaxListeners:_._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(I){for(var M=[],U=1;U<arguments.length;U++)M.push(arguments[U]);var T=I==="error",B=this._events;if(B!==void 0)T=T&&B.error===void 0;else if(!T)return!1;if(T){var j;if(M.length>0&&(j=M[0]),j instanceof Error)throw j;var $=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw $.context=j,$}var K=B[I];if(K===void 0)return!1;if(typeof K=="function")t(K,this,M);else for(var ve=K.length,me=S(K,ve),U=0;U<ve;++U)t(me[U],this,M);return!0};function d(_,I,M,U){var T,B,j;if(l(M),B=_._events,B===void 0?(B=_._events=Object.create(null),_._eventsCount=0):(B.newListener!==void 0&&(_.emit("newListener",I,M.listener?M.listener:M),B=_._events),j=B[I]),j===void 0)j=B[I]=M,++_._eventsCount;else if(typeof j=="function"?j=B[I]=U?[M,j]:[j,M]:U?j.unshift(M):j.push(M),T=u(_),T>0&&j.length>T&&!j.warned){j.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=_,$.type=I,$.count=j.length,r($)}return _}o.prototype.addListener=function(I,M){return d(this,I,M,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(I,M){return d(this,I,M,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(_,I,M){var U={fired:!1,wrapFn:void 0,target:_,type:I,listener:M},T=h.bind(U);return T.listener=M,U.wrapFn=T,T}o.prototype.once=function(I,M){return l(M),this.on(I,p(this,I,M)),this},o.prototype.prependOnceListener=function(I,M){return l(M),this.prependListener(I,p(this,I,M)),this},o.prototype.removeListener=function(I,M){var U,T,B,j,$;if(l(M),T=this._events,T===void 0)return this;if(U=T[I],U===void 0)return this;if(U===M||U.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete T[I],T.removeListener&&this.emit("removeListener",I,U.listener||M));else if(typeof U!="function"){for(B=-1,j=U.length-1;j>=0;j--)if(U[j]===M||U[j].listener===M){$=U[j].listener,B=j;break}if(B<0)return this;B===0?U.shift():k(U,B),U.length===1&&(T[I]=U[0]),T.removeListener!==void 0&&this.emit("removeListener",I,$||M)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(I){var M,U,T;if(U=this._events,U===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete U[I]),this;if(arguments.length===0){var B=Object.keys(U),j;for(T=0;T<B.length;++T)j=B[T],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=U[I],typeof M=="function")this.removeListener(I,M);else if(M!==void 0)for(T=M.length-1;T>=0;T--)this.removeListener(I,M[T]);return this};function m(_,I,M){var U=_._events;if(U===void 0)return[];var T=U[I];return T===void 0?[]:typeof T=="function"?M?[T.listener||T]:[T]:M?P(T):S(T,T.length)}o.prototype.listeners=function(I){return m(this,I,!0)},o.prototype.rawListeners=function(I){return m(this,I,!1)},o.listenerCount=function(_,I){return typeof _.listenerCount=="function"?_.listenerCount(I):y.call(_,I)},o.prototype.listenerCount=y;function y(_){var I=this._events;if(I!==void 0){var M=I[_];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function S(_,I){for(var M=new Array(I),U=0;U<I;++U)M[U]=_[U];return M}function k(_,I){for(;I+1<_.length;I++)_[I]=_[I+1];_.pop()}function P(_){for(var I=new Array(_.length),M=0;M<I.length;++M)I[M]=_[M].listener||_[M];return I}function v(_,I){return new Promise(function(M,U){function T(j){_.removeListener(I,B),U(j)}function B(){typeof _.removeListener=="function"&&_.removeListener("error",T),M([].slice.call(arguments))}x(_,I,B,{once:!0}),I!=="error"&&w(_,T,{once:!0})})}function w(_,I,M){typeof _.on=="function"&&x(_,"error",I,M)}function x(_,I,M,U){if(typeof _.on=="function")U.once?_.once(I,M):_.on(I,M);else if(typeof _.addEventListener=="function")_.addEventListener(I,function T(B){U.once&&_.removeEventListener(I,T),M(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return ef.exports}var $i=fF();let vx=!0,yx=!0;function _f(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function la(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,l){if(s!==t)return i.apply(this,arguments);const u=d=>{const h=n(d);h&&(l.handleEvent?l.handleEvent(h):l(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,u),i.apply(this,[s,u])};const o=r.removeEventListener;r.removeEventListener=function(s,l){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const u=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,u])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function hF(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(vx=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function pF(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(yx=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function bx(){if(typeof window=="object"){if(vx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Yy(e,t){yx&&console.warn(e+" is deprecated, please use "+t+" instead.")}function mF(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=_f(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=_f(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=_f(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function rw(e){return Object.prototype.toString.call(e)==="[object Object]"}function kx(e){return rw(e)?Object.keys(e).reduce(function(t,n){const r=rw(e[n]),i=r?kx(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function Xv(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Xv(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Xv(e,e.get(i),n)})}))}function iw(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(l=>{l.type===r&&l.trackId===s.id&&Xv(e,l,i)})}),i}const ow=bx;function Sx(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const u={};return Object.keys(l).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const h=typeof l[d]=="object"?l[d]:{ideal:l[d]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const p=function(m,y){return m?m+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(h.ideal!==void 0){u.optional=u.optional||[];let m={};typeof h.ideal=="number"?(m[p("min",d)]=h.ideal,u.optional.push(m),m={},m[p("max",d)]=h.ideal,u.optional.push(m)):(m[p("",d)]=h.ideal,u.optional.push(m))}h.exact!==void 0&&typeof h.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[p("",d)]=h.exact):["min","max"].forEach(m=>{h[m]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[p(m,d)]=h[m])})}),l.advanced&&(u.optional=(u.optional||[]).concat(l.advanced)),u},i=function(l,u){if(t.version>=61)return u(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const d=function(h,p,m){p in h&&!(m in h)&&(h[m]=h[p],delete h[p])};l=JSON.parse(JSON.stringify(l)),d(l.audio,"autoGainControl","googAutoGainControl"),d(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let d=l.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const h=t.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete l.video.facingMode;let p;if(d.exact==="environment"||d.ideal==="environment"?p=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(p=["front"]),p)return n.mediaDevices.enumerateDevices().then(m=>{m=m.filter(S=>S.kind==="videoinput");let y=m.find(S=>p.some(k=>S.label.toLowerCase().includes(k)));return!y&&m.length&&p.includes("back")&&(y=m[m.length-1]),y&&(l.video.deviceId=d.exact?{exact:y.deviceId}:{ideal:y.deviceId}),l.video=r(l.video),ow("chrome: "+JSON.stringify(l)),u(l)})}l.video=r(l.video)}return ow("chrome: "+JSON.stringify(l)),u(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(l,u,d){i(l,h=>{n.webkitGetUserMedia(h,u,p=>{d&&d(o(p))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(u){return i(u,d=>l(d).then(h=>{if(d.audio&&!h.getAudioTracks().length||d.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(o(h))))}}}function Cx(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function wx(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else la(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Tx(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){let d=i.apply(this,arguments);return d||(d=t(this,l),this._senders.push(d)),d};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const u=this._senders.indexOf(l);u!==-1&&this._senders.splice(u,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const l=this._senders.find(u=>u.track===s);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Ex(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>iw(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),la(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>iw(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(l=>{l.track===r&&(i?s=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(o?s=!0:o=l),l.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function _x(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(u)===-1&&this._shimmedLocalStreams[l.id].push(u):this._shimmedLocalStreams[l.id]=[l,u],u};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const u=this.getSenders().filter(d=>l.indexOf(d)===-1);this._shimmedLocalStreams[s.id]=[s].concat(u)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const u=this._shimmedLocalStreams[l].indexOf(s);u!==-1&&this._shimmedLocalStreams[l].splice(u,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function Px(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return _x(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(p=>this._reverseStreams[p.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(p=>{if(this.getSenders().find(y=>y.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const p=new e.MediaStream(h.getTracks());this._streams[h.id]=p,this._reverseStreams[p.id]=h,h=p}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(k=>k===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(k=>k.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[p.id];if(S)S.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const k=new e.MediaStream([h]);this._streams[p.id]=k,this._reverseStreams[k.id]=p,this.addStream(k)}return this.getSenders().find(k=>k.track===h)};function o(d,h){let p=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(m=>{const y=d._reverseStreams[m],S=d._streams[y.id];p=p.replace(new RegExp(S.id,"g"),y.id)}),new RTCSessionDescription({type:h.type,sdp:p})}function s(d,h){let p=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(m=>{const y=d._reverseStreams[m],S=d._streams[y.id];p=p.replace(new RegExp(y.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:p})}["createOffer","createAnswer"].forEach(function(d){const h=e.RTCPeerConnection.prototype[d],p={[d](){const m=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[S=>{const k=o(this,S);m[0].apply(null,[k])},S=>{m[1]&&m[1].apply(null,S)},arguments[2]]):h.apply(this,arguments).then(S=>o(this,S))}};e.RTCPeerConnection.prototype[d]=p[d]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=s(this,arguments[0]),l.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const d=u.get.apply(this);return d.type===""?d:o(this,d)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let m;Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(k=>h.track===k)&&(m=this._streams[y])}),m&&(m.getTracks().length===1?this.removeStream(this._reverseStreams[m.id]):m.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Zv(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function xx(e,t){la(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var sw=Object.freeze({__proto__:null,fixNegotiationNeeded:xx,shimAddTrackRemoveTrack:Px,shimAddTrackRemoveTrackWithNative:_x,shimGetSendersWithDtmf:Tx,shimGetUserMedia:Sx,shimMediaStream:Cx,shimOnTrack:wx,shimPeerConnection:Zv,shimSenderReceiverGetStats:Ex});function Rx(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){Yy("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,l,u){l in s&&!(u in s)&&(s[u]=s[l],delete s[l])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const l=s.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[l])}}}}function gF(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function Ix(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function e0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;return r.apply(this,[o||null]).then(u=>{if(t.version<53&&!s)try{u.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;u.forEach((h,p)=>{u.set(p,Object.assign({},h,{type:n[h.type]||h.type}))})}return u}).then(s,l)}}function Ox(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Mx(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),la(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Lx(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Yy("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Ax(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Dx(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,l=s.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(l).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function Nx(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Ux(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Fx(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var aw=Object.freeze({__proto__:null,shimAddTransceiver:Dx,shimCreateAnswer:Fx,shimCreateOffer:Ux,shimGetDisplayMedia:gF,shimGetParameters:Nx,shimGetUserMedia:Rx,shimOnTrack:Ix,shimPeerConnection:e0,shimRTCDataChannel:Ax,shimReceiverGetStats:Mx,shimRemoveStream:Lx,shimSenderGetStats:Ox});function jx(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o&&o.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function zx(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),t.apply(r,arguments)}}}function Bx(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(d,h){const p=arguments.length>=2?arguments[2]:arguments[0],m=n.apply(this,[p]);return h?(m.then(d,h),Promise.resolve()):m},t.createAnswer=function(d,h){const p=arguments.length>=2?arguments[2]:arguments[0],m=r.apply(this,[p]);return h?(m.then(d,h),Promise.resolve()):m};let l=function(u,d,h){const p=i.apply(this,[u]);return h?(p.then(d,h),Promise.resolve()):p};t.setLocalDescription=l,l=function(u,d,h){const p=o.apply(this,[u]);return h?(p.then(d,h),Promise.resolve()):p},t.setRemoteDescription=l,l=function(u,d,h){const p=s.apply(this,[u]);return h?(p.then(d,h),Promise.resolve()):p},t.addIceCandidate=l}function Vx(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r($x(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function $x(e){return e&&e.video!==void 0?Object.assign({},e,{video:kx(e.video)}):e}function Wx(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let l=r.iceServers[s];l.urls===void 0&&l.url?(Yy("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Hx(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Gx(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function qx(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var lw=Object.freeze({__proto__:null,shimAudioContext:qx,shimCallbacksAPI:Bx,shimConstraints:$x,shimCreateOfferLegacy:Gx,shimGetUserMedia:Vx,shimLocalStreamsAPI:jx,shimRTCIceServerUrls:Wx,shimRemoteStreamsAPI:zx,shimTrackEventTransceiver:Hx}),Tg={exports:{}},cw;function vF(){return cw||(cw=1,function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(n)[0].split(" ");r.profile=o[2];for(let l=3;l<o.length;l++){const u=o[l],d=t.matchPrefix(n,"a=rtpmap:"+u+" ")[0];if(d){const h=t.parseRtpMap(d),p=t.matchPrefix(n,"a=fmtp:"+u+" ");switch(h.parameters=p.length?t.parseFmtp(p[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+u+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(l=>{r.headerExtensions.push(t.parseExtmap(l))});const s=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(l=>{s.forEach(u=>{l.rtcpFeedback.find(h=>h.type===u.type&&h.parameter===u.parameter)||l.rtcpFeedback.push(u)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=t.writeRtpMap(s),i+=t.writeFmtp(s),i+=t.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=t.writeExtmap(s)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(n,"a=ssrc:").map(m=>t.parseSsrcMedia(m)).filter(m=>m.attribute==="cname"),u=l.length>0&&l[0].ssrc;let d;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(m=>m.substring(17).split(" ").map(S=>parseInt(S,10)));h.length>0&&h[0].length>1&&h[0][0]===u&&(d=h[0][1]),i.codecs.forEach(m=>{if(m.name.toUpperCase()==="RTX"&&m.parameters.apt){let y={ssrc:u,codecPayloadType:parseInt(m.parameters.apt,10)};u&&d&&(y.rtx={ssrc:d}),r.push(y),o&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:u,mechanism:s?"red+ulpfec":"red"},r.push(y))}}),r.length===0&&u&&r.push({ssrc:u});let p=t.matchPrefix(n,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-50*40*8:p=void 0,r.forEach(m=>{m.maxBitrate=p})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=t.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=t.matchPrefix(n,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=t.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const l=t.matchPrefix(n,"a=sctpmap:");if(l.length>0){const u=l[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t}(Tg)),Tg.exports}var Kx=vF(),pl=sF(Kx),yF=O8({__proto__:null,default:pl},[Kx]);function Pf(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),o=pl.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,la(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function t0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||la(e,"icecandidate",t=>{if(t.candidate){const n=pl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function xf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const u=pl.splitSections(l.sdp);return u.shift(),u.some(d=>{const h=pl.parseMLine(d);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(l){const u=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const d=parseInt(u[1],10);return d!==d?-1:d},i=function(l){let u=65536;return t.browser==="firefox"&&(t.version<57?l===-1?u=16384:u=2147483637:t.version<60?u=t.version===57?65535:65536:u=2147483637),u},o=function(l,u){let d=65536;t.browser==="firefox"&&t.version===57&&(d=65535);const h=pl.matchPrefix(l.sdp,"a=max-message-size:");return h.length>0?d=parseInt(h[0].substring(19),10):t.browser==="firefox"&&u!==-1&&(d=2147483637),d},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const u=r(arguments[0]),d=i(u),h=o(arguments[0],u);let p;d===0&&h===0?p=Number.POSITIVE_INFINITY:d===0||h===0?p=Math.max(d,h):p=Math.min(d,h);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return p}}),this._sctp=m}return s.apply(this,arguments)}}function Rf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const l=arguments[0],u=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&u>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},la(e,"datachannel",r=>(t(r.channel,r.target),r))}function n0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function r0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function If(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Of(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var bF=Object.freeze({__proto__:null,removeExtmapAllowMixed:r0,shimAddIceCandidateNullOrEmpty:If,shimConnectionState:n0,shimMaxMessageSize:xf,shimParameterlessSetLocalDescription:Of,shimRTCIceCandidate:Pf,shimRTCIceCandidateRelayProtocol:t0,shimSendThrowTypeError:Rf});function kF(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=bx,r=mF(e),i={browserDetails:r,commonShim:bF,extractVersion:_f,disableLog:hF,disableWarnings:pF,sdp:yF};switch(r.browser){case"chrome":if(!sw||!Zv||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=sw,If(e,r),Of(e),Sx(e,r),Cx(e),Zv(e,r),wx(e),Px(e,r),Tx(e),Ex(e),xx(e,r),Pf(e),t0(e),n0(e),xf(e,r),Rf(e),r0(e,r);break;case"firefox":if(!aw||!e0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=aw,If(e,r),Of(e),Rx(e,r),e0(e,r),Ix(e),Lx(e),Ox(e),Mx(e),Ax(e),Dx(e),Nx(e),Ux(e),Fx(e),Pf(e),n0(e),xf(e,r),Rf(e);break;case"safari":if(!lw||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=lw,If(e,r),Of(e),Wx(e),Gx(e),Bx(e),jx(e),zx(e),Hx(e),Vx(e),qx(e),Pf(e),t0(e),xf(e,r),Rf(e),r0(e,r);break;default:n("Unsupported browser!");break}return i}kF({window:typeof window>"u"?void 0:window});const SF=10,tf="lk_e2ee",CF="LKFrameEncryptionKey",wF={sharedKey:!1,ratchetSalt:CF,ratchetWindowSize:8,failureTolerance:SF,keyringSize:16};var ss;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(ss||(ss={}));var uw;(function(e){e.KeyRatcheted="keyRatcheted"})(uw||(uw={}));var Qo;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(Qo||(Qo={}));var dw;(function(e){e.Error="cryptorError"})(dw||(dw={}));function TF(){return EF()||i0()}function i0(){return typeof window.RTCRtpScriptTransform<"u"}function EF(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class vW extends $i.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{Ke.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},wF),t),this.on(ss.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,r){const i={key:t,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(ss.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(ss.RatchetRequest,t,n)}}class ca extends Error{constructor(t,n){super(n||"an error has occured"),this.code=t}}var Un;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest"})(Un||(Un={}));class wt extends ca{constructor(t,n,r){super(1,t),this.status=r,this.reason=n}}class Xy extends ca{constructor(t){super(21,t??"device is unsupported")}}class Li extends ca{constructor(t){super(20,t??"track is invalid")}}class _F extends ca{constructor(t){super(10,t??"unsupported server")}}class an extends ca{constructor(t){super(12,t??"unexpected connection state")}}class o0 extends ca{constructor(t){super(13,t??"unable to negotiate")}}class fw extends ca{constructor(t,n){super(15,t),this.reason=n}}var _u;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(_u||(_u={}));(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(_u||(_u={}));var hw;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})(hw||(hw={}));var G;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"})(G||(G={}));var Q;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage"})(Q||(Q={}));var ue;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse"})(ue||(ue={}));var oe;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate"})(oe||(oe={}));function Zy(e,t,n){var r,i,o;t===void 0&&(t=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,l=(i=n.callback)!=null&&i,u=n.maxWait,d=Date.now(),h=[];function p(){if(u!==void 0){var y=Date.now()-d;if(y+t>=u)return u-y}return t}var m=function(){var y=[].slice.call(arguments),S=this;return new Promise(function(k,P){var v=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,d=Date.now(),!s){var x=e.apply(S,y);l&&l(x),h.forEach(function(_){return(0,_.resolve)(x)}),h=[]}},p()),v){var w=e.apply(S,y);return l&&l(w),k(w)}h.push({resolve:k,reject:P})})};return m.cancel=function(y){o!==void 0&&clearTimeout(o),h.forEach(function(S){return(0,S.reject)(y)}),h=[]},m}const PF=/version\/(\d+(\.?_?\d+)+)/i;let Eg;function vo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof e>"u"&&typeof navigator>"u")return;const n=(e??navigator.userAgent).toLowerCase();if(Eg===void 0||t){const r=xF.find(i=>{let{test:o}=i;return o.test(n)});Eg=r?.describe(n)}return Eg}const xF=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:Mf(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:_g(e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:Mf(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:_g(e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:Mf(PF,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:_g(e)}}}];function Mf(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=t.match(e);return r&&r.length>=n&&r[n]||""}function _g(e){return e.includes("mac os")?Mf(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var RF="2.5.9";const IF=RF,OF=15;class Tn{}Tn.setTimeout=function(){return setTimeout(...arguments)};Tn.setInterval=function(){return setInterval(...arguments)};Tn.clearTimeout=function(){return clearTimeout(...arguments)};Tn.clearInterval=function(){return clearInterval(...arguments)};class pt{constructor(t,n,r,i,o){if(typeof t=="object")this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRatio,this.encoding={maxBitrate:t.maxBitrate,maxFramerate:t.maxFramerate,priority:t.priority};else if(n!==void 0&&r!==void 0)this.width=t,this.height=n,this.aspectRatio=t/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const MF=["vp8","h264"],Jx=["vp8","h264","vp9","av1"];function LF(e){return!!MF.find(t=>t===e)}var s0;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3},e.musicStereo={maxBitrate:48e3},e.musicHighQuality={maxBitrate:64e3},e.musicHighQualityStereo={maxBitrate:96e3}})(s0||(s0={}));const Pu={h90:new pt(160,90,9e4,20),h180:new pt(320,180,16e4,20),h216:new pt(384,216,18e4,20),h360:new pt(640,360,45e4,20),h540:new pt(960,540,8e5,25),h720:new pt(1280,720,17e5,30),h1080:new pt(1920,1080,3e6,30),h1440:new pt(2560,1440,5e6,30),h2160:new pt(3840,2160,8e6,30)},a0={h120:new pt(160,120,7e4,20),h180:new pt(240,180,125e3,20),h240:new pt(320,240,14e4,20),h360:new pt(480,360,33e4,20),h480:new pt(640,480,5e5,20),h540:new pt(720,540,6e5,25),h720:new pt(960,720,13e5,30),h1080:new pt(1440,1080,23e5,30),h1440:new pt(1920,1440,38e5,30)},e1={h360fps3:new pt(640,360,2e5,3,"medium"),h360fps15:new pt(640,360,4e5,15,"medium"),h720fps5:new pt(1280,720,8e5,5,"medium"),h720fps15:new pt(1280,720,15e5,15,"medium"),h720fps30:new pt(1280,720,2e6,30,"medium"),h1080fps15:new pt(1920,1080,25e5,15,"medium"),h1080fps30:new pt(1920,1080,5e6,30,"medium"),original:new pt(0,0,7e6,30,"medium")};function AF(e){if(!(typeof e>"u"))return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}const DF=5e3,Pc=[];var Kr;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"})(Kr||(Kr={}));class H extends $i.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=H.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Ke,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),DF):this.handleAppVisibilityChanged()},this.log=go((i=r.loggerName)!==null&&i!==void 0?i:ki.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=H.Source.Unknown}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),kt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===H.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===H.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(Pc.forEach(o=>{o.parentElement===null&&!t&&(t=o)}),t&&Pc.splice(Pc.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),ol(this.mediaStreamTrack,t);const r=t.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return t.play().then(()=>{this.emit(i?oe.AudioPlaybackStarted:oe.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?oe.AudioPlaybackFailed:oe.VideoPlaybackFailed,o):o.name==="AbortError"?Ke.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Ke.warn("could not playback ".concat(i?"audio":"video"),o),i&&t&&r.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(oe.ElementAttached,t),t}detach(t){try{if(t){ml(this.mediaStreamTrack,t);const r=this.attachedElements.indexOf(t);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(t),this.emit(oe.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(r=>{ml(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(oe.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(t){t.loggerName&&(this.log=go(t.loggerName)),t.loggerContextCb&&(this.loggerContextCb=t.loggerContextCb)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),Pc.forEach(r=>{r.parentElement||(n=!1)}),n&&Pc.push(t)}}handleAppVisibilityChanged(){return D(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===H.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(t=>t.play().catch(()=>{})),0)})}addAppVisibilityListener(){Sr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Sr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function ol(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let r;e.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(e)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(e)),(!ta()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(ta()||Ml())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function ml(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(d){d.Audio="audio",d.Video="video",d.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(d){d.Camera="camera",d.Microphone="microphone",d.ScreenShare="screen_share",d.ScreenShareAudio="screen_share_audio",d.Unknown="unknown"})(n=e.Source||(e.Source={}));let r;(function(d){d.Active="active",d.Paused="paused",d.Unknown="unknown"})(r=e.StreamState||(e.StreamState={}));function i(d){switch(d){case t.Audio:return pi.AUDIO;case t.Video:return pi.VIDEO;default:return pi.DATA}}e.kindToProto=i;function o(d){switch(d){case pi.AUDIO:return t.Audio;case pi.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=o;function s(d){switch(d){case n.Camera:return Dn.CAMERA;case n.Microphone:return Dn.MICROPHONE;case n.ScreenShare:return Dn.SCREEN_SHARE;case n.ScreenShareAudio:return Dn.SCREEN_SHARE_AUDIO;default:return Dn.UNKNOWN}}e.sourceToProto=s;function l(d){switch(d){case Dn.CAMERA:return n.Camera;case Dn.MICROPHONE:return n.Microphone;case Dn.SCREEN_SHARE:return n.ScreenShare;case Dn.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=l;function u(d){switch(d){case Kv.ACTIVE:return r.Active;case Kv.PAUSED:return r.Paused;default:return r.Unknown}}e.streamStateFromProto=u})(H||(H={}));function Qx(e,t,n){var r;const i=(r=AF(e))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&l0(i.audio,t),i.video&&l0(i.video,n),i}function l0(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function op(e){const t={};if(e.video)if(typeof e.video=="object"){const n={},r=n,i=e.video;Object.keys(i).forEach(o=>{switch(o){case"resolution":l0(r,i.resolution);break;default:r[o]=i[o]}}),t.video=n}else t.video=e.video;else t.video=!1;return e.audio?typeof e.audio=="object"?t.audio=e.audio:t.audio=!0:t.audio=!1,t}function NF(e){return D(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=t1();if(r){const i=r.createAnalyser();i.fftSize=2048;const o=i.frequencyBinCount,s=new Uint8Array(o);r.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(i),yield ji(n),i.getByteTimeDomainData(s);const u=s.some(d=>d!==128&&d!==0);return r.close(),!u}return!1}()})}function t1(){const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e)return new e({latencyHint:"interactive"})}function pw(e){return e===H.Source.Microphone?"audioinput":e===H.Source.Camera?"videoinput":void 0}function UF(e){var t,n;let r=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(r=typeof r=="boolean"?{}:r,ta()?r=Object.assign(Object.assign({},r),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:r,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function Lf(e){const t=e.split("/")[1].toLowerCase();if(!Jx.includes(t))throw Error("Video codec not supported: ".concat(t));return t}function FF(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new Jy({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}function kt(e){return e instanceof H?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?kt(e.track):{})}}function jF(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function zF(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={});const r=[...Object.keys(t),...Object.keys(e)],i={};for(const o of r)e[o]!==t[o]&&(i[o]=(n=t[o])!==null&&n!==void 0?n:"");return i}const BF="|",mw="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function VF(e){const t=e.split(BF);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function ji(e){return D(this,void 0,void 0,function*(){return new Promise(t=>Tn.setTimeout(t,e))})}function c0(){return"addTransceiver"in RTCPeerConnection.prototype}function u0(){return"addTrack"in RTCPeerConnection.prototype}function $F(){if(!("getCapabilities"in RTCRtpSender)||ta())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/AV1"){t=!0;break}}return t}function WF(){if(!("getCapabilities"in RTCRtpSender)||Ml())return!1;if(ta()){const n=vo();if(n?.version&&Ll(n.version,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/VP9"){t=!0;break}}return t}function Zc(e){return e==="av1"||e==="vp9"}function d0(e){return document?(e||(e=document.createElement("audio")),"setSinkId"in e):!1}function HF(){return typeof RTCPeerConnection>"u"?!1:c0()||u0()}function Ml(){var e;return((e=vo())===null||e===void 0?void 0:e.name)==="Firefox"}function ta(){var e;return((e=vo())===null||e===void 0?void 0:e.name)==="Safari"}function GF(){const e=vo();return e?.name==="Safari"&&e.version.startsWith("17.")}function Yx(){var e,t;return Sr()?(t=(e=navigator.userAgentData)===null||e===void 0?void 0:e.mobile)!==null&&t!==void 0?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function qF(){const e=vo(),t="17.2";if(e)return e.name!=="Safari"&&e.os!=="iOS"||e.os==="iOS"&&e.osVersion&&Ll(t,e.osVersion)>=0?!0:e.name==="Safari"&&Ll(t,e.version)>=0}function Sr(){return typeof document<"u"}function yo(){return navigator.product=="ReactNative"}function f0(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function Xx(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function Zx(){if(!yo())return;let e=Xx();if(e)return e.platform}function gw(){if(Sr())return window.devicePixelRatio;if(yo()){let e=Xx();if(e)return e.devicePixelRatio}return 1}function Ll(e,t){const n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const s=parseInt(n[o],10),l=parseInt(r[o],10);if(s>l)return 1;if(s<l)return-1;if(o===i-1&&s===l)return 0}return e===""&&t!==""?-1:t===""?1:n.length==r.length?0:n.length<r.length?-1:1}function KF(e){for(const t of e)t.target.handleResize(t)}function JF(e){for(const t of e)t.target.handleVisibilityChanged(t)}let Pg=null;const vw=()=>(Pg||(Pg=new ResizeObserver(KF)),Pg);let xg=null;const yw=()=>(xg||(xg=new IntersectionObserver(JF,{root:null,rootMargin:"0px"})),xg);function QF(){var e;const t=new N7({sdk:rx.JS,protocol:OF,version:IF});return yo()&&(t.os=(e=Zx())!==null&&e!==void 0?e:""),t}function bw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=e,i.height=t;const o=i.getContext("2d");o?.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(e/2,t/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=i.captureStream(),[l]=s.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let xc;function Rg(){if(!xc){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const r=e.createMediaStreamDestination();if(t.connect(n),n.connect(r),t.start(),[xc]=r.stream.getAudioTracks(),!xc)throw Error("Could not get empty media stream audio track");xc.enabled=!1}return xc.clone()}class eR{constructor(t,n){this.onFinally=n,this.promise=new Promise((r,i)=>D(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,t&&(yield t(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function YF(e,t){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},t),r=t1();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?e.mediaStreamTrack.clone():e.mediaStreamTrack,o=r.createMediaStreamSource(new MediaStream([i])),s=r.createAnalyser();s.minDecibels=n.minDecibels,s.maxDecibels=n.maxDecibels,s.fftSize=n.fftSize,s.smoothingTimeConstant=n.smoothingTimeConstant,o.connect(s);const l=new Uint8Array(s.frequencyBinCount);return{calculateVolume:()=>{s.getByteFrequencyData(l);let h=0;for(const m of l)h+=Math.pow(m/255,2);return Math.sqrt(h/l.length)},analyser:s,cleanup:()=>D(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class br{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(i=>t=()=>{this._locks-=1,i()}),r=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),r}}function XF(e){return Jx.includes(e)}function co(e){if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))return e[0];if(e.exact)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function ZF(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function kw(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function ej(e,t){return e.segments.map(n=>{let{id:r,text:i,language:o,startTime:s,endTime:l,final:u}=n;var d;const h=(d=t.get(r))!==null&&d!==void 0?d:Date.now(),p=Date.now();return u?t.delete(r):t.set(r,h),{id:r,text:i,startTime:Number.parseInt(s.toString()),endTime:Number.parseInt(l.toString()),final:u,language:o,firstReceivedTime:h,lastReceivedTime:p}})}function tj(e){const{id:t,timestamp:n,message:r,editTimestamp:i}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}const Ig="default";class wn{static getInstance(){return this.instance===void 0&&(this.instance=new wn),this.instance}getDevices(t){return D(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;if(((o=wn.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){Ke.debug("awaiting getUserMedia promise");try{n?yield wn.userMediaPromiseMap.get(n):yield Promise.all(wn.userMediaPromiseMap.values())}catch{Ke.warn("error waiting for media permissons")}}let s=yield navigator.mediaDevices.enumerateDevices();if(i&&!(ta()&&r.hasDeviceInUse(n))&&(s.filter(u=>u.kind===n).length===0||s.some(u=>{const d=u.label==="",h=n?u.kind===n:!0;return d&&h}))){const u={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"},d=yield navigator.mediaDevices.getUserMedia(u);s=yield navigator.mediaDevices.enumerateDevices(),d.getTracks().forEach(h=>{h.stop()})}return n&&(s=s.filter(l=>l.kind===n)),s}()})}normalizeDeviceId(t,n,r){return D(this,void 0,void 0,function*(){if(n!==Ig)return n;const i=yield this.getDevices(t),o=i.find(l=>l.deviceId===Ig);if(!o){Ke.warn("could not reliably determine default device");return}const s=i.find(l=>l.deviceId!==Ig&&l.groupId===(r??o.groupId));if(!s){Ke.warn("could not reliably determine default device");return}return s?.deviceId})}hasDeviceInUse(t){return t?wn.userMediaPromiseMap.has(t):wn.userMediaPromiseMap.size>0}}wn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];wn.userMediaPromiseMap=new Map;const nj=1e3;class Hs extends H{get sender(){return this._sender}set sender(t){this._sender=t}get constraints(){return this._constraints}constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(t,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Zy(()=>D(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>D(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(oe.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new br,this.pauseUpstreamLock=new br,this.processorLock=new br,this.restartLock=new br,this.setMediaStreamTrack(t,!0),this._constraints=t.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==H.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(t,n){return D(this,void 0,void 0,function*(){if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{ml(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let r;if(this.processor&&t){const i=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(ol(t,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}finally{i()}}this.sender&&(yield this.sender.replaceTrack(r??t)),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{ol(r??t,i)}))})}waitForDimensions(){return D(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nj;return function*(){var r;if(t.kind===H.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=vo())===null||r===void 0?void 0:r.os)==="iOS"&&(yield ji(10));const i=Date.now();for(;Date.now()-i<n;){const o=t.dimensions;if(o)return o;yield ji(50)}throw new Li("unable to get track dimensions after timeout")}()})}getDeviceId(){return D(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(t.source===H.Source.ScreenShare)return;const{deviceId:r,groupId:i}=t._mediaStreamTrack.getSettings(),o=t.kind===H.Kind.Audio?"audioinput":"videoinput";return n?wn.getInstance().normalizeDeviceId(o,r,i):r}()})}mute(){return D(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return D(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,n){return D(this,void 0,void 0,function*(){if(!this.sender)throw new Li("unable to replace an unpublished track");let r,i;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,i=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(t),i&&this.processor&&(yield this.stopProcessor()),this})}restart(t){return D(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{t||(t=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:t}));const r={audio:!1,video:!1};this.kind===H.Kind.Video?r.video=t:r.audio=t,this.attachedElements.forEach(s=>{ml(this.mediaStreamTrack,s)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const o=(yield navigator.mediaDevices.getUserMedia(r)).getTracks()[0];return o.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(o),this._constraints=t,this.emit(oe.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(t){this.log.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted"),this.logContext),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?oe.Muted:oe.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return D(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),Yx()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return D(this,void 0,void 0,function*(){const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(oe.UpstreamPaused,this);const n=vo();if(n?.name==="Safari"&&Ll(n.version,"12.0")<0)throw new Xy("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{t()}})}resumeUpstream(){return D(this,void 0,void 0,function*(){const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(oe.UpstreamResumed,this),yield this.sender.replaceTrack(this.mediaStreamTrack)}finally{t()}})}getRTCStatsReport(){return D(this,void 0,void 0,function*(){var t;return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){return D(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;const s=yield r.processorLock.lock();try{r.log.debug("setting up processor",r.logContext);const l=document.createElement(r.kind),u={kind:r.kind,track:r._mediaStreamTrack,element:l,audioContext:r.audioContext};if(yield n.init(u),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.stopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(ol(r._mediaStreamTrack,l),l.muted=!0,l.play().catch(d=>r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:d}))),r.processor=n,r.processorElement=l,r.processor.processedTrack){for(const d of r.attachedElements)d!==r.processorElement&&i&&(ml(r._mediaStreamTrack,d),ol(r.processor.processedTrack,d));yield(o=r.sender)===null||o===void 0?void 0:o.replaceTrack(r.processor.processedTrack)}r.emit(oe.TrackProcessorUpdate,r.processor)}finally{s()}}()})}getProcessor(){return this.processor}stopProcessor(){return D(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;t.processor&&(t.log.debug("stopping processor",t.logContext),(r=t.processor.processedTrack)===null||r===void 0||r.stop(),yield t.processor.destroy(),t.processor=void 0,n||((i=t.processorElement)===null||i===void 0||i.remove(),t.processorElement=void 0),yield t._mediaStreamTrack.applyConstraints(t._constraints),yield t.setMediaStreamTrack(t._mediaStreamTrack,!0),t.emit(oe.TrackProcessorUpdate))}()})}}class rj extends $i.EventEmitter{constructor(t){super(),this.onWorkerMessage=n=>{var r,i;const{kind:o,data:s}=n.data;switch(o){case"error":Ke.error(s.error.message),this.emit(Qo.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)});break;case"enable":if(s.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)}),this.encryptionEnabled!==s.enabled&&s.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Qo.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const l=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(s.participantIdentity);if(!l)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(Qo.ParticipantEncryptionStatusChanged,s.enabled,l)}break;case"ratchetKey":this.keyProvider.emit(ss.KeyRatcheted,s.material,s.keyIndex);break}},this.onWorkerError=n=>{Ke.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Qo.EncryptionError,n.error)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1}setup(t){if(!TF())throw new Xy("tried to setup end-to-end encryption on an unsupported browser");if(Ke.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:cF.getLevel()}};this.worker&&(Ke.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){Ke.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?Ke.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(ue.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(G.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==$r.NONE,i.identity)),t.on(G.ConnectionStateChanged,r=>{r===tt.Connected&&t.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==$r.NONE,i.identity)})})}).on(G.TrackUnsubscribed,(r,i,o)=>{var s;const l={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(l)}).on(G.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(G.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),t.localParticipant.on(Q.LocalTrackPublished,r=>D(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(ss.SetKey,r=>this.postKey(r)).on(ss.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(r)}postKey(t){let{key:n,participantIdentity:r,keyIndex:i}=t;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(t,n){if(this.worker){const r={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,r){if(t.receiver){if(!r?.mimeType||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?Lf(r.mimeType):void 0)}}setupE2EESender(t,n){if(!(t instanceof Hs)||!n){n||Ke.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,r,i){return D(this,void 0,void 0,function*(){if(this.worker){if(i0()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};t.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(tf in t&&i){const u={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(u);return}let o=t.writableStream,s=t.readableStream;if(!o||!s){const u=t.createEncodedStreams();t.writableStream=u.writable,o=u.writable,t.readableStream=u.readable,s=u.readable}const l={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(l,[s,o])}t[tf]=!0}})}handleSender(t,n,r){var i;if(!(tf in t||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(i0()){Ke.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,o)}else{Ke.info("initialize encoded streams");const o=t.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s,[o.readable,o.writable])}t[tf]=!0}}}var eu;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(eu||(eu={}));class ij{constructor(){this.pendingTasks=new Map,this.taskMutex=new br,this.nextTaskIndex=0}run(t){return D(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:eu.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=eu.RUNNING,yield t()}finally{n.status=eu.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return D(this,void 0,void 0,function*(){return this.run(()=>D(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const oj=["syncState","trickle","offer","answer","simulate","leave"];function sj(e){const t=oj.indexOf(e.case)>=0;return Ke.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var Dt;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(Dt||(Dt={}));class n1{get currentState(){return this.state}get isDisconnected(){return this.state===Dt.DISCONNECTING||this.state===Dt.DISCONNECTED}get isEstablishingConnection(){return this.state===Dt.CONNECTING||this.state===Dt.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Dt.DISCONNECTED,this.log=Ke,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=go((r=n.loggerName)!==null&&r!==void 0?r:ki.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=t,this.requestQueue=new ij,this.queuedRequests=[],this.closingLock=new br,this.connectionLock=new br,this.state=Dt.DISCONNECTED}get logContext(){var t,n;return(n=(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:{}}join(t,n,r,i){return D(this,void 0,void 0,function*(){return this.state=Dt.CONNECTING,this.options=r,yield this.connect(t,n,r,i)})}reconnect(t,n,r,i){return D(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Dt.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(t,n,r,i){this.connectOptions=r,t=ZF(t),t=t.replace(/\/$/,""),t+="/rtc";const o=QF(),s=aj(n,o,r);return new Promise((l,u)=>D(this,void 0,void 0,function*(){const d=yield this.connectionLock.lock();try{const h=()=>D(this,void 0,void 0,function*(){this.close(),clearTimeout(p),u(new wt("room connection has been cancelled (signal)"))}),p=setTimeout(()=>{this.close(),u(new wt("room connection has timed out (signal)"))},r.websocketTimeout);i?.aborted&&h(),i?.addEventListener("abort",h),this.log.debug("connecting to ".concat(t+s),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(t+s),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(p)},this.ws.onerror=m=>D(this,void 0,void 0,function*(){if(this.state!==Dt.CONNECTED){this.state=Dt.DISCONNECTED,clearTimeout(p);try{const y=yield fetch("http".concat(t.substring(2),"/validate").concat(s));if(y.status.toFixed(0).startsWith("4")){const S=yield y.text();u(new wt(S,Un.NotAllowed,y.status))}else u(new wt("Internal error",Un.InternalError,y.status))}catch{u(new wt("server was not reachable",Un.ServerUnreachable))}return}this.handleWSError(m)}),this.ws.onmessage=m=>D(this,void 0,void 0,function*(){var y,S,k;let P;if(typeof m.data=="string"){const v=JSON.parse(m.data);P=ZC.fromJson(v,{ignoreUnknownFields:!0})}else if(m.data instanceof ArrayBuffer)P=ZC.fromBinary(new Uint8Array(m.data));else{this.log.error("could not decode websocket message: ".concat(typeof m.data),this.logContext);return}if(this.state!==Dt.CONNECTED){let v=!1;if(((y=P.message)===null||y===void 0?void 0:y.case)==="join"?(this.state=Dt.CONNECTED,i?.removeEventListener("abort",h),this.pingTimeoutDuration=P.message.value.pingTimeout,this.pingIntervalDuration=P.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),l(P.message.value)):this.state===Dt.RECONNECTING&&P.message.case!=="leave"?(this.state=Dt.CONNECTED,i?.removeEventListener("abort",h),this.startPingInterval(),((S=P.message)===null||S===void 0?void 0:S.case)==="reconnect"?l(P.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),l(void 0),v=!0)):this.isEstablishingConnection&&P.message.case==="leave"?u(new wt("Received leave request while trying to (re)connect",Un.LeaveRequest)):r.reconnect||u(new wt("did not receive join response, got ".concat((k=P.message)===null||k===void 0?void 0:k.case," instead"))),!v)return}this.signalLatency&&(yield ji(this.signalLatency)),this.handleSignalResponse(P)}),this.ws.onclose=m=>{this.isEstablishingConnection&&u(new wt("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:m.reason,code:m.code,wasClean:m.wasClean,state:this.state})),this.handleOnClose(m.reason)}}finally{d()}}))}close(){return D(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield t.closingLock.lock();try{if(t.clearPingInterval(),n&&(t.state=Dt.DISCONNECTING),t.ws){t.ws.onmessage=null,t.ws.onopen=null,t.ws.onclose=null;const i=new Promise(o=>{t.ws?t.ws.onclose=()=>{o()}:o()});t.ws.readyState<t.ws.CLOSING&&(t.ws.close(),yield Promise.race([i,ji(250)])),t.ws=void 0}}finally{n&&(t.state=Dt.DISCONNECTED),r()}}()})}sendOffer(t){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:t.sdp})),this.sendRequest({case:"offer",value:mh(t)})}sendAnswer(t){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:t.sdp})),this.sendRequest({case:"answer",value:mh(t)})}sendIceCandidate(t,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:t})),this.sendRequest({case:"trickle",value:new qy({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new Ky({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return D(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const l=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new cx({requestId:l,metadata:r,name:i,attributes:s})}),l}()})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new lx({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new fx({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Ut.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new mx({timestamp:Ut.parse(Date.now()),rtt:Ut.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(t,n){return this.sendRequest({case:"updateAudioTrack",value:new ax({trackSid:t,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new rp({reason:fl.CLIENT_INITIATED,action:hl.DISCONNECT})})}sendRequest(t){return D(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!sj(n)&&r.state===Dt.RECONNECTING){r.queuedRequests.push(()=>D(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield ji(r.signalLatency)),!r.ws||r.ws.readyState!==r.ws.OPEN){r.log.error("cannot send signal request before connected, type: ".concat(n?.case),r.logContext);return}const s=new j7({message:n});try{r.useJSON?r.ws.send(s.toJsonString()):r.ws.send(s.toBinary())}catch(l){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:l}))}}()})}handleSignalResponse(t){var n,r;const i=t.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const s=Sw(i.value);this.onAnswer&&this.onAnswer(s)}else if(i.case==="offer"){const s=Sw(i.value);this.onOffer&&this.onOffer(s)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return D(this,void 0,void 0,function*(){if(this.state===Dt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(t),Object.assign(Object.assign({},this.logContext),{reason:t})),n&&n(t)})}handleWSError(t){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:t}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Tn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Tn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Tn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Tn.clearInterval(this.pingInterval)}}function Sw(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function mh(e){return new ea({sdp:e.sdp,type:e.type})}function aj(e,t,n){var r;const i=new URLSearchParams;return i.set("access_token",e),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",yo()?"reactnative":"js"),i.set("version",t.version),i.set("protocol",t.protocol.toString()),t.deviceModel&&i.set("device_model",t.deviceModel),t.os&&i.set("os",t.os),t.osVersion&&i.set("os_version",t.osVersion),t.browser&&i.set("browser",t.browser),t.browserVersion&&i.set("browser_version",t.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var xi={},Og={},Mg={exports:{}},Cw;function tR(){if(Cw)return Mg.exports;Cw=1;var e=Mg.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Mg.exports}var ww;function lj(){return ww||(ww=1,function(e){var t=function(l){return String(Number(l))===l?Number(l):l},n=function(l,u,d,h){if(h&&!d)u[h]=t(l[1]);else for(var p=0;p<d.length;p+=1)l[p+1]!=null&&(u[d[p]]=t(l[p+1]))},r=function(l,u,d){var h=l.name&&l.names;l.push&&!u[l.push]?u[l.push]=[]:h&&!u[l.name]&&(u[l.name]={});var p=l.push?{}:h?u[l.name]:u;n(d.match(l.reg),p,l.names,l.name),l.push&&u[l.push].push(p)},i=tR(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(l){var u={},d=[],h=u;return l.split(/(\r\n|\r|\n)/).filter(o).forEach(function(p){var m=p[0],y=p.slice(2);m==="m"&&(d.push({rtp:[],fmtp:[]}),h=d[d.length-1]);for(var S=0;S<(i[m]||[]).length;S+=1){var k=i[m][S];if(k.reg.test(y))return r(k,h,y)}}),u.media=d,u};var s=function(l,u){var d=u.split(/=(.+)/,2);return d.length===2?l[d[0]]=t(d[1]):d.length===1&&u.length>1&&(l[d[0]]=void 0),l};e.parseParams=function(l){return l.split(/;\s?/).reduce(s,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(l){return l.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(l){for(var u=[],d=l.split(" ").map(t),h=0;h<d.length;h+=3)u.push({component:d[h],ip:d[h+1],port:d[h+2]});return u},e.parseImageAttributes=function(l){return l.split(" ").map(function(u){return u.substring(1,u.length-1).split(",").reduce(s,{})})},e.parseSimulcastStreamList=function(l){return l.split(";").map(function(u){return u.split(",").map(function(d){var h,p=!1;return d[0]!=="~"?h=t(d):(h=t(d.substring(1,d.length)),p=!0),{scid:h,paused:p}})})}}(Og)),Og}var Lg,Tw;function cj(){if(Tw)return Lg;Tw=1;var e=tR(),t=/%[sdv%]/g,n=function(s){var l=1,u=arguments,d=u.length;return s.replace(t,function(h){if(l>=d)return h;var p=u[l];switch(l+=1,h){case"%%":return"%";case"%s":return String(p);case"%d":return Number(p);case"%v":return""}})},r=function(s,l,u){var d=l.format instanceof Function?l.format(l.push?u:u[l.name]):l.format,h=[s+"="+d];if(l.names)for(var p=0;p<l.names.length;p+=1){var m=l.names[p];l.name?h.push(u[l.name][m]):h.push(u[l.names[p]])}else h.push(u[l.name]);return n.apply(null,h)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return Lg=function(s,l){l=l||{},s.version==null&&(s.version=0),s.name==null&&(s.name=" "),s.media.forEach(function(p){p.payloads==null&&(p.payloads="")});var u=l.outerOrder||i,d=l.innerOrder||o,h=[];return u.forEach(function(p){e[p].forEach(function(m){m.name in s&&s[m.name]!=null?h.push(r(p,m,s)):m.push in s&&s[m.push]!=null&&s[m.push].forEach(function(y){h.push(r(p,m,y))})})}),s.media.forEach(function(p){h.push(r("m",e.m[0],p)),d.forEach(function(m){e[m].forEach(function(y){y.name in p&&p[y.name]!=null?h.push(r(m,y,p)):y.push in p&&p[y.push]!=null&&p[y.push].forEach(function(S){h.push(r(m,y,S))})})})}),h.join(`\r
`)+`\r
`},Lg}var Ew;function uj(){if(Ew)return xi;Ew=1;var e=lj(),t=cj();return xi.write=t,xi.parse=e.parse,xi.parseParams=e.parseParams,xi.parseFmtpConfig=e.parseFmtpConfig,xi.parsePayloads=e.parsePayloads,xi.parseRemoteCandidates=e.parseRemoteCandidates,xi.parseImageAttributes=e.parseImageAttributes,xi.parseSimulcastStreamList=e.parseSimulcastStreamList,xi}var Bo=uj();const dj=.7,fj=20,gl={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class _w extends $i.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=Ke,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Zy(i=>D(this,void 0,void 0,function*(){this.emit(gl.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(i)i(o);else throw o}}),fj),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=go((r=n.loggerName)!==null&&r!==void 0?r:ki.PCTransport),this.loggerOptions=n,this.config=t,this._pc=this.createPC()}createPC(){const t=new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},t.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},t.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},t}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return D(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t){return D(this,void 0,void 0,function*(){var n;let r;if(t.type==="offer"){let{stereoMids:i,nackMids:o}=pj(t);this.remoteStereoMids=i,this.remoteNackMids=o}else if(t.type==="answer"){const i=Bo.parse((n=t.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(s=>{if(!s.transceiver||o.mid!=s.transceiver.mid)return!1;let l=0;if(o.rtp.some(d=>d.codec.toUpperCase()===s.codec.toUpperCase()?(l=d.payload,!0):!1),l===0)return!0;let u=!1;for(const d of o.fmtp)if(d.payload===l){d.config=d.config.split(";").filter(h=>!h.includes("maxaveragebitrate")).join(";"),s.maxbr>0&&(d.config+=";maxaveragebitrate=".concat(s.maxbr*1e3)),u=!0;break}return u||s.maxbr>0&&o.fmtp.push({payload:l,config:"maxaveragebitrate=".concat(s.maxbr*1e3)}),!0})}),r=Bo.write(i)}yield this.setMungedSDP(t,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(gl.NegotiationComplete),t.sdp&&Bo.parse(t.sdp).media.forEach(o=>{o.type==="video"&&this.emit(gl.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(t){return D(this,void 0,void 0,function*(){var n;if(this.onOffer===void 0)return;if(t?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(t?.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(t);this.log.debug("original offer",Object.assign({sdp:r.sdp},this.logContext));const i=Bo.parse((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"?Pw(o,[],[]):o.type==="video"&&this.trackBitrates.some(s=>{if(!o.msid||!s.cid||!o.msid.includes(s.cid))return!1;let l=0;if(o.rtp.some(d=>d.codec.toUpperCase()===s.codec.toUpperCase()?(l=d.payload,!0):!1),l===0||(Zc(s.codec)&&hj(o),s.codec!=="av1"))return!0;const u=Math.round(s.maxbr*dj);for(const d of o.fmtp)if(d.payload===l){d.config.includes("x-google-start-bitrate")||(d.config+=";x-google-start-bitrate=".concat(u));break}return!0})}),yield this.setMungedSDP(r,Bo.write(i)),this.onOffer(r)})}createAndSetAnswer(){return D(this,void 0,void 0,function*(){var t;const n=yield this.pc.createAnswer(),r=Bo.parse((t=n.sdp)!==null&&t!==void 0?t:"");return r.media.forEach(i=>{i.type==="audio"&&Pw(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Bo.write(r)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new an("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new an("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return D(this,void 0,void 0,function*(){var t;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),r.set(l.id,l);break;case"remote-candidate":i.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const s=(t=r.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(t,n,r){return D(this,void 0,void 0,function*(){if(n){const i=t.sdp;t.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(o){this.log.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),t.sdp=i}}try{r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const s={error:o,sdp:t.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(t.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new o0(o)}})}}function Pw(e,t,n){let r=0;e.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&e.rtcpFb.push({payload:r,type:"nack"}),t.includes(e.mid)&&e.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function hj(e){var t,n;let r=0;((t=e.ext)===null||t===void 0?void 0:t.some(o=>o.uri===mw?!0:(o.value>r&&(r=o.value),!1)))||(n=e.ext)===null||n===void 0||n.push({value:r+1,uri:mw})}function pj(e){var t;const n=[],r=[],i=Bo.parse((t=e.sdp)!==null&&t!==void 0?t:"");let o=0;return i.media.forEach(s=>{var l;s.type==="audio"&&(s.rtp.some(u=>u.codec==="opus"?(o=u.payload,!0):!1),!((l=s.rtcpFb)===null||l===void 0)&&l.some(u=>u.payload===o&&u.type==="nack")&&r.push(s.mid),s.fmtp.some(u=>u.payload===o?(u.config.includes("sprop-stereo=1")&&n.push(s.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const h0="vp8",mj={audioPreset:s0.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:e1.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:h0,backupCodec:!0},nR={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},rR={resolution:Pu.h720.resolution},gj={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new dF,disconnectOnPageLeave:!0,webAudioMix:!1},r1={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Wt;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(Wt||(Wt={}));class vj{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n,r){var i;this.peerConnectionTimeout=r1.peerConnectionTimeout,this.log=Ke,this.updateState=()=>{var o;const s=this.state,l=this.requiredTransports.map(u=>u.getConnectionState());l.every(u=>u==="connected")?this.state=Wt.CONNECTED:l.some(u=>u==="failed")?this.state=Wt.FAILED:l.some(u=>u==="connecting")?this.state=Wt.CONNECTING:l.every(u=>u==="closed")?this.state=Wt.CLOSED:l.some(u=>u==="closed")?this.state=Wt.CLOSING:l.every(u=>u==="new")&&(this.state=Wt.NEW),s!==this.state&&(this.log.debug("pc state change: from ".concat(Wt[s]," to ").concat(Wt[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=go((i=r.loggerName)!==null&&i!==void 0?i:ki.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new _w(t,r),this.subscriber=new _w(t,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,o,mi.PUBLISHER)},this.subscriber.onIceCandidate=o=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,o,mi.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var s;(s=this.onDataChannel)===null||s===void 0||s.call(this,o)},this.subscriber.onTrack=o=>{var s;(s=this.onTrack)===null||s===void 0||s.call(this,o)},this.publisher.onOffer=o=>{var s;(s=this.onPublisherOffer)===null||s===void 0||s.call(this,o)},this.state=Wt.NEW,this.connectionLock=new br,this.remoteOfferLock=new br}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}requireSubscriber(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t){return this.publisher.setRemoteDescription(t)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return D(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const t=this.publisher;for(const n of t.getSenders())try{t.canRemoveTrack()&&t.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return D(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return D(this,void 0,void 0,function*(){n===mi.PUBLISHER?yield this.publisher.addIceCandidate(t):yield this.subscriber.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t){return D(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const n=yield this.remoteOfferLock.lock();try{return yield this.subscriber.setRemoteDescription(t),yield this.subscriber.createAndSetAnswer()}finally{n()}})}updateConfiguration(t,n){this.publisher.setConfiguration(t),this.subscriber.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){return D(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,t,n)))}finally{i()}})}negotiate(t){return D(this,void 0,void 0,function*(){return new Promise((n,r)=>D(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r("negotiation aborted")};t.signal.addEventListener("abort",o),this.publisher.once(gl.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(gl.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===mi.PUBLISHER?this.publisher.getConnectedAddress():t===mi.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&t.push(this.subscriber),t}ensureTransportConnected(t,n){return D(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((u,d)=>D(o,void 0,void 0,function*(){const h=()=>{this.log.warn("abort transport connection",this.logContext),Tn.clearTimeout(p),d(new wt("room connection has been cancelled",Un.Cancelled))};i?.signal.aborted&&h(),i?.signal.addEventListener("abort",h);const p=Tn.setTimeout(()=>{i?.signal.removeEventListener("abort",h),d(new wt("could not establish pc connection"))},s);for(;this.state!==Wt.CONNECTED;)if(yield ji(50),i?.signal.aborted){d(new wt("room connection has been cancelled",Un.Cancelled));return}Tn.clearTimeout(p),i?.signal.removeEventListener("abort",h),u()}))}()})}}const i1=2e3;function sp(e,t){if(!t)return 0;let n,r;return"bytesReceived"in e?(n=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,r=t.bytesSent),n===void 0||r===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-r)*8*1e3/(e.timestamp-t.timestamp)}class Cn extends Hs{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(t,H.Kind.Audio,n,r,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>D(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}s&&this.prevStats&&(this._currentBitrate=sp(s,this.prevStats)),this.prevStats=s}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(oe.AudioTrackFeatureUpdate,this,Mi.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(oe.AudioTrackFeatureUpdate,this,Mi.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}setDeviceId(t){return D(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===co(t)?!0:(this._constraints.deviceId=t,this.isMuted||(yield this.restartTrack()),this.isMuted||co(t)===this._mediaStreamTrack.getSettings().deviceId)})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return D(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===H.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return D(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==co(this._constraints.deviceId);return this.source===H.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return D(this,void 0,void 0,function*(){let n;if(t){const r=op({audio:t});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return D(this,void 0,void 0,function*(){const r=yield n.restart.call(this,t);return this.checkForSilence(),r})}startMonitor(){Sr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},i1)))}setProcessor(t){return D(this,void 0,void 0,function*(){var n;const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(t.name),this.logContext),yield t.init(i),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(oe.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){return D(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return D(this,void 0,void 0,function*(){const t=yield NF(this);return t&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(oe.AudioSilenceDetected)),t})}}function iR(e,t,n){switch(e.kind){case"audio":return new Cn(e,t,!1,void 0,n);case"video":return new An(e,t,!1,n);default:throw new Li("unsupported track type: ".concat(e.kind))}}const yj=Object.values(Pu),bj=Object.values(a0),kj=Object.values(e1),Sj=[Pu.h180,Pu.h360],Cj=[a0.h180,a0.h360],wj=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map(n=>{var r,i;return new pt(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=e.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,e.encoding.priority)}),p0=["q","h","f"];function m0(e,t,n,r){var i,o;let s=r?.videoEncoding;e&&(s=r?.screenShareEncoding);const l=r?.simulcast,u=r?.scalabilityMode,d=r?.videoCodec;if(!s&&!l&&!u||!t||!n)return[{}];s||(s=Ej(e,t,n,d),Ke.debug("using video encoding",s));const h=new pt(t,n,s.maxBitrate,s.maxFramerate,s.priority);if(u&&Zc(d)){const y=new oR(u),S=[];if(y.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(u));const k=vo();if(ta()||yo()||k?.name==="Chrome"&&Ll(k?.version,"113")<0){const P=y.suffix=="h"?2:3;for(let v=0;v<y.spatial;v+=1)S.push({rid:p0[2-v],maxBitrate:s.maxBitrate/Math.pow(P,v),maxFramerate:h.encoding.maxFramerate});S[0].scalabilityMode=u}else S.push({maxBitrate:s.maxBitrate,maxFramerate:h.encoding.maxFramerate,scalabilityMode:u});return h.encoding.priority&&(S[0].priority=h.encoding.priority,S[0].networkPriority=h.encoding.priority),Ke.debug("using svc encoding",{encodings:S}),S}if(!l)return[s];let p=[];e?p=(i=Rw(r?.screenShareSimulcastLayers))!==null&&i!==void 0?i:xw(e,h):p=(o=Rw(r?.videoSimulcastLayers))!==null&&o!==void 0?o:xw(e,h);let m;if(p.length>0){const y=p[0];p.length>1&&([,m]=p);const S=Math.max(t,n);if(S>=960&&m)return Ag(t,n,[y,m,h]);if(S>=480)return Ag(t,n,[y,h])}return Ag(t,n,[h])}function Tj(e,t,n){var r,i,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&Ke.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const l=e.mediaStreamTrack.getSettings(),u=(r=l.width)!==null&&r!==void 0?r:(i=e.dimensions)===null||i===void 0?void 0:i.width,d=(o=l.height)!==null&&o!==void 0?o:(s=e.dimensions)===null||s===void 0?void 0:s.height;return m0(e.source===H.Source.ScreenShare,u,d,n)}function Ej(e,t,n,r){const i=_j(e,t,n);let{encoding:o}=i[0];const s=Math.max(t,n);for(let l=0;l<i.length;l+=1){const u=i[l];if(o=u.encoding,u.width>=s)break}if(r)switch(r){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function _j(e,t,n){if(e)return kj;const r=t>n?t/n:n/t;return Math.abs(r-16/9)<Math.abs(r-4/3)?yj:bj}function xw(e,t){if(e)return wj(t);const{width:n,height:r}=t,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?Sj:Cj}function Ag(e,t,n){const r=[];if(n.forEach((i,o)=>{if(o>=p0.length)return;const s=Math.min(e,t),u={rid:p0[o],scaleResolutionDownBy:Math.max(1,s/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(u.maxFramerate=i.encoding.maxFramerate);const d=Ml()||o===0;i.encoding.priority&&d&&(u.priority=i.encoding.priority,u.networkPriority=i.encoding.priority),r.push(u)}),yo()&&Zx()==="ios"){let i;r.forEach(s=>{i?s.maxFramerate&&s.maxFramerate>i&&(i=s.maxFramerate):i=s.maxFramerate});let o=!0;r.forEach(s=>{var l;s.maxFramerate!=i&&(o&&(o=!1,Ke.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Ke.info('Setting framerate of encoding "'.concat((l=s.rid)!==null&&l!==void 0?l:"",'" to ').concat(i)),s.maxFramerate=i)})}return r}function Rw(e){if(e)return e.sort((t,n)=>{const{encoding:r}=t,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class oR{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}function Pj(e){return e.source===H.Source.ScreenShare||e.constraints.height&&co(e.constraints.height)>=1080?"maintain-resolution":"balanced"}const xj=5e3;class An extends Hs{get sender(){return this._sender}set sender(t){this._sender=t,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(t,H.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>D(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}const s=new Map(o.map(l=>[l.rid,l]));if(this.prevStats){let l=0;s.forEach((u,d)=>{var h;const p=(h=this.prevStats)===null||h===void 0?void 0:h.get(d);l+=sp(u,p)}),this._currentBitrate=l}this.prevStats=s}),this.senderLock=new br}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!Sr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},i1))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return D(this,void 0,void 0,function*(){var n,r,i,o,s;yield t.pauseUpstream.call(this);try{for(var l=!0,u=Wa(this.simulcastCodecs.values()),d;d=yield u.next(),n=d.done,!n;l=!0)o=d.value,l=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(h){r={error:h}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return D(this,void 0,void 0,function*(){var n,r,i,o,s;yield t.resumeUpstream.call(this);try{for(var l=!0,u=Wa(this.simulcastCodecs.values()),d;d=yield u.next(),n=d.done,!n;l=!0){o=d.value,l=!1;const h=o;yield(s=h.sender)===null||s===void 0?void 0:s.replaceTrack(h.mediaStreamTrack)}}catch(h){r={error:h}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return D(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===H.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return D(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===H.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){return D(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},l=r.get(i.remoteId);l&&(s.jitter=l.jitter,s.packetsLost=l.packetsLost,s.roundTripTime=l.roundTripTime),n.push(s)}}),n.sort((i,o)=>{var s,l;return((s=o.frameWidth)!==null&&s!==void 0?s:0)-((l=i.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(t){const n=[];for(let r=Kr.LOW;r<=Kr.HIGH;r+=1)n.push(new Qy({quality:r,enabled:r<=t}));this.log.debug("setting publishing quality. max quality ".concat(t),this.logContext),this.setPublishingLayers(n)}setDeviceId(t){return D(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===co(t)?!0:(this._constraints.deviceId=t,this.isMuted||(yield this.restartTrack()),this.isMuted||co(t)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(t){return D(this,void 0,void 0,function*(){var n,r,i,o;let s;if(t){const h=op({video:t});typeof h.video!="boolean"&&(s=h.video)}yield this.restart(s);try{for(var l=!0,u=Wa(this.simulcastCodecs.values()),d;d=yield u.next(),n=d.done,!n;l=!0){o=d.value,l=!1;const h=o;h.sender&&(h.mediaStreamTrack=this.mediaStreamTrack.clone(),yield h.sender.replaceTrack(h.mediaStreamTrack))}}catch(h){r={error:h}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}})}setProcessor(t){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return D(this,arguments,void 0,function(r){var i=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s,l,u,d,h,p;if(yield n.setProcessor.call(i,r,o),!((h=i.processor)===null||h===void 0)&&h.processedTrack)try{for(var m=!0,y=Wa(i.simulcastCodecs.values()),S;S=yield y.next(),s=S.done,!s;m=!0)d=S.value,m=!1,yield(p=d.sender)===null||p===void 0?void 0:p.replaceTrack(i.processor.processedTrack)}catch(k){l={error:k}}finally{try{!m&&!s&&(u=y.return)&&(yield u.call(y))}finally{if(l)throw l.error}}}()})}setDegradationPreference(t){return D(this,void 0,void 0,function*(){if(this.degradationPreference=t,this.sender)try{this.log.debug("setting degradationPreference to ".concat(t),this.logContext);const n=this.sender.getParameters();n.degradationPreference=t,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t)){this.log.error("".concat(t," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,r),r}setSimulcastTrackSender(t,n){const r=this.simulcastCodecs.get(t);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},xj))}setPublishingCodecs(t){return D(this,void 0,void 0,function*(){var n,r,i,o,s,l,u;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:t,currentCodec:this.codec})),!this.codec&&t.length>0)return yield this.setPublishingLayers(t[0].qualities),[];this.subscribedCodecs=t;const d=[];try{for(n=!0,r=Wa(t);i=yield r.next(),o=i.done,!o;n=!0){u=i.value,n=!1;const h=u;if(!this.codec||this.codec===h.codec)yield this.setPublishingLayers(h.qualities);else{const p=this.simulcastCodecs.get(h.codec);if(this.log.debug("try setPublishingCodec for ".concat(h.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:p})),!p||!p.sender){for(const m of h.qualities)if(m.enabled){d.push(h.codec);break}}else p.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(h.codec),this.logContext),yield Iw(p.sender,p.encodings,h.qualities,this.senderLock,this.log,this.logContext))}}}catch(h){s={error:h}}finally{try{!n&&!o&&(l=r.return)&&(yield l.call(r))}finally{if(s)throw s.error}}return d})}setPublishingLayers(t){return D(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:t})),!(!this.sender||!this.encodings)&&(yield Iw(this.sender,this.encodings,t,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return D(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),Yx()&&this.isInBackground&&this.source===H.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Iw(e,t,n,r,i,o){return D(this,void 0,void 0,function*(){const s=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:e,qualities:n,senderEncodings:t}));try{const l=e.getParameters(),{encodings:u}=l;if(!u)return;if(u.length!==t.length){i.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:u,senderEncodings:t}));return}let d=!1;!1&&u[0].scalabilityMode||u.forEach((p,m)=>{var y;let S=(y=p.rid)!==null&&y!==void 0?y:"";S===""&&(S="q");const k=sR(S),P=n.find(v=>v.quality===k);P&&p.active!==P.enabled&&(d=!0,p.active=P.enabled,i.debug("setting layer ".concat(P.quality," to ").concat(p.active?"enabled":"disabled"),o),Ml()&&(P.enabled?(p.scaleResolutionDownBy=t[m].scaleResolutionDownBy,p.maxBitrate=t[m].maxBitrate,p.maxFrameRate=t[m].maxFrameRate):(p.scaleResolutionDownBy=4,p.maxBitrate=10,p.maxFrameRate=2)))}),d&&(l.encodings=u,i.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:l.encodings})),yield e.setParameters(l))}finally{s()}})}function sR(e){switch(e){case"f":return Kr.HIGH;case"h":return Kr.MEDIUM;case"q":return Kr.LOW;default:return Kr.HIGH}}function Ow(e,t,n,r){if(!n)return[new Ws({quality:Kr.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new oR(i),s=[],l=o.suffix=="h"?1.5:2,u=o.suffix=="h"?2:3;for(let d=0;d<o.spatial;d+=1)s.push(new Ws({quality:Math.min(Kr.HIGH,o.spatial-1)-d,width:Math.ceil(e/Math.pow(l,d)),height:Math.ceil(t/Math.pow(l,d)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(u,d)):0,ssrc:0}));return s}return n.map(i=>{var o,s,l;const u=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let d=sR((s=i.rid)!==null&&s!==void 0?s:"");return new Ws({quality:d,width:Math.ceil(e/u),height:Math.ceil(t/u),bitrate:(l=i.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const Mw="_lossy",Lw="_reliable",Rj=2*1e3,Dg="leave-reconnect";var li;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(li||(li={}));class Ij extends $i.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(t){var n;super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=r1.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=li.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Ke,this.handleDataChannel=r=>D(this,[r],void 0,function(i){var o=this;let{channel:s}=i;return function*(){if(s){if(s.label===Lw)o.reliableDCSub=s;else if(s.label===Mw)o.lossyDCSub=s;else return;o.log.debug("on data channel ".concat(s.id,", ").concat(s.label),o.logContext),s.onmessage=o.handleDataMessage}}()}),this.handleDataMessage=r=>D(this,void 0,void 0,function*(){var i,o;const s=yield this.dataProcessLock.lock();try{let l;if(r.data instanceof ArrayBuffer)l=r.data;else if(r.data instanceof Blob)l=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const u=Nc.fromBinary(new Uint8Array(l));((i=u.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(ue.ActiveSpeakersUpdate,u.value.value.speakers):(((o=u.value)===null||o===void 0?void 0:o.case)==="user"&&Mj(u,u.value.value),this.emit(ue.DataPacketReceived,u))}finally{s()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?ln.LOSSY:ln.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=u=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(u,"ms. giving up"),this.logContext),this.emit(ue.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(l===null){o(s);return}r===Dg&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Tn.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===li.Connected&&r();const o=()=>{this.off(ue.Disconnected,s),r()},s=()=>{this.off(ue.Restarted,o),i()};this.once(ue.Restarted,o),this.once(ue.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(ue.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Dt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(ja.RR_SIGNAL_DISCONNECTED))},this.log=go((n=t.loggerName)!==null&&n!==void 0?n:ki.Engine),this.loggerOptions={loggerName:t.loggerName,loggerContextCb:()=>this.logContext},this.client=new n1(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new br,this.dataProcessLock=new br,this.dcBufferStatus=new Map([[ln.LOSSY,!0],[ln.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(ue.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(ue.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(ue.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(ue.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(ue.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(ue.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(ue.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(ue.SignalRequestResponse,r)}get logContext(){var t,n,r,i,o,s,l,u;return{room:(n=(t=this.latestJoinResponse)===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity,pID:(u=(l=this.latestJoinResponse)===null||l===void 0?void 0:l.participant)===null||u===void 0?void 0:u.sid}}join(t,n,r,i){return D(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(t,n,r,i);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),(!this.subscriberPrimary||o.fastPublish)&&this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof wt&&o.reason===Un.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,r,i);throw o}})}close(){return D(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.emit(ue.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){return D(this,void 0,void 0,function*(){var t;yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return D(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new Li("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],r(new wt("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[t.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){return D(this,void 0,void 0,function*(){var t;return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){return D(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==Wt.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(t);this.pcManager=new vj(i,t.subscriberPrimary,this.loggerOptions),this.emit(ue.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(o,s)=>{this.client.sendIceCandidate(o,s)},this.pcManager.onPublisherOffer=o=>{this.client.sendOffer(o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(o,s,l)=>D(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(o),this.logContext),["closed","disconnected","failed"].includes(s)&&(this.publisherConnectionPromise=void 0),o===Wt.CONNECTED){const h=this.pcState===li.New;this.pcState=li.Connected,h&&this.emit(ue.Connected,t)}else o===Wt.FAILED&&this.pcState===li.Connected&&(this.pcState=li.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?ja.RR_SUBSCRIBER_FAILED:ja.RR_PUBLISHER_FAILED));const u=this.client.isDisconnected||this.client.currentState===Dt.RECONNECTING,d=[Wt.FAILED,Wt.CLOSING,Wt.CLOSED].includes(o);u&&d&&!this._isClosed&&this.emit(ue.Offline)}),this.pcManager.onTrack=o=>{this.emit(ue.MediaTrackAdded,o.track,o.streams[0],o.receiver)},Oj((r=t.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=t=>D(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type})),yield this.pcManager.setPublisherAnswer(t))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:t,target:n})),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=t=>D(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(t);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=t=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:t.cid,track:(n=t.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[t.cid]){this.log.error("missing track resolver for ".concat(t.cid),Object.assign(Object.assign({},this.logContext),{cid:t.cid}));return}const{resolve:r}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],r(t.track)},this.client.onLocalTrackUnpublished=t=>{this.emit(ue.LocalTrackUnpublished,t)},this.client.onLocalTrackSubscribed=t=>{this.emit(ue.LocalTrackSubscribed,t)},this.client.onTokenRefresh=t=>{this.token=t},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(ue.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(ue.SubscribedQualityUpdate,t)},this.client.onClose=()=>{this.handleDisconnect("signal",ja.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:t?.reason})),t.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(t.regions)),t.action){case hl.DISCONNECT:this.emit(ue.Disconnected,t?.reason),this.close();break;case hl.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Dg);break;case hl.RESUME:this.handleDisconnect(Dg)}}}makeRTCConfiguration(t){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),t.iceServers&&!r.iceServers){const i=[];t.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),i.push(s)}),r.iceServers=i}return t.clientConfiguration&&t.clientConfiguration.forceRelay===Tu.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Mw,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Lw,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(t,n,r){return D(this,void 0,void 0,function*(){if(c0())return yield this.createTransceiverRTCRtpSender(t,n,r);if(u0())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new an("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,r,i){return D(this,void 0,void 0,function*(){if(c0())return this.createSimulcastTransceiverSender(t,n,r,i);if(u0())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(t.mediaStreamTrack);throw new an("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,r){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new an("publisher is closed");const i=[];t.mediaStream&&i.push(t.mediaStream),t instanceof An&&(t.codec=n.videoCodec);const o={direction:"sendonly",streams:i};return r&&(o.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(t,n,r,i){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new an("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return t.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(t){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new an("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){return D(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){Ke.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Tu.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Wt.NEW)===Wt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof an?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof za||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",ja.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(ue.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(t){return D(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new an("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(ue.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new za;o=yield this.join(t??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof wt&&s.reason===Un.NotAllowed?new an("could not reconnect, token might be expired"):new za}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(ue.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Dt.CONNECTED)throw new za("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(ue.Restarted)}catch(o){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(t){return D(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new an("could not reconnect, url or token not saved");if(!this.pcManager)throw new an("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(ue.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,t)}catch(i){let o="";throw i instanceof Error&&(o=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof wt&&i.reason===Un.NotAllowed?new an("could not reconnect, token might be expired"):i instanceof wt&&i.reason===Un.LeaveRequest?i:new za(o)}if(this.emit(ue.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Dt.CONNECTED)throw new za("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(ue.Resumed)})}waitForPCInitialConnection(t,n){return D(this,void 0,void 0,function*(){if(!this.pcManager)throw new an("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return D(this,void 0,void 0,function*(){this.pcState=li.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield ji(Rj),!this.pcManager)throw new an("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=li.Connected}catch(t){throw this.pcState=li.Disconnected,new wt("could not establish PC connection, ".concat(t.message))}})}sendDataPacket(t,n){return D(this,void 0,void 0,function*(){const r=t.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(t){return D(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var o;if(!r.pcManager)throw new an("PC manager is closed");const s=i?r.pcManager.subscriber:r.pcManager.publisher,l=i?"Subscriber":"Publisher";if(!s)throw new wt("".concat(l," connection not set"));let u=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),u=!0),!u&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(u=!0),u&&r.negotiate();const d=r.dataChannelForKind(n,i);if(d?.readyState==="open")return;const h=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<h;){if(s.isICEConnected&&((o=r.dataChannelForKind(n,i))===null||o===void 0?void 0:o.readyState)==="open")return;yield ji(50)}throw new wt("could not establish ".concat(l," connection, state: ").concat(s.getICEConnectionState()))}()})}ensurePublisherConnected(t){return D(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(t,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Wt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return D(this,void 0,void 0,function*(){return new Promise((t,n)=>D(this,void 0,void 0,function*(){if(!this.pcManager){n(new o0("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(ue.Closing,i),this.pcManager.publisher.once(gl.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(l=>{const u=l.codec.toLowerCase();XF(u)&&s.set(l.payload,u)}),this.emit(ue.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),t()}catch(o){o instanceof o0&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ja.RR_UNKNOWN),n(o)}finally{this.off(ue.Closing,i)}}))})}dataChannelForKind(t,n){if(n){if(t===ln.LOSSY)return this.lossyDCSub;if(t===ln.RELIABLE)return this.reliableDCSub}else{if(t===ln.LOSSY)return this.lossyDC;if(t===ln.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),l=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,u=new Array,d=new Array;t.forEach(h=>{h.isDesired!==l&&u.push(h.trackSid),h.isEnabled||d.push(h.trackSid)}),this.client.sendSyncState(new hx({answer:o?mh({sdp:o.sdp,type:o.type}):void 0,offer:s?mh({sdp:s.sdp,type:s.type}):void 0,subscription:new np({trackSids:u,subscribe:!l,participantTracks:[]}),publishTracks:FF(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:d}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(r,i)=>{r?.id!==void 0&&r.id!==null&&t.push(new px({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(ln.LOSSY),mi.PUBLISHER),n(this.dataChannelForKind(ln.RELIABLE),mi.PUBLISHER),n(this.dataChannelForKind(ln.LOSSY,!0),mi.SUBSCRIBER),n(this.dataChannelForKind(ln.RELIABLE,!0),mi.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&Tn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Sr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Sr()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class za extends Error{}function Oj(e){return e!==void 0&&e>13}function Mj(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const r=e.destinationIdentities.length!==0?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=r,t.destinationIdentities=r}class Aw{constructor(t,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return f0(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(t){return D(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(t));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),Ke.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(t){return D(this,void 0,void 0,function*(){const n=yield fetch("".concat(Lj(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new wt("Could not fetch region settings: ".concat(n.statusText),n.status===401?Un.NotAllowed:void 0,n.status)})}setServerReportedRegions(t){this.regionSettings=t,this.lastUpdateAt=Date.now()}}function Lj(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class aR extends H{constructor(t,n,r,i,o){super(t,r,o),this.sid=n,this.receiver=i}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?oe.Muted:oe.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=r=>{r.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(oe.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return D(this,void 0,void 0,function*(){var t;return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(t){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=t:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),i1)),jF()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const t=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>t());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:o}=r;o&&this.rtpTimestamp!==o&&(this.emit(oe.TimeSyncUpdate,{timestamp:i,rtpTimestamp:o}),this.rtpTimestamp=o)}};t()}}class vl extends aR{constructor(t,n,r,i,o,s){super(t,n,H.Kind.Audio,r,s),this.monitorReceiver=()=>D(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=sp(l,this.prevStats)),this.prevStats=l}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(t){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):r.volume=t;yo()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(yo())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return D(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(d0(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&d0(t)&&t.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=t.createGain(),r.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(oe.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(oe.AudioPlaybackFailed,i)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return D(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Ng=100;class tu extends aR{constructor(t,n,r,i,o){super(t,n,H.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>D(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=sp(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=Zy(()=>{this.updateDimensions()},Ng),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?ml(this._mediaStreamTrack,n):ol(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new Aj(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(t){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===t);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return D(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,r="",i=new Map;return t.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(r=>r.element===t);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return D(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var t,n;const r=this.elementInfos.reduce((l,u)=>Math.max(l,u.visibilityChangedAt||0),0),i=!((n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(l=>l.pictureInPicture),s=this.elementInfos.some(l=>l.visible)&&!i||o;if(this.lastVisible!==s){if(!s&&Date.now()-r<Ng){Tn.setTimeout(()=>{this.updateVisibility()},Ng);return}this.lastVisible=s,this.emit(oe.VisibilityChanged,s,this)}}updateDimensions(){var t,n;let r=0,i=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const l=s.width()*o,u=s.height()*o;l+u>r+i&&(r=l,i=u)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(oe.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?gw():n||(gw()>2?2:1)}}class Aj{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:s}=r;o===this.element&&(this.isIntersecting=s,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=t,this.isIntersecting=n??Dw(t),this.isPiP=Sr()&&document.pictureInPictureElement===t,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=Dw(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var t;(t=this.handleResize)===null||t===void 0||t.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,yw().observe(this.element),vw().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var t,n;(t=yw())===null||t===void 0||t.unobserve(this.element),(n=vw())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function Dw(e){let t=e.offsetTop,n=e.offsetLeft;const r=e.offsetWidth,i=e.offsetHeight,{hidden:o}=e,{opacity:s,display:l}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+i>window.pageYOffset&&n+r>window.pageXOffset&&!o&&(s!==""?parseFloat(s)>0:!0)&&l!=="none"}class no extends $i.EventEmitter{constructor(t,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=$r.NONE,this.log=Ke,this.handleMuted=()=>{this.emit(oe.Muted)},this.handleUnmuted=()=>{this.emit(oe.Unmuted)},this.log=go((o=i?.loggerName)!==null&&o!==void 0?o:ki.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=r,this.source=H.Source.Unknown}setTrack(t){this.track&&(this.track.off(oe.Muted,this.handleMuted),this.track.off(oe.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(oe.Muted,this.handleMuted),t.on(oe.Unmuted,this.handleUnmuted))}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),kt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==$r.NONE}get audioTrack(){if(this.track instanceof Cn||this.track instanceof vl)return this.track}get videoTrack(){if(this.track instanceof An||this.track instanceof tu)return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=H.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===H.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:t}))}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"}(e.PermissionStatus||(e.PermissionStatus={}))})(no||(no={}));class xu extends no{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(oe.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(t){this.track&&this.track.off(oe.Ended,this.handleTrackEnded),super.setTrack(t),t&&t.on(oe.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){return D(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){return D(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){return D(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){return D(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}getTrackFeatures(){var t;if(this.track instanceof Cn){const n=this.track.mediaStreamTrack.getSettings(),r=new Set;return n.autoGainControl&&r.add(Mi.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(Mi.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(Mi.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(Mi.TF_STEREO),!((t=this.options)===null||t===void 0)&&t.dtx||r.add(Mi.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(Mi.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function lR(e){let t,n;return typeof e.audio=="object"&&e.audio.processor&&(t=e.audio.processor),typeof e.video=="object"&&e.video.processor&&(n=e.video.processor),{audioProcessor:t,videoProcessor:n}}function cR(e){return D(this,void 0,void 0,function*(){var t,n;e??(e={}),(t=e.audio)!==null&&t!==void 0||(e.audio=!0),(n=e.video)!==null&&n!==void 0||(e.video=!0);const{audioProcessor:r,videoProcessor:i}=lR(e),o=Qx(e,nR,rR),s=op(o),l=navigator.mediaDevices.getUserMedia(s);e.audio&&(wn.userMediaPromiseMap.set("audioinput",l),l.catch(()=>wn.userMediaPromiseMap.delete("audioinput"))),e.video&&(wn.userMediaPromiseMap.set("videoinput",l),l.catch(()=>wn.userMediaPromiseMap.delete("videoinput")));const u=yield l;return Promise.all(u.getTracks().map(d=>D(this,void 0,void 0,function*(){const h=d.kind==="audio";h?o.audio:o.video;let p;const m=h?s.audio:s.video;typeof m!="boolean"&&(p=m),p?p.deviceId=d.getSettings().deviceId:p={deviceId:d.getSettings().deviceId};const y=iR(d,p);return y.kind===H.Kind.Video?y.source=H.Source.Camera:y.kind===H.Kind.Audio&&(y.source=H.Source.Microphone),y.mediaStream=u,y instanceof Cn&&r?yield y.setProcessor(r):y instanceof An&&i&&(yield y.setProcessor(i)),y})))})}function Dj(e){return D(this,void 0,void 0,function*(){return(yield cR({audio:!1,video:e}))[0]})}function Nj(e){return D(this,void 0,void 0,function*(){return(yield cR({audio:e,video:!1}))[0]})}var Hr;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})(Hr||(Hr={}));function Uj(e){switch(e){case Dc.EXCELLENT:return Hr.Excellent;case Dc.GOOD:return Hr.Good;case Dc.POOR:return Hr.Poor;case Dc.LOST:return Hr.Lost;default:return Hr.Unknown}}class uR extends $i.EventEmitter{get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions)===null||t===void 0?void 0:t.loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(t=>t.isEncrypted)}get isAgent(){var t;return((t=this.permissions)===null||t===void 0?void 0:t.agent)||this.kind===ph.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(t,n,r,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:ph.STANDARD;var l;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Hr.Unknown,this.log=Ke,this.log=go((l=o?.loggerName)!==null&&l!==void 0?l:ki.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=s,this._attributes={}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(t){for(const[,n]of this.trackPublications)if(n.source===t)return n}getTrackPublicationByName(t){for(const[,n]of this.trackPublications)if(n.trackName===t)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrackPublication(H.Source.Camera);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrackPublication(H.Source.Microphone);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrackPublication(H.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),this._setAttributes(t.attributes),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:t})),!0)}_setMetadata(t){const n=this.metadata!==t,r=this.metadata;this.metadata=t,n&&this.emit(Q.ParticipantMetadataChanged,r)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit(Q.ParticipantNameChanged,t)}_setAttributes(t){const n=zF(this.attributes,t);this._attributes=t,Object.keys(n).length>0&&this.emit(Q.AttributesChanged,n)}setPermissions(t){var n,r,i,o,s,l;const u=this.permissions,d=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||t.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||t.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||t.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((h,p)=>{var m;return h!==((m=this.permissions)===null||m===void 0?void 0:m.canPublishSources[p])})||t.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=t,d&&this.emit(Q.ParticipantPermissionsChanged,u),d}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(Q.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=Uj(t),n!==this._connectionQuality&&this.emit(Q.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(t){this.audioContext=t,this.audioTrackPublications.forEach(n=>(n.track instanceof vl||n.track instanceof Cn)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(oe.Muted,()=>{this.emit(Q.TrackMuted,t)}),t.on(oe.Unmuted,()=>{this.emit(Q.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.trackPublications.set(t.trackSid,t),t.kind){case H.Kind.Audio:this.audioTrackPublications.set(t.trackSid,t);break;case H.Kind.Video:this.videoTrackPublications.set(t.trackSid,t);break}}}function Fj(e){var t,n,r;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new dx({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=e.allowAll)!==null&&r!==void 0?r:!1,trackSids:e.allowedTrackSids||[]})}class g0 extends uR{constructor(t,n,r,i){super(t,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=$r.NONE,this.enabledPublishVideoCodecs=[],this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new eR)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(l=>this.log.warn(l.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=o=>{const{requestId:s,reason:l,message:u}=o,d=this.pendingSignalRequests.get(s);d&&(l!==gx.OK&&d.reject(new fw(u,l)),this.pendingSignalRequests.delete(s))},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>Fj(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),kt(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),kt(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),kt(o))),this.onTrackMuted(o,o.isMuted)},this.onTrackFeatureUpdate=o=>{const s=this.audioTrackPublications.get(o.sid);if(!s){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(o.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(s.trackSid,s.getTrackFeatures())},this.handleSubscribedQualityUpdate=o=>D(this,void 0,void 0,function*(){var s,l,u,d,h,p;if(!(!((h=this.roomOptions)===null||h===void 0)&&h.dynacast))return;const m=this.videoTrackPublications.get(o.trackSid);if(!m){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!m.videoTrack)return;const P=yield m.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var y=!0,S=Wa(P),k;k=yield S.next(),s=k.done,!s;y=!0){d=k.value,y=!1;const v=d;LF(v)&&(this.log.debug("publish ".concat(v," for ").concat(m.videoTrack.sid),Object.assign(Object.assign({},this.logContext),kt(m))),yield this.publishAdditionalCodecForTrack(m.videoTrack,v,m.options))}}catch(v){l={error:v}}finally{try{!y&&!s&&(u=S.return)&&(yield u.call(S))}finally{if(l)throw l.error}}}else o.subscribedQualities.length>0&&(yield(p=m.videoTrack)===null||p===void 0?void 0:p.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.trackPublications.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>D(this,void 0,void 0,function*(){if(o.source===H.Source.ScreenShare||o.source===H.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),kt(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof Cn||o instanceof An)try{if(Sr())try{const s=yield navigator?.permissions.query({name:o.source===H.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),kt(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),kt(o))),o instanceof Cn?yield o.restartTrack({deviceId:"default"}):yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),kt(o))),yield o.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map,this.pendingSignalRequests=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==$r.NONE}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setupEngine(t){this.engine=t,this.engine.on(ue.RemoteMute,(n,r)=>{const i=this.trackPublications.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(ue.Connected,this.handleReconnected).on(ue.SignalRestarted,this.handleReconnected).on(ue.SignalResumed,this.handleReconnected).on(ue.Restarting,this.handleReconnecting).on(ue.Resuming,this.handleReconnecting).on(ue.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(ue.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(ue.Disconnected,this.handleDisconnected).on(ue.SignalRequestResponse,this.handleSignalRequestResponse)}setMetadata(t){return D(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:t})})}setName(t){return D(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:t})})}setAttributes(t){return D(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:t})})}requestMetadataUpdate(t){return D(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:o,attributes:s}=n;return function*(){return new Promise((l,u)=>D(r,void 0,void 0,function*(){var d,h;try{let p=!1;const m=yield this.engine.client.sendUpdateLocalMetadata((d=i??this.metadata)!==null&&d!==void 0?d:"",(h=o??this.name)!==null&&h!==void 0?h:"",s),y=performance.now();for(this.pendingSignalRequests.set(m,{resolve:l,reject:S=>{u(S),p=!0},values:{name:o,metadata:i,attributes:s}});performance.now()-y<5e3&&!p;){if((!o||this.name===o)&&(!i||this.metadata===i)&&(!s||Object.entries(s).every(S=>{let[k,P]=S;return this.attributes[k]===P||P===""&&!this.attributes[k]}))){this.pendingSignalRequests.delete(m),l();return}yield ji(50)}u(new fw("Request to update local metadata timed out","TimeoutError"))}catch(p){p instanceof Error&&u(p)}}))}()})}setCameraEnabled(t,n,r){return this.setTrackEnabled(H.Source.Camera,t,n,r)}setMicrophoneEnabled(t,n,r){return this.setTrackEnabled(H.Source.Microphone,t,n,r)}setScreenShareEnabled(t,n,r){return this.setTrackEnabled(H.Source.ScreenShare,t,n,r)}setPermissions(t){const n=this.permissions,r=super.setPermissions(t);return r&&n&&this.emit(Q.ParticipantPermissionsChanged,n),r}setE2EEEnabled(t){return D(this,void 0,void 0,function*(){this.encryptionType=t?$r.GCM:$r.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,r,i){return D(this,void 0,void 0,function*(){var o,s;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:t,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(t);if(n)if(l)yield l.unmute();else{let u;if(this.pendingPublishing.has(t)){const d=yield this.waitForPendingPublicationOfSource(t);return d||this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:t})),yield d?.unmute(),d}this.pendingPublishing.add(t);try{switch(t){case H.Source.Camera:u=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case H.Source.Microphone:u=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case H.Source.ScreenShare:u=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Li(t)}const d=[];for(const p of u)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),kt(p))),d.push(this.publishTrack(p,i));[l]=yield Promise.all(d)}catch(d){throw u?.forEach(h=>{h.stop()}),d instanceof Error&&!(d instanceof Li)&&this.emit(Q.MediaDevicesError,d),d}finally{this.pendingPublishing.delete(t)}}else if(l?.track||(l=yield this.waitForPendingPublicationOfSource(t)),l&&l.track)if(t===H.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const u=this.getTrackPublication(H.Source.ScreenShareAudio);u&&u.track&&this.unpublishTrack(u.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return D(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(H.Source.Camera)||this.pendingPublishing.has(H.Source.Microphone))){this.pendingPublishing.add(H.Source.Camera),this.pendingPublishing.add(H.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(H.Source.Camera),this.pendingPublishing.delete(H.Source.Microphone)}}})}createTracks(t){return D(this,void 0,void 0,function*(){var n,r;t??(t={});const{audioProcessor:i,videoProcessor:o}=lR(t),s=Qx(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),l=op(s);let u;try{u=yield navigator.mediaDevices.getUserMedia(l)}catch(d){throw d instanceof Error&&(l.audio&&(this.microphoneError=d),l.video&&(this.cameraError=d)),d}return l.audio&&(this.microphoneError=void 0,this.emit(Q.AudioStreamAcquired)),l.video&&(this.cameraError=void 0),Promise.all(u.getTracks().map(d=>D(this,void 0,void 0,function*(){const h=d.kind==="audio";h?s.audio:s.video;let p;const m=h?l.audio:l.video;typeof m!="boolean"&&(p=m);const y=iR(d,p,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return y.kind===H.Kind.Video?y.source=H.Source.Camera:y.kind===H.Kind.Audio&&(y.source=H.Source.Microphone,y.setAudioContext(this.audioContext)),y.mediaStream=u,y instanceof Cn&&i?yield y.setProcessor(i):y instanceof An&&o&&(yield y.setProcessor(o)),y})))})}createScreenTracks(t){return D(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new Xy("getDisplayMedia not supported");t.resolution===void 0&&!GF()&&(t.resolution=e1.h1080fps30.resolution);const n=UF(t),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Li("no video track found");const o=new An(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=H.Source.ScreenShare,t.contentHint&&(o.mediaStreamTrack.contentHint=t.contentHint);const s=[o];if(r.getAudioTracks().length>0){this.emit(Q.AudioStreamAcquired);const l=new Cn(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=H.Source.ScreenShareAudio,s.push(l)}return s})}publishTrack(t,n){return D(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(t,n)})}publishOrRepublishTrack(t,n){return D(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var l,u,d,h;r instanceof Cn&&r.setAudioContext(o.audioContext),yield(l=o.reconnectFuture)===null||l===void 0?void 0:l.promise,o.republishPromise&&!s&&(yield o.republishPromise),r instanceof Hs&&o.pendingPublishPromises.has(r)&&(yield o.pendingPublishPromises.get(r));let p;if(r instanceof MediaStreamTrack)p=r.getConstraints();else{p=r.constraints;let v;switch(r.source){case H.Source.Microphone:v="audioinput";break;case H.Source.Camera:v="videoinput"}v&&o.activeDeviceMap.has(v)&&(p=Object.assign(Object.assign({},p),{deviceId:o.activeDeviceMap.get(v)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new Cn(r,p,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":r=new An(r,p,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new Li("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let m;if(o.trackPublications.forEach(v=>{v.track&&v.track===r&&(m=v)}),m)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),kt(m))),m;const y="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,S=(u=i?.forceStereo)!==null&&u!==void 0?u:y;S&&(i||(i={}),i.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),kt(r))),i.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(d=i.dtx)!==null&&d!==void 0||(i.dtx=!1),(h=i.red)!==null&&h!==void 0||(i.red=!1));const k=Object.assign(Object.assign({},o.roomOptions.publishDefaults),i);!qF()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),k.simulcast=!1),k.source&&(r.source=k.source);const P=o.publish(r,k,S);o.pendingPublishPromises.set(r,P);try{return yield P}catch(v){throw v}finally{o.pendingPublishPromises.delete(r)}}()})}publish(t,n,r){return D(this,void 0,void 0,function*(){var i,o,s,l,u,d,h,p,m,y;Array.from(this.trackPublications.values()).find(I=>t instanceof Hs&&I.source===t.source)&&t.source!==H.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(t.source),Object.assign(Object.assign({},this.logContext),kt(t))),n.stopMicTrackOnMute&&t instanceof Cn&&(t.stopOnMute=!0),t.source===H.Source.ScreenShare&&Ml()&&(n.simulcast=!1),n.videoCodec==="av1"&&!$F()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!WF()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=h0),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(I=>n.videoCodec===Lf(I.mime))||(n.videoCodec=Lf(this.enabledPublishVideoCodecs[0].mime)));const k=n.videoCodec;t.on(oe.Muted,this.onTrackMuted),t.on(oe.Unmuted,this.onTrackUnmuted),t.on(oe.Ended,this.handleTrackEnded),t.on(oe.UpstreamPaused,this.onTrackUpstreamPaused),t.on(oe.UpstreamResumed,this.onTrackUpstreamResumed),t.on(oe.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const P=new Qv({cid:t.mediaStreamTrack.id,name:n.name,type:H.kindToProto(t.kind),muted:t.isMuted,source:H.sourceToProto(t.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n?.stream});let v;if(t.kind===H.Kind.Video){let I={width:0,height:0};try{I=yield t.waitForDimensions()}catch{const U=(l=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&l!==void 0?l:Pu.h720.resolution;I={width:U.width,height:U.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),kt(t)),{dims:I}))}P.width=I.width,P.height=I.height,t instanceof An&&(Zc(k)&&(t.source===H.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in t.mediaStreamTrack&&(t.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),kt(t))))),n.scalabilityMode=(u=n.scalabilityMode)!==null&&u!==void 0?u:"L3T3_KEY"),P.simulcastCodecs=[new Jv({codec:k,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:h0}),n.backupCodec&&k!==n.backupCodec.codec&&P.encryption===$r.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),P.simulcastCodecs.push(new Jv({codec:n.backupCodec.codec,cid:""})))),v=m0(t.source===H.Source.ScreenShare,P.width,P.height,n),P.layers=Ow(P.width,P.height,v,Zc(n.videoCodec))}else t.kind===H.Kind.Audio&&(v=[{maxBitrate:(d=n.audioPreset)===null||d===void 0?void 0:d.maxBitrate,priority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high",networkPriority:(y=(m=n.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&y!==void 0?y:"high"}]);if(!this.engine||this.engine.isClosed)throw new an("cannot publish track when not connected");const w=()=>D(this,void 0,void 0,function*(){var I,M,U;if(!this.engine.pcManager)throw new an("pcManager is not ready");if(t.sender=yield this.engine.createSender(t,n,v),t instanceof An&&((I=n.degradationPreference)!==null&&I!==void 0||(n.degradationPreference=Pj(t)),t.setDegradationPreference(n.degradationPreference)),v)if(Ml()&&t.kind===H.Kind.Audio){let T;for(const B of this.engine.pcManager.publisher.getTransceivers())if(B.sender===t.sender){T=B;break}T&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:T,codec:"opus",maxbr:!((M=v[0])===null||M===void 0)&&M.maxBitrate?v[0].maxBitrate/1e3:0})}else t.codec&&Zc(t.codec)&&(!((U=v[0])===null||U===void 0)&&U.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:P.cid,codec:t.codec,maxbr:v[0].maxBitrate/1e3});yield this.engine.negotiate()});let x;if(this.enabledPublishVideoCodecs.length>0)x=(yield Promise.all([this.engine.addTrack(P),w()]))[0];else{x=yield this.engine.addTrack(P);let I;if(x.codecs.forEach(M=>{I===void 0&&(I=M.mimeType)}),I&&t.kind===H.Kind.Video){const M=Lf(I);M!==k&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),kt(t)),{codec:M})),n.videoCodec=M,v=m0(t.source===H.Source.ScreenShare,P.width,P.height,n))}yield w()}const _=new xu(t.kind,x,t,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return _.options=n,t.sid=x.sid,this.log.debug("publishing ".concat(t.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:v,trackInfo:x})),t instanceof An?t.startMonitor(this.engine.client):t instanceof Cn&&t.startMonitor(),this.addTrackPublication(_),this.emit(Q.LocalTrackPublished,_),_})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,r){return D(this,void 0,void 0,function*(){var i;if(this.encryptionType!==$r.NONE)return;let o;if(this.trackPublications.forEach(y=>{y.track&&y.track===t&&(o=y)}),!o)throw new Li("track is not published");if(!(t instanceof An))throw new Li("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),l=Tj(t,n,s);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),kt(t)));return}const u=t.addSimulcastTrack(n,l);if(!u)return;const d=new Qv({cid:u.mediaStreamTrack.id,type:H.kindToProto(t.kind),muted:t.isMuted,source:H.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:s.videoCodec,cid:u.mediaStreamTrack.id}]});if(d.layers=Ow(d.width,d.height,l),!this.engine||this.engine.isClosed)throw new an("cannot publish track when not connected");const h=()=>D(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(t,u,s,l),yield this.engine.negotiate()}),m=(yield Promise.all([this.engine.addTrack(d),h()]))[0];this.log.debug("published ".concat(n," for track ").concat(t.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:m}))})}unpublishTrack(t,n){return D(this,void 0,void 0,function*(){var r,i;if(t instanceof Hs){const d=this.pendingPublishPromises.get(t);d&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),kt(t))),yield d)}const o=this.getPublicationForTrack(t),s=o?kt(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}t=o.track,t.off(oe.Muted,this.onTrackMuted),t.off(oe.Unmuted,this.onTrackUnmuted),t.off(oe.Ended,this.handleTrackEnded),t.off(oe.UpstreamPaused,this.onTrackUpstreamPaused),t.off(oe.UpstreamResumed,this.onTrackUpstreamResumed),t.off(oe.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&t.stop();let l=!1;const u=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Wt.FAILED&&u)try{for(const d of this.engine.pcManager.publisher.getTransceivers())d.sender===u&&(d.direction="inactive",l=!0);if(this.engine.removeTrack(u)&&(l=!0),t instanceof An){for(const[,d]of t.simulcastCodecs)d.sender&&(this.engine.removeTrack(d.sender)&&(l=!0),d.sender=void 0);t.simulcastCodecs.clear()}}catch(d){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:d}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case H.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case H.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit(Q.LocalTrackUnpublished,o),o.setTrack(void 0),l&&(yield this.engine.negotiate()),o})}unpublishTracks(t){return D(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof xu)})}republishAllTracks(t){return D(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((o,s)=>D(r,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(u=>{u.track&&(n&&(u.options=Object.assign(Object.assign({},u.options),n)),l.push(u))}),yield Promise.all(l.map(u=>D(this,void 0,void 0,function*(){const d=u.track;yield this.unpublishTrack(d,!1),i&&!d.isMuted&&d.source!==H.Source.ScreenShare&&d.source!==H.Source.ScreenShareAudio&&(d instanceof Cn||d instanceof An)&&!d.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:u.trackSid})),yield d.restartTrack()),yield this.publishOrRepublishTrack(d,u.options,!0)}))),o()}catch(l){s(l)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(t){return D(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const o=i.reliable?ln.RELIABLE:ln.LOSSY,s=i.destinationIdentities,l=i.topic,u=new Nc({kind:o,value:{case:"user",value:new ZP({participantIdentity:r.identity,payload:n,destinationIdentities:s,topic:l})}});yield r.engine.sendDataPacket(u,o)}()})}publishDtmf(t,n){return D(this,void 0,void 0,function*(){const r=new Nc({kind:ln.RELIABLE,value:{case:"sipDtmf",value:new ex({code:t,digit:n})}});yield this.engine.sendDataPacket(r,ln.RELIABLE)})}sendChatMessage(t){return D(this,void 0,void 0,function*(){const n={id:crypto.randomUUID(),message:t,timestamp:Date.now()},r=new Nc({value:{case:"chatMessage",value:new qv(Object.assign(Object.assign({},n),{timestamp:Ut.parse(n.timestamp)}))}});return yield this.engine.sendDataPacket(r,ln.RELIABLE),this.emit(Q.ChatMessage,n),n})}editChatMessage(t,n){return D(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:t,editTimestamp:Date.now()}),i=new Nc({value:{case:"chatMessage",value:new qv(Object.assign(Object.assign({},r),{timestamp:Ut.parse(r.timestamp),editTimestamp:Ut.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,ln.RELIABLE),this.emit(Q.ChatMessage,r),r})}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}setEnabledPublishCodecs(t){this.enabledPublishVideoCodecs=t.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(t){return t.sid!==this.sid||!super.updateInfo(t)?!1:(t.tracks.forEach(n=>{var r,i;const o=this.trackPublications.get(n.sid);if(o){const s=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),kt(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0)}getPublicationForTrack(t){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(t instanceof MediaStreamTrack?(i instanceof Cn||i instanceof An)&&i.mediaStreamTrack===t&&(n=r):t===i&&(n=r))}),n}waitForPendingPublicationOfSource(t){return D(this,void 0,void 0,function*(){const n=Array.from(this.pendingPublishPromises.entries()).find(r=>{let[i]=r;return i.source===t});if(n)return n[1]})}}class o1 extends no{constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=Kr.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(oe.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const i=new np({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new tx({participantSid:"",trackSids:[this.trackSid]})]});this.emit(oe.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?no.SubscriptionStatus.Unsubscribed:super.isSubscribed?no.SubscriptionStatus.Subscribed:no.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?no.PermissionStatus.Allowed:no.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(t){!this.isManualOperationAllowed()||this.disabled===!t||(this.disabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.currentVideoQuality===t||(this.currentVideoQuality=t,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===t.height||(this.track instanceof tu&&(this.videoDimensions=t),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&this.track instanceof tu&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(t){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==t&&(i&&(i.off(oe.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(oe.VisibilityChanged,this.handleVisibilityChange),i.off(oe.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(oe.Unsubscribed,i)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(oe.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(oe.VisibilityChanged,this.handleVisibilityChange),t.on(oe.Ended,this.handleEnded),this.emit(oe.Subscribed,t)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(oe.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?oe.Muted:oe.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(oe.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(oe.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.kind===H.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof tu&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new sx({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(t.width=Math.ceil(this.videoDimensions.width),t.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?t.quality=this.currentVideoQuality:t.quality=Kr.HIGH,this.emit(oe.UpdateSettings,t)}}class gh extends uR{static fromParticipantInfo(t,n,r){return new gh(t,n.sid,n.identity,n.name,n.metadata,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(t,n,r,i,o,s){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ph.STANDARD;super(n,r||"",i,o,s,l),this.signalClient=t,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(oe.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),kt(t))),this.signalClient.sendUpdateTrackSettings(n)}),t.on(oe.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(oe.SubscriptionPermissionChanged,n=>{this.emit(Q.TrackSubscriptionPermissionChanged,t,n)}),t.on(oe.SubscriptionStatusChanged,n=>{this.emit(Q.TrackSubscriptionStatusChanged,t,n)}),t.on(oe.Subscribed,n=>{this.emit(Q.TrackSubscribed,n,t)}),t.on(oe.Unsubscribed,n=>{this.emit(Q.TrackUnsubscribed,n,t)}),t.on(oe.SubscriptionFailed,n=>{this.emit(Q.TrackSubscriptionFailed,t.trackSid,n)})}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.Source.Microphone;this.volumeMap.set(n,t);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H.Source.Microphone;const n=this.getTrackPublication(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,r,i,o,s){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(h=>{!l&&t.kind===h.kind.toString()&&(l=h)}),!l){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(Q.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,r,i,o,s-1)},150);return}if(t.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),kt(l))),this.emit(Q.TrackSubscriptionFailed,n);return}const u=t.kind==="video";let d;return u?d=new tu(t,n,i,o):d=new vl(t,n,i,this.audioContext,this.audioOutput),d.source=l.source,d.isMuted=l.isMuted,d.setMediaStream(r),d.start(),l.setTrack(d),this.volumeMap.has(l.source)&&d instanceof vl&&d.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(t){return this.trackPublications.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,r=new Map;return t.tracks.forEach(i=>{var o,s;let l=this.getTrackPublicationBySid(i.sid);if(l)l.updateInfo(i);else{const u=H.kindFromProto(i.type);if(!u)return;l=new o1(u,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),l.updateInfo(i),r.set(i.sid,l);const d=Array.from(this.trackPublications.values()).find(h=>h.source===l?.source);d&&l.source!==H.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:kt(d),newTrack:kt(l)})),this.addTrackPublication(l)}n.set(i.sid,l)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),kt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(Q.TrackPublished,i)}),!0}unpublishTrack(t,n){const r=this.trackPublications.get(t);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(t),r.kind){case H.Kind.Audio:this.audioTrackPublications.delete(t);break;case H.Kind.Video:this.videoTrackPublications.delete(t);break}n&&this.emit(Q.TrackUnpublished,r)}setAudioOutput(t){return D(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTrackPublications.forEach(r=>{var i;r.track instanceof vl&&n.push(r.track.setSinkId((i=t.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:t,args:r})),super.emit(t,...r)}}var tt;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"})(tt||(tt={}));const jj=4*1e3;class vh extends $i.EventEmitter{constructor(t){var n,r,i;super(),n=this,this.state=tt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Ke,this.bufferedEvents=[],this.isResuming=!1,this.connect=(o,s,l)=>D(this,void 0,void 0,function*(){var u;if(!HF())throw yo()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const d=yield this.disconnectLock.lock();if(this.state===tt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),d(),Promise.resolve();if(this.connectFuture)return d(),this.connectFuture.promise;this.setAndEmitConnectionState(tt.Connecting),((u=this.regionUrlProvider)===null||u===void 0?void 0:u.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),f0(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Aw(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().then(m=>{var y;(y=this.regionUrlProvider)===null||y===void 0||y.setServerReportedRegions(m)}).catch(m=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:m}))}));const h=(m,y,S)=>D(this,void 0,void 0,function*(){var k,P;this.abortController&&this.abortController.abort();const v=new AbortController;this.abortController=v,d?.();try{yield this.attemptConnection(S??o,s,l,v),this.abortController=void 0,m()}catch(w){if(this.regionUrlProvider&&w instanceof wt&&w.reason!==Un.Cancelled&&w.reason!==Un.NotAllowed){let x=null;try{x=yield this.regionUrlProvider.getNextBestRegionUrl((k=this.abortController)===null||k===void 0?void 0:k.signal)}catch(_){if(_ instanceof wt&&(_.status===401||_.reason===Un.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),y(_);return}}x&&!(!((P=this.abortController)===null||P===void 0)&&P.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(w.message,". Retrying with another region: ").concat(x),this.logContext),this.recreateEngine(),yield h(m,y,x)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),y(w))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),y(w)}}),p=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new eR((m,y)=>{h(m,y,p)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,l,u,d,h)=>D(this,void 0,void 0,function*(){var p,m,y;const S=yield l.join(o,s,{autoSubscribe:u.autoSubscribe,adaptiveStream:typeof d.adaptiveStream=="object"?!0:d.adaptiveStream,maxRetries:u.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:u.websocketTimeout},h.signal);let k=S.serverInfo;if(k||(k={version:S.serverVersion,region:S.serverRegion}),this.serverInfo=k,this.log.debug("connected to Livekit Server ".concat(Object.entries(k).map(P=>{let[v,w]=P;return"".concat(v,": ").concat(w)}).join(", ")),{room:(p=S.room)===null||p===void 0?void 0:p.name,roomSid:(m=S.room)===null||m===void 0?void 0:m.sid,identity:(y=S.participant)===null||y===void 0?void 0:y.identity}),!k.version)throw new _F("unknown server version");return k.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),d.dynacast=!1),S}),this.applyJoinResponse=o=>{const s=o.participant;if(this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(l){this.log.error(l instanceof Error?l.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:l}))}this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,s,l,u)=>D(this,void 0,void 0,function*(){var d,h,p;this.state===tt.Reconnecting||this.isResuming||!((d=this.engine)===null||d===void 0)&&d.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((h=this.regionUrlProvider)===null||h===void 0)&&h.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},r1),l),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const m=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,u);this.applyJoinResponse(m),this.setupLocalParticipantEvents(),this.emit(G.SignalConnected)}catch(m){yield this.engine.close(),this.recreateEngine();const y=new wt("could not establish signal connection");throw m instanceof Error&&(y.message="".concat(y.message,": ").concat(m.message)),m instanceof wt&&(y.reason=m.reason,y.status=m.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:m})),y}if(u.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new wt("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,u)}catch(m){throw yield this.engine.close(),this.recreateEngine(),m}Sr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Sr()&&(document.addEventListener("freeze",this.onPageLeave),(p=navigator.mediaDevices)===null||p===void 0||p.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(tt.Connected),this.emit(G.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return D(n,[...s],void 0,function(){var u=this;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var h,p,m,y;const S=yield u.disconnectLock.lock();try{if(u.state===tt.Disconnected){u.log.debug("already disconnected",u.logContext);return}u.log.info("disconnect from room",Object.assign({},u.logContext)),(u.state===tt.Connecting||u.state===tt.Reconnecting||u.isResuming)&&(u.log.warn("abort connection attempt",u.logContext),(h=u.abortController)===null||h===void 0||h.abort(),(m=(p=u.connectFuture)===null||p===void 0?void 0:p.reject)===null||m===void 0||m.call(p,new wt("Client initiated disconnect")),u.connectFuture=void 0),!((y=u.engine)===null||y===void 0)&&y.client.isDisconnected||(yield u.engine.client.sendLeave()),u.engine&&(yield u.engine.close()),u.handleDisconnect(d,fl.CLIENT_INITIATED),u.engine=void 0}finally{S()}}()})},this.onPageLeave=()=>D(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>D(this,void 0,void 0,function*(){const o=[],s=vo();if(s&&s.os==="iOS"){const l="livekit-dummy-audio-el";let u=document.getElementById(l);if(!u){u=document.createElement("audio"),u.id=l,u.autoplay=!0,u.hidden=!0;const d=Rg();d.enabled=!0;const h=new MediaStream([d]);u.srcObject=h,document.addEventListener("visibilitychange",()=>{u&&(u.srcObject=document.hidden?null:h,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(u),this.once(G.Disconnected,()=>{u?.remove(),u=null})}o.push(u)}this.remoteParticipants.forEach(l=>{l.audioTrackPublications.forEach(u=>{u.track&&u.track.attachedElements.forEach(d=>{o.push(d)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(l=>(l.muted=!1,l.play()))]),this.handleAudioPlaybackStarted()}catch(l){throw this.handleAudioPlaybackFailed(l),l}}),this.startVideo=()=>D(this,void 0,void 0,function*(){const o=[];for(const s of this.remoteParticipants.values())s.videoTrackPublications.forEach(l=>{var u;(u=l.track)===null||u===void 0||u.attachedElements.forEach(d=>{o.includes(d)||o.push(d)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(tt.Reconnecting)&&this.emit(G.Reconnecting)},this.handleSignalRestarted=o=>D(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(tt.Connected),this.emit(G.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{var l;if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}s.identity===""&&(s.identity=(l=this.sidToIdentity.get(s.sid))!==null&&l!==void 0?l:"");let u=this.remoteParticipants.get(s.identity);s.state===Gv.DISCONNECTED?this.handleParticipantDisconnected(s.identity,u):u=this.getOrCreateParticipant(s.identity,s)})},this.handleActiveSpeakersUpdate=o=>{const s=[],l={};o.forEach(u=>{if(l[u.sid]=!0,u.sid===this.localParticipant.sid)this.localParticipant.audioLevel=u.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const d=this.getRemoteParticipantBySid(u.sid);d&&(d.audioLevel=u.level,d.setIsSpeaking(!0),s.push(d))}}),l[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(u=>{l[u.sid]||(u.audioLevel=0,u.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(G.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(u=>{const d=this.remoteParticipants.get(u.identity);d&&d.sid!==u.sid||s.set(u.sid,u)}),o.forEach(u=>{let d=this.getRemoteParticipantBySid(u.sid);u.sid===this.localParticipant.sid&&(d=this.localParticipant),d&&(d.audioLevel=u.level,d.setIsSpeaking(u.active),u.active?s.set(u.sid,d):s.delete(u.sid))});const l=Array.from(s.values());l.sort((u,d)=>d.audioLevel-u.audioLevel),this.activeSpeakers=l,this.emitWhenConnected(G.ActiveSpeakersChanged,l)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const l=this.getRemoteParticipantBySid(s.participantSid);if(!l)return;const u=l.getTrackPublicationBySid(s.trackSid);if(!u||!u.track)return;const d=H.streamStateFromProto(s.state);d!==u.track.streamState&&(u.track.streamState=d,l.emit(Q.TrackStreamStateChanged,u,u.track.streamState),this.emitWhenConnected(G.TrackStreamStateChanged,u,u.track.streamState,l))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.getRemoteParticipantBySid(o.participantSid);if(!s)return;const l=s.getTrackPublicationBySid(o.trackSid);l&&l.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.remoteParticipants.values()).find(u=>u.trackPublications.has(o.trackSid));if(!s)return;const l=s.getTrackPublicationBySid(o.trackSid);l&&l.setSubscriptionError(o.err)},this.handleDataPacket=o=>{const s=this.remoteParticipants.get(o.participantIdentity);o.value.case==="user"?this.handleUserPacket(s,o.value.value,o.kind):o.value.case==="transcription"?this.handleTranscription(s,o.value.value):o.value.case==="sipDtmf"?this.handleSipDtmf(s,o.value.value):o.value.case==="chatMessage"?this.handleChatMessage(s,o.value.value):o.value.case==="metrics"&&this.handleMetrics(o.value.value,s)},this.handleUserPacket=(o,s,l)=>{this.emit(G.DataReceived,s.payload,o,l,s.topic),o?.emit(Q.DataReceived,s.payload,l)},this.handleSipDtmf=(o,s)=>{this.emit(G.SipDTMFReceived,s,o),o?.emit(Q.SipDTMFReceived,s)},this.bufferedSegments=new Map,this.handleTranscription=(o,s)=>{const l=s.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(s.transcribedParticipantIdentity),u=l?.trackPublications.get(s.trackId),d=ej(s,this.transcriptionReceivedTimes);u?.emit(oe.TranscriptionReceived,d),l?.emit(Q.TranscriptionReceived,d,u),this.emit(G.TranscriptionReceived,d,l,u)},this.handleChatMessage=(o,s)=>{const l=tj(s);this.emit(G.ChatMessage,l,o)},this.handleMetrics=(o,s)=>{this.emit(G.MetricsReceived,o,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(G.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(G.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(G.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(G.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>D(this,void 0,void 0,function*(){const o=yield wn.getInstance().getDevices(void 0,!1),s=["audiooutput"];for(let l of s){const u=o.filter(d=>d.kind===l);u.length>0&&!u.find(d=>d.deviceId===this.getActiveDevice(l))&&(yield this.switchActiveDevice(l,u[0].deviceId))}this.emit(G.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(G.RoomMetadataChanged,o.metadata),s?.activeRecording!==o.activeRecording&&this.emitWhenConnected(G.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const l=this.getRemoteParticipantBySid(s.participantSid);l&&l.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(G.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(G.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(G.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(G.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(G.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var s;(s=o?.onPublish)===null||s===void 0||s.call(o,this)},this.onLocalTrackPublished=o=>D(this,void 0,void 0,function*(){var s,l,u,d,h,p;(s=o.track)===null||s===void 0||s.on(oe.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.on(oe.Restarted,this.onLocalTrackRestarted),(h=(d=(u=o.track)===null||u===void 0?void 0:u.getProcessor())===null||d===void 0?void 0:d.onPublish)===null||h===void 0||h.call(d,this),this.emit(G.LocalTrackPublished,o,this.localParticipant),o.track instanceof Cn&&(yield o.track.checkForSilence())&&this.emit(G.LocalAudioSilenceDetected,o);const m=yield(p=o.track)===null||p===void 0?void 0:p.getDeviceId(),y=pw(o.source);y&&m&&m!==this.localParticipant.activeDeviceMap.get(y)&&(this.localParticipant.activeDeviceMap.set(y,m),this.emit(G.ActiveDeviceChanged,y,m))}),this.onLocalTrackUnpublished=o=>{var s,l;(s=o.track)===null||s===void 0||s.off(oe.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.off(oe.Restarted,this.onLocalTrackRestarted),this.emit(G.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>D(this,void 0,void 0,function*(){const s=yield o.getDeviceId(!1),l=pw(o.source);l&&s&&s!==this.localParticipant.activeDeviceMap.get(l)&&(this.log.debug("local track restarted, setting ".concat(l," ").concat(s," active"),this.logContext),this.localParticipant.activeDeviceMap.set(l,s),this.emit(G.ActiveDeviceChanged,l,s))}),this.onLocalConnectionQualityChanged=o=>{this.emit(G.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(G.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(G.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(G.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},gj),t),this.log=go((r=this.options.loggerName)!==null&&r!==void 0?r:ki.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},nR),t?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},rR),t?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},mj),t?.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new br,this.localParticipant=new g0("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",co(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",co(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",co(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(t){return D(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;this.options.e2ee&&(this.e2eeManager=new rj(this.options.e2ee),this.e2eeManager.on(Qo.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof g0&&(this.isE2EEEnabled=n),this.emit(G.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Qo.EncryptionError,n=>this.emit(G.EncryptionError,n)),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get logContext(){var t;return{room:this.name,roomID:(t=this.roomInfo)===null||t===void 0?void 0:t.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return D(this,void 0,void 0,function*(){return this.state===tt.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((t,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(ue.RoomUpdate,r),t(i.sid))};this.engine.on(ue.RoomUpdate,r),this.once(G.Disconnected,()=>{this.engine.off(ue.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Ij(this.options),this.engine.on(ue.ParticipantUpdate,this.handleParticipantUpdates).on(ue.RoomUpdate,this.handleRoomUpdate).on(ue.SpeakersChanged,this.handleSpeakersChanged).on(ue.StreamStateChanged,this.handleStreamStateUpdate).on(ue.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(ue.SubscriptionError,this.handleSubscriptionError).on(ue.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(ue.MediaTrackAdded,(t,n,r)=>{this.onTrackAdded(t,n,r)}).on(ue.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(ue.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(ue.DataPacketReceived,this.handleDataPacket).on(ue.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(tt.SignalReconnecting)&&this.emit(G.SignalReconnecting)}).on(ue.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(tt.Connected)&&this.emit(G.Reconnected)}).on(ue.SignalResumed,()=>{this.bufferedEvents=[],(this.state===tt.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(ue.Restarting,this.handleRestarting).on(ue.SignalRestarted,this.handleSignalRestarted).on(ue.Offline,()=>{this.setAndEmitConnectionState(tt.Reconnecting)&&this.emit(G.Reconnecting)}).on(ue.DCBufferStatusChanged,(t,n)=>{this.emit(G.DCBufferStatusChanged,t,n)}).on(ue.LocalTrackSubscribed,t=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===t});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(Q.LocalTrackSubscribed,n),this.emitWhenConnected(G.LocalTrackSubscribed,n,this.localParticipant)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return wn.getInstance().getDevices(t,n)}prepareConnection(t,n){return D(this,void 0,void 0,function*(){if(this.state===tt.Disconnected){this.log.debug("prepareConnection to ".concat(t),this.logContext);try{if(f0(new URL(t))&&n){this.regionUrlProvider=new Aw(t,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===tt.Disconnected&&(this.regionUrl=r,yield fetch(kw(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(kw(t),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(t){return this.localParticipant.identity===t?this.localParticipant:this.remoteParticipants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return D(this,void 0,void 0,function*(){let r=()=>{},i;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Ri({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Ri({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Ri({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Ri({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>D(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Ri({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>D(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Ri({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Ri({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),r=()=>D(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new rp({reason:fl.CLIENT_INITIATED,action:hl.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Ri({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break;case"leave-full-reconnect":i=new Ri({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){return D(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var l,u,d,h,p,m,y;let S=!1,k=!0;const P=s?{exact:i}:i;if(r==="audioinput"){const v=(l=o.getActiveDevice(r))!==null&&l!==void 0?l:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=P,S=v!==P;const w=Array.from(o.localParticipant.audioTrackPublications.values()).filter(x=>x.source===H.Source.Microphone);try{k=(yield Promise.all(w.map(x=>{var _;return(_=x.audioTrack)===null||_===void 0?void 0:_.setDeviceId(P)}))).every(x=>x===!0)}catch(x){throw o.options.audioCaptureDefaults.deviceId=v,x}}else if(r==="videoinput"){const v=(u=o.getActiveDevice(r))!==null&&u!==void 0?u:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=P,S=v!==P;const w=Array.from(o.localParticipant.videoTrackPublications.values()).filter(x=>x.source===H.Source.Camera);try{k=(yield Promise.all(w.map(x=>{var _;return(_=x.videoTrack)===null||_===void 0?void 0:_.setDeviceId(P)}))).every(x=>x===!0)}catch(x){throw o.options.videoCaptureDefaults.deviceId=v,x}}else if(r==="audiooutput"){if(!d0()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");o.options.webAudioMix&&(i=(d=yield wn.getInstance().normalizeDeviceId("audiooutput",i))!==null&&d!==void 0?d:""),(h=(y=o.options).audioOutput)!==null&&h!==void 0||(y.audioOutput={});const v=(p=o.getActiveDevice(r))!==null&&p!==void 0?p:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=i,S=v!==P;try{o.options.webAudioMix&&((m=o.audioContext)===null||m===void 0||m.setSinkId(i)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(w=>w.setAudioOutput({deviceId:i})))}catch(w){throw o.options.audioOutput.deviceId=v,w}}return S&&k&&(o.localParticipant.activeDeviceMap.set(r,i),o.emit(G.ActiveDeviceChanged,r,i)),k}()})}setupLocalParticipantEvents(){this.localParticipant.on(Q.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(Q.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(Q.AttributesChanged,this.onLocalAttributesChanged).on(Q.TrackMuted,this.onLocalTrackMuted).on(Q.TrackUnmuted,this.onLocalTrackUnmuted).on(Q.LocalTrackPublished,this.onLocalTrackPublished).on(Q.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(Q.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(Q.MediaDevicesError,this.onMediaDevicesError).on(Q.AudioStreamAcquired,this.startAudio).on(Q.ChatMessage,this.onLocalChatMessageSent).on(Q.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(t,n,r){if(this.state===tt.Connecting||this.state===tt.Reconnecting){const h=()=>{this.onTrackAdded(t,n,r),p()},p=()=>{this.off(G.Reconnected,h),this.off(G.Connected,h),this.off(G.Disconnected,p)};this.once(G.Reconnected,h),this.once(G.Connected,h),this.once(G.Disconnected,p);return}if(this.state===tt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=VF(n.id),o=i[0];let s=i[1],l=t.id;if(s&&s.startsWith("TR")&&(l=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const u=Array.from(this.remoteParticipants.values()).find(h=>h.sid===o);if(!u){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let d;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?d=this.options.adaptiveStream:d={}),u.addSubscribedMediaTrack(t,l,n,r,d)}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==tt.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>{i.unpublishTrack(o.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var o,s;i.track&&this.localParticipant.unpublishTrack(i.track,t),t&&((o=i.track)===null||o===void 0||o.detach(),(s=i.track)===null||s===void 0||s.stop())}),this.localParticipant.off(Q.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(Q.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(Q.AttributesChanged,this.onLocalAttributesChanged).off(Q.TrackMuted,this.onLocalTrackMuted).off(Q.TrackUnmuted,this.onLocalTrackUnmuted).off(Q.LocalTrackPublished,this.onLocalTrackPublished).off(Q.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(Q.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(Q.MediaDevicesError,this.onMediaDevicesError).off(Q.AudioStreamAcquired,this.startAudio).off(Q.ChatMessage,this.onLocalChatMessageSent).off(Q.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Sr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(tt.Disconnected),this.emit(G.Disconnected,n)}}}handleParticipantDisconnected(t,n){this.remoteParticipants.delete(t),n&&(n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(G.ParticipantDisconnected,n))}acquireAudioContext(){return D(this,void 0,void 0,function*(){var t,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=t1())!==null&&t!==void 0?t:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(G.AudioPlaybackStatusChanged,r))})}createParticipant(t,n){var r;let i;return n?i=gh.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new gh(this.engine.client,"",t,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(t,n){if(this.remoteParticipants.has(t)){const i=this.remoteParticipants.get(t);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(t,n);return this.remoteParticipants.set(t,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(G.ParticipantConnected,r),r.on(Q.TrackPublished,i=>{this.emitWhenConnected(G.TrackPublished,i,r)}).on(Q.TrackSubscribed,(i,o)=>{i.kind===H.Kind.Audio?(i.on(oe.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(oe.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===H.Kind.Video&&(i.on(oe.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(oe.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(G.TrackSubscribed,i,o,r)}).on(Q.TrackUnpublished,i=>{this.emit(G.TrackUnpublished,i,r)}).on(Q.TrackUnsubscribed,(i,o)=>{this.emit(G.TrackUnsubscribed,i,o,r)}).on(Q.TrackSubscriptionFailed,i=>{this.emit(G.TrackSubscriptionFailed,i,r)}).on(Q.TrackMuted,i=>{this.emitWhenConnected(G.TrackMuted,i,r)}).on(Q.TrackUnmuted,i=>{this.emitWhenConnected(G.TrackUnmuted,i,r)}).on(Q.ParticipantMetadataChanged,i=>{this.emitWhenConnected(G.ParticipantMetadataChanged,i,r)}).on(Q.ParticipantNameChanged,i=>{this.emitWhenConnected(G.ParticipantNameChanged,i,r)}).on(Q.AttributesChanged,i=>{this.emitWhenConnected(G.ParticipantAttributesChanged,i,r)}).on(Q.ConnectionQualityChanged,i=>{this.emitWhenConnected(G.ConnectionQualityChanged,i,r)}).on(Q.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(G.ParticipantPermissionsChanged,i,r)}).on(Q.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(G.TrackSubscriptionStatusChanged,i,o,r)}).on(Q.TrackSubscriptionFailed,(i,o)=>{this.emit(G.TrackSubscriptionFailed,i,r,o)}).on(Q.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(G.TrackSubscriptionPermissionChanged,i,o,r)}),n&&r.updateInfo(n),r}sendSyncState(){const t=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.remoteParticipants.values())for(const n of t.videoTrackPublications.values())n.isSubscribed&&n instanceof o1&&n.emitTrackUpdate()}getRemoteParticipantBySid(t){const n=this.sidToIdentity.get(t);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=Tn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:t,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,fl.STATE_MISMATCH))):t=0},jj)}clearConnectionReconcile(){this.connectionReconcileInterval&&Tn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(G.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(t=>{let[n,r]=t;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===tt.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([t,r]);else if(this.state===tt.Connected)return this.emit(t,...r);return!1}simulateParticipants(t){return D(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new Gy({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Ut.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Eu({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(G.SignalConnected),this.emit(G.Connected),this.setAndEmitConnectionState(tt.Connected),i.video){const s=new xu(H.Kind.Video,new il({source:Dn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:pi.AUDIO,name:"video-dummy"}),new An(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:bw(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(Q.LocalTrackPublished,s)}if(i.audio){const s=new xu(H.Kind.Audio,new il({source:Dn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:pi.AUDIO}),new Cn(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Rg(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(Q.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let l=new Eu({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:Gv.ACTIVE,tracks:[],joinedAt:Ut.parse(Date.now())});const u=this.getOrCreateParticipant(l.identity,l);if(o.video){const d=bw(160*((r=o.aspectRatios[s%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),h=new il({source:Dn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:pi.AUDIO});u.addSubscribedMediaTrack(d,h.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,h]}if(o.audio){const d=Rg(),h=new il({source:Dn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:pi.AUDIO});u.addSubscribedMediaTrack(d,h.sid,new MediaStream([d]),new RTCRtpReceiver),l.tracks=[...l.tracks,h]}u.updateInfo(l)}})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(t!==G.ActiveSpeakersChanged){const o=dR(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:o}))}return super.emit(t,...r)}}function dR(e){return e.map(t=>{if(t)return Array.isArray(t)?dR(t):typeof t=="object"?"logContext"in t&&t.logContext:t})}var fi;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(fi||(fi={}));class Bl extends $i.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=fi.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=t,this.token=n,this.name=this.constructor.name,this.room=new vh(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(t){return D(this,void 0,void 0,function*(){if(this.status!==fi.IDLE)throw Error("check is running already");this.setStatus(fi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==fi.SKIPPED&&this.setStatus(this.isSuccess()?fi.SUCCESS:fi.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(){return D(this,void 0,void 0,function*(){return this.room.state===tt.Connected?this.room:(yield this.room.connect(this.url,this.token,this.connectOptions),this.room)})}disconnect(){return D(this,void 0,void 0,function*(){this.room&&this.room.state!==tt.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus(fi.SKIPPED)}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class zj extends Bl{get description(){return"Can publish audio"}perform(){return D(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield Nj();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="audio"||!s.kind&&s.mediaType==="audio")&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class Bj extends Bl{get description(){return"Can publish video"}perform(){return D(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield Dj();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,5e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="video"||!s.kind&&s.mediaType==="video")&&(o+=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class Vj extends Bl{get description(){return"Resuming connection after interruption"}perform(){return D(this,void 0,void 0,function*(){var t;const n=yield this.connect();let r=!1,i=!1,o;const s=new Promise(d=>{setTimeout(d,5e3),o=d}),l=()=>{r=!0};n.on(G.SignalReconnecting,l).on(G.Reconnecting,l).on(G.Reconnected,()=>{i=!0,o(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const u=n.engine.client.onClose;if(u&&u(""),yield s,r){if(!i||n.state!==tt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class $j extends Bl{get description(){return"Can connect via TURN"}perform(){return D(this,void 0,void 0,function*(){var t,n;const r=new n1,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,l=!1;for(let u of i.iceServers)for(let d of u.urls)d.startsWith("turn:")?(s=!0,l=!0):d.startsWith("turns:")&&(s=!0,l=!0,o=!0),d.startsWith("stun:")&&(l=!0);l?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(u=>setTimeout(u,0)))})}}class Wj extends Bl{get description(){return"Establishing WebRTC connection"}perform(){return D(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(G.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,o)=>{if(i.candidate){const s=new RTCIceCandidate(i);let l="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(Hj(s.address)?l+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(t=!0,l+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(l)}r&&r(i,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Ke.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Hj(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class Gj extends Bl{get description(){return"Connecting to signal connection via WebSocket"}perform(){return D(this,void 0,void 0,function*(){var t,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new n1;const o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((t=o.serverInfo)===null||t===void 0?void 0:t.edition)===nx.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class yW extends $i.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=t,this.token=n,this.options=r}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:fi.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==fi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return D(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new t(this.url,this.token,this.options),i=s=>{this.updateCheck(n,s)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(Gj)})}checkWebRTC(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(Wj)})}checkTURN(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck($j)})}checkReconnect(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(Vj)})}checkPublishAudio(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(zj)})}checkPublishVideo(){return D(this,void 0,void 0,function*(){return this.createAndRunCheck(Bj)})}}function qj(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=e instanceof Hs?e.mediaStreamTrack:e,i=r.getSettings();let o={facingMode:(n=t.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;Ke.trace("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&Qj(s)&&(o={facingMode:s,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Ke.trace("Try to get facing mode from device label: (".concat(r.label,")"));const s=Jj(r.label);s!==void 0&&(o=s)}return o}const Nw=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),Kj=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function Jj(e){var t;const n=e.trim().toLowerCase();if(n!=="")return Nw.has(n)?Nw.get(n):(t=Array.from(Kj.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||t===void 0?void 0:t[1]}function Qj(e){return e===void 0||["user","environment","left","right"].includes(e)}const v0=Math.min,yl=Math.max,yh=Math.round,us=e=>({x:e,y:e}),Yj={left:"right",right:"left",bottom:"top",top:"bottom"},Xj={start:"end",end:"start"};function Uw(e,t,n){return yl(e,v0(t,n))}function ap(e,t){return typeof e=="function"?e(t):e}function na(e){return e.split("-")[0]}function lp(e){return e.split("-")[1]}function fR(e){return e==="x"?"y":"x"}function hR(e){return e==="y"?"height":"width"}function cp(e){return["top","bottom"].includes(na(e))?"y":"x"}function pR(e){return fR(cp(e))}function Zj(e,t,n){n===void 0&&(n=!1);const r=lp(e),i=pR(e),o=hR(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=bh(s)),[s,bh(s)]}function ez(e){const t=bh(e);return[y0(e),t,y0(t)]}function y0(e){return e.replace(/start|end/g,t=>Xj[t])}function tz(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function nz(e,t,n,r){const i=lp(e);let o=tz(na(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(y0)))),o}function bh(e){return e.replace(/left|right|bottom|top/g,t=>Yj[t])}function rz(e){return{top:0,right:0,bottom:0,left:0,...e}}function iz(e){return typeof e!="number"?rz(e):{top:e,right:e,bottom:e,left:e}}function kh(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Fw(e,t,n){let{reference:r,floating:i}=e;const o=cp(t),s=pR(t),l=hR(s),u=na(t),d=o==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,m=r[l]/2-i[l]/2;let y;switch(u){case"top":y={x:h,y:r.y-i.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:p};break;case"left":y={x:r.x-i.width,y:p};break;default:y={x:r.x,y:r.y}}switch(lp(t)){case"start":y[s]-=m*(n&&d?-1:1);break;case"end":y[s]+=m*(n&&d?-1:1);break}return y}const oz=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,l=o.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(t));let d=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=Fw(d,r,u),m=r,y={},S=0;for(let k=0;k<l.length;k++){const{name:P,fn:v}=l[k],{x:w,y:x,data:_,reset:I}=await v({x:h,y:p,initialPlacement:r,placement:m,strategy:i,middlewareData:y,rects:d,platform:s,elements:{reference:e,floating:t}});h=w??h,p=x??p,y={...y,[P]:{...y[P],..._}},I&&S<=50&&(S++,typeof I=="object"&&(I.placement&&(m=I.placement),I.rects&&(d=I.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):I.rects),{x:h,y:p}=Fw(d,m,u)),k=-1)}return{x:h,y:p,placement:m,strategy:i,middlewareData:y}};async function mR(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:l,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:y=0}=ap(t,e),S=iz(y),k=l[m?p==="floating"?"reference":"floating":p],P=kh(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(k)))==null||n?k:k.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:u})),v=p==="floating"?{...s.floating,x:r,y:i}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),x=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},_=kh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:w,strategy:u}):v);return{top:(P.top-_.top+S.top)/x.y,bottom:(_.bottom-P.bottom+S.bottom)/x.y,left:(P.left-_.left+S.left)/x.x,right:(_.right-P.right+S.right)/x.x}}const sz=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:l,platform:u,elements:d}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:k=!0,...P}=ap(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=na(i),w=na(l)===l,x=await(u.isRTL==null?void 0:u.isRTL(d.floating)),_=m||(w||!k?[bh(l)]:ez(l));!m&&S!=="none"&&_.push(...nz(l,k,S,x));const I=[l,..._],M=await mR(t,P),U=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&U.push(M[v]),p){const K=Zj(i,s,x);U.push(M[K[0]],M[K[1]])}if(T=[...T,{placement:i,overflows:U}],!U.every(K=>K<=0)){var B,j;const K=(((B=o.flip)==null?void 0:B.index)||0)+1,ve=I[K];if(ve)return{data:{index:K,overflows:T},reset:{placement:ve}};let me=(j=T.filter(nt=>nt.overflows[0]<=0).sort((nt,Je)=>nt.overflows[1]-Je.overflows[1])[0])==null?void 0:j.placement;if(!me)switch(y){case"bestFit":{var $;const nt=($=T.map(Je=>[Je.placement,Je.overflows.filter(Ne=>Ne>0).reduce((Ne,te)=>Ne+te,0)]).sort((Je,Ne)=>Je[1]-Ne[1])[0])==null?void 0:$[0];nt&&(me=nt);break}case"initialPlacement":me=l;break}if(i!==me)return{reset:{placement:me}}}return{}}}};async function az(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=na(n),l=lp(n),u=cp(n)==="y",d=["left","top"].includes(s)?-1:1,h=o&&u?-1:1,p=ap(t,e);let{mainAxis:m,crossAxis:y,alignmentAxis:S}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return l&&typeof S=="number"&&(y=l==="end"?S*-1:S),u?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const lz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:l}=t,u=await az(t,e);return s===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:s}}}}},cz=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:P=>{let{x:v,y:w}=P;return{x:v,y:w}}},...u}=ap(e,t),d={x:n,y:r},h=await mR(t,u),p=cp(na(i)),m=fR(p);let y=d[m],S=d[p];if(o){const P=m==="y"?"top":"left",v=m==="y"?"bottom":"right",w=y+h[P],x=y-h[v];y=Uw(w,y,x)}if(s){const P=p==="y"?"top":"left",v=p==="y"?"bottom":"right",w=S+h[P],x=S-h[v];S=Uw(w,S,x)}const k=l.fn({...t,[m]:y,[p]:S});return{...k,data:{x:k.x-n,y:k.y-r}}}}};function up(){return typeof window<"u"}function Vl(e){return gR(e)?(e.nodeName||"").toLowerCase():"#document"}function Cr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function So(e){var t;return(t=(gR(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gR(e){return up()?e instanceof Node||e instanceof Cr(e).Node:!1}function Si(e){return up()?e instanceof Element||e instanceof Cr(e).Element:!1}function Bi(e){return up()?e instanceof HTMLElement||e instanceof Cr(e).HTMLElement:!1}function jw(e){return!up()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Cr(e).ShadowRoot}function Uu(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ci(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function uz(e){return["table","td","th"].includes(Vl(e))}function dp(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function s1(e){const t=a1(),n=Si(e)?Ci(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function dz(e){let t=ds(e);for(;Bi(t)&&!Al(t);){if(s1(t))return t;if(dp(t))return null;t=ds(t)}return null}function a1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Al(e){return["html","body","#document"].includes(Vl(e))}function Ci(e){return Cr(e).getComputedStyle(e)}function fp(e){return Si(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ds(e){if(Vl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||jw(e)&&e.host||So(e);return jw(t)?t.host:t}function vR(e){const t=ds(e);return Al(t)?e.ownerDocument?e.ownerDocument.body:e.body:Bi(t)&&Uu(t)?t:vR(t)}function b0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=vR(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Cr(i);if(o){const l=k0(s);return t.concat(s,s.visualViewport||[],Uu(i)?i:[],l&&n?b0(l):[])}return t.concat(i,b0(i,[],n))}function k0(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function yR(e){const t=Ci(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Bi(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,l=yh(n)!==o||yh(r)!==s;return l&&(n=o,r=s),{width:n,height:r,$:l}}function bR(e){return Si(e)?e:e.contextElement}function bl(e){const t=bR(e);if(!Bi(t))return us(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=yR(t);let s=(o?yh(n.width):n.width)/r,l=(o?yh(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const fz=us(0);function kR(e){const t=Cr(e);return!a1()||!t.visualViewport?fz:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hz(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Cr(e)?!1:t}function Ru(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=bR(e);let s=us(1);t&&(r?Si(r)&&(s=bl(r)):s=bl(e));const l=hz(o,n,r)?kR(o):us(0);let u=(i.left+l.x)/s.x,d=(i.top+l.y)/s.y,h=i.width/s.x,p=i.height/s.y;if(o){const m=Cr(o),y=r&&Si(r)?Cr(r):r;let S=m,k=k0(S);for(;k&&r&&y!==S;){const P=bl(k),v=k.getBoundingClientRect(),w=Ci(k),x=v.left+(k.clientLeft+parseFloat(w.paddingLeft))*P.x,_=v.top+(k.clientTop+parseFloat(w.paddingTop))*P.y;u*=P.x,d*=P.y,h*=P.x,p*=P.y,u+=x,d+=_,S=Cr(k),k=k0(S)}}return kh({width:h,height:p,x:u,y:d})}function pz(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=So(r),l=t?dp(t.floating):!1;if(r===s||l&&o)return n;let u={scrollLeft:0,scrollTop:0},d=us(1);const h=us(0),p=Bi(r);if((p||!p&&!o)&&((Vl(r)!=="body"||Uu(s))&&(u=fp(r)),Bi(r))){const m=Ru(r);d=bl(r),h.x=m.x+r.clientLeft,h.y=m.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x,y:n.y*d.y-u.scrollTop*d.y+h.y}}function mz(e){return Array.from(e.getClientRects())}function S0(e,t){const n=fp(e).scrollLeft;return t?t.left+n:Ru(So(e)).left+n}function gz(e){const t=So(e),n=fp(e),r=e.ownerDocument.body,i=yl(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=yl(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+S0(e);const l=-n.scrollTop;return Ci(r).direction==="rtl"&&(s+=yl(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:l}}function vz(e,t){const n=Cr(e),r=So(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,l=0,u=0;if(i){o=i.width,s=i.height;const d=a1();(!d||d&&t==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:o,height:s,x:l,y:u}}function yz(e,t){const n=Ru(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Bi(e)?bl(e):us(1),s=e.clientWidth*o.x,l=e.clientHeight*o.y,u=i*o.x,d=r*o.y;return{width:s,height:l,x:u,y:d}}function zw(e,t,n){let r;if(t==="viewport")r=vz(e,n);else if(t==="document")r=gz(So(e));else if(Si(t))r=yz(t,n);else{const i=kR(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return kh(r)}function SR(e,t){const n=ds(e);return n===t||!Si(n)||Al(n)?!1:Ci(n).position==="fixed"||SR(n,t)}function bz(e,t){const n=t.get(e);if(n)return n;let r=b0(e,[],!1).filter(l=>Si(l)&&Vl(l)!=="body"),i=null;const o=Ci(e).position==="fixed";let s=o?ds(e):e;for(;Si(s)&&!Al(s);){const l=Ci(s),u=s1(s);!u&&l.position==="fixed"&&(i=null),(o?!u&&!i:!u&&l.position==="static"&&i&&["absolute","fixed"].includes(i.position)||Uu(s)&&!u&&SR(e,s))?r=r.filter(d=>d!==s):i=l,s=ds(s)}return t.set(e,r),r}function kz(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?dp(t)?[]:bz(t,this._c):[].concat(n),r],s=o[0],l=o.reduce((u,d)=>{const h=zw(t,d,i);return u.top=yl(h.top,u.top),u.right=v0(h.right,u.right),u.bottom=v0(h.bottom,u.bottom),u.left=yl(h.left,u.left),u},zw(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Sz(e){const{width:t,height:n}=yR(e);return{width:t,height:n}}function Cz(e,t,n){const r=Bi(t),i=So(t),o=n==="fixed",s=Ru(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const u=us(0);if(r||!r&&!o)if((Vl(t)!=="body"||Uu(i))&&(l=fp(t)),r){const y=Ru(t,!0,o,t);u.x=y.x+t.clientLeft,u.y=y.y+t.clientTop}else i&&(u.x=S0(i));let d=0,h=0;if(i&&!r&&!o){const y=i.getBoundingClientRect();h=y.top+l.scrollTop,d=y.left+l.scrollLeft-S0(i,y)}const p=s.left+l.scrollLeft-u.x-d,m=s.top+l.scrollTop-u.y-h;return{x:p,y:m,width:s.width,height:s.height}}function Ug(e){return Ci(e).position==="static"}function Bw(e,t){if(!Bi(e)||Ci(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return So(e)===n&&(n=n.ownerDocument.body),n}function CR(e,t){const n=Cr(e);if(dp(e))return n;if(!Bi(e)){let i=ds(e);for(;i&&!Al(i);){if(Si(i)&&!Ug(i))return i;i=ds(i)}return n}let r=Bw(e,t);for(;r&&uz(r)&&Ug(r);)r=Bw(r,t);return r&&Al(r)&&Ug(r)&&!s1(r)?n:r||dz(e)||n}const wz=async function(e){const t=this.getOffsetParent||CR,n=this.getDimensions,r=await n(e.floating);return{reference:Cz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Tz(e){return Ci(e).direction==="rtl"}const Ez={convertOffsetParentRelativeRectToViewportRelativeRect:pz,getDocumentElement:So,getClippingRect:kz,getOffsetParent:CR,getElementRects:wz,getClientRects:mz,getDimensions:Sz,getScale:bl,isElement:Si,isRTL:Tz},_z=lz,Pz=cz,xz=sz,Rz=(e,t,n)=>{const r=new Map,i={platform:Ez,...n},o={...i.platform,_c:r};return oz(e,t,{...i,platform:o})};var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Iz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wR={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(Uc,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function l(k,P){var v=k[P];if(typeof v.bind=="function")return v.bind(k);try{return Function.prototype.bind.call(v,k)}catch{return function(){return Function.prototype.apply.apply(v,[k,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(k){return k==="debug"&&(k="log"),typeof console===n?!1:k==="trace"&&r?u:console[k]!==void 0?l(console,k):console.log!==void 0?l(console,"log"):t}function h(){for(var k=this.getLevel(),P=0;P<i.length;P++){var v=i[P];this[v]=P<k?t:this.methodFactory(v,k,this.name)}if(this.log=this.debug,typeof console===n&&k<this.levels.SILENT)return"No console available for logging"}function p(k){return function(){typeof console!==n&&(h.call(this),this[k].apply(this,arguments))}}function m(k,P,v){return d(k)||p.apply(this,arguments)}function y(k,P){var v=this,w,x,_,I="loglevel";typeof k=="string"?I+=":"+k:typeof k=="symbol"&&(I=void 0);function M($){var K=(i[$]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=K;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+K+";"}catch{}}}function U(){var $;if(!(typeof window===n||!I)){try{$=window.localStorage[I]}catch{}if(typeof $===n)try{var K=window.document.cookie,ve=encodeURIComponent(I),me=K.indexOf(ve+"=");me!==-1&&($=/^([^;]+)/.exec(K.slice(me+ve.length+1))[1])}catch{}return v.levels[$]===void 0&&($=void 0),$}}function T(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function B($){var K=$;if(typeof K=="string"&&v.levels[K.toUpperCase()]!==void 0&&(K=v.levels[K.toUpperCase()]),typeof K=="number"&&K>=0&&K<=v.levels.SILENT)return K;throw new TypeError("log.setLevel() called with invalid level: "+$)}v.name=k,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=P||m,v.getLevel=function(){return _??x??w},v.setLevel=function($,K){return _=B($),K!==!1&&M(_),h.call(v)},v.setDefaultLevel=function($){x=B($),U()||v.setLevel($,!1)},v.resetLevel=function(){_=null,T(),h.call(v)},v.enableAll=function($){v.setLevel(v.levels.TRACE,$)},v.disableAll=function($){v.setLevel(v.levels.SILENT,$)},v.rebuild=function(){if(s!==v&&(w=B(s.getLevel())),h.call(v),s===v)for(var $ in o)o[$].rebuild()},w=B(s?s.getLevel():"WARN");var j=U();j!=null&&(_=B(j)),h.call(v)}s=new y,s.getLogger=function(k){if(typeof k!="symbol"&&typeof k!="string"||k==="")throw new TypeError("You must supply a name when creating a logger.");var P=o[k];return P||(P=o[k]=new y(k,s.methodFactory)),P};var S=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=S),s},s.getLoggers=function(){return o},s.default=s,s})})(wR);var Oz=wR.exports;const Mz=Iz(Oz);var C0=function(e,t){return C0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},C0(e,t)};function Co(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");C0(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Lz(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(h){try{d(r.next(h))}catch(p){s(p)}}function u(h){try{d(r.throw(h))}catch(p){s(p)}}function d(h){h.done?o(h.value):i(h.value).then(l,u)}d((r=r.apply(e,t||[])).next())})}function TR(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Dl(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sh(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Ch(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function kl(e){return this instanceof kl?(this.v=e,this):new kl(e)}function Az(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function l(y,S){r[y]&&(i[y]=function(k){return new Promise(function(P,v){o.push([y,k,P,v])>1||u(y,k)})},S&&(i[y]=S(i[y])))}function u(y,S){try{d(r[y](S))}catch(k){m(o[0][3],k)}}function d(y){y.value instanceof kl?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Dz(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Dl=="function"?Dl(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(l,u){s=e[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(d){o({value:d,done:l})},s)}}function dn(e){return typeof e=="function"}function l1(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Fg=l1(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function wh(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Fu=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=Dl(s),u=l.next();!u.done;u=l.next()){var d=u.value;d.remove(this)}}catch(k){t={error:k}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else s.remove(this);var h=this.initialTeardown;if(dn(h))try{h()}catch(k){o=k instanceof Fg?k.errors:[k]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var m=Dl(p),y=m.next();!y.done;y=m.next()){var S=y.value;try{Vw(S)}catch(k){o=o??[],k instanceof Fg?o=Ch(Ch([],Sh(o)),Sh(k.errors)):o.push(k)}}}catch(k){r={error:k}}finally{try{y&&!y.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}}if(o)throw new Fg(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Vw(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&wh(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&wh(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),ER=Fu.EMPTY;function _R(e){return e instanceof Fu||e&&"closed"in e&&dn(e.remove)&&dn(e.add)&&dn(e.unsubscribe)}function Vw(e){dn(e)?e():e.unsubscribe()}var PR={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Nz={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Ch([e,t],Sh(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function xR(e){Nz.setTimeout(function(){throw e})}function w0(){}function Af(e){e()}var c1=function(e){Co(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,_R(n)&&n.add(r)):r.destination=zz,r}return t.create=function(n,r,i){return new T0(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Fu),Uz=Function.prototype.bind;function jg(e,t){return Uz.call(e,t)}var Fz=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){nf(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){nf(r)}else nf(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){nf(n)}},e}(),T0=function(e){Co(t,e);function t(n,r,i){var o=e.call(this)||this,s;if(dn(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var l;o&&PR.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&jg(n.next,l),error:n.error&&jg(n.error,l),complete:n.complete&&jg(n.complete,l)}):s=n}return o.destination=new Fz(s),o}return t}(c1);function nf(e){xR(e)}function jz(e){throw e}var zz={closed:!0,next:w0,error:jz,complete:w0},u1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function RR(e){return e}function Bz(e){return e.length===0?RR:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var Pn=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=$z(t)?t:new T0(t,n,r);return Af(function(){var s=i,l=s.operator,u=s.source;o.add(l?l.call(o,u):u?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=$w(n),new n(function(i,o){var s=new T0({next:function(l){try{t(l)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[u1]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Bz(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=$w(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function $w(e){var t;return(t=e??PR.Promise)!==null&&t!==void 0?t:Promise}function Vz(e){return e&&dn(e.next)&&dn(e.error)&&dn(e.complete)}function $z(e){return e&&e instanceof c1||Vz(e)&&_R(e)}function Wz(e){return dn(e?.lift)}function wo(e){return function(t){if(Wz(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ra(e,t,n,r,i){return new Hz(e,t,n,r,i)}var Hz=function(e){Co(t,e);function t(n,r,i,o,s,l){var u=e.call(this,n)||this;return u.onFinalize=s,u.shouldUnsubscribe=l,u._next=r?function(d){try{r(d)}catch(h){n.error(h)}}:e.prototype._next,u._error=o?function(d){try{o(d)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._complete,u}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(c1),Gz=l1(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),fs=function(e){Co(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Ww(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Gz},t.prototype.next=function(n){var r=this;Af(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Dl(r.currentObservers),l=s.next();!l.done;l=s.next()){var u=l.value;u.next(n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Af(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Af(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,l=i.observers;return o||s?ER:(this.currentObservers=null,l.push(n),new Fu(function(){r.currentObservers=null,wh(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new Pn;return n.source=this,n},t.create=function(n,r){return new Ww(n,r)},t}(Pn),Ww=function(e){Co(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:ER},t}(fs),IR=function(e){Co(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(fs),qz={now:function(){return Date.now()},delegate:void 0},Kz=function(e){Co(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(Fu),Hw={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Ch([e,t],Sh(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Jz=function(e){Co(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Hw.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&Hw.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,wh(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Kz),Gw=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=qz.now,e}(),Qz=function(e){Co(t,e);function t(n,r){r===void 0&&(r=Gw.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Gw);new Qz(Jz);var Yz=new Pn(function(e){return e.complete()});function Xz(e){return e&&dn(e.schedule)}function OR(e){return e[e.length-1]}function d1(e){return Xz(OR(e))?e.pop():void 0}function Zz(e,t){return typeof OR(e)=="number"?e.pop():t}var MR=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function LR(e){return dn(e?.then)}function AR(e){return dn(e[u1])}function DR(e){return Symbol.asyncIterator&&dn(e?.[Symbol.asyncIterator])}function NR(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function eB(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var UR=eB();function FR(e){return dn(e?.[UR])}function jR(e){return Az(this,arguments,function(){var t,n,r,i;return TR(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,kl(t.read())];case 3:return n=o.sent(),r=n.value,i=n.done,i?[4,kl(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,kl(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function zR(e){return dn(e?.getReader)}function ua(e){if(e instanceof Pn)return e;if(e!=null){if(AR(e))return tB(e);if(MR(e))return nB(e);if(LR(e))return rB(e);if(DR(e))return BR(e);if(FR(e))return iB(e);if(zR(e))return oB(e)}throw NR(e)}function tB(e){return new Pn(function(t){var n=e[u1]();if(dn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nB(e){return new Pn(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function rB(e){return new Pn(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,xR)})}function iB(e){return new Pn(function(t){var n,r;try{for(var i=Dl(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function BR(e){return new Pn(function(t){sB(e,t).catch(function(n){return t.error(n)})})}function oB(e){return BR(jR(e))}function sB(e,t){var n,r,i,o;return Lz(this,void 0,void 0,function(){var s,l;return TR(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=Dz(e),u.label=1;case 1:return[4,n.next()];case 2:if(r=u.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=u.sent(),i={error:l},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Gs(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function VR(e,t){return t===void 0&&(t=0),wo(function(n,r){n.subscribe(ra(r,function(i){return Gs(r,e,function(){return r.next(i)},t)},function(){return Gs(r,e,function(){return r.complete()},t)},function(i){return Gs(r,e,function(){return r.error(i)},t)}))})}function $R(e,t){return t===void 0&&(t=0),wo(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function aB(e,t){return ua(e).pipe($R(t),VR(t))}function lB(e,t){return ua(e).pipe($R(t),VR(t))}function cB(e,t){return new Pn(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function uB(e,t){return new Pn(function(n){var r;return Gs(n,t,function(){r=e[UR](),Gs(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(l){n.error(l);return}s?n.complete():n.next(o)},0,!0)}),function(){return dn(r?.return)&&r.return()}})}function WR(e,t){if(!e)throw new Error("Iterable cannot be null");return new Pn(function(n){Gs(n,t,function(){var r=e[Symbol.asyncIterator]();Gs(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function dB(e,t){return WR(jR(e),t)}function fB(e,t){if(e!=null){if(AR(e))return aB(e,t);if(MR(e))return cB(e,t);if(LR(e))return lB(e,t);if(DR(e))return WR(e,t);if(FR(e))return uB(e,t);if(zR(e))return dB(e,t)}throw NR(e)}function HR(e,t){return t?fB(e,t):ua(e)}l1(function(e){return function(t){t===void 0&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function xn(e,t){return wo(function(n,r){var i=0;n.subscribe(ra(r,function(o){r.next(e.call(t,o,i++))}))})}function hB(e,t,n,r,i,o,s,l){var u=[],d=0,h=0,p=!1,m=function(){p&&!u.length&&!d&&t.complete()},y=function(k){return d<r?S(k):u.push(k)},S=function(k){d++;var P=!1;ua(n(k,h++)).subscribe(ra(t,function(v){t.next(v)},function(){P=!0},void 0,function(){if(P)try{d--;for(var v=function(){var w=u.shift();s||S(w)};u.length&&d<r;)v();m()}catch(w){t.error(w)}}))};return e.subscribe(ra(t,y,function(){p=!0,m()})),function(){}}function GR(e,t,n){return n===void 0&&(n=1/0),dn(t)?GR(function(r,i){return xn(function(o,s){return t(r,o,i,s)})(ua(e(r,i)))},n):(typeof t=="number"&&(n=t),wo(function(r,i){return hB(r,i,e,n)}))}function qR(e){return e===void 0&&(e=1/0),GR(RR,e)}function pB(){return qR(1)}function E0(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pB()(HR(e,d1(e)))}function mB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=d1(e),r=Zz(e,1/0),i=e;return i.length?i.length===1?ua(i[0]):qR(r)(HR(i,n)):Yz}function KR(e,t){return wo(function(n,r){var i=0;n.subscribe(ra(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function gB(e,t,n,r,i){return function(o,s){var l=n,u=t,d=0;o.subscribe(ra(s,function(h){var p=d++;u=l?e(u,h,p):(l=!0,h),s.next(u)},i))}}function vB(e){return wo(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}function yB(e,t){return wo(gB(e,t,arguments.length>=2,!0))}function wi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=d1(e);return wo(function(r,i){(n?E0(e,r,n):E0(e,r)).subscribe(i)})}function qw(e){return wo(function(t,n){ua(e).subscribe(ra(n,function(){return n.complete()},w0)),!n.closed&&t.subscribe(n)})}var bB=Object.defineProperty,kB=Object.defineProperties,SB=Object.getOwnPropertyDescriptors,Kw=Object.getOwnPropertySymbols,CB=Object.prototype.hasOwnProperty,wB=Object.prototype.propertyIsEnumerable,Jw=(e,t,n)=>t in e?bB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zs=(e,t)=>{for(var n in t||(t={}))CB.call(t,n)&&Jw(e,n,t[n]);if(Kw)for(var n of Kw(t))wB.call(t,n)&&Jw(e,n,t[n]);return e},rf=(e,t)=>kB(e,SB(t)),Tr=(e,t,n)=>new Promise((r,i)=>{var o=u=>{try{l(n.next(u))}catch(d){i(d)}},s=u=>{try{l(n.throw(u))}catch(d){i(d)}},l=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);l((n=n.apply(e,t)).next())}),JR="lk";function hp(e){return typeof e>"u"?!1:TB(e)||EB(e)}function TB(e){var t;return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof((t=e.publication)==null?void 0:t.track)<"u":!1}function EB(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u":!1}function _B(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u":!1}function f1(e){if(typeof e=="string"||typeof e=="number")return`${e}`;if(_B(e))return`${e.participant.identity}_${e.source}_placeholder`;if(hp(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}function PB(e){return e instanceof g0}function xB(e,t){return Tr(this,null,function*(){const{x:n,y:r}=yield Rz(e,t,{placement:"top",middleware:[_z(6),xz(),Pz({padding:5})]});return{x:n,y:r}})}function RB(e,t){return!e.contains(t.target)}var IB=[G.ConnectionStateChanged,G.RoomMetadataChanged,G.ActiveSpeakersChanged,G.ConnectionQualityChanged,G.ParticipantConnected,G.ParticipantDisconnected,G.ParticipantPermissionsChanged,G.ParticipantMetadataChanged,G.ParticipantNameChanged,G.ParticipantAttributesChanged,G.TrackMuted,G.TrackUnmuted,G.TrackPublished,G.TrackUnpublished,G.TrackStreamStateChanged,G.TrackSubscriptionFailed,G.TrackSubscriptionPermissionChanged,G.TrackSubscriptionStatusChanged],OB=[...IB,G.LocalTrackPublished,G.LocalTrackUnpublished];Q.TrackPublished,Q.TrackUnpublished,Q.TrackMuted,Q.TrackUnmuted,Q.TrackStreamStateChanged,Q.TrackSubscribed,Q.TrackUnsubscribed,Q.TrackSubscriptionPermissionChanged,Q.TrackSubscriptionFailed,Q.LocalTrackPublished,Q.LocalTrackUnpublished;var MB=[Q.ConnectionQualityChanged,Q.IsSpeakingChanged,Q.ParticipantMetadataChanged,Q.ParticipantPermissionsChanged,Q.TrackMuted,Q.TrackUnmuted,Q.TrackPublished,Q.TrackUnpublished,Q.TrackStreamStateChanged,Q.TrackSubscriptionFailed,Q.TrackSubscriptionPermissionChanged,Q.TrackSubscriptionStatusChanged];[...MB,Q.LocalTrackPublished,Q.LocalTrackUnpublished];var it=Mz.getLogger("lk-components-js");it.setDefaultLevel("WARN");function LB(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var AB=[],DB={showChat:!1,unreadMessages:0,showSettings:!1};function QR(e){return typeof e=="object"}function YR(e){return Array.isArray(e)&&e.filter(QR).length>0}function Xr(e){return`${JR}-${e}`}function NB(e){const t=_0(e),n=XR(e.participant).pipe(xn(()=>_0(e)),wi(t));return{className:Xr(e.source===H.Source.Camera||e.source===H.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function _0(e){if(hp(e))return e.publication;{const{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(i=>i.source===t&&i.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw new Error("At least one of source and name needs to be defined")}}function h1(e,...t){return new Pn(n=>{const r=()=>{n.next(e)};return t.forEach(i=>{e.on(i,r)}),()=>{t.forEach(i=>{e.off(i,r)})}}).pipe(wi(e))}function pp(e,t){return new Pn(n=>{const r=(...i)=>{n.next(i)};return e.on(t,r),()=>{e.off(t,r)}})}function UB(e){return pp(e,G.ConnectionStateChanged).pipe(xn(([t])=>t),wi(e.state))}function FB(e,t,n=!0){var r;const i=()=>Tr(this,null,function*(){try{const l=yield vh.getLocalDevices(e,n);o.next(l)}catch(l){t?.(l)}}),o=new fs,s=o.pipe(vB(()=>{var l;(l=navigator?.mediaDevices)==null||l.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator?.mediaDevices)==null||r.addEventListener("devicechange",i)}return E0(vh.getLocalDevices(e,n).catch(l=>(t?.(l),[])),s)}function jB(e){return pp(e,G.DataReceived)}function zB(e){return pp(e,G.ChatMessage)}function BB(e){return h1(e,G.AudioPlaybackStatusChanged).pipe(xn(t=>({canPlayAudio:t.canPlaybackAudio})))}function VB(e){return h1(e,G.VideoPlaybackStatusChanged).pipe(xn(t=>({canPlayVideo:t.canPlaybackVideo})))}function $B(e,t){return pp(e,G.ActiveDeviceChanged).pipe(KR(([n])=>n===t),xn(([n,r])=>(it.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),wi(e.getActiveDevice(t)))}function p1(e,...t){return new Pn(n=>{const r=()=>{n.next(e)};return t.forEach(i=>{e.on(i,r)}),()=>{t.forEach(i=>{e.off(i,r)})}}).pipe(wi(e))}function XR(e){return p1(e,Q.TrackMuted,Q.TrackUnmuted,Q.ParticipantPermissionsChanged,Q.TrackPublished,Q.TrackUnpublished,Q.LocalTrackPublished,Q.LocalTrackUnpublished,Q.MediaDevicesError,Q.TrackSubscriptionStatusChanged).pipe(xn(t=>{const{isMicrophoneEnabled:n,isCameraEnabled:r,isScreenShareEnabled:i}=t,o=t.getTrackPublication(H.Source.Microphone),s=t.getTrackPublication(H.Source.Camera);return{isCameraEnabled:r,isMicrophoneEnabled:n,isScreenShareEnabled:i,cameraTrack:s,microphoneTrack:o,participant:t}}))}function WB(e){return e?p1(e,Q.ParticipantMetadataChanged,Q.ParticipantNameChanged).pipe(xn(({name:t,identity:n,metadata:r})=>({name:t,identity:n,metadata:r})),wi({name:e.name,identity:e.identity,metadata:e.metadata})):void 0}function HB(e){return m1(e,Q.ConnectionQualityChanged).pipe(xn(([t])=>t),wi(e.connectionQuality))}function m1(e,t){return new Pn(n=>{const r=(...i)=>{n.next(i)};return e.on(t,r),()=>{e.off(t,r)}})}function ZR(e){var t,n,r,i;return p1(e.participant,Q.TrackMuted,Q.TrackUnmuted,Q.TrackSubscribed,Q.TrackUnsubscribed,Q.LocalTrackPublished,Q.LocalTrackUnpublished).pipe(xn(o=>{var s,l;const u=(s=e.publication)!=null?s:o.getTrackPublication(e.source);return(l=u?.isMuted)!=null?l:!0}),wi((i=(r=(t=e.publication)==null?void 0:t.isMuted)!=null?r:(n=e.participant.getTrackPublication(e.source))==null?void 0:n.isMuted)!=null?i:!0))}function GB(e){return m1(e,Q.IsSpeakingChanged).pipe(xn(([t])=>t))}function qB(e){return m1(e,Q.ParticipantPermissionsChanged).pipe(xn(()=>e.permissions),wi(e.permissions))}function KB(e,t,n,r,i){const{localParticipant:o}=t,s=(h,p)=>{let m=!1;switch(h){case H.Source.Camera:m=p.isCameraEnabled;break;case H.Source.Microphone:m=p.isMicrophoneEnabled;break;case H.Source.ScreenShare:m=p.isScreenShareEnabled;break}return m},l=XR(o).pipe(xn(h=>s(e,h.participant)),wi(s(e,o))),u=new fs,d=(h,p)=>Tr(this,null,function*(){try{switch(p??(p=n),u.next(!0),e){case H.Source.Camera:return yield o.setCameraEnabled(h??!o.isCameraEnabled,p,r),o.isCameraEnabled;case H.Source.Microphone:return yield o.setMicrophoneEnabled(h??!o.isMicrophoneEnabled,p,r),o.isMicrophoneEnabled;case H.Source.ScreenShare:return yield o.setScreenShareEnabled(h??!o.isScreenShareEnabled,p,r),o.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(m){if(i&&m instanceof Error){i?.(m);return}else throw m}finally{u.next(!1)}});return{className:Xr("button"),toggle:d,enabledObserver:l,pendingObserver:u.asObservable()}}function JB(){let e=!1;const t=new fs,n=new fs,r=i=>Tr(this,null,function*(){n.next(!0),e=i??!e,t.next(e),n.next(!1)});return{className:Xr("button"),toggle:r,enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}function QB(e,t,n){const r=new IR(void 0),i=t?$B(t,e):r.asObservable(),o=(s,...l)=>Tr(this,[s,...l],function*(u,d={}){var h,p,m;if(t){it.debug(`Switching active device of kind "${e}" with id ${u}.`),yield t.switchActiveDevice(e,u,d.exact);const y=(h=t.getActiveDevice(e))!=null?h:u;y!==u&&u!=="default"&&it.info(`We tried to select the device with id (${u}), but the browser decided to select the device with id (${y}) instead.`);let S;e==="audioinput"?S=(p=t.localParticipant.getTrackPublication(H.Source.Microphone))==null?void 0:p.track:e==="videoinput"&&(S=(m=t.localParticipant.getTrackPublication(H.Source.Camera))==null?void 0:m.track);const k=u==="default"&&!S||u==="default"&&S?.mediaStreamTrack.label.startsWith("Default");r.next(k?u:y)}else if(n){yield n.setDeviceId(d.exact?{exact:u}:u);const y=yield n.getDeviceId();r.next(u==="default"&&n.mediaStreamTrack.label.startsWith("Default")?u:y)}else r.value!==u&&(it.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(u))});return{className:Xr("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}}function YB(e){const t=n=>{e.disconnect(n)};return{className:Xr("disconnect-button"),disconnect:t}}function XB(e){const t=Xr("connection-quality"),n=HB(e);return{className:t,connectionQualityObserver:n}}function ZB(e){let t="track-muted-indicator-camera";switch(e.source){case H.Source.Camera:t="track-muted-indicator-camera";break;case H.Source.Microphone:t="track-muted-indicator-microphone";break}const n=Xr(t),r=ZR(e);return{className:n,mediaMutedObserver:r}}function eV(e){return{className:"lk-participant-name",infoObserver:WB(e)}}function tV(){return{className:Xr("participant-tile")}}var Qw={CHAT:"lk-chat-topic",CHAT_UPDATE:"lk-chat-update-topic"};function P0(e,t){return Tr(this,arguments,function*(n,r,i={}){const{reliable:o,destinationIdentities:s,topic:l}=i;yield n.publishData(r,{destinationIdentities:s,topic:l,reliable:o})})}function nV(e,t,n){const r=Array.isArray(t)?t:[t],i=jB(e).pipe(KR(([,,,l])=>t===void 0||l!==void 0&&r.includes(l)),xn(([l,u,,d])=>{const h={payload:l,topic:d,from:u};return n?.(h),h}));let o;const s=new Pn(l=>{o=l});return{messageObservable:i,isSendingObservable:s,send:(l,...u)=>Tr(this,[l,...u],function*(d,h={}){o.next(!0);try{yield P0(e.localParticipant,d,zs({topic:r[0]},h))}finally{o.next(!1)}})}}function rV(e){return{chatObservable:zB(e),send:t=>Tr(this,null,function*(){return yield e.localParticipant.sendChatMessage(t)}),edit:(t,n)=>Tr(this,null,function*(){return yield e.localParticipant.editChatMessage(t,n)})}}var iV=new TextEncoder,oV=new TextDecoder,of=new Map,sV=e=>iV.encode(JSON.stringify(e)),aV=e=>JSON.parse(oV.decode(e));function lV(e,t){var n,r;const i=new fs,o=()=>{var T,B,j;return((T=e.serverInfo)==null?void 0:T.edition)===1||!!((B=e.serverInfo)!=null&&B.version)&&Ll((j=e.serverInfo)==null?void 0:j.version,"1.17.2")>0},{messageDecoder:s,messageEncoder:l,channelTopic:u,updateChannelTopic:d}=t??{},h=u??Qw.CHAT,p=d??Qw.CHAT_UPDATE;let m=!1;of.has(e)||(m=!0);const y=(n=of.get(e))!=null?n:new Map,S=(r=y.get(h))!=null?r:new fs;if(y.set(h,S),of.set(e,y),m){const{messageObservable:T}=nV(e,[h,p]);T.pipe(qw(i)).subscribe(S)}const{chatObservable:k,send:P}=rV(e),v=s??aV,w=mB(S.pipe(xn(T=>{const B=v(T.payload),j=rf(zs({},B),{from:T.from});if(!cV(j))return j})),k.pipe(xn(([T,B])=>rf(zs({},T),{from:B})))).pipe(yB((T,B)=>{var j;if(!B)return T;if("id"in B&&T.find($=>{var K,ve;return((K=$.from)==null?void 0:K.identity)===((ve=B.from)==null?void 0:ve.identity)&&$.id===B.id})){const $=T.findIndex(K=>K.id===B.id);if($>-1){const K=T[$];T[$]=rf(zs({},B),{timestamp:K.timestamp,editTimestamp:(j=B.editTimestamp)!=null?j:B.timestamp})}return[...T]}return[...T,B]},[]),qw(i)),x=new IR(!1),_=l??sV,I=T=>Tr(this,null,function*(){x.next(!0);try{const B=yield P(T),j=_(rf(zs({},B),{ignore:o()}));return yield P0(e.localParticipant,j,{reliable:!0,topic:h}),B}finally{x.next(!1)}}),M=(T,B)=>Tr(this,null,function*(){const j=Date.now(),$=typeof B=="string"?{id:B,message:"",timestamp:j}:B;x.next(!0);try{const K=yield e.localParticipant.editChatMessage(T,$),ve=_(K);return yield P0(e.localParticipant,ve,{topic:p,reliable:!0}),K}finally{x.next(!1)}});function U(){i.next(),i.complete(),of.delete(e)}return e.once(G.Disconnected,U),{messageObservable:w,isSendingObservable:x,send:I,update:M}}function cV(e){return e.ignore==!0}function uV(){const e=t=>Tr(this,null,function*(){it.info("Start Audio for room: ",t),yield t.startAudio()});return{className:Xr("start-audio-button"),roomAudioPlaybackAllowedObservable:BB,handleStartAudioPlayback:e}}function dV(){const e=t=>Tr(this,null,function*(){it.info("Start Video for room: ",t),yield t.startVideo()});return{className:Xr("start-audio-button"),roomVideoPlaybackAllowedObservable:VB,handleStartVideoPlayback:e}}function fV(){return{className:[Xr("button"),Xr("chat-toggle")].join(" ")}}function hV(){return{className:"lk-room-container"}}function Yw(e,t,n=!0){const r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],i=[];return r.forEach(o=>{t.forEach(s=>{const l=Array.from(o.trackPublications.values()).filter(u=>u.source===s&&(!n||u.track)).map(u=>({participant:o,publication:u,source:u.source}));i.push(...l)})}),{trackReferences:i,participants:r}}function pV(e,t,n){var r,i;const o=(r=n.additionalRoomEvents)!=null?r:OB,s=(i=n.onlySubscribed)!=null?i:!0,l=Array.from(new Set([G.ParticipantConnected,G.ParticipantDisconnected,G.ConnectionStateChanged,G.LocalTrackPublished,G.LocalTrackUnpublished,G.TrackPublished,G.TrackUnpublished,G.TrackSubscriptionStatusChanged,...o]).values());return h1(e,...l).pipe(xn(u=>{const d=Yw(u,t,s);return it.debug(`TrackReference[] was updated. (length ${d.trackReferences.length})`,d),d}),wi(Yw(e,t,s)))}function mV(e,t){if(typeof localStorage>"u"){it.error("Local storage is not available.");return}try{if(t){const n=Object.fromEntries(Object.entries(t).filter(([,r])=>r!==""));localStorage.setItem(e,JSON.stringify(n))}}catch(n){it.error(`Error setting item to local storage: ${n}`)}}function gV(e){if(typeof localStorage>"u"){it.error("Local storage is not available.");return}try{const t=localStorage.getItem(e);if(!t){it.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(t){it.error(`Error getting item from local storage: ${t}`);return}}function vV(e){return{load:()=>gV(e),save:t=>mV(e,t)}}var yV=`${JR}-user-choices`,Rc={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:""},{load:bV,save:kV}=vV(yV);function SV(e,t=!1){t!==!0&&kV(e)}function CV(e,t=!1){var n,r,i,o,s;const l={videoEnabled:(n=e?.videoEnabled)!=null?n:Rc.videoEnabled,audioEnabled:(r=e?.audioEnabled)!=null?r:Rc.audioEnabled,videoDeviceId:(i=e?.videoDeviceId)!=null?i:Rc.videoDeviceId,audioDeviceId:(o=e?.audioDeviceId)!=null?o:Rc.audioDeviceId,username:(s=e?.username)!=null?s:Rc.username};if(t)return l;{const u=bV();return zs(zs({},l),u??{})}}function wV(e,t){if(t.msg==="show_chat")return{...e,showChat:!0,unreadMessages:0};if(t.msg==="hide_chat")return{...e,showChat:!1};if(t.msg==="toggle_chat"){const n={...e,showChat:!e.showChat};return n.showChat===!0&&(n.unreadMessages=0),n}else return t.msg==="unread_msg"?{...e,unreadMessages:t.count}:t.msg==="toggle_settings"?{...e,showSettings:!e.showSettings}:{...e}}function TV(e,t){return t.msg==="set_pin"?[t.trackReference]:t.msg==="clear_pin"?[]:{...e}}const g1=b.createContext(void 0);function e2(){const e=b.useContext(g1);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function EV(e){const[t,n]=b.useReducer(TV,AB),[r,i]=b.useReducer(wV,DB);return e??{pin:{dispatch:n,state:t},widget:{dispatch:i,state:r}}}function t2(){return b.useContext(g1)}const v1=b.createContext(void 0);function y1(){return b.useContext(v1)}function mp(e){const t=y1(),n=e??t;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const _V=b.createContext(void 0);function PV(){return b.useContext(_V)}function gp(e){const t=PV(),n=y1(),r=e??t??n?.participant;if(!r)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}const b1=b.createContext(void 0);function vp(){const e=b.useContext(b1);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function yp(){return b.useContext(b1)}function bp(e){const t=yp(),n=e??t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const xV=b.createContext(void 0);function n2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=n2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function r2(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=n2(e))&&(r&&(r+=" "),r+=t);return r}function RV(...e){return(...t)=>{for(const n of e)if(typeof n=="function")try{n(...t)}catch(r){console.error(r)}}}function To(...e){const t={...e[0]};for(let n=1;n<e.length;n++){const r=e[n];for(const i in r){const o=t[i],s=r[i];typeof o=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?t[i]=RV(o,s):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?t[i]=r2(o,s):t[i]=s!==void 0?s:o}}return t}const IV={connect:!0,audio:!1,video:!1};function OV(e){const{token:t,serverUrl:n,options:r,room:i,connectOptions:o,connect:s,audio:l,video:u,screen:d,onConnected:h,onDisconnected:p,onError:m,onMediaDeviceFailure:y,onEncryptionError:S,simulateParticipants:k,...P}={...IV,...e};r&&i&&it.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,w]=b.useState();b.useEffect(()=>{w(i??new vh(r))},[i]);const x=b.useMemo(()=>{const{className:_}=hV();return To(P,{className:_})},[P]);return b.useEffect(()=>{if(!v)return;const _=()=>{const U=v.localParticipant;it.debug("trying to publish local tracks"),Promise.all([U.setMicrophoneEnabled(!!l,typeof l!="boolean"?l:void 0),U.setCameraEnabled(!!u,typeof u!="boolean"?u:void 0),U.setScreenShareEnabled(!!d,typeof d!="boolean"?d:void 0)]).catch(T=>{it.warn(T),m?.(T)})},I=U=>{const T=_u.getFailure(U);y?.(T)},M=U=>{S?.(U)};return v.on(G.SignalConnected,_).on(G.MediaDevicesError,I).on(G.EncryptionError,M),()=>{v.off(G.SignalConnected,_).off(G.MediaDevicesError,I).off(G.EncryptionError,M)}},[v,l,u,d,m,S,y]),b.useEffect(()=>{if(v){if(k){v.simulateParticipants({participants:{count:k},publish:{audio:!0,useRealTracks:!0}});return}if(!t){it.debug("no token yet");return}if(!n){it.warn("no livekit url provided"),m?.(Error("no livekit url provided"));return}s?(it.debug("connecting"),v.connect(n,t,o).catch(_=>{it.warn(_),m?.(_)})):(it.debug("disconnecting because connect is false"),v.disconnect())}},[s,t,JSON.stringify(o),v,m,n,k]),b.useEffect(()=>{if(!v)return;const _=I=>{switch(I){case tt.Disconnected:p&&p();break;case tt.Connected:h&&h();break}};return v.on(G.ConnectionStateChanged,_),()=>{v.off(G.ConnectionStateChanged,_)}},[t,h,p,v]),b.useEffect(()=>{if(v)return()=>{it.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:x}}const MV=b.forwardRef(function(e,t){const{room:n,htmlProps:r}=OV(e);return b.createElement("div",{ref:t,...r},n&&b.createElement(b1.Provider,{value:n},b.createElement(xV.Provider,{value:e.featureFlags},e.children)))});function Er(e,t,n=!0){const[r,i]=b.useState(t);return b.useEffect(()=>{if(n&&i(t),typeof window>"u"||!e)return;const o=e.subscribe(i);return()=>o.unsubscribe()},[e,n]),r}function LV(e){const t=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=b.useState(t(e));function i(){r(t(e))}return b.useEffect(()=>{const o=window.matchMedia(e);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[e]),n}function AV(e={}){const t=gp(e.participant),{className:n,connectionQualityObserver:r}=b.useMemo(()=>XB(t),[t]),i=Er(r,Hr.Unknown);return{className:n,quality:i}}function i2(e){const t=bp(e),n=b.useMemo(()=>UB(t),[t]);return Er(n,t.state)}function DV(e){const t=vp(),n=i2(t);return{buttonProps:b.useMemo(()=>{const{className:r,disconnect:i}=YB(t);return To(e,{className:r,onClick:()=>i(e.stopTracks??!0),disabled:n===tt.Disconnected})},[t,e,n])}}function NV(e){if(e.publication instanceof xu){const t=e.publication.track;if(t){const{facingMode:n}=qj(t);return n}}return"undefined"}function Xw(e,t={}){var n,r;const i=typeof e=="string"?t.participant:e.participant,o=gp(i),s=typeof e=="string"?{participant:o,source:e}:e,[l,u]=b.useState(!!((n=s.publication)!=null&&n.isMuted||(r=o.getTrackPublication(s.source))!=null&&r.isMuted));return b.useEffect(()=>{const d=ZR(s).subscribe(u);return()=>d.unsubscribe()},[f1(s)]),l}function UV(e){const t=gp(e),n=b.useMemo(()=>GB(t),[t]);return Er(n,t.isSpeaking)}function FV(){const e=vp(),t=b.useMemo(()=>qB(e.localParticipant),[e]);return Er(t,e.localParticipant.permissions)}function jV({kind:e,room:t,track:n,requestPermissions:r,onError:i}){const o=yp(),s=b.useMemo(()=>FB(e,i,r),[e,r,i]),l=Er(s,[]),[u,d]=b.useState(""),{className:h,activeDeviceObservable:p,setActiveMediaDevice:m}=b.useMemo(()=>QB(e,t??o,n),[e,t,o,n]);return b.useEffect(()=>{const y=p.subscribe(S=>{it.info("setCurrentDeviceId",S),S&&d(S)});return()=>{y?.unsubscribe()}},[p]),{devices:l,className:h,activeDeviceId:u,setActiveMediaDevice:m}}function zV({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){const i=mp(e),o=b.useMemo(()=>{const{className:m}=tV();return To(r,{className:m,onClick:y=>{var S;if((S=r.onClick)==null||S.call(r,y),typeof t=="function"){const k=i.publication??i.participant.getTrackPublication(i.source);t({participant:i.participant,track:k})}}})},[r,t,i.publication,i.source,i.participant]),s=i.participant.getTrackPublication(H.Source.Microphone),l=b.useMemo(()=>({participant:i.participant,source:H.Source.Microphone,publication:s}),[s,i.participant]),u=Xw(i),d=Xw(l),h=UV(i.participant),p=NV(i);return{elementProps:{"data-lk-audio-muted":d,"data-lk-video-muted":u,"data-lk-speaking":n===!0?!1:h,"data-lk-local-participant":i.participant.isLocal,"data-lk-source":i.source,"data-lk-facing-mode":p,...o}}}function BV({room:e,props:t}){const n=bp(e),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=b.useMemo(()=>uV(),[]),s=b.useMemo(()=>i(n),[n,i]),{canPlayAudio:l}=Er(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:b.useMemo(()=>To(t,{className:r,onClick:()=>{o(n)},style:{display:l?"none":"block"}}),[t,r,l,o,n]),canPlayAudio:l}}function VV({room:e,props:t}){const n=bp(e),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=b.useMemo(()=>dV(),[]),s=b.useMemo(()=>i(n),[n,i]),{canPlayVideo:l}=Er(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:b.useMemo(()=>To(t,{className:r,onClick:()=>{o(n)},style:{display:l?"none":"block"}}),[t,r,l,o,n]),canPlayVideo:l}}function $V({props:e}){const{dispatch:t,state:n}=e2().widget,{className:r}=b.useMemo(()=>fV(),[]);return{mergedProps:b.useMemo(()=>To(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}function WV(e){var t,n;const r=mp(e),{className:i,mediaMutedObserver:o}=b.useMemo(()=>ZB(r),[f1(r)]);return{isMuted:Er(o,!!((t=r.publication)!=null&&t.isMuted||(n=r.participant.getTrackPublication(r.source))!=null&&n.isMuted)),className:i}}function HV({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:i,onDeviceError:o,...s}){var l;const u=yp(),d=(l=u?.localParticipant)==null?void 0:l.getTrackPublication(e),h=b.useRef(!1),{toggle:p,className:m,pendingObserver:y,enabledObserver:S}=b.useMemo(()=>u?KB(e,u,r,i,o):JB(),[u,e,JSON.stringify(r),i]),k=Er(y,!1),P=Er(S,n??!!(d!=null&&d.isEnabled));b.useEffect(()=>{t?.(P,h.current),h.current=!1},[P,t]),b.useEffect(()=>{n!==void 0&&(it.debug("forcing initial toggle state",e,n),p(n))},[]);const v=b.useMemo(()=>To(s,{className:m}),[s,m]),w=b.useCallback(x=>{var _;h.current=!0,p().catch(()=>h.current=!1),(_=s.onClick)==null||_.call(s,x)},[s,p]);return{toggle:p,enabled:P,pending:k,track:d,buttonProps:{...v,"aria-pressed":P,"data-lk-source":e,"data-lk-enabled":P,disabled:k,onClick:w}}}function GV(e=[H.Source.Camera,H.Source.Microphone,H.Source.ScreenShare,H.Source.ScreenShareAudio,H.Source.Unknown],t={}){const n=bp(t.room),[r,i]=b.useState([]),[o,s]=b.useState([]),l=b.useMemo(()=>e.map(u=>QR(u)?u.source:u),[JSON.stringify(e)]);return b.useEffect(()=>{const u=pV(n,l,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:d,participants:h})=>{it.debug("setting track bundles",d,h),i(d),s(h)});return()=>u.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),b.useMemo(()=>{if(YR(e)){const u=KV(e,o),d=Array.from(r);return o.forEach(h=>{u.has(h.identity)&&(u.get(h.identity)??[]).forEach(p=>{if(r.find(({participant:y,publication:S})=>h.identity===y.identity&&S.source===p))return;it.debug(`Add ${p} placeholder for participant ${h.identity}.`);const m={participant:h,source:p};d.push(m)})}),d}else return r},[r,o,e])}function qV(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}function KV(e,t){const n=new Map;if(YR(e)){const r=e.filter(i=>i.withPlaceholder).map(i=>i.source);t.forEach(i=>{const o=i.getTrackPublications().map(l=>{var u;return(u=l.track)==null?void 0:u.source}).filter(l=>l!==void 0),s=Array.from(qV(new Set(r),new Set(o)));s.length>0&&n.set(i.identity,s)})}return n}function JV(e){const t=vp(),n=i2(t),r=b.useMemo(()=>n===tt.Disconnected,[n]),i=b.useMemo(()=>lV(t,e),[t,e,r]),o=Er(i.isSendingObservable,!1),s=Er(i.messageObservable,[]);return{send:i.send,update:i.update,chatMessages:s,isSending:o}}function QV(e={}){const[t,n]=b.useState(CV(e.defaults,e.preventLoad??!1)),r=b.useCallback(u=>{n(d=>({...d,audioEnabled:u}))},[]),i=b.useCallback(u=>{n(d=>({...d,videoEnabled:u}))},[]),o=b.useCallback(u=>{n(d=>({...d,audioDeviceId:u}))},[]),s=b.useCallback(u=>{n(d=>({...d,videoDeviceId:u}))},[]),l=b.useCallback(u=>{n(d=>({...d,username:u}))},[]);return b.useEffect(()=>{SV(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:i,saveAudioInputDeviceId:o,saveVideoInputDeviceId:s,saveUsername:l}}const YV=e=>{const t=n=>{let r=1-Math.max(-100,Math.min(-10,n))*-1/100;return r=Math.sqrt(r),r};return e.map(n=>n===-1/0?0:t(n))},XV={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function ZV(e,t={}){var n;const r=e instanceof H?e:(n=e?.publication)==null?void 0:n.track,i={...XV,...t},[o,s]=b.useState(new Array(i.bands).fill(0));return b.useEffect(()=>{if(!r||!(r!=null&&r.mediaStream))return;const{analyser:l,cleanup:u}=YF(r,i.analyserOptions),d=l.frequencyBinCount,h=new Float32Array(d),p=setInterval(()=>{l.getFloatFrequencyData(h);let m=new Float32Array(h.length);for(let P=0;P<h.length;P++)m[P]=h[P];m=m.slice(t.loPass,t.hiPass);const y=YV(m),S=Math.ceil(y.length/i.bands),k=[];for(let P=0;P<i.bands;P++){const v=y.slice(P*S,(P+1)*S).reduce((w,x)=>w+=x,0);k.push(v/S)}s(k)},i.updateInterval);return()=>{u(),clearInterval(p)}},[r,r?.mediaStream,JSON.stringify(t)]),o}const o2=b.forwardRef(function(e,t){const{mergedProps:n}=$V({props:e});return b.createElement("button",{ref:t,...n},e.children)}),e$=b.forwardRef(function(e,t){const{buttonProps:n}=DV(e);return b.createElement("button",{ref:t,...n},e.children)}),t$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},b.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),b.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),n$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},b.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),r$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},b.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),i$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),o$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},b.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),s$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),a$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},b.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),b.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),l$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},b.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),b.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),c$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),u$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),d$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),f$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},b.createElement("g",{opacity:.25},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),h$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),p$=e=>b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},b.createElement("g",{fill:"currentColor"},b.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),b.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"})));function m$(e){return e!==void 0}function da(...e){return To(...e.filter(m$))}function k1(e,t,n){return b.Children.map(e,r=>b.isValidElement(r)&&b.Children.only(e)?(r.props.class&&(t??(t={}),t.class=r2(r.props.class,t.class),t.style={...r.props.style,...t.style}),b.cloneElement(r,{...t,key:n})):r)}function g$(e){var t,n;if(typeof window<"u"&&typeof process<"u"&&(((t=process==null?void 0:process.env)==null?void 0:t.NODE_ENV)==="dev"||((n=process==null?void 0:process.env)==null?void 0:n.NODE_ENV)==="development")){const r=document.querySelector(".lk-room-container");r&&!getComputedStyle(r).getPropertyValue("--lk-has-imported-styles")&&it.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}const zg=b.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:i,exactMatch:o,track:s,requestPermissions:l,onError:u,...d},h){const p=yp(),m=b.useCallback(_=>{p&&p.emit(G.MediaDevicesError,_),u?.(_)},[p,u]),{devices:y,activeDeviceId:S,setActiveMediaDevice:k,className:P}=jV({kind:e,room:p,track:s,requestPermissions:l,onError:m});b.useEffect(()=>{t!==void 0&&k(t)},[k]),b.useEffect(()=>{typeof r=="function"&&r(y)},[r,y]),b.useEffect(()=>{S&&S!==""&&n?.(S)},[S]);const v=async _=>{try{await k(_,{exact:o})}catch(I){if(I instanceof Error)i?.(I);else throw I}},w=b.useMemo(()=>da(d,{className:P},{className:"lk-list"}),[P,d]);function x(_,I,M){return _===I||M===0&&I==="default"}return b.createElement("ul",{ref:h,...w},y.map((_,I)=>b.createElement("li",{key:_.deviceId,id:_.deviceId,"data-lk-active":x(_.deviceId,S,I),"aria-selected":x(_.deviceId,S,I),role:"option"},b.createElement("button",{className:"lk-button",onClick:()=>v(_.deviceId)},_.label))))}),v$=b.forwardRef(function({label:e,...t},n){const r=vp(),{mergedProps:i,canPlayAudio:o}=BV({room:r,props:t}),{mergedProps:s,canPlayVideo:l}=VV({room:r,props:i}),{style:u,...d}=s;return u.display=o&&l?"none":"block",b.createElement("button",{ref:n,style:u,...d},e??`Start ${o?"Video":"Audio"}`)});function s2(e,t){switch(e){case H.Source.Microphone:return t?b.createElement(l$,null):b.createElement(a$,null);case H.Source.Camera:return t?b.createElement(n$,null):b.createElement(t$,null);case H.Source.ScreenShare:return t?b.createElement(p$,null):b.createElement(h$,null);default:return}}function y$(e){switch(e){case Hr.Excellent:return b.createElement(c$,null);case Hr.Good:return b.createElement(u$,null);case Hr.Poor:return b.createElement(d$,null);default:return b.createElement(f$,null)}}const Bg=b.forwardRef(function({showIcon:e,...t},n){const{buttonProps:r,enabled:i}=HV(t);return b.createElement("button",{ref:n,...r},(e??!0)&&s2(t.source,i),t.children)}),b$=b.forwardRef(function(e,t){const{className:n,quality:r}=AV(e),i=b.useMemo(()=>({...da(e,{className:n}),"data-lk-quality":r}),[r,e,n]);return b.createElement("div",{ref:t,...i},e.children??y$(r))}),k$=b.forwardRef(function({participant:e,...t},n){const r=gp(e),{className:i,infoObserver:o}=b.useMemo(()=>eV(r),[r]),{identity:s,name:l}=Er(o,{name:r.name,identity:r.identity,metadata:r.metadata}),u=b.useMemo(()=>da(t,{className:i,"data-lk-participant-name":l}),[t,i,l]);return b.createElement("span",{ref:n,...u},l!==""?l:s,t.children)}),S$=b.forwardRef(function({trackRef:e,show:t="always",...n},r){const{className:i,isMuted:o}=WV(e),s=t==="always"||t==="muted"&&o||t==="unmuted"&&!o,l=b.useMemo(()=>da(n,{className:i}),[i,n]);return s?b.createElement("div",{ref:r,...l,"data-lk-muted":o},n.children??s2(e.source,!o)):null});function C$(e,t={}){const[n,r]=b.useState(_0(e)),[i,o]=b.useState(n?.isMuted),[s,l]=b.useState(n?.isSubscribed),[u,d]=b.useState(n?.track),[h,p]=b.useState("landscape"),m=b.useRef(),{className:y,trackObserver:S}=b.useMemo(()=>NB(e),[e.participant.sid??e.participant.identity,e.source,hp(e)&&e.publication.trackSid]);return b.useEffect(()=>{const k=S.subscribe(P=>{it.debug("update track",P),r(P),o(P?.isMuted),l(P?.isSubscribed),d(P?.track)});return()=>k?.unsubscribe()},[S]),b.useEffect(()=>{var k,P;return u&&(m.current&&u.detach(m.current),(k=t.element)!=null&&k.current&&!(PB(e.participant)&&u?.kind==="audio")&&u.attach(t.element.current)),m.current=(P=t.element)==null?void 0:P.current,()=>{m.current&&u?.detach(m.current)}},[u,t.element]),b.useEffect(()=>{var k,P;if(typeof((k=n?.dimensions)==null?void 0:k.width)=="number"&&typeof((P=n?.dimensions)==null?void 0:P.height)=="number"){const v=n.dimensions.width>n.dimensions.height?"landscape":"portrait";p(v)}},[n]),{publication:n,isMuted:i,isSubscribed:s,track:u,elementProps:da(t.props,{className:y,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":h}})}}var w$=typeof Uc=="object"&&Uc&&Uc.Object===Object&&Uc,T$=typeof self=="object"&&self&&self.Object===Object&&self;w$||T$||Function("return this")();const E$=b.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,muted:r,...i},o){const s=mp(e),l=b.useRef(null);b.useImperativeHandle(o,()=>l.current);const{elementProps:u,isSubscribed:d,track:h,publication:p}=C$(s,{element:l,props:i});return b.useEffect(()=>{t?.(!!d)},[d,t]),b.useEffect(()=>{h===void 0||n===void 0||(h instanceof vl?h.setVolume(n):it.warn("Volume can only be set on remote audio tracks."))},[n,h]),b.useEffect(()=>{p===void 0||r===void 0||(p instanceof o1?p.setEnabled(!r):it.warn("Can only call setEnabled on remote track publications."))},[r,p,h]),b.createElement("audio",{ref:l,...u})});function _$({tracks:e,...t}){return b.createElement(b.Fragment,null,e.map(n=>b.createElement(v1.Provider,{value:n,key:f1(n)},k1(t.children))))}function P$({value:e,onPinChange:t,onWidgetChange:n,children:r}){const i=EV(e);return b.useEffect(()=>{it.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),b.useEffect(()=>{it.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),b.createElement(g1.Provider,{value:i},r)}const x$=e=>{const t=[];for(let n=0;n<e;n++)t.push([n,e-1-n]);return t},Zw=e=>[[Math.floor(e/2)],[-1]],R$=(e,t,n)=>{const[r,i]=b.useState(0),[o,s]=b.useState([[]]);b.useEffect(()=>{if(e==="thinking")s(Zw(t));else if(e==="connecting"||e==="initializing"){const u=[...x$(t)];s(u)}else s(e==="listening"?Zw(t):e===void 0?[new Array(t).fill(0).map((u,d)=>d)]:[[]]);i(0)},[e,t]);const l=b.useRef(null);return b.useEffect(()=>{let u=performance.now();const d=h=>{h-u>=n&&(i(p=>p+1),u=h),l.current=requestAnimationFrame(d)};return l.current=requestAnimationFrame(d),()=>{l.current!==null&&cancelAnimationFrame(l.current)}},[n,t,e,o.length]),o[r%o.length]},I$=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]),O$=(e,t)=>{if(e===void 0)return 1e3;let n=I$.get(e);if(n)switch(e){case"connecting":n/=t;break}return n},M$=b.forwardRef(function({state:e,options:t,barCount:n=15,trackRef:r,children:i,...o},s){const l=da(o,{className:"lk-audio-bar-visualizer"});let u=y1();r&&(u=r);const d=ZV(u,{bands:n,loPass:100,hiPass:200}),h=t?.minHeight??20,p=t?.maxHeight??100,m=R$(e,n,O$(e,n)??100);return b.createElement("div",{ref:s,...l,"data-lk-va-state":e},d.map((y,S)=>i?k1(i,{"data-lk-highlighted":m.includes(S),"data-lk-bar-index":S,class:"lk-audio-bar",style:{height:`${Math.min(p,Math.max(h,y*100+5))}%`}}):b.createElement("span",{key:S,"data-lk-highlighted":m.includes(S),"data-lk-bar-index":S,className:`lk-audio-bar ${m.includes(S)&&"lk-highlighted"}`,style:{height:`${Math.min(p,Math.max(h,y*100+5))}%`}})))}),L$=b.forwardRef(function({children:e,disableSpeakingIndicator:t,onParticipantClick:n,trackRef:r,...i},o){const s=mp(r),{elementProps:l}=zV({trackRef:s,htmlProps:i,disableSpeakingIndicator:t,onParticipantClick:n});return b.createElement("div",{ref:o,style:{position:"relative",minHeight:"160px"},...l},b.createElement(v1.Provider,{value:s},e??b.createElement(b.Fragment,null,hp(s)&&b.createElement(E$,{trackRef:s}),b.createElement(M$,{barCount:7,options:{minHeight:8}}),b.createElement("div",{className:"lk-participant-metadata"},b.createElement("div",{className:"lk-participant-metadata-item"},b.createElement(S$,{trackRef:s}),b.createElement(k$,null)),b.createElement(b$,{className:"lk-participant-metadata-item"})))))}),A$=b.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:r,...i},o){var s,l,u;const d=b.useMemo(()=>r?r(e.message):e.message,[e.message,r]),h=!!e.editTimestamp,p=new Date(e.timestamp),m=navigator?navigator.language:"en-US";return b.createElement("li",{ref:o,className:"lk-chat-entry",title:p.toLocaleTimeString(m,{timeStyle:"full"}),"data-lk-message-origin":(s=e.from)!=null&&s.isLocal?"local":"remote",...i},(!n||!t||h)&&b.createElement("span",{className:"lk-meta-data"},!t&&b.createElement("strong",{className:"lk-participant-name"},((l=e.from)==null?void 0:l.name)??((u=e.from)==null?void 0:u.identity)),(!n||h)&&b.createElement("span",{className:"lk-timestamp"},h&&"edited ",p.toLocaleTimeString(m,{timeStyle:"short"}))),b.createElement("span",{className:"lk-message-body"},d))});function D$({messageFormatter:e,messageDecoder:t,messageEncoder:n,channelTopic:r,...i}){const o=b.useRef(null),s=b.useRef(null),l=b.useMemo(()=>({messageDecoder:t,messageEncoder:n,channelTopic:r}),[t,n,r]),{send:u,chatMessages:d,isSending:h}=JV(l),p=t2(),m=b.useRef(0);async function y(S){S.preventDefault(),o.current&&o.current.value.trim()!==""&&u&&(await u(o.current.value),o.current.value="",o.current.focus())}return b.useEffect(()=>{var S;s&&((S=s.current)==null||S.scrollTo({top:s.current.scrollHeight}))},[s,d]),b.useEffect(()=>{var S,k,P,v,w;if(!p||d.length===0)return;if((S=p.widget.state)!=null&&S.showChat&&d.length>0&&m.current!==((k=d[d.length-1])==null?void 0:k.timestamp)){m.current=(P=d[d.length-1])==null?void 0:P.timestamp;return}const x=d.filter(I=>!m.current||I.timestamp>m.current).length,{widget:_}=p;x>0&&((v=_.state)==null?void 0:v.unreadMessages)!==x&&((w=_.dispatch)==null||w.call(_,{msg:"unread_msg",count:x}))},[d,p?.widget]),b.createElement("div",{...i,className:"lk-chat"},b.createElement("div",{className:"lk-chat-header"},"Messages",b.createElement(o2,{className:"lk-close-button"},b.createElement(r$,null))),b.createElement("ul",{className:"lk-list lk-chat-messages",ref:s},i.children?d.map((S,k)=>k1(i.children,{entry:S,key:S.id??k,messageFormatter:e})):d.map((S,k,P)=>{const v=k>=1&&P[k-1].from===S.from,w=k>=1&&S.timestamp-P[k-1].timestamp<6e4;return b.createElement(A$,{key:S.id??k,hideName:v,hideTimestamp:v===!1?!1:w,entry:S,messageFormatter:e})})),b.createElement("form",{className:"lk-chat-form",onSubmit:y},b.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:h,ref:o,type:"text",placeholder:"Enter a message...",onInput:S=>S.stopPropagation(),onKeyDown:S=>S.stopPropagation(),onKeyUp:S=>S.stopPropagation()}),b.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:h},"Send")))}function eT({kind:e,initialSelection:t,onActiveDeviceChange:n,tracks:r,requestPermissions:i=!1,...o}){const[s,l]=b.useState(!1),[u,d]=b.useState([]),[h,p]=b.useState(!0),[m,y]=b.useState(i),S=(w,x)=>{it.debug("handle device change"),l(!1),n?.(w,x)},k=b.useRef(null),P=b.useRef(null);b.useLayoutEffect(()=>{s&&y(!0)},[s]),b.useLayoutEffect(()=>{k.current&&P.current&&(u||h)&&xB(k.current,P.current).then(({x:w,y:x})=>{P.current&&Object.assign(P.current.style,{left:`${w}px`,top:`${x}px`})}),p(!1)},[k,P,u,h]);const v=b.useCallback(w=>{P.current&&w.target!==k.current&&s&&RB(P.current,w)&&l(!1)},[s,P,k]);return b.useEffect(()=>(document.addEventListener("click",v),window.addEventListener("resize",()=>p(!0)),()=>{document.removeEventListener("click",v),window.removeEventListener("resize",()=>p(!0))}),[v,p]),b.createElement(b.Fragment,null,b.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":s,...o,onClick:()=>l(!s),ref:k},o.children),!o.disabled&&b.createElement("div",{className:"lk-device-menu",ref:P,style:{visibility:s?"visible":"hidden"}},e?b.createElement(zg,{initialSelection:t,onActiveDeviceChange:w=>S(e,w),onDeviceListChange:d,kind:e,track:r?.[e],requestPermissions:m}):b.createElement(b.Fragment,null,b.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),b.createElement(zg,{kind:"audioinput",onActiveDeviceChange:w=>S("audioinput",w),onDeviceListChange:d,track:r?.audioinput,requestPermissions:m}),b.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),b.createElement(zg,{kind:"videoinput",onActiveDeviceChange:w=>S("videoinput",w),onDeviceListChange:d,track:r?.videoinput,requestPermissions:m}))))}function N$(){b.useEffect(()=>{g$()},[])}function U$({props:e}){const{dispatch:t,state:n}=e2().widget,r="lk-button lk-settings-toggle";return{mergedProps:b.useMemo(()=>To(e,{className:r,onClick:()=>{t&&t({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[e,r,t,n])}}const F$=b.forwardRef(function(e,t){const{mergedProps:n}=U$({props:e});return b.createElement("button",{ref:t,...n},e.children)});function j$({variation:e,controls:t,saveUserChoices:n=!0,onDeviceError:r,...i}){var o;const[s,l]=b.useState(!1),u=t2();b.useEffect(()=>{var B,j;((B=u?.widget.state)==null?void 0:B.showChat)!==void 0&&l((j=u?.widget.state)==null?void 0:j.showChat)},[(o=u?.widget.state)==null?void 0:o.showChat]);const d=LV(`(max-width: ${s?1e3:760}px)`)?"minimal":"verbose";e??(e=d);const h={leave:!0,...t},p=FV();p?(h.camera??(h.camera=p.canPublish),h.microphone??(h.microphone=p.canPublish),h.screenShare??(h.screenShare=p.canPublish),h.chat??(h.chat=p.canPublishData&&t?.chat)):(h.camera=!1,h.chat=!1,h.microphone=!1,h.screenShare=!1);const m=b.useMemo(()=>e==="minimal"||e==="verbose",[e]),y=b.useMemo(()=>e==="textOnly"||e==="verbose",[e]),S=LB(),[k,P]=b.useState(!1),v=b.useCallback(B=>{P(B)},[P]),w=da({className:"lk-control-bar"},i),{saveAudioInputEnabled:x,saveVideoInputEnabled:_,saveAudioInputDeviceId:I,saveVideoInputDeviceId:M}=QV({preventSave:!n}),U=b.useCallback((B,j)=>j?x(B):null,[x]),T=b.useCallback((B,j)=>j?_(B):null,[_]);return b.createElement("div",{...w},h.microphone&&b.createElement("div",{className:"lk-button-group"},b.createElement(Bg,{source:H.Source.Microphone,showIcon:m,onChange:U,onDeviceError:B=>r?.({source:H.Source.Microphone,error:B})},y&&"Microphone"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(eT,{kind:"audioinput",onActiveDeviceChange:(B,j)=>I(j??"")}))),h.camera&&b.createElement("div",{className:"lk-button-group"},b.createElement(Bg,{source:H.Source.Camera,showIcon:m,onChange:T,onDeviceError:B=>r?.({source:H.Source.Camera,error:B})},y&&"Camera"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(eT,{kind:"videoinput",onActiveDeviceChange:(B,j)=>M(j??"")}))),h.screenShare&&S&&b.createElement(Bg,{source:H.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:m,onChange:v,onDeviceError:B=>r?.({source:H.Source.ScreenShare,error:B})},y&&(k?"Stop screen share":"Share screen")),h.chat&&b.createElement(o2,null,m&&b.createElement(i$,null),y&&"Chat"),h.settings&&b.createElement(F$,null,m&&b.createElement(o$,null),y&&"Settings"),h.leave&&b.createElement(e$,null,m&&b.createElement(s$,null),y&&"Leave"),b.createElement(v$,null))}function z$({...e}){const[t,n]=b.useState({showChat:!1,unreadMessages:0}),r=GV([H.Source.Microphone]);return N$(),b.createElement(P$,{onWidgetChange:n},b.createElement("div",{className:"lk-audio-conference",...e},b.createElement("div",{className:"lk-audio-conference-stage"},b.createElement(_$,{tracks:r},b.createElement(L$,null))),b.createElement(j$,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),t.showChat&&b.createElement(D$,null)))}const B$="wss://playvoice-im1h8cr0.livekit.cloud";function V$(){const[e,t]=b.useState(null),[n,r]=b.useState(!0);return b.useEffect(()=>{async function i(){try{const s=await(await fetch("http://localhost:3333/chat-token")).json();t(s.token)}catch(o){console.error("Erro ao buscar token:",o)}finally{r(!1)}}i()},[]),n?de.jsx("p",{children:"Carregando..."}):e?de.jsx(MV,{token:e,serverUrl:B$,connect:!0,children:de.jsx(z$,{})}):de.jsx("p",{children:"Erro ao obter o token."})}var $$=Object.defineProperty,W$=(e,t)=>{for(var n in t)$$(e,n,{get:t[n],enumerable:!0})},a2=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},tT=(e,t,n)=>(a2(e,t,"read from private field"),n?n.call(e):t.get(e)),H$=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},G$=(e,t,n,r)=>(a2(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),q$={};W$(q$,{Channel:()=>l2,PluginListener:()=>c2,addPluginListener:()=>J$,convertFileSrc:()=>Q$,invoke:()=>kp,transformCallback:()=>Th});function K$(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function Th(e,t=!1){let n=K$(),r=`_${n}`;return Object.defineProperty(window,r,{value:i=>(t&&Reflect.deleteProperty(window,r),e?.(i)),writable:!1,configurable:!0}),n}var Fc,l2=class{constructor(){this.__TAURI_CHANNEL_MARKER__=!0,H$(this,Fc,()=>{}),this.id=Th(e=>{tT(this,Fc).call(this,e)})}set onmessage(e){G$(this,Fc,e)}get onmessage(){return tT(this,Fc)}toJSON(){return`__CHANNEL__:${this.id}`}};Fc=new WeakMap;var c2=class{constructor(e,t,n){this.plugin=e,this.event=t,this.channelId=n}async unregister(){return kp(`plugin:${this.plugin}|remove_listener`,{event:this.event,channelId:this.channelId})}};async function J$(e,t,n){let r=new l2;return r.onmessage=n,kp(`plugin:${e}|register_listener`,{event:t,handler:r}).then(()=>new c2(e,t,r.id))}async function kp(e,t={}){return new Promise((n,r)=>{let i=Th(s=>{n(s),Reflect.deleteProperty(window,`_${o}`)},!0),o=Th(s=>{r(s),Reflect.deleteProperty(window,`_${i}`)},!0);window.__TAURI_IPC__({cmd:e,callback:i,error:o,...t})})}function Q$(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}var Eh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Eh.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",p=1,m=2,y=4,S=1,k=2,P=1,v=2,w=4,x=8,_=16,I=32,M=64,U=128,T=256,B=512,j=30,$="...",K=800,ve=16,me=1,nt=2,Je=3,Ne=1/0,te=9007199254740991,se=17976931348623157e292,Ee=0/0,ke=4294967295,xe=ke-1,ze=ke>>>1,Et=[["ary",U],["bind",P],["bindKey",v],["curry",x],["curryRight",_],["flip",B],["partial",I],["partialRight",M],["rearg",T]],mt="[object Arguments]",lt="[object Array]",Xt="[object AsyncFunction]",gn="[object Boolean]",Zr="[object Date]",fn="[object DOMException]",xr="[object Error]",Te="[object Function]",Re="[object GeneratorFunction]",ye="[object Map]",Ie="[object Number]",St="[object Null]",_t="[object Object]",Ue="[object Promise]",Ze="[object Proxy]",gt="[object RegExp]",Zt="[object Set]",ar="[object String]",Rr="[object Symbol]",ut="[object Undefined]",vt="[object WeakMap]",vn="[object WeakSet]",jn="[object ArrayBuffer]",yn="[object DataView]",vs="[object Float32Array]",Ir="[object Float64Array]",lr="[object Int8Array]",fa="[object Int16Array]",Eo="[object Int32Array]",$l="[object Uint8Array]",Or="[object Uint8ClampedArray]",ha="[object Uint16Array]",pa="[object Uint32Array]",ju=/\b__p \+= '';/g,Sp=/\b(__p \+=) '' \+/g,zu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ys=/&(?:amp|lt|gt|quot|#39);/g,Wl=/[&<>"']/g,Hl=RegExp(ys.source),ma=RegExp(Wl.source),Gl=/<%-([\s\S]+?)%>/g,Cp=/<%([\s\S]+?)%>/g,ql=/<%=([\s\S]+?)%>/g,wp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bu=/^\w*$/,ga=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_o=/[\\^$.*+?()[\]{}|]/g,Vu=RegExp(_o.source),Kl=/^\s+/,Tp=/\s/,L=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,N=/\{\n\/\* \[wrapped with (.+)\] \*/,V=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,_e=/\\(\\)?/g,De=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ae=/\w*$/,Oe=/^[-+]0x[0-9a-f]+$/i,be=/^0b[01]+$/i,Se=/^\[object .+?Constructor\]$/,rt=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,He=/($^)/,en=/['\n\r\u2028\u2029\\]/g,Pt="\\ud800-\\udfff",bs="\\u0300-\\u036f",ei="\\ufe20-\\ufe2f",Po="\\u20d0-\\u20ff",ti=bs+ei+Po,ks="\\u2700-\\u27bf",Mr="a-z\\xdf-\\xf6\\xf8-\\xff",va="\\xac\\xb1\\xd7\\xf7",ya="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ba="\\u2000-\\u206f",Be=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xt="A-Z\\xc0-\\xd6\\xd8-\\xde",Rn="\\ufe0e\\ufe0f",Rt=va+ya+ba+Be,cr="['’]",$u="["+Pt+"]",Wu="["+Rt+"]",Hu="["+ti+"]",S1="\\d+",f2="["+ks+"]",C1="["+Mr+"]",w1="[^"+Pt+Rt+S1+ks+Mr+xt+"]",Ep="\\ud83c[\\udffb-\\udfff]",h2="(?:"+Hu+"|"+Ep+")",T1="[^"+Pt+"]",_p="(?:\\ud83c[\\udde6-\\uddff]){2}",Pp="[\\ud800-\\udbff][\\udc00-\\udfff]",ka="["+xt+"]",E1="\\u200d",_1="(?:"+C1+"|"+w1+")",p2="(?:"+ka+"|"+w1+")",P1="(?:"+cr+"(?:d|ll|m|re|s|t|ve))?",x1="(?:"+cr+"(?:D|LL|M|RE|S|T|VE))?",R1=h2+"?",I1="["+Rn+"]?",m2="(?:"+E1+"(?:"+[T1,_p,Pp].join("|")+")"+I1+R1+")*",g2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",v2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",O1=I1+R1+m2,y2="(?:"+[f2,_p,Pp].join("|")+")"+O1,b2="(?:"+[T1+Hu+"?",Hu,_p,Pp,$u].join("|")+")",k2=RegExp(cr,"g"),S2=RegExp(Hu,"g"),xp=RegExp(Ep+"(?="+Ep+")|"+b2+O1,"g"),C2=RegExp([ka+"?"+C1+"+"+P1+"(?="+[Wu,ka,"$"].join("|")+")",p2+"+"+x1+"(?="+[Wu,ka+_1,"$"].join("|")+")",ka+"?"+_1+"+"+P1,ka+"+"+x1,v2,g2,S1,y2].join("|"),"g"),w2=RegExp("["+E1+Pt+ti+Rn+"]"),T2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,E2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_2=-1,It={};It[vs]=It[Ir]=It[lr]=It[fa]=It[Eo]=It[$l]=It[Or]=It[ha]=It[pa]=!0,It[mt]=It[lt]=It[jn]=It[gn]=It[yn]=It[Zr]=It[xr]=It[Te]=It[ye]=It[Ie]=It[_t]=It[gt]=It[Zt]=It[ar]=It[vt]=!1;var Ct={};Ct[mt]=Ct[lt]=Ct[jn]=Ct[yn]=Ct[gn]=Ct[Zr]=Ct[vs]=Ct[Ir]=Ct[lr]=Ct[fa]=Ct[Eo]=Ct[ye]=Ct[Ie]=Ct[_t]=Ct[gt]=Ct[Zt]=Ct[ar]=Ct[Rr]=Ct[$l]=Ct[Or]=Ct[ha]=Ct[pa]=!0,Ct[xr]=Ct[Te]=Ct[vt]=!1;var P2={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},x2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},R2={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},I2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},O2=parseFloat,M2=parseInt,M1=typeof uc=="object"&&uc&&uc.Object===Object&&uc,L2=typeof self=="object"&&self&&self.Object===Object&&self,bn=M1||L2||Function("return this")(),Rp=t&&!t.nodeType&&t,Ss=Rp&&!0&&e&&!e.nodeType&&e,L1=Ss&&Ss.exports===Rp,Ip=L1&&M1.process,Lr=function(){try{var F=Ss&&Ss.require&&Ss.require("util").types;return F||Ip&&Ip.binding&&Ip.binding("util")}catch{}}(),A1=Lr&&Lr.isArrayBuffer,D1=Lr&&Lr.isDate,N1=Lr&&Lr.isMap,U1=Lr&&Lr.isRegExp,F1=Lr&&Lr.isSet,j1=Lr&&Lr.isTypedArray;function ur(F,J,W){switch(W.length){case 0:return F.call(J);case 1:return F.call(J,W[0]);case 2:return F.call(J,W[0],W[1]);case 3:return F.call(J,W[0],W[1],W[2])}return F.apply(J,W)}function A2(F,J,W,he){for(var Fe=-1,at=F==null?0:F.length;++Fe<at;){var on=F[Fe];J(he,on,W(on),F)}return he}function Ar(F,J){for(var W=-1,he=F==null?0:F.length;++W<he&&J(F[W],W,F)!==!1;);return F}function D2(F,J){for(var W=F==null?0:F.length;W--&&J(F[W],W,F)!==!1;);return F}function z1(F,J){for(var W=-1,he=F==null?0:F.length;++W<he;)if(!J(F[W],W,F))return!1;return!0}function xo(F,J){for(var W=-1,he=F==null?0:F.length,Fe=0,at=[];++W<he;){var on=F[W];J(on,W,F)&&(at[Fe++]=on)}return at}function Gu(F,J){var W=F==null?0:F.length;return!!W&&Sa(F,J,0)>-1}function Op(F,J,W){for(var he=-1,Fe=F==null?0:F.length;++he<Fe;)if(W(J,F[he]))return!0;return!1}function At(F,J){for(var W=-1,he=F==null?0:F.length,Fe=Array(he);++W<he;)Fe[W]=J(F[W],W,F);return Fe}function Ro(F,J){for(var W=-1,he=J.length,Fe=F.length;++W<he;)F[Fe+W]=J[W];return F}function Mp(F,J,W,he){var Fe=-1,at=F==null?0:F.length;for(he&&at&&(W=F[++Fe]);++Fe<at;)W=J(W,F[Fe],Fe,F);return W}function N2(F,J,W,he){var Fe=F==null?0:F.length;for(he&&Fe&&(W=F[--Fe]);Fe--;)W=J(W,F[Fe],Fe,F);return W}function Lp(F,J){for(var W=-1,he=F==null?0:F.length;++W<he;)if(J(F[W],W,F))return!0;return!1}var U2=Ap("length");function F2(F){return F.split("")}function j2(F){return F.match(ee)||[]}function B1(F,J,W){var he;return W(F,function(Fe,at,on){if(J(Fe,at,on))return he=at,!1}),he}function qu(F,J,W,he){for(var Fe=F.length,at=W+(he?1:-1);he?at--:++at<Fe;)if(J(F[at],at,F))return at;return-1}function Sa(F,J,W){return J===J?Y2(F,J,W):qu(F,V1,W)}function z2(F,J,W,he){for(var Fe=W-1,at=F.length;++Fe<at;)if(he(F[Fe],J))return Fe;return-1}function V1(F){return F!==F}function $1(F,J){var W=F==null?0:F.length;return W?Np(F,J)/W:Ee}function Ap(F){return function(J){return J==null?n:J[F]}}function Dp(F){return function(J){return F==null?n:F[J]}}function W1(F,J,W,he,Fe){return Fe(F,function(at,on,bt){W=he?(he=!1,at):J(W,at,on,bt)}),W}function B2(F,J){var W=F.length;for(F.sort(J);W--;)F[W]=F[W].value;return F}function Np(F,J){for(var W,he=-1,Fe=F.length;++he<Fe;){var at=J(F[he]);at!==n&&(W=W===n?at:W+at)}return W}function Up(F,J){for(var W=-1,he=Array(F);++W<F;)he[W]=J(W);return he}function V2(F,J){return At(J,function(W){return[W,F[W]]})}function H1(F){return F&&F.slice(0,J1(F)+1).replace(Kl,"")}function dr(F){return function(J){return F(J)}}function Fp(F,J){return At(J,function(W){return F[W]})}function Jl(F,J){return F.has(J)}function G1(F,J){for(var W=-1,he=F.length;++W<he&&Sa(J,F[W],0)>-1;);return W}function q1(F,J){for(var W=F.length;W--&&Sa(J,F[W],0)>-1;);return W}function $2(F,J){for(var W=F.length,he=0;W--;)F[W]===J&&++he;return he}var W2=Dp(P2),H2=Dp(x2);function G2(F){return"\\"+I2[F]}function q2(F,J){return F==null?n:F[J]}function Ca(F){return w2.test(F)}function K2(F){return T2.test(F)}function J2(F){for(var J,W=[];!(J=F.next()).done;)W.push(J.value);return W}function jp(F){var J=-1,W=Array(F.size);return F.forEach(function(he,Fe){W[++J]=[Fe,he]}),W}function K1(F,J){return function(W){return F(J(W))}}function Io(F,J){for(var W=-1,he=F.length,Fe=0,at=[];++W<he;){var on=F[W];(on===J||on===h)&&(F[W]=h,at[Fe++]=W)}return at}function Ku(F){var J=-1,W=Array(F.size);return F.forEach(function(he){W[++J]=he}),W}function Q2(F){var J=-1,W=Array(F.size);return F.forEach(function(he){W[++J]=[he,he]}),W}function Y2(F,J,W){for(var he=W-1,Fe=F.length;++he<Fe;)if(F[he]===J)return he;return-1}function X2(F,J,W){for(var he=W+1;he--;)if(F[he]===J)return he;return he}function wa(F){return Ca(F)?eI(F):U2(F)}function ni(F){return Ca(F)?tI(F):F2(F)}function J1(F){for(var J=F.length;J--&&Tp.test(F.charAt(J)););return J}var Z2=Dp(R2);function eI(F){for(var J=xp.lastIndex=0;xp.test(F);)++J;return J}function tI(F){return F.match(xp)||[]}function nI(F){return F.match(C2)||[]}var rI=function F(J){J=J==null?bn:Ta.defaults(bn.Object(),J,Ta.pick(bn,E2));var W=J.Array,he=J.Date,Fe=J.Error,at=J.Function,on=J.Math,bt=J.Object,zp=J.RegExp,iI=J.String,Dr=J.TypeError,Ju=W.prototype,oI=at.prototype,Ea=bt.prototype,Qu=J["__core-js_shared__"],Yu=oI.toString,dt=Ea.hasOwnProperty,sI=0,Q1=function(){var a=/[^.]+$/.exec(Qu&&Qu.keys&&Qu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Xu=Ea.toString,aI=Yu.call(bt),lI=bn._,cI=zp("^"+Yu.call(dt).replace(_o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zu=L1?J.Buffer:n,Oo=J.Symbol,ed=J.Uint8Array,Y1=Zu?Zu.allocUnsafe:n,td=K1(bt.getPrototypeOf,bt),X1=bt.create,Z1=Ea.propertyIsEnumerable,nd=Ju.splice,eb=Oo?Oo.isConcatSpreadable:n,Ql=Oo?Oo.iterator:n,Cs=Oo?Oo.toStringTag:n,rd=function(){try{var a=Ps(bt,"defineProperty");return a({},"",{}),a}catch{}}(),uI=J.clearTimeout!==bn.clearTimeout&&J.clearTimeout,dI=he&&he.now!==bn.Date.now&&he.now,fI=J.setTimeout!==bn.setTimeout&&J.setTimeout,id=on.ceil,od=on.floor,Bp=bt.getOwnPropertySymbols,hI=Zu?Zu.isBuffer:n,tb=J.isFinite,pI=Ju.join,mI=K1(bt.keys,bt),sn=on.max,In=on.min,gI=he.now,vI=J.parseInt,nb=on.random,yI=Ju.reverse,Vp=Ps(J,"DataView"),Yl=Ps(J,"Map"),$p=Ps(J,"Promise"),_a=Ps(J,"Set"),Xl=Ps(J,"WeakMap"),Zl=Ps(bt,"create"),sd=Xl&&new Xl,Pa={},bI=xs(Vp),kI=xs(Yl),SI=xs($p),CI=xs(_a),wI=xs(Xl),ad=Oo?Oo.prototype:n,ec=ad?ad.valueOf:n,rb=ad?ad.toString:n;function E(a){if($t(a)&&!je(a)&&!(a instanceof Qe)){if(a instanceof Nr)return a;if(dt.call(a,"__wrapped__"))return ik(a)}return new Nr(a)}var xa=function(){function a(){}return function(c){if(!Ft(c))return{};if(X1)return X1(c);a.prototype=c;var f=new a;return a.prototype=n,f}}();function ld(){}function Nr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}E.templateSettings={escape:Gl,evaluate:Cp,interpolate:ql,variable:"",imports:{_:E}},E.prototype=ld.prototype,E.prototype.constructor=E,Nr.prototype=xa(ld.prototype),Nr.prototype.constructor=Nr;function Qe(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ke,this.__views__=[]}function TI(){var a=new Qe(this.__wrapped__);return a.__actions__=Jn(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Jn(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Jn(this.__views__),a}function EI(){if(this.__filtered__){var a=new Qe(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function _I(){var a=this.__wrapped__.value(),c=this.__dir__,f=je(a),g=c<0,C=f?a.length:0,R=F5(0,C,this.__views__),O=R.start,A=R.end,z=A-O,Y=g?A:O-1,X=this.__iteratees__,ne=X.length,ce=0,Ce=In(z,this.__takeCount__);if(!f||!g&&C==z&&Ce==z)return Pb(a,this.__actions__);var Le=[];e:for(;z--&&ce<Ce;){Y+=c;for(var $e=-1,Ae=a[Y];++$e<ne;){var qe=X[$e],et=qe.iteratee,pr=qe.type,Vn=et(Ae);if(pr==nt)Ae=Vn;else if(!Vn){if(pr==me)continue e;break e}}Le[ce++]=Ae}return Le}Qe.prototype=xa(ld.prototype),Qe.prototype.constructor=Qe;function ws(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var g=a[c];this.set(g[0],g[1])}}function PI(){this.__data__=Zl?Zl(null):{},this.size=0}function xI(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function RI(a){var c=this.__data__;if(Zl){var f=c[a];return f===u?n:f}return dt.call(c,a)?c[a]:n}function II(a){var c=this.__data__;return Zl?c[a]!==n:dt.call(c,a)}function OI(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Zl&&c===n?u:c,this}ws.prototype.clear=PI,ws.prototype.delete=xI,ws.prototype.get=RI,ws.prototype.has=II,ws.prototype.set=OI;function Wi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var g=a[c];this.set(g[0],g[1])}}function MI(){this.__data__=[],this.size=0}function LI(a){var c=this.__data__,f=cd(c,a);if(f<0)return!1;var g=c.length-1;return f==g?c.pop():nd.call(c,f,1),--this.size,!0}function AI(a){var c=this.__data__,f=cd(c,a);return f<0?n:c[f][1]}function DI(a){return cd(this.__data__,a)>-1}function NI(a,c){var f=this.__data__,g=cd(f,a);return g<0?(++this.size,f.push([a,c])):f[g][1]=c,this}Wi.prototype.clear=MI,Wi.prototype.delete=LI,Wi.prototype.get=AI,Wi.prototype.has=DI,Wi.prototype.set=NI;function Hi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var g=a[c];this.set(g[0],g[1])}}function UI(){this.size=0,this.__data__={hash:new ws,map:new(Yl||Wi),string:new ws}}function FI(a){var c=Sd(this,a).delete(a);return this.size-=c?1:0,c}function jI(a){return Sd(this,a).get(a)}function zI(a){return Sd(this,a).has(a)}function BI(a,c){var f=Sd(this,a),g=f.size;return f.set(a,c),this.size+=f.size==g?0:1,this}Hi.prototype.clear=UI,Hi.prototype.delete=FI,Hi.prototype.get=jI,Hi.prototype.has=zI,Hi.prototype.set=BI;function Ts(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new Hi;++c<f;)this.add(a[c])}function VI(a){return this.__data__.set(a,u),this}function $I(a){return this.__data__.has(a)}Ts.prototype.add=Ts.prototype.push=VI,Ts.prototype.has=$I;function ri(a){var c=this.__data__=new Wi(a);this.size=c.size}function WI(){this.__data__=new Wi,this.size=0}function HI(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function GI(a){return this.__data__.get(a)}function qI(a){return this.__data__.has(a)}function KI(a,c){var f=this.__data__;if(f instanceof Wi){var g=f.__data__;if(!Yl||g.length<i-1)return g.push([a,c]),this.size=++f.size,this;f=this.__data__=new Hi(g)}return f.set(a,c),this.size=f.size,this}ri.prototype.clear=WI,ri.prototype.delete=HI,ri.prototype.get=GI,ri.prototype.has=qI,ri.prototype.set=KI;function ib(a,c){var f=je(a),g=!f&&Rs(a),C=!f&&!g&&No(a),R=!f&&!g&&!C&&Ma(a),O=f||g||C||R,A=O?Up(a.length,iI):[],z=A.length;for(var Y in a)(c||dt.call(a,Y))&&!(O&&(Y=="length"||C&&(Y=="offset"||Y=="parent")||R&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||Ji(Y,z)))&&A.push(Y);return A}function ob(a){var c=a.length;return c?a[em(0,c-1)]:n}function JI(a,c){return Cd(Jn(a),Es(c,0,a.length))}function QI(a){return Cd(Jn(a))}function Wp(a,c,f){(f!==n&&!ii(a[c],f)||f===n&&!(c in a))&&Gi(a,c,f)}function tc(a,c,f){var g=a[c];(!(dt.call(a,c)&&ii(g,f))||f===n&&!(c in a))&&Gi(a,c,f)}function cd(a,c){for(var f=a.length;f--;)if(ii(a[f][0],c))return f;return-1}function YI(a,c,f,g){return Mo(a,function(C,R,O){c(g,C,f(C),O)}),g}function sb(a,c){return a&&Ei(c,hn(c),a)}function XI(a,c){return a&&Ei(c,Yn(c),a)}function Gi(a,c,f){c=="__proto__"&&rd?rd(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function Hp(a,c){for(var f=-1,g=c.length,C=W(g),R=a==null;++f<g;)C[f]=R?n:Em(a,c[f]);return C}function Es(a,c,f){return a===a&&(f!==n&&(a=a<=f?a:f),c!==n&&(a=a>=c?a:c)),a}function Ur(a,c,f,g,C,R){var O,A=c&p,z=c&m,Y=c&y;if(f&&(O=C?f(a,g,C,R):f(a)),O!==n)return O;if(!Ft(a))return a;var X=je(a);if(X){if(O=z5(a),!A)return Jn(a,O)}else{var ne=On(a),ce=ne==Te||ne==Re;if(No(a))return Ib(a,A);if(ne==_t||ne==mt||ce&&!C){if(O=z||ce?{}:Jb(a),!A)return z?R5(a,XI(O,a)):x5(a,sb(O,a))}else{if(!Ct[ne])return C?a:{};O=B5(a,ne,A)}}R||(R=new ri);var Ce=R.get(a);if(Ce)return Ce;R.set(a,O),Tk(a)?a.forEach(function(Ae){O.add(Ur(Ae,c,f,Ae,a,R))}):Ck(a)&&a.forEach(function(Ae,qe){O.set(qe,Ur(Ae,c,f,qe,a,R))});var Le=Y?z?dm:um:z?Yn:hn,$e=X?n:Le(a);return Ar($e||a,function(Ae,qe){$e&&(qe=Ae,Ae=a[qe]),tc(O,qe,Ur(Ae,c,f,qe,a,R))}),O}function ZI(a){var c=hn(a);return function(f){return ab(f,a,c)}}function ab(a,c,f){var g=f.length;if(a==null)return!g;for(a=bt(a);g--;){var C=f[g],R=c[C],O=a[C];if(O===n&&!(C in a)||!R(O))return!1}return!0}function lb(a,c,f){if(typeof a!="function")throw new Dr(s);return lc(function(){a.apply(n,f)},c)}function nc(a,c,f,g){var C=-1,R=Gu,O=!0,A=a.length,z=[],Y=c.length;if(!A)return z;f&&(c=At(c,dr(f))),g?(R=Op,O=!1):c.length>=i&&(R=Jl,O=!1,c=new Ts(c));e:for(;++C<A;){var X=a[C],ne=f==null?X:f(X);if(X=g||X!==0?X:0,O&&ne===ne){for(var ce=Y;ce--;)if(c[ce]===ne)continue e;z.push(X)}else R(c,ne,g)||z.push(X)}return z}var Mo=Db(Ti),cb=Db(qp,!0);function e5(a,c){var f=!0;return Mo(a,function(g,C,R){return f=!!c(g,C,R),f}),f}function ud(a,c,f){for(var g=-1,C=a.length;++g<C;){var R=a[g],O=c(R);if(O!=null&&(A===n?O===O&&!hr(O):f(O,A)))var A=O,z=R}return z}function t5(a,c,f,g){var C=a.length;for(f=Ve(f),f<0&&(f=-f>C?0:C+f),g=g===n||g>C?C:Ve(g),g<0&&(g+=C),g=f>g?0:_k(g);f<g;)a[f++]=c;return a}function ub(a,c){var f=[];return Mo(a,function(g,C,R){c(g,C,R)&&f.push(g)}),f}function kn(a,c,f,g,C){var R=-1,O=a.length;for(f||(f=$5),C||(C=[]);++R<O;){var A=a[R];c>0&&f(A)?c>1?kn(A,c-1,f,g,C):Ro(C,A):g||(C[C.length]=A)}return C}var Gp=Nb(),db=Nb(!0);function Ti(a,c){return a&&Gp(a,c,hn)}function qp(a,c){return a&&db(a,c,hn)}function dd(a,c){return xo(c,function(f){return Qi(a[f])})}function _s(a,c){c=Ao(c,a);for(var f=0,g=c.length;a!=null&&f<g;)a=a[_i(c[f++])];return f&&f==g?a:n}function fb(a,c,f){var g=c(a);return je(a)?g:Ro(g,f(a))}function zn(a){return a==null?a===n?ut:St:Cs&&Cs in bt(a)?U5(a):Q5(a)}function Kp(a,c){return a>c}function n5(a,c){return a!=null&&dt.call(a,c)}function r5(a,c){return a!=null&&c in bt(a)}function i5(a,c,f){return a>=In(c,f)&&a<sn(c,f)}function Jp(a,c,f){for(var g=f?Op:Gu,C=a[0].length,R=a.length,O=R,A=W(R),z=1/0,Y=[];O--;){var X=a[O];O&&c&&(X=At(X,dr(c))),z=In(X.length,z),A[O]=!f&&(c||C>=120&&X.length>=120)?new Ts(O&&X):n}X=a[0];var ne=-1,ce=A[0];e:for(;++ne<C&&Y.length<z;){var Ce=X[ne],Le=c?c(Ce):Ce;if(Ce=f||Ce!==0?Ce:0,!(ce?Jl(ce,Le):g(Y,Le,f))){for(O=R;--O;){var $e=A[O];if(!($e?Jl($e,Le):g(a[O],Le,f)))continue e}ce&&ce.push(Le),Y.push(Ce)}}return Y}function o5(a,c,f,g){return Ti(a,function(C,R,O){c(g,f(C),R,O)}),g}function rc(a,c,f){c=Ao(c,a),a=Zb(a,c);var g=a==null?a:a[_i(jr(c))];return g==null?n:ur(g,a,f)}function hb(a){return $t(a)&&zn(a)==mt}function s5(a){return $t(a)&&zn(a)==jn}function a5(a){return $t(a)&&zn(a)==Zr}function ic(a,c,f,g,C){return a===c?!0:a==null||c==null||!$t(a)&&!$t(c)?a!==a&&c!==c:l5(a,c,f,g,ic,C)}function l5(a,c,f,g,C,R){var O=je(a),A=je(c),z=O?lt:On(a),Y=A?lt:On(c);z=z==mt?_t:z,Y=Y==mt?_t:Y;var X=z==_t,ne=Y==_t,ce=z==Y;if(ce&&No(a)){if(!No(c))return!1;O=!0,X=!1}if(ce&&!X)return R||(R=new ri),O||Ma(a)?Gb(a,c,f,g,C,R):D5(a,c,z,f,g,C,R);if(!(f&S)){var Ce=X&&dt.call(a,"__wrapped__"),Le=ne&&dt.call(c,"__wrapped__");if(Ce||Le){var $e=Ce?a.value():a,Ae=Le?c.value():c;return R||(R=new ri),C($e,Ae,f,g,R)}}return ce?(R||(R=new ri),N5(a,c,f,g,C,R)):!1}function c5(a){return $t(a)&&On(a)==ye}function Qp(a,c,f,g){var C=f.length,R=C,O=!g;if(a==null)return!R;for(a=bt(a);C--;){var A=f[C];if(O&&A[2]?A[1]!==a[A[0]]:!(A[0]in a))return!1}for(;++C<R;){A=f[C];var z=A[0],Y=a[z],X=A[1];if(O&&A[2]){if(Y===n&&!(z in a))return!1}else{var ne=new ri;if(g)var ce=g(Y,X,z,a,c,ne);if(!(ce===n?ic(X,Y,S|k,g,ne):ce))return!1}}return!0}function pb(a){if(!Ft(a)||H5(a))return!1;var c=Qi(a)?cI:Se;return c.test(xs(a))}function u5(a){return $t(a)&&zn(a)==gt}function d5(a){return $t(a)&&On(a)==Zt}function f5(a){return $t(a)&&xd(a.length)&&!!It[zn(a)]}function mb(a){return typeof a=="function"?a:a==null?Xn:typeof a=="object"?je(a)?yb(a[0],a[1]):vb(a):Uk(a)}function Yp(a){if(!ac(a))return mI(a);var c=[];for(var f in bt(a))dt.call(a,f)&&f!="constructor"&&c.push(f);return c}function h5(a){if(!Ft(a))return J5(a);var c=ac(a),f=[];for(var g in a)g=="constructor"&&(c||!dt.call(a,g))||f.push(g);return f}function Xp(a,c){return a<c}function gb(a,c){var f=-1,g=Qn(a)?W(a.length):[];return Mo(a,function(C,R,O){g[++f]=c(C,R,O)}),g}function vb(a){var c=hm(a);return c.length==1&&c[0][2]?Yb(c[0][0],c[0][1]):function(f){return f===a||Qp(f,a,c)}}function yb(a,c){return mm(a)&&Qb(c)?Yb(_i(a),c):function(f){var g=Em(f,a);return g===n&&g===c?_m(f,a):ic(c,g,S|k)}}function fd(a,c,f,g,C){a!==c&&Gp(c,function(R,O){if(C||(C=new ri),Ft(R))p5(a,c,O,f,fd,g,C);else{var A=g?g(vm(a,O),R,O+"",a,c,C):n;A===n&&(A=R),Wp(a,O,A)}},Yn)}function p5(a,c,f,g,C,R,O){var A=vm(a,f),z=vm(c,f),Y=O.get(z);if(Y){Wp(a,f,Y);return}var X=R?R(A,z,f+"",a,c,O):n,ne=X===n;if(ne){var ce=je(z),Ce=!ce&&No(z),Le=!ce&&!Ce&&Ma(z);X=z,ce||Ce||Le?je(A)?X=A:qt(A)?X=Jn(A):Ce?(ne=!1,X=Ib(z,!0)):Le?(ne=!1,X=Ob(z,!0)):X=[]:cc(z)||Rs(z)?(X=A,Rs(A)?X=Pk(A):(!Ft(A)||Qi(A))&&(X=Jb(z))):ne=!1}ne&&(O.set(z,X),C(X,z,g,R,O),O.delete(z)),Wp(a,f,X)}function bb(a,c){var f=a.length;if(f)return c+=c<0?f:0,Ji(c,f)?a[c]:n}function kb(a,c,f){c.length?c=At(c,function(R){return je(R)?function(O){return _s(O,R.length===1?R[0]:R)}:R}):c=[Xn];var g=-1;c=At(c,dr(Me()));var C=gb(a,function(R,O,A){var z=At(c,function(Y){return Y(R)});return{criteria:z,index:++g,value:R}});return B2(C,function(R,O){return P5(R,O,f)})}function m5(a,c){return Sb(a,c,function(f,g){return _m(a,g)})}function Sb(a,c,f){for(var g=-1,C=c.length,R={};++g<C;){var O=c[g],A=_s(a,O);f(A,O)&&oc(R,Ao(O,a),A)}return R}function g5(a){return function(c){return _s(c,a)}}function Zp(a,c,f,g){var C=g?z2:Sa,R=-1,O=c.length,A=a;for(a===c&&(c=Jn(c)),f&&(A=At(a,dr(f)));++R<O;)for(var z=0,Y=c[R],X=f?f(Y):Y;(z=C(A,X,z,g))>-1;)A!==a&&nd.call(A,z,1),nd.call(a,z,1);return a}function Cb(a,c){for(var f=a?c.length:0,g=f-1;f--;){var C=c[f];if(f==g||C!==R){var R=C;Ji(C)?nd.call(a,C,1):rm(a,C)}}return a}function em(a,c){return a+od(nb()*(c-a+1))}function v5(a,c,f,g){for(var C=-1,R=sn(id((c-a)/(f||1)),0),O=W(R);R--;)O[g?R:++C]=a,a+=f;return O}function tm(a,c){var f="";if(!a||c<1||c>te)return f;do c%2&&(f+=a),c=od(c/2),c&&(a+=a);while(c);return f}function We(a,c){return ym(Xb(a,c,Xn),a+"")}function y5(a){return ob(La(a))}function b5(a,c){var f=La(a);return Cd(f,Es(c,0,f.length))}function oc(a,c,f,g){if(!Ft(a))return a;c=Ao(c,a);for(var C=-1,R=c.length,O=R-1,A=a;A!=null&&++C<R;){var z=_i(c[C]),Y=f;if(z==="__proto__"||z==="constructor"||z==="prototype")return a;if(C!=O){var X=A[z];Y=g?g(X,z,A):n,Y===n&&(Y=Ft(X)?X:Ji(c[C+1])?[]:{})}tc(A,z,Y),A=A[z]}return a}var wb=sd?function(a,c){return sd.set(a,c),a}:Xn,k5=rd?function(a,c){return rd(a,"toString",{configurable:!0,enumerable:!1,value:xm(c),writable:!0})}:Xn;function S5(a){return Cd(La(a))}function Fr(a,c,f){var g=-1,C=a.length;c<0&&(c=-c>C?0:C+c),f=f>C?C:f,f<0&&(f+=C),C=c>f?0:f-c>>>0,c>>>=0;for(var R=W(C);++g<C;)R[g]=a[g+c];return R}function C5(a,c){var f;return Mo(a,function(g,C,R){return f=c(g,C,R),!f}),!!f}function hd(a,c,f){var g=0,C=a==null?g:a.length;if(typeof c=="number"&&c===c&&C<=ze){for(;g<C;){var R=g+C>>>1,O=a[R];O!==null&&!hr(O)&&(f?O<=c:O<c)?g=R+1:C=R}return C}return nm(a,c,Xn,f)}function nm(a,c,f,g){var C=0,R=a==null?0:a.length;if(R===0)return 0;c=f(c);for(var O=c!==c,A=c===null,z=hr(c),Y=c===n;C<R;){var X=od((C+R)/2),ne=f(a[X]),ce=ne!==n,Ce=ne===null,Le=ne===ne,$e=hr(ne);if(O)var Ae=g||Le;else Y?Ae=Le&&(g||ce):A?Ae=Le&&ce&&(g||!Ce):z?Ae=Le&&ce&&!Ce&&(g||!$e):Ce||$e?Ae=!1:Ae=g?ne<=c:ne<c;Ae?C=X+1:R=X}return In(R,xe)}function Tb(a,c){for(var f=-1,g=a.length,C=0,R=[];++f<g;){var O=a[f],A=c?c(O):O;if(!f||!ii(A,z)){var z=A;R[C++]=O===0?0:O}}return R}function Eb(a){return typeof a=="number"?a:hr(a)?Ee:+a}function fr(a){if(typeof a=="string")return a;if(je(a))return At(a,fr)+"";if(hr(a))return rb?rb.call(a):"";var c=a+"";return c=="0"&&1/a==-Ne?"-0":c}function Lo(a,c,f){var g=-1,C=Gu,R=a.length,O=!0,A=[],z=A;if(f)O=!1,C=Op;else if(R>=i){var Y=c?null:L5(a);if(Y)return Ku(Y);O=!1,C=Jl,z=new Ts}else z=c?[]:A;e:for(;++g<R;){var X=a[g],ne=c?c(X):X;if(X=f||X!==0?X:0,O&&ne===ne){for(var ce=z.length;ce--;)if(z[ce]===ne)continue e;c&&z.push(ne),A.push(X)}else C(z,ne,f)||(z!==A&&z.push(ne),A.push(X))}return A}function rm(a,c){return c=Ao(c,a),a=Zb(a,c),a==null||delete a[_i(jr(c))]}function _b(a,c,f,g){return oc(a,c,f(_s(a,c)),g)}function pd(a,c,f,g){for(var C=a.length,R=g?C:-1;(g?R--:++R<C)&&c(a[R],R,a););return f?Fr(a,g?0:R,g?R+1:C):Fr(a,g?R+1:0,g?C:R)}function Pb(a,c){var f=a;return f instanceof Qe&&(f=f.value()),Mp(c,function(g,C){return C.func.apply(C.thisArg,Ro([g],C.args))},f)}function im(a,c,f){var g=a.length;if(g<2)return g?Lo(a[0]):[];for(var C=-1,R=W(g);++C<g;)for(var O=a[C],A=-1;++A<g;)A!=C&&(R[C]=nc(R[C]||O,a[A],c,f));return Lo(kn(R,1),c,f)}function xb(a,c,f){for(var g=-1,C=a.length,R=c.length,O={};++g<C;){var A=g<R?c[g]:n;f(O,a[g],A)}return O}function om(a){return qt(a)?a:[]}function sm(a){return typeof a=="function"?a:Xn}function Ao(a,c){return je(a)?a:mm(a,c)?[a]:rk(ct(a))}var w5=We;function Do(a,c,f){var g=a.length;return f=f===n?g:f,!c&&f>=g?a:Fr(a,c,f)}var Rb=uI||function(a){return bn.clearTimeout(a)};function Ib(a,c){if(c)return a.slice();var f=a.length,g=Y1?Y1(f):new a.constructor(f);return a.copy(g),g}function am(a){var c=new a.constructor(a.byteLength);return new ed(c).set(new ed(a)),c}function T5(a,c){var f=c?am(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function E5(a){var c=new a.constructor(a.source,ae.exec(a));return c.lastIndex=a.lastIndex,c}function _5(a){return ec?bt(ec.call(a)):{}}function Ob(a,c){var f=c?am(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function Mb(a,c){if(a!==c){var f=a!==n,g=a===null,C=a===a,R=hr(a),O=c!==n,A=c===null,z=c===c,Y=hr(c);if(!A&&!Y&&!R&&a>c||R&&O&&z&&!A&&!Y||g&&O&&z||!f&&z||!C)return 1;if(!g&&!R&&!Y&&a<c||Y&&f&&C&&!g&&!R||A&&f&&C||!O&&C||!z)return-1}return 0}function P5(a,c,f){for(var g=-1,C=a.criteria,R=c.criteria,O=C.length,A=f.length;++g<O;){var z=Mb(C[g],R[g]);if(z){if(g>=A)return z;var Y=f[g];return z*(Y=="desc"?-1:1)}}return a.index-c.index}function Lb(a,c,f,g){for(var C=-1,R=a.length,O=f.length,A=-1,z=c.length,Y=sn(R-O,0),X=W(z+Y),ne=!g;++A<z;)X[A]=c[A];for(;++C<O;)(ne||C<R)&&(X[f[C]]=a[C]);for(;Y--;)X[A++]=a[C++];return X}function Ab(a,c,f,g){for(var C=-1,R=a.length,O=-1,A=f.length,z=-1,Y=c.length,X=sn(R-A,0),ne=W(X+Y),ce=!g;++C<X;)ne[C]=a[C];for(var Ce=C;++z<Y;)ne[Ce+z]=c[z];for(;++O<A;)(ce||C<R)&&(ne[Ce+f[O]]=a[C++]);return ne}function Jn(a,c){var f=-1,g=a.length;for(c||(c=W(g));++f<g;)c[f]=a[f];return c}function Ei(a,c,f,g){var C=!f;f||(f={});for(var R=-1,O=c.length;++R<O;){var A=c[R],z=g?g(f[A],a[A],A,f,a):n;z===n&&(z=a[A]),C?Gi(f,A,z):tc(f,A,z)}return f}function x5(a,c){return Ei(a,pm(a),c)}function R5(a,c){return Ei(a,qb(a),c)}function md(a,c){return function(f,g){var C=je(f)?A2:YI,R=c?c():{};return C(f,a,Me(g,2),R)}}function Ra(a){return We(function(c,f){var g=-1,C=f.length,R=C>1?f[C-1]:n,O=C>2?f[2]:n;for(R=a.length>3&&typeof R=="function"?(C--,R):n,O&&Bn(f[0],f[1],O)&&(R=C<3?n:R,C=1),c=bt(c);++g<C;){var A=f[g];A&&a(c,A,g,R)}return c})}function Db(a,c){return function(f,g){if(f==null)return f;if(!Qn(f))return a(f,g);for(var C=f.length,R=c?C:-1,O=bt(f);(c?R--:++R<C)&&g(O[R],R,O)!==!1;);return f}}function Nb(a){return function(c,f,g){for(var C=-1,R=bt(c),O=g(c),A=O.length;A--;){var z=O[a?A:++C];if(f(R[z],z,R)===!1)break}return c}}function I5(a,c,f){var g=c&P,C=sc(a);function R(){var O=this&&this!==bn&&this instanceof R?C:a;return O.apply(g?f:this,arguments)}return R}function Ub(a){return function(c){c=ct(c);var f=Ca(c)?ni(c):n,g=f?f[0]:c.charAt(0),C=f?Do(f,1).join(""):c.slice(1);return g[a]()+C}}function Ia(a){return function(c){return Mp(Dk(Ak(c).replace(k2,"")),a,"")}}function sc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=xa(a.prototype),g=a.apply(f,c);return Ft(g)?g:f}}function O5(a,c,f){var g=sc(a);function C(){for(var R=arguments.length,O=W(R),A=R,z=Oa(C);A--;)O[A]=arguments[A];var Y=R<3&&O[0]!==z&&O[R-1]!==z?[]:Io(O,z);if(R-=Y.length,R<f)return Vb(a,c,gd,C.placeholder,n,O,Y,n,n,f-R);var X=this&&this!==bn&&this instanceof C?g:a;return ur(X,this,O)}return C}function Fb(a){return function(c,f,g){var C=bt(c);if(!Qn(c)){var R=Me(f,3);c=hn(c),f=function(A){return R(C[A],A,C)}}var O=a(c,f,g);return O>-1?C[R?c[O]:O]:n}}function jb(a){return Ki(function(c){var f=c.length,g=f,C=Nr.prototype.thru;for(a&&c.reverse();g--;){var R=c[g];if(typeof R!="function")throw new Dr(s);if(C&&!O&&kd(R)=="wrapper")var O=new Nr([],!0)}for(g=O?g:f;++g<f;){R=c[g];var A=kd(R),z=A=="wrapper"?fm(R):n;z&&gm(z[0])&&z[1]==(U|x|I|T)&&!z[4].length&&z[9]==1?O=O[kd(z[0])].apply(O,z[3]):O=R.length==1&&gm(R)?O[A]():O.thru(R)}return function(){var Y=arguments,X=Y[0];if(O&&Y.length==1&&je(X))return O.plant(X).value();for(var ne=0,ce=f?c[ne].apply(this,Y):X;++ne<f;)ce=c[ne].call(this,ce);return ce}})}function gd(a,c,f,g,C,R,O,A,z,Y){var X=c&U,ne=c&P,ce=c&v,Ce=c&(x|_),Le=c&B,$e=ce?n:sc(a);function Ae(){for(var qe=arguments.length,et=W(qe),pr=qe;pr--;)et[pr]=arguments[pr];if(Ce)var Vn=Oa(Ae),mr=$2(et,Vn);if(g&&(et=Lb(et,g,C,Ce)),R&&(et=Ab(et,R,O,Ce)),qe-=mr,Ce&&qe<Y){var Kt=Io(et,Vn);return Vb(a,c,gd,Ae.placeholder,f,et,Kt,A,z,Y-qe)}var oi=ne?f:this,Xi=ce?oi[a]:a;return qe=et.length,A?et=Y5(et,A):Le&&qe>1&&et.reverse(),X&&z<qe&&(et.length=z),this&&this!==bn&&this instanceof Ae&&(Xi=$e||sc(Xi)),Xi.apply(oi,et)}return Ae}function zb(a,c){return function(f,g){return o5(f,a,c(g),{})}}function vd(a,c){return function(f,g){var C;if(f===n&&g===n)return c;if(f!==n&&(C=f),g!==n){if(C===n)return g;typeof f=="string"||typeof g=="string"?(f=fr(f),g=fr(g)):(f=Eb(f),g=Eb(g)),C=a(f,g)}return C}}function lm(a){return Ki(function(c){return c=At(c,dr(Me())),We(function(f){var g=this;return a(c,function(C){return ur(C,g,f)})})})}function yd(a,c){c=c===n?" ":fr(c);var f=c.length;if(f<2)return f?tm(c,a):c;var g=tm(c,id(a/wa(c)));return Ca(c)?Do(ni(g),0,a).join(""):g.slice(0,a)}function M5(a,c,f,g){var C=c&P,R=sc(a);function O(){for(var A=-1,z=arguments.length,Y=-1,X=g.length,ne=W(X+z),ce=this&&this!==bn&&this instanceof O?R:a;++Y<X;)ne[Y]=g[Y];for(;z--;)ne[Y++]=arguments[++A];return ur(ce,C?f:this,ne)}return O}function Bb(a){return function(c,f,g){return g&&typeof g!="number"&&Bn(c,f,g)&&(f=g=n),c=Yi(c),f===n?(f=c,c=0):f=Yi(f),g=g===n?c<f?1:-1:Yi(g),v5(c,f,g,a)}}function bd(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=zr(c),f=zr(f)),a(c,f)}}function Vb(a,c,f,g,C,R,O,A,z,Y){var X=c&x,ne=X?O:n,ce=X?n:O,Ce=X?R:n,Le=X?n:R;c|=X?I:M,c&=~(X?M:I),c&w||(c&=~(P|v));var $e=[a,c,C,Ce,ne,Le,ce,A,z,Y],Ae=f.apply(n,$e);return gm(a)&&ek(Ae,$e),Ae.placeholder=g,tk(Ae,a,c)}function cm(a){var c=on[a];return function(f,g){if(f=zr(f),g=g==null?0:In(Ve(g),292),g&&tb(f)){var C=(ct(f)+"e").split("e"),R=c(C[0]+"e"+(+C[1]+g));return C=(ct(R)+"e").split("e"),+(C[0]+"e"+(+C[1]-g))}return c(f)}}var L5=_a&&1/Ku(new _a([,-0]))[1]==Ne?function(a){return new _a(a)}:Om;function $b(a){return function(c){var f=On(c);return f==ye?jp(c):f==Zt?Q2(c):V2(c,a(c))}}function qi(a,c,f,g,C,R,O,A){var z=c&v;if(!z&&typeof a!="function")throw new Dr(s);var Y=g?g.length:0;if(Y||(c&=~(I|M),g=C=n),O=O===n?O:sn(Ve(O),0),A=A===n?A:Ve(A),Y-=C?C.length:0,c&M){var X=g,ne=C;g=C=n}var ce=z?n:fm(a),Ce=[a,c,f,g,C,X,ne,R,O,A];if(ce&&K5(Ce,ce),a=Ce[0],c=Ce[1],f=Ce[2],g=Ce[3],C=Ce[4],A=Ce[9]=Ce[9]===n?z?0:a.length:sn(Ce[9]-Y,0),!A&&c&(x|_)&&(c&=~(x|_)),!c||c==P)var Le=I5(a,c,f);else c==x||c==_?Le=O5(a,c,A):(c==I||c==(P|I))&&!C.length?Le=M5(a,c,f,g):Le=gd.apply(n,Ce);var $e=ce?wb:ek;return tk($e(Le,Ce),a,c)}function Wb(a,c,f,g){return a===n||ii(a,Ea[f])&&!dt.call(g,f)?c:a}function Hb(a,c,f,g,C,R){return Ft(a)&&Ft(c)&&(R.set(c,a),fd(a,c,n,Hb,R),R.delete(c)),a}function A5(a){return cc(a)?n:a}function Gb(a,c,f,g,C,R){var O=f&S,A=a.length,z=c.length;if(A!=z&&!(O&&z>A))return!1;var Y=R.get(a),X=R.get(c);if(Y&&X)return Y==c&&X==a;var ne=-1,ce=!0,Ce=f&k?new Ts:n;for(R.set(a,c),R.set(c,a);++ne<A;){var Le=a[ne],$e=c[ne];if(g)var Ae=O?g($e,Le,ne,c,a,R):g(Le,$e,ne,a,c,R);if(Ae!==n){if(Ae)continue;ce=!1;break}if(Ce){if(!Lp(c,function(qe,et){if(!Jl(Ce,et)&&(Le===qe||C(Le,qe,f,g,R)))return Ce.push(et)})){ce=!1;break}}else if(!(Le===$e||C(Le,$e,f,g,R))){ce=!1;break}}return R.delete(a),R.delete(c),ce}function D5(a,c,f,g,C,R,O){switch(f){case yn:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case jn:return!(a.byteLength!=c.byteLength||!R(new ed(a),new ed(c)));case gn:case Zr:case Ie:return ii(+a,+c);case xr:return a.name==c.name&&a.message==c.message;case gt:case ar:return a==c+"";case ye:var A=jp;case Zt:var z=g&S;if(A||(A=Ku),a.size!=c.size&&!z)return!1;var Y=O.get(a);if(Y)return Y==c;g|=k,O.set(a,c);var X=Gb(A(a),A(c),g,C,R,O);return O.delete(a),X;case Rr:if(ec)return ec.call(a)==ec.call(c)}return!1}function N5(a,c,f,g,C,R){var O=f&S,A=um(a),z=A.length,Y=um(c),X=Y.length;if(z!=X&&!O)return!1;for(var ne=z;ne--;){var ce=A[ne];if(!(O?ce in c:dt.call(c,ce)))return!1}var Ce=R.get(a),Le=R.get(c);if(Ce&&Le)return Ce==c&&Le==a;var $e=!0;R.set(a,c),R.set(c,a);for(var Ae=O;++ne<z;){ce=A[ne];var qe=a[ce],et=c[ce];if(g)var pr=O?g(et,qe,ce,c,a,R):g(qe,et,ce,a,c,R);if(!(pr===n?qe===et||C(qe,et,f,g,R):pr)){$e=!1;break}Ae||(Ae=ce=="constructor")}if($e&&!Ae){var Vn=a.constructor,mr=c.constructor;Vn!=mr&&"constructor"in a&&"constructor"in c&&!(typeof Vn=="function"&&Vn instanceof Vn&&typeof mr=="function"&&mr instanceof mr)&&($e=!1)}return R.delete(a),R.delete(c),$e}function Ki(a){return ym(Xb(a,n,ak),a+"")}function um(a){return fb(a,hn,pm)}function dm(a){return fb(a,Yn,qb)}var fm=sd?function(a){return sd.get(a)}:Om;function kd(a){for(var c=a.name+"",f=Pa[c],g=dt.call(Pa,c)?f.length:0;g--;){var C=f[g],R=C.func;if(R==null||R==a)return C.name}return c}function Oa(a){var c=dt.call(E,"placeholder")?E:a;return c.placeholder}function Me(){var a=E.iteratee||Rm;return a=a===Rm?mb:a,arguments.length?a(arguments[0],arguments[1]):a}function Sd(a,c){var f=a.__data__;return W5(c)?f[typeof c=="string"?"string":"hash"]:f.map}function hm(a){for(var c=hn(a),f=c.length;f--;){var g=c[f],C=a[g];c[f]=[g,C,Qb(C)]}return c}function Ps(a,c){var f=q2(a,c);return pb(f)?f:n}function U5(a){var c=dt.call(a,Cs),f=a[Cs];try{a[Cs]=n;var g=!0}catch{}var C=Xu.call(a);return g&&(c?a[Cs]=f:delete a[Cs]),C}var pm=Bp?function(a){return a==null?[]:(a=bt(a),xo(Bp(a),function(c){return Z1.call(a,c)}))}:Mm,qb=Bp?function(a){for(var c=[];a;)Ro(c,pm(a)),a=td(a);return c}:Mm,On=zn;(Vp&&On(new Vp(new ArrayBuffer(1)))!=yn||Yl&&On(new Yl)!=ye||$p&&On($p.resolve())!=Ue||_a&&On(new _a)!=Zt||Xl&&On(new Xl)!=vt)&&(On=function(a){var c=zn(a),f=c==_t?a.constructor:n,g=f?xs(f):"";if(g)switch(g){case bI:return yn;case kI:return ye;case SI:return Ue;case CI:return Zt;case wI:return vt}return c});function F5(a,c,f){for(var g=-1,C=f.length;++g<C;){var R=f[g],O=R.size;switch(R.type){case"drop":a+=O;break;case"dropRight":c-=O;break;case"take":c=In(c,a+O);break;case"takeRight":a=sn(a,c-O);break}}return{start:a,end:c}}function j5(a){var c=a.match(N);return c?c[1].split(V):[]}function Kb(a,c,f){c=Ao(c,a);for(var g=-1,C=c.length,R=!1;++g<C;){var O=_i(c[g]);if(!(R=a!=null&&f(a,O)))break;a=a[O]}return R||++g!=C?R:(C=a==null?0:a.length,!!C&&xd(C)&&Ji(O,C)&&(je(a)||Rs(a)))}function z5(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&dt.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function Jb(a){return typeof a.constructor=="function"&&!ac(a)?xa(td(a)):{}}function B5(a,c,f){var g=a.constructor;switch(c){case jn:return am(a);case gn:case Zr:return new g(+a);case yn:return T5(a,f);case vs:case Ir:case lr:case fa:case Eo:case $l:case Or:case ha:case pa:return Ob(a,f);case ye:return new g;case Ie:case ar:return new g(a);case gt:return E5(a);case Zt:return new g;case Rr:return _5(a)}}function V5(a,c){var f=c.length;if(!f)return a;var g=f-1;return c[g]=(f>1?"& ":"")+c[g],c=c.join(f>2?", ":" "),a.replace(L,`{
/* [wrapped with `+c+`] */
`)}function $5(a){return je(a)||Rs(a)||!!(eb&&a&&a[eb])}function Ji(a,c){var f=typeof a;return c=c??te,!!c&&(f=="number"||f!="symbol"&&st.test(a))&&a>-1&&a%1==0&&a<c}function Bn(a,c,f){if(!Ft(f))return!1;var g=typeof c;return(g=="number"?Qn(f)&&Ji(c,f.length):g=="string"&&c in f)?ii(f[c],a):!1}function mm(a,c){if(je(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||hr(a)?!0:Bu.test(a)||!wp.test(a)||c!=null&&a in bt(c)}function W5(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function gm(a){var c=kd(a),f=E[c];if(typeof f!="function"||!(c in Qe.prototype))return!1;if(a===f)return!0;var g=fm(f);return!!g&&a===g[0]}function H5(a){return!!Q1&&Q1 in a}var G5=Qu?Qi:Lm;function ac(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||Ea;return a===f}function Qb(a){return a===a&&!Ft(a)}function Yb(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==n||a in bt(f))}}function q5(a){var c=_d(a,function(g){return f.size===d&&f.clear(),g}),f=c.cache;return c}function K5(a,c){var f=a[1],g=c[1],C=f|g,R=C<(P|v|U),O=g==U&&f==x||g==U&&f==T&&a[7].length<=c[8]||g==(U|T)&&c[7].length<=c[8]&&f==x;if(!(R||O))return a;g&P&&(a[2]=c[2],C|=f&P?0:w);var A=c[3];if(A){var z=a[3];a[3]=z?Lb(z,A,c[4]):A,a[4]=z?Io(a[3],h):c[4]}return A=c[5],A&&(z=a[5],a[5]=z?Ab(z,A,c[6]):A,a[6]=z?Io(a[5],h):c[6]),A=c[7],A&&(a[7]=A),g&U&&(a[8]=a[8]==null?c[8]:In(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=C,a}function J5(a){var c=[];if(a!=null)for(var f in bt(a))c.push(f);return c}function Q5(a){return Xu.call(a)}function Xb(a,c,f){return c=sn(c===n?a.length-1:c,0),function(){for(var g=arguments,C=-1,R=sn(g.length-c,0),O=W(R);++C<R;)O[C]=g[c+C];C=-1;for(var A=W(c+1);++C<c;)A[C]=g[C];return A[c]=f(O),ur(a,this,A)}}function Zb(a,c){return c.length<2?a:_s(a,Fr(c,0,-1))}function Y5(a,c){for(var f=a.length,g=In(c.length,f),C=Jn(a);g--;){var R=c[g];a[g]=Ji(R,f)?C[R]:n}return a}function vm(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var ek=nk(wb),lc=fI||function(a,c){return bn.setTimeout(a,c)},ym=nk(k5);function tk(a,c,f){var g=c+"";return ym(a,V5(g,X5(j5(g),f)))}function nk(a){var c=0,f=0;return function(){var g=gI(),C=ve-(g-f);if(f=g,C>0){if(++c>=K)return arguments[0]}else c=0;return a.apply(n,arguments)}}function Cd(a,c){var f=-1,g=a.length,C=g-1;for(c=c===n?g:c;++f<c;){var R=em(f,C),O=a[R];a[R]=a[f],a[f]=O}return a.length=c,a}var rk=q5(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(ga,function(f,g,C,R){c.push(C?R.replace(_e,"$1"):g||f)}),c});function _i(a){if(typeof a=="string"||hr(a))return a;var c=a+"";return c=="0"&&1/a==-Ne?"-0":c}function xs(a){if(a!=null){try{return Yu.call(a)}catch{}try{return a+""}catch{}}return""}function X5(a,c){return Ar(Et,function(f){var g="_."+f[0];c&f[1]&&!Gu(a,g)&&a.push(g)}),a.sort()}function ik(a){if(a instanceof Qe)return a.clone();var c=new Nr(a.__wrapped__,a.__chain__);return c.__actions__=Jn(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function Z5(a,c,f){(f?Bn(a,c,f):c===n)?c=1:c=sn(Ve(c),0);var g=a==null?0:a.length;if(!g||c<1)return[];for(var C=0,R=0,O=W(id(g/c));C<g;)O[R++]=Fr(a,C,C+=c);return O}function eO(a){for(var c=-1,f=a==null?0:a.length,g=0,C=[];++c<f;){var R=a[c];R&&(C[g++]=R)}return C}function tO(){var a=arguments.length;if(!a)return[];for(var c=W(a-1),f=arguments[0],g=a;g--;)c[g-1]=arguments[g];return Ro(je(f)?Jn(f):[f],kn(c,1))}var nO=We(function(a,c){return qt(a)?nc(a,kn(c,1,qt,!0)):[]}),rO=We(function(a,c){var f=jr(c);return qt(f)&&(f=n),qt(a)?nc(a,kn(c,1,qt,!0),Me(f,2)):[]}),iO=We(function(a,c){var f=jr(c);return qt(f)&&(f=n),qt(a)?nc(a,kn(c,1,qt,!0),n,f):[]});function oO(a,c,f){var g=a==null?0:a.length;return g?(c=f||c===n?1:Ve(c),Fr(a,c<0?0:c,g)):[]}function sO(a,c,f){var g=a==null?0:a.length;return g?(c=f||c===n?1:Ve(c),c=g-c,Fr(a,0,c<0?0:c)):[]}function aO(a,c){return a&&a.length?pd(a,Me(c,3),!0,!0):[]}function lO(a,c){return a&&a.length?pd(a,Me(c,3),!0):[]}function cO(a,c,f,g){var C=a==null?0:a.length;return C?(f&&typeof f!="number"&&Bn(a,c,f)&&(f=0,g=C),t5(a,c,f,g)):[]}function ok(a,c,f){var g=a==null?0:a.length;if(!g)return-1;var C=f==null?0:Ve(f);return C<0&&(C=sn(g+C,0)),qu(a,Me(c,3),C)}function sk(a,c,f){var g=a==null?0:a.length;if(!g)return-1;var C=g-1;return f!==n&&(C=Ve(f),C=f<0?sn(g+C,0):In(C,g-1)),qu(a,Me(c,3),C,!0)}function ak(a){var c=a==null?0:a.length;return c?kn(a,1):[]}function uO(a){var c=a==null?0:a.length;return c?kn(a,Ne):[]}function dO(a,c){var f=a==null?0:a.length;return f?(c=c===n?1:Ve(c),kn(a,c)):[]}function fO(a){for(var c=-1,f=a==null?0:a.length,g={};++c<f;){var C=a[c];g[C[0]]=C[1]}return g}function lk(a){return a&&a.length?a[0]:n}function hO(a,c,f){var g=a==null?0:a.length;if(!g)return-1;var C=f==null?0:Ve(f);return C<0&&(C=sn(g+C,0)),Sa(a,c,C)}function pO(a){var c=a==null?0:a.length;return c?Fr(a,0,-1):[]}var mO=We(function(a){var c=At(a,om);return c.length&&c[0]===a[0]?Jp(c):[]}),gO=We(function(a){var c=jr(a),f=At(a,om);return c===jr(f)?c=n:f.pop(),f.length&&f[0]===a[0]?Jp(f,Me(c,2)):[]}),vO=We(function(a){var c=jr(a),f=At(a,om);return c=typeof c=="function"?c:n,c&&f.pop(),f.length&&f[0]===a[0]?Jp(f,n,c):[]});function yO(a,c){return a==null?"":pI.call(a,c)}function jr(a){var c=a==null?0:a.length;return c?a[c-1]:n}function bO(a,c,f){var g=a==null?0:a.length;if(!g)return-1;var C=g;return f!==n&&(C=Ve(f),C=C<0?sn(g+C,0):In(C,g-1)),c===c?X2(a,c,C):qu(a,V1,C,!0)}function kO(a,c){return a&&a.length?bb(a,Ve(c)):n}var SO=We(ck);function ck(a,c){return a&&a.length&&c&&c.length?Zp(a,c):a}function CO(a,c,f){return a&&a.length&&c&&c.length?Zp(a,c,Me(f,2)):a}function wO(a,c,f){return a&&a.length&&c&&c.length?Zp(a,c,n,f):a}var TO=Ki(function(a,c){var f=a==null?0:a.length,g=Hp(a,c);return Cb(a,At(c,function(C){return Ji(C,f)?+C:C}).sort(Mb)),g});function EO(a,c){var f=[];if(!(a&&a.length))return f;var g=-1,C=[],R=a.length;for(c=Me(c,3);++g<R;){var O=a[g];c(O,g,a)&&(f.push(O),C.push(g))}return Cb(a,C),f}function bm(a){return a==null?a:yI.call(a)}function _O(a,c,f){var g=a==null?0:a.length;return g?(f&&typeof f!="number"&&Bn(a,c,f)?(c=0,f=g):(c=c==null?0:Ve(c),f=f===n?g:Ve(f)),Fr(a,c,f)):[]}function PO(a,c){return hd(a,c)}function xO(a,c,f){return nm(a,c,Me(f,2))}function RO(a,c){var f=a==null?0:a.length;if(f){var g=hd(a,c);if(g<f&&ii(a[g],c))return g}return-1}function IO(a,c){return hd(a,c,!0)}function OO(a,c,f){return nm(a,c,Me(f,2),!0)}function MO(a,c){var f=a==null?0:a.length;if(f){var g=hd(a,c,!0)-1;if(ii(a[g],c))return g}return-1}function LO(a){return a&&a.length?Tb(a):[]}function AO(a,c){return a&&a.length?Tb(a,Me(c,2)):[]}function DO(a){var c=a==null?0:a.length;return c?Fr(a,1,c):[]}function NO(a,c,f){return a&&a.length?(c=f||c===n?1:Ve(c),Fr(a,0,c<0?0:c)):[]}function UO(a,c,f){var g=a==null?0:a.length;return g?(c=f||c===n?1:Ve(c),c=g-c,Fr(a,c<0?0:c,g)):[]}function FO(a,c){return a&&a.length?pd(a,Me(c,3),!1,!0):[]}function jO(a,c){return a&&a.length?pd(a,Me(c,3)):[]}var zO=We(function(a){return Lo(kn(a,1,qt,!0))}),BO=We(function(a){var c=jr(a);return qt(c)&&(c=n),Lo(kn(a,1,qt,!0),Me(c,2))}),VO=We(function(a){var c=jr(a);return c=typeof c=="function"?c:n,Lo(kn(a,1,qt,!0),n,c)});function $O(a){return a&&a.length?Lo(a):[]}function WO(a,c){return a&&a.length?Lo(a,Me(c,2)):[]}function HO(a,c){return c=typeof c=="function"?c:n,a&&a.length?Lo(a,n,c):[]}function km(a){if(!(a&&a.length))return[];var c=0;return a=xo(a,function(f){if(qt(f))return c=sn(f.length,c),!0}),Up(c,function(f){return At(a,Ap(f))})}function uk(a,c){if(!(a&&a.length))return[];var f=km(a);return c==null?f:At(f,function(g){return ur(c,n,g)})}var GO=We(function(a,c){return qt(a)?nc(a,c):[]}),qO=We(function(a){return im(xo(a,qt))}),KO=We(function(a){var c=jr(a);return qt(c)&&(c=n),im(xo(a,qt),Me(c,2))}),JO=We(function(a){var c=jr(a);return c=typeof c=="function"?c:n,im(xo(a,qt),n,c)}),QO=We(km);function YO(a,c){return xb(a||[],c||[],tc)}function XO(a,c){return xb(a||[],c||[],oc)}var ZO=We(function(a){var c=a.length,f=c>1?a[c-1]:n;return f=typeof f=="function"?(a.pop(),f):n,uk(a,f)});function dk(a){var c=E(a);return c.__chain__=!0,c}function eM(a,c){return c(a),a}function wd(a,c){return c(a)}var tM=Ki(function(a){var c=a.length,f=c?a[0]:0,g=this.__wrapped__,C=function(R){return Hp(R,a)};return c>1||this.__actions__.length||!(g instanceof Qe)||!Ji(f)?this.thru(C):(g=g.slice(f,+f+(c?1:0)),g.__actions__.push({func:wd,args:[C],thisArg:n}),new Nr(g,this.__chain__).thru(function(R){return c&&!R.length&&R.push(n),R}))});function nM(){return dk(this)}function rM(){return new Nr(this.value(),this.__chain__)}function iM(){this.__values__===n&&(this.__values__=Ek(this.value()));var a=this.__index__>=this.__values__.length,c=a?n:this.__values__[this.__index__++];return{done:a,value:c}}function oM(){return this}function sM(a){for(var c,f=this;f instanceof ld;){var g=ik(f);g.__index__=0,g.__values__=n,c?C.__wrapped__=g:c=g;var C=g;f=f.__wrapped__}return C.__wrapped__=a,c}function aM(){var a=this.__wrapped__;if(a instanceof Qe){var c=a;return this.__actions__.length&&(c=new Qe(this)),c=c.reverse(),c.__actions__.push({func:wd,args:[bm],thisArg:n}),new Nr(c,this.__chain__)}return this.thru(bm)}function lM(){return Pb(this.__wrapped__,this.__actions__)}var cM=md(function(a,c,f){dt.call(a,f)?++a[f]:Gi(a,f,1)});function uM(a,c,f){var g=je(a)?z1:e5;return f&&Bn(a,c,f)&&(c=n),g(a,Me(c,3))}function dM(a,c){var f=je(a)?xo:ub;return f(a,Me(c,3))}var fM=Fb(ok),hM=Fb(sk);function pM(a,c){return kn(Td(a,c),1)}function mM(a,c){return kn(Td(a,c),Ne)}function gM(a,c,f){return f=f===n?1:Ve(f),kn(Td(a,c),f)}function fk(a,c){var f=je(a)?Ar:Mo;return f(a,Me(c,3))}function hk(a,c){var f=je(a)?D2:cb;return f(a,Me(c,3))}var vM=md(function(a,c,f){dt.call(a,f)?a[f].push(c):Gi(a,f,[c])});function yM(a,c,f,g){a=Qn(a)?a:La(a),f=f&&!g?Ve(f):0;var C=a.length;return f<0&&(f=sn(C+f,0)),Rd(a)?f<=C&&a.indexOf(c,f)>-1:!!C&&Sa(a,c,f)>-1}var bM=We(function(a,c,f){var g=-1,C=typeof c=="function",R=Qn(a)?W(a.length):[];return Mo(a,function(O){R[++g]=C?ur(c,O,f):rc(O,c,f)}),R}),kM=md(function(a,c,f){Gi(a,f,c)});function Td(a,c){var f=je(a)?At:gb;return f(a,Me(c,3))}function SM(a,c,f,g){return a==null?[]:(je(c)||(c=c==null?[]:[c]),f=g?n:f,je(f)||(f=f==null?[]:[f]),kb(a,c,f))}var CM=md(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function wM(a,c,f){var g=je(a)?Mp:W1,C=arguments.length<3;return g(a,Me(c,4),f,C,Mo)}function TM(a,c,f){var g=je(a)?N2:W1,C=arguments.length<3;return g(a,Me(c,4),f,C,cb)}function EM(a,c){var f=je(a)?xo:ub;return f(a,Pd(Me(c,3)))}function _M(a){var c=je(a)?ob:y5;return c(a)}function PM(a,c,f){(f?Bn(a,c,f):c===n)?c=1:c=Ve(c);var g=je(a)?JI:b5;return g(a,c)}function xM(a){var c=je(a)?QI:S5;return c(a)}function RM(a){if(a==null)return 0;if(Qn(a))return Rd(a)?wa(a):a.length;var c=On(a);return c==ye||c==Zt?a.size:Yp(a).length}function IM(a,c,f){var g=je(a)?Lp:C5;return f&&Bn(a,c,f)&&(c=n),g(a,Me(c,3))}var OM=We(function(a,c){if(a==null)return[];var f=c.length;return f>1&&Bn(a,c[0],c[1])?c=[]:f>2&&Bn(c[0],c[1],c[2])&&(c=[c[0]]),kb(a,kn(c,1),[])}),Ed=dI||function(){return bn.Date.now()};function MM(a,c){if(typeof c!="function")throw new Dr(s);return a=Ve(a),function(){if(--a<1)return c.apply(this,arguments)}}function pk(a,c,f){return c=f?n:c,c=a&&c==null?a.length:c,qi(a,U,n,n,n,n,c)}function mk(a,c){var f;if(typeof c!="function")throw new Dr(s);return a=Ve(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=n),f}}var Sm=We(function(a,c,f){var g=P;if(f.length){var C=Io(f,Oa(Sm));g|=I}return qi(a,g,c,f,C)}),gk=We(function(a,c,f){var g=P|v;if(f.length){var C=Io(f,Oa(gk));g|=I}return qi(c,g,a,f,C)});function vk(a,c,f){c=f?n:c;var g=qi(a,x,n,n,n,n,n,c);return g.placeholder=vk.placeholder,g}function yk(a,c,f){c=f?n:c;var g=qi(a,_,n,n,n,n,n,c);return g.placeholder=yk.placeholder,g}function bk(a,c,f){var g,C,R,O,A,z,Y=0,X=!1,ne=!1,ce=!0;if(typeof a!="function")throw new Dr(s);c=zr(c)||0,Ft(f)&&(X=!!f.leading,ne="maxWait"in f,R=ne?sn(zr(f.maxWait)||0,c):R,ce="trailing"in f?!!f.trailing:ce);function Ce(Kt){var oi=g,Xi=C;return g=C=n,Y=Kt,O=a.apply(Xi,oi),O}function Le(Kt){return Y=Kt,A=lc(qe,c),X?Ce(Kt):O}function $e(Kt){var oi=Kt-z,Xi=Kt-Y,Fk=c-oi;return ne?In(Fk,R-Xi):Fk}function Ae(Kt){var oi=Kt-z,Xi=Kt-Y;return z===n||oi>=c||oi<0||ne&&Xi>=R}function qe(){var Kt=Ed();if(Ae(Kt))return et(Kt);A=lc(qe,$e(Kt))}function et(Kt){return A=n,ce&&g?Ce(Kt):(g=C=n,O)}function pr(){A!==n&&Rb(A),Y=0,g=z=C=A=n}function Vn(){return A===n?O:et(Ed())}function mr(){var Kt=Ed(),oi=Ae(Kt);if(g=arguments,C=this,z=Kt,oi){if(A===n)return Le(z);if(ne)return Rb(A),A=lc(qe,c),Ce(z)}return A===n&&(A=lc(qe,c)),O}return mr.cancel=pr,mr.flush=Vn,mr}var LM=We(function(a,c){return lb(a,1,c)}),AM=We(function(a,c,f){return lb(a,zr(c)||0,f)});function DM(a){return qi(a,B)}function _d(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Dr(s);var f=function(){var g=arguments,C=c?c.apply(this,g):g[0],R=f.cache;if(R.has(C))return R.get(C);var O=a.apply(this,g);return f.cache=R.set(C,O)||R,O};return f.cache=new(_d.Cache||Hi),f}_d.Cache=Hi;function Pd(a){if(typeof a!="function")throw new Dr(s);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function NM(a){return mk(2,a)}var UM=w5(function(a,c){c=c.length==1&&je(c[0])?At(c[0],dr(Me())):At(kn(c,1),dr(Me()));var f=c.length;return We(function(g){for(var C=-1,R=In(g.length,f);++C<R;)g[C]=c[C].call(this,g[C]);return ur(a,this,g)})}),Cm=We(function(a,c){var f=Io(c,Oa(Cm));return qi(a,I,n,c,f)}),kk=We(function(a,c){var f=Io(c,Oa(kk));return qi(a,M,n,c,f)}),FM=Ki(function(a,c){return qi(a,T,n,n,n,c)});function jM(a,c){if(typeof a!="function")throw new Dr(s);return c=c===n?c:Ve(c),We(a,c)}function zM(a,c){if(typeof a!="function")throw new Dr(s);return c=c==null?0:sn(Ve(c),0),We(function(f){var g=f[c],C=Do(f,0,c);return g&&Ro(C,g),ur(a,this,C)})}function BM(a,c,f){var g=!0,C=!0;if(typeof a!="function")throw new Dr(s);return Ft(f)&&(g="leading"in f?!!f.leading:g,C="trailing"in f?!!f.trailing:C),bk(a,c,{leading:g,maxWait:c,trailing:C})}function VM(a){return pk(a,1)}function $M(a,c){return Cm(sm(c),a)}function WM(){if(!arguments.length)return[];var a=arguments[0];return je(a)?a:[a]}function HM(a){return Ur(a,y)}function GM(a,c){return c=typeof c=="function"?c:n,Ur(a,y,c)}function qM(a){return Ur(a,p|y)}function KM(a,c){return c=typeof c=="function"?c:n,Ur(a,p|y,c)}function JM(a,c){return c==null||ab(a,c,hn(c))}function ii(a,c){return a===c||a!==a&&c!==c}var QM=bd(Kp),YM=bd(function(a,c){return a>=c}),Rs=hb(function(){return arguments}())?hb:function(a){return $t(a)&&dt.call(a,"callee")&&!Z1.call(a,"callee")},je=W.isArray,XM=A1?dr(A1):s5;function Qn(a){return a!=null&&xd(a.length)&&!Qi(a)}function qt(a){return $t(a)&&Qn(a)}function ZM(a){return a===!0||a===!1||$t(a)&&zn(a)==gn}var No=hI||Lm,e3=D1?dr(D1):a5;function t3(a){return $t(a)&&a.nodeType===1&&!cc(a)}function n3(a){if(a==null)return!0;if(Qn(a)&&(je(a)||typeof a=="string"||typeof a.splice=="function"||No(a)||Ma(a)||Rs(a)))return!a.length;var c=On(a);if(c==ye||c==Zt)return!a.size;if(ac(a))return!Yp(a).length;for(var f in a)if(dt.call(a,f))return!1;return!0}function r3(a,c){return ic(a,c)}function i3(a,c,f){f=typeof f=="function"?f:n;var g=f?f(a,c):n;return g===n?ic(a,c,n,f):!!g}function wm(a){if(!$t(a))return!1;var c=zn(a);return c==xr||c==fn||typeof a.message=="string"&&typeof a.name=="string"&&!cc(a)}function o3(a){return typeof a=="number"&&tb(a)}function Qi(a){if(!Ft(a))return!1;var c=zn(a);return c==Te||c==Re||c==Xt||c==Ze}function Sk(a){return typeof a=="number"&&a==Ve(a)}function xd(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=te}function Ft(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function $t(a){return a!=null&&typeof a=="object"}var Ck=N1?dr(N1):c5;function s3(a,c){return a===c||Qp(a,c,hm(c))}function a3(a,c,f){return f=typeof f=="function"?f:n,Qp(a,c,hm(c),f)}function l3(a){return wk(a)&&a!=+a}function c3(a){if(G5(a))throw new Fe(o);return pb(a)}function u3(a){return a===null}function d3(a){return a==null}function wk(a){return typeof a=="number"||$t(a)&&zn(a)==Ie}function cc(a){if(!$t(a)||zn(a)!=_t)return!1;var c=td(a);if(c===null)return!0;var f=dt.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Yu.call(f)==aI}var Tm=U1?dr(U1):u5;function f3(a){return Sk(a)&&a>=-te&&a<=te}var Tk=F1?dr(F1):d5;function Rd(a){return typeof a=="string"||!je(a)&&$t(a)&&zn(a)==ar}function hr(a){return typeof a=="symbol"||$t(a)&&zn(a)==Rr}var Ma=j1?dr(j1):f5;function h3(a){return a===n}function p3(a){return $t(a)&&On(a)==vt}function m3(a){return $t(a)&&zn(a)==vn}var g3=bd(Xp),v3=bd(function(a,c){return a<=c});function Ek(a){if(!a)return[];if(Qn(a))return Rd(a)?ni(a):Jn(a);if(Ql&&a[Ql])return J2(a[Ql]());var c=On(a),f=c==ye?jp:c==Zt?Ku:La;return f(a)}function Yi(a){if(!a)return a===0?a:0;if(a=zr(a),a===Ne||a===-Ne){var c=a<0?-1:1;return c*se}return a===a?a:0}function Ve(a){var c=Yi(a),f=c%1;return c===c?f?c-f:c:0}function _k(a){return a?Es(Ve(a),0,ke):0}function zr(a){if(typeof a=="number")return a;if(hr(a))return Ee;if(Ft(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=Ft(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=H1(a);var f=be.test(a);return f||rt.test(a)?M2(a.slice(2),f?2:8):Oe.test(a)?Ee:+a}function Pk(a){return Ei(a,Yn(a))}function y3(a){return a?Es(Ve(a),-te,te):a===0?a:0}function ct(a){return a==null?"":fr(a)}var b3=Ra(function(a,c){if(ac(c)||Qn(c)){Ei(c,hn(c),a);return}for(var f in c)dt.call(c,f)&&tc(a,f,c[f])}),xk=Ra(function(a,c){Ei(c,Yn(c),a)}),Id=Ra(function(a,c,f,g){Ei(c,Yn(c),a,g)}),k3=Ra(function(a,c,f,g){Ei(c,hn(c),a,g)}),S3=Ki(Hp);function C3(a,c){var f=xa(a);return c==null?f:sb(f,c)}var w3=We(function(a,c){a=bt(a);var f=-1,g=c.length,C=g>2?c[2]:n;for(C&&Bn(c[0],c[1],C)&&(g=1);++f<g;)for(var R=c[f],O=Yn(R),A=-1,z=O.length;++A<z;){var Y=O[A],X=a[Y];(X===n||ii(X,Ea[Y])&&!dt.call(a,Y))&&(a[Y]=R[Y])}return a}),T3=We(function(a){return a.push(n,Hb),ur(Rk,n,a)});function E3(a,c){return B1(a,Me(c,3),Ti)}function _3(a,c){return B1(a,Me(c,3),qp)}function P3(a,c){return a==null?a:Gp(a,Me(c,3),Yn)}function x3(a,c){return a==null?a:db(a,Me(c,3),Yn)}function R3(a,c){return a&&Ti(a,Me(c,3))}function I3(a,c){return a&&qp(a,Me(c,3))}function O3(a){return a==null?[]:dd(a,hn(a))}function M3(a){return a==null?[]:dd(a,Yn(a))}function Em(a,c,f){var g=a==null?n:_s(a,c);return g===n?f:g}function L3(a,c){return a!=null&&Kb(a,c,n5)}function _m(a,c){return a!=null&&Kb(a,c,r5)}var A3=zb(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Xu.call(c)),a[c]=f},xm(Xn)),D3=zb(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Xu.call(c)),dt.call(a,c)?a[c].push(f):a[c]=[f]},Me),N3=We(rc);function hn(a){return Qn(a)?ib(a):Yp(a)}function Yn(a){return Qn(a)?ib(a,!0):h5(a)}function U3(a,c){var f={};return c=Me(c,3),Ti(a,function(g,C,R){Gi(f,c(g,C,R),g)}),f}function F3(a,c){var f={};return c=Me(c,3),Ti(a,function(g,C,R){Gi(f,C,c(g,C,R))}),f}var j3=Ra(function(a,c,f){fd(a,c,f)}),Rk=Ra(function(a,c,f,g){fd(a,c,f,g)}),z3=Ki(function(a,c){var f={};if(a==null)return f;var g=!1;c=At(c,function(R){return R=Ao(R,a),g||(g=R.length>1),R}),Ei(a,dm(a),f),g&&(f=Ur(f,p|m|y,A5));for(var C=c.length;C--;)rm(f,c[C]);return f});function B3(a,c){return Ik(a,Pd(Me(c)))}var V3=Ki(function(a,c){return a==null?{}:m5(a,c)});function Ik(a,c){if(a==null)return{};var f=At(dm(a),function(g){return[g]});return c=Me(c),Sb(a,f,function(g,C){return c(g,C[0])})}function $3(a,c,f){c=Ao(c,a);var g=-1,C=c.length;for(C||(C=1,a=n);++g<C;){var R=a==null?n:a[_i(c[g])];R===n&&(g=C,R=f),a=Qi(R)?R.call(a):R}return a}function W3(a,c,f){return a==null?a:oc(a,c,f)}function H3(a,c,f,g){return g=typeof g=="function"?g:n,a==null?a:oc(a,c,f,g)}var Ok=$b(hn),Mk=$b(Yn);function G3(a,c,f){var g=je(a),C=g||No(a)||Ma(a);if(c=Me(c,4),f==null){var R=a&&a.constructor;C?f=g?new R:[]:Ft(a)?f=Qi(R)?xa(td(a)):{}:f={}}return(C?Ar:Ti)(a,function(O,A,z){return c(f,O,A,z)}),f}function q3(a,c){return a==null?!0:rm(a,c)}function K3(a,c,f){return a==null?a:_b(a,c,sm(f))}function J3(a,c,f,g){return g=typeof g=="function"?g:n,a==null?a:_b(a,c,sm(f),g)}function La(a){return a==null?[]:Fp(a,hn(a))}function Q3(a){return a==null?[]:Fp(a,Yn(a))}function Y3(a,c,f){return f===n&&(f=c,c=n),f!==n&&(f=zr(f),f=f===f?f:0),c!==n&&(c=zr(c),c=c===c?c:0),Es(zr(a),c,f)}function X3(a,c,f){return c=Yi(c),f===n?(f=c,c=0):f=Yi(f),a=zr(a),i5(a,c,f)}function Z3(a,c,f){if(f&&typeof f!="boolean"&&Bn(a,c,f)&&(c=f=n),f===n&&(typeof c=="boolean"?(f=c,c=n):typeof a=="boolean"&&(f=a,a=n)),a===n&&c===n?(a=0,c=1):(a=Yi(a),c===n?(c=a,a=0):c=Yi(c)),a>c){var g=a;a=c,c=g}if(f||a%1||c%1){var C=nb();return In(a+C*(c-a+O2("1e-"+((C+"").length-1))),c)}return em(a,c)}var eL=Ia(function(a,c,f){return c=c.toLowerCase(),a+(f?Lk(c):c)});function Lk(a){return Pm(ct(a).toLowerCase())}function Ak(a){return a=ct(a),a&&a.replace(yt,W2).replace(S2,"")}function tL(a,c,f){a=ct(a),c=fr(c);var g=a.length;f=f===n?g:Es(Ve(f),0,g);var C=f;return f-=c.length,f>=0&&a.slice(f,C)==c}function nL(a){return a=ct(a),a&&ma.test(a)?a.replace(Wl,H2):a}function rL(a){return a=ct(a),a&&Vu.test(a)?a.replace(_o,"\\$&"):a}var iL=Ia(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),oL=Ia(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),sL=Ub("toLowerCase");function aL(a,c,f){a=ct(a),c=Ve(c);var g=c?wa(a):0;if(!c||g>=c)return a;var C=(c-g)/2;return yd(od(C),f)+a+yd(id(C),f)}function lL(a,c,f){a=ct(a),c=Ve(c);var g=c?wa(a):0;return c&&g<c?a+yd(c-g,f):a}function cL(a,c,f){a=ct(a),c=Ve(c);var g=c?wa(a):0;return c&&g<c?yd(c-g,f)+a:a}function uL(a,c,f){return f||c==null?c=0:c&&(c=+c),vI(ct(a).replace(Kl,""),c||0)}function dL(a,c,f){return(f?Bn(a,c,f):c===n)?c=1:c=Ve(c),tm(ct(a),c)}function fL(){var a=arguments,c=ct(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var hL=Ia(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function pL(a,c,f){return f&&typeof f!="number"&&Bn(a,c,f)&&(c=f=n),f=f===n?ke:f>>>0,f?(a=ct(a),a&&(typeof c=="string"||c!=null&&!Tm(c))&&(c=fr(c),!c&&Ca(a))?Do(ni(a),0,f):a.split(c,f)):[]}var mL=Ia(function(a,c,f){return a+(f?" ":"")+Pm(c)});function gL(a,c,f){return a=ct(a),f=f==null?0:Es(Ve(f),0,a.length),c=fr(c),a.slice(f,f+c.length)==c}function vL(a,c,f){var g=E.templateSettings;f&&Bn(a,c,f)&&(c=n),a=ct(a),c=Id({},c,g,Wb);var C=Id({},c.imports,g.imports,Wb),R=hn(C),O=Fp(C,R),A,z,Y=0,X=c.interpolate||He,ne="__p += '",ce=zp((c.escape||He).source+"|"+X.source+"|"+(X===ql?De:He).source+"|"+(c.evaluate||He).source+"|$","g"),Ce="//# sourceURL="+(dt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_2+"]")+`
`;a.replace(ce,function(Ae,qe,et,pr,Vn,mr){return et||(et=pr),ne+=a.slice(Y,mr).replace(en,G2),qe&&(A=!0,ne+=`' +
__e(`+qe+`) +
'`),Vn&&(z=!0,ne+=`';
`+Vn+`;
__p += '`),et&&(ne+=`' +
((__t = (`+et+`)) == null ? '' : __t) +
'`),Y=mr+Ae.length,Ae}),ne+=`';
`;var Le=dt.call(c,"variable")&&c.variable;if(!Le)ne=`with (obj) {
`+ne+`
}
`;else if(fe.test(Le))throw new Fe(l);ne=(z?ne.replace(ju,""):ne).replace(Sp,"$1").replace(zu,"$1;"),ne="function("+(Le||"obj")+`) {
`+(Le?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var $e=Nk(function(){return at(R,Ce+"return "+ne).apply(n,O)});if($e.source=ne,wm($e))throw $e;return $e}function yL(a){return ct(a).toLowerCase()}function bL(a){return ct(a).toUpperCase()}function kL(a,c,f){if(a=ct(a),a&&(f||c===n))return H1(a);if(!a||!(c=fr(c)))return a;var g=ni(a),C=ni(c),R=G1(g,C),O=q1(g,C)+1;return Do(g,R,O).join("")}function SL(a,c,f){if(a=ct(a),a&&(f||c===n))return a.slice(0,J1(a)+1);if(!a||!(c=fr(c)))return a;var g=ni(a),C=q1(g,ni(c))+1;return Do(g,0,C).join("")}function CL(a,c,f){if(a=ct(a),a&&(f||c===n))return a.replace(Kl,"");if(!a||!(c=fr(c)))return a;var g=ni(a),C=G1(g,ni(c));return Do(g,C).join("")}function wL(a,c){var f=j,g=$;if(Ft(c)){var C="separator"in c?c.separator:C;f="length"in c?Ve(c.length):f,g="omission"in c?fr(c.omission):g}a=ct(a);var R=a.length;if(Ca(a)){var O=ni(a);R=O.length}if(f>=R)return a;var A=f-wa(g);if(A<1)return g;var z=O?Do(O,0,A).join(""):a.slice(0,A);if(C===n)return z+g;if(O&&(A+=z.length-A),Tm(C)){if(a.slice(A).search(C)){var Y,X=z;for(C.global||(C=zp(C.source,ct(ae.exec(C))+"g")),C.lastIndex=0;Y=C.exec(X);)var ne=Y.index;z=z.slice(0,ne===n?A:ne)}}else if(a.indexOf(fr(C),A)!=A){var ce=z.lastIndexOf(C);ce>-1&&(z=z.slice(0,ce))}return z+g}function TL(a){return a=ct(a),a&&Hl.test(a)?a.replace(ys,Z2):a}var EL=Ia(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),Pm=Ub("toUpperCase");function Dk(a,c,f){return a=ct(a),c=f?n:c,c===n?K2(a)?nI(a):j2(a):a.match(c)||[]}var Nk=We(function(a,c){try{return ur(a,n,c)}catch(f){return wm(f)?f:new Fe(f)}}),_L=Ki(function(a,c){return Ar(c,function(f){f=_i(f),Gi(a,f,Sm(a[f],a))}),a});function PL(a){var c=a==null?0:a.length,f=Me();return a=c?At(a,function(g){if(typeof g[1]!="function")throw new Dr(s);return[f(g[0]),g[1]]}):[],We(function(g){for(var C=-1;++C<c;){var R=a[C];if(ur(R[0],this,g))return ur(R[1],this,g)}})}function xL(a){return ZI(Ur(a,p))}function xm(a){return function(){return a}}function RL(a,c){return a==null||a!==a?c:a}var IL=jb(),OL=jb(!0);function Xn(a){return a}function Rm(a){return mb(typeof a=="function"?a:Ur(a,p))}function ML(a){return vb(Ur(a,p))}function LL(a,c){return yb(a,Ur(c,p))}var AL=We(function(a,c){return function(f){return rc(f,a,c)}}),DL=We(function(a,c){return function(f){return rc(a,f,c)}});function Im(a,c,f){var g=hn(c),C=dd(c,g);f==null&&!(Ft(c)&&(C.length||!g.length))&&(f=c,c=a,a=this,C=dd(c,hn(c)));var R=!(Ft(f)&&"chain"in f)||!!f.chain,O=Qi(a);return Ar(C,function(A){var z=c[A];a[A]=z,O&&(a.prototype[A]=function(){var Y=this.__chain__;if(R||Y){var X=a(this.__wrapped__),ne=X.__actions__=Jn(this.__actions__);return ne.push({func:z,args:arguments,thisArg:a}),X.__chain__=Y,X}return z.apply(a,Ro([this.value()],arguments))})}),a}function NL(){return bn._===this&&(bn._=lI),this}function Om(){}function UL(a){return a=Ve(a),We(function(c){return bb(c,a)})}var FL=lm(At),jL=lm(z1),zL=lm(Lp);function Uk(a){return mm(a)?Ap(_i(a)):g5(a)}function BL(a){return function(c){return a==null?n:_s(a,c)}}var VL=Bb(),$L=Bb(!0);function Mm(){return[]}function Lm(){return!1}function WL(){return{}}function HL(){return""}function GL(){return!0}function qL(a,c){if(a=Ve(a),a<1||a>te)return[];var f=ke,g=In(a,ke);c=Me(c),a-=ke;for(var C=Up(g,c);++f<a;)c(f);return C}function KL(a){return je(a)?At(a,_i):hr(a)?[a]:Jn(rk(ct(a)))}function JL(a){var c=++sI;return ct(a)+c}var QL=vd(function(a,c){return a+c},0),YL=cm("ceil"),XL=vd(function(a,c){return a/c},1),ZL=cm("floor");function eA(a){return a&&a.length?ud(a,Xn,Kp):n}function tA(a,c){return a&&a.length?ud(a,Me(c,2),Kp):n}function nA(a){return $1(a,Xn)}function rA(a,c){return $1(a,Me(c,2))}function iA(a){return a&&a.length?ud(a,Xn,Xp):n}function oA(a,c){return a&&a.length?ud(a,Me(c,2),Xp):n}var sA=vd(function(a,c){return a*c},1),aA=cm("round"),lA=vd(function(a,c){return a-c},0);function cA(a){return a&&a.length?Np(a,Xn):0}function uA(a,c){return a&&a.length?Np(a,Me(c,2)):0}return E.after=MM,E.ary=pk,E.assign=b3,E.assignIn=xk,E.assignInWith=Id,E.assignWith=k3,E.at=S3,E.before=mk,E.bind=Sm,E.bindAll=_L,E.bindKey=gk,E.castArray=WM,E.chain=dk,E.chunk=Z5,E.compact=eO,E.concat=tO,E.cond=PL,E.conforms=xL,E.constant=xm,E.countBy=cM,E.create=C3,E.curry=vk,E.curryRight=yk,E.debounce=bk,E.defaults=w3,E.defaultsDeep=T3,E.defer=LM,E.delay=AM,E.difference=nO,E.differenceBy=rO,E.differenceWith=iO,E.drop=oO,E.dropRight=sO,E.dropRightWhile=aO,E.dropWhile=lO,E.fill=cO,E.filter=dM,E.flatMap=pM,E.flatMapDeep=mM,E.flatMapDepth=gM,E.flatten=ak,E.flattenDeep=uO,E.flattenDepth=dO,E.flip=DM,E.flow=IL,E.flowRight=OL,E.fromPairs=fO,E.functions=O3,E.functionsIn=M3,E.groupBy=vM,E.initial=pO,E.intersection=mO,E.intersectionBy=gO,E.intersectionWith=vO,E.invert=A3,E.invertBy=D3,E.invokeMap=bM,E.iteratee=Rm,E.keyBy=kM,E.keys=hn,E.keysIn=Yn,E.map=Td,E.mapKeys=U3,E.mapValues=F3,E.matches=ML,E.matchesProperty=LL,E.memoize=_d,E.merge=j3,E.mergeWith=Rk,E.method=AL,E.methodOf=DL,E.mixin=Im,E.negate=Pd,E.nthArg=UL,E.omit=z3,E.omitBy=B3,E.once=NM,E.orderBy=SM,E.over=FL,E.overArgs=UM,E.overEvery=jL,E.overSome=zL,E.partial=Cm,E.partialRight=kk,E.partition=CM,E.pick=V3,E.pickBy=Ik,E.property=Uk,E.propertyOf=BL,E.pull=SO,E.pullAll=ck,E.pullAllBy=CO,E.pullAllWith=wO,E.pullAt=TO,E.range=VL,E.rangeRight=$L,E.rearg=FM,E.reject=EM,E.remove=EO,E.rest=jM,E.reverse=bm,E.sampleSize=PM,E.set=W3,E.setWith=H3,E.shuffle=xM,E.slice=_O,E.sortBy=OM,E.sortedUniq=LO,E.sortedUniqBy=AO,E.split=pL,E.spread=zM,E.tail=DO,E.take=NO,E.takeRight=UO,E.takeRightWhile=FO,E.takeWhile=jO,E.tap=eM,E.throttle=BM,E.thru=wd,E.toArray=Ek,E.toPairs=Ok,E.toPairsIn=Mk,E.toPath=KL,E.toPlainObject=Pk,E.transform=G3,E.unary=VM,E.union=zO,E.unionBy=BO,E.unionWith=VO,E.uniq=$O,E.uniqBy=WO,E.uniqWith=HO,E.unset=q3,E.unzip=km,E.unzipWith=uk,E.update=K3,E.updateWith=J3,E.values=La,E.valuesIn=Q3,E.without=GO,E.words=Dk,E.wrap=$M,E.xor=qO,E.xorBy=KO,E.xorWith=JO,E.zip=QO,E.zipObject=YO,E.zipObjectDeep=XO,E.zipWith=ZO,E.entries=Ok,E.entriesIn=Mk,E.extend=xk,E.extendWith=Id,Im(E,E),E.add=QL,E.attempt=Nk,E.camelCase=eL,E.capitalize=Lk,E.ceil=YL,E.clamp=Y3,E.clone=HM,E.cloneDeep=qM,E.cloneDeepWith=KM,E.cloneWith=GM,E.conformsTo=JM,E.deburr=Ak,E.defaultTo=RL,E.divide=XL,E.endsWith=tL,E.eq=ii,E.escape=nL,E.escapeRegExp=rL,E.every=uM,E.find=fM,E.findIndex=ok,E.findKey=E3,E.findLast=hM,E.findLastIndex=sk,E.findLastKey=_3,E.floor=ZL,E.forEach=fk,E.forEachRight=hk,E.forIn=P3,E.forInRight=x3,E.forOwn=R3,E.forOwnRight=I3,E.get=Em,E.gt=QM,E.gte=YM,E.has=L3,E.hasIn=_m,E.head=lk,E.identity=Xn,E.includes=yM,E.indexOf=hO,E.inRange=X3,E.invoke=N3,E.isArguments=Rs,E.isArray=je,E.isArrayBuffer=XM,E.isArrayLike=Qn,E.isArrayLikeObject=qt,E.isBoolean=ZM,E.isBuffer=No,E.isDate=e3,E.isElement=t3,E.isEmpty=n3,E.isEqual=r3,E.isEqualWith=i3,E.isError=wm,E.isFinite=o3,E.isFunction=Qi,E.isInteger=Sk,E.isLength=xd,E.isMap=Ck,E.isMatch=s3,E.isMatchWith=a3,E.isNaN=l3,E.isNative=c3,E.isNil=d3,E.isNull=u3,E.isNumber=wk,E.isObject=Ft,E.isObjectLike=$t,E.isPlainObject=cc,E.isRegExp=Tm,E.isSafeInteger=f3,E.isSet=Tk,E.isString=Rd,E.isSymbol=hr,E.isTypedArray=Ma,E.isUndefined=h3,E.isWeakMap=p3,E.isWeakSet=m3,E.join=yO,E.kebabCase=iL,E.last=jr,E.lastIndexOf=bO,E.lowerCase=oL,E.lowerFirst=sL,E.lt=g3,E.lte=v3,E.max=eA,E.maxBy=tA,E.mean=nA,E.meanBy=rA,E.min=iA,E.minBy=oA,E.stubArray=Mm,E.stubFalse=Lm,E.stubObject=WL,E.stubString=HL,E.stubTrue=GL,E.multiply=sA,E.nth=kO,E.noConflict=NL,E.noop=Om,E.now=Ed,E.pad=aL,E.padEnd=lL,E.padStart=cL,E.parseInt=uL,E.random=Z3,E.reduce=wM,E.reduceRight=TM,E.repeat=dL,E.replace=fL,E.result=$3,E.round=aA,E.runInContext=F,E.sample=_M,E.size=RM,E.snakeCase=hL,E.some=IM,E.sortedIndex=PO,E.sortedIndexBy=xO,E.sortedIndexOf=RO,E.sortedLastIndex=IO,E.sortedLastIndexBy=OO,E.sortedLastIndexOf=MO,E.startCase=mL,E.startsWith=gL,E.subtract=lA,E.sum=cA,E.sumBy=uA,E.template=vL,E.times=qL,E.toFinite=Yi,E.toInteger=Ve,E.toLength=_k,E.toLower=yL,E.toNumber=zr,E.toSafeInteger=y3,E.toString=ct,E.toUpper=bL,E.trim=kL,E.trimEnd=SL,E.trimStart=CL,E.truncate=wL,E.unescape=TL,E.uniqueId=JL,E.upperCase=EL,E.upperFirst=Pm,E.each=fk,E.eachRight=hk,E.first=lk,Im(E,function(){var a={};return Ti(E,function(c,f){dt.call(E.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),E.VERSION=r,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){E[a].placeholder=E}),Ar(["drop","take"],function(a,c){Qe.prototype[a]=function(f){f=f===n?1:sn(Ve(f),0);var g=this.__filtered__&&!c?new Qe(this):this.clone();return g.__filtered__?g.__takeCount__=In(f,g.__takeCount__):g.__views__.push({size:In(f,ke),type:a+(g.__dir__<0?"Right":"")}),g},Qe.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),Ar(["filter","map","takeWhile"],function(a,c){var f=c+1,g=f==me||f==Je;Qe.prototype[a]=function(C){var R=this.clone();return R.__iteratees__.push({iteratee:Me(C,3),type:f}),R.__filtered__=R.__filtered__||g,R}}),Ar(["head","last"],function(a,c){var f="take"+(c?"Right":"");Qe.prototype[a]=function(){return this[f](1).value()[0]}}),Ar(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Qe.prototype[a]=function(){return this.__filtered__?new Qe(this):this[f](1)}}),Qe.prototype.compact=function(){return this.filter(Xn)},Qe.prototype.find=function(a){return this.filter(a).head()},Qe.prototype.findLast=function(a){return this.reverse().find(a)},Qe.prototype.invokeMap=We(function(a,c){return typeof a=="function"?new Qe(this):this.map(function(f){return rc(f,a,c)})}),Qe.prototype.reject=function(a){return this.filter(Pd(Me(a)))},Qe.prototype.slice=function(a,c){a=Ve(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Qe(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==n&&(c=Ve(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Qe.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Qe.prototype.toArray=function(){return this.take(ke)},Ti(Qe.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),g=/^(?:head|last)$/.test(c),C=E[g?"take"+(c=="last"?"Right":""):c],R=g||/^find/.test(c);C&&(E.prototype[c]=function(){var O=this.__wrapped__,A=g?[1]:arguments,z=O instanceof Qe,Y=A[0],X=z||je(O),ne=function(qe){var et=C.apply(E,Ro([qe],A));return g&&ce?et[0]:et};X&&f&&typeof Y=="function"&&Y.length!=1&&(z=X=!1);var ce=this.__chain__,Ce=!!this.__actions__.length,Le=R&&!ce,$e=z&&!Ce;if(!R&&X){O=$e?O:new Qe(this);var Ae=a.apply(O,A);return Ae.__actions__.push({func:wd,args:[ne],thisArg:n}),new Nr(Ae,ce)}return Le&&$e?a.apply(this,A):(Ae=this.thru(ne),Le?g?Ae.value()[0]:Ae.value():Ae)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(a){var c=Ju[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",g=/^(?:pop|shift)$/.test(a);E.prototype[a]=function(){var C=arguments;if(g&&!this.__chain__){var R=this.value();return c.apply(je(R)?R:[],C)}return this[f](function(O){return c.apply(je(O)?O:[],C)})}}),Ti(Qe.prototype,function(a,c){var f=E[c];if(f){var g=f.name+"";dt.call(Pa,g)||(Pa[g]=[]),Pa[g].push({name:c,func:f})}}),Pa[gd(n,v).name]=[{name:"wrapper",func:n}],Qe.prototype.clone=TI,Qe.prototype.reverse=EI,Qe.prototype.value=_I,E.prototype.at=tM,E.prototype.chain=nM,E.prototype.commit=rM,E.prototype.next=iM,E.prototype.plant=sM,E.prototype.reverse=aM,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=lM,E.prototype.first=E.prototype.head,Ql&&(E.prototype[Ql]=oM),E},Ta=rI();Ss?((Ss.exports=Ta)._=Ta,Rp._=Ta):bn._=Ta}).call(uc)})(Eh,Eh.exports);var Y$=Eh.exports;function X$(){const[e,t]=b.useState(null),n=b.useRef(null);return b.useEffect(()=>{const r=setInterval(async()=>{const i=await kp("get_champ_select_data");Y$.isEqual(i,n.current)||(n.current=i,t(i),console.log("ReRendered"))},500);return()=>{clearInterval(r)}},[]),e}function u2(...e){return xP(zy(e))}function Z$({className:e,...t}){return de.jsxs("nav",{className:u2("flex items-center space-x-4 lg:space-x-6",e),...t,children:[de.jsx("a",{href:"/examples/dashboard",className:"text-sm font-medium transition-colors hover:text-primary",children:"Overview"}),de.jsx("a",{href:"/chat-voice",className:"text-sm font-medium text-muted-foreground transition-colors hover:text-primary",children:"Chat Voice"}),de.jsx("a",{href:"/examples/dashboard",className:"text-sm font-medium text-muted-foreground transition-colors hover:text-primary",children:"Products"}),de.jsx("a",{href:"/examples/dashboard",className:"text-sm font-medium text-muted-foreground transition-colors hover:text-primary",children:"Settings"})]})}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_h.apply(this,arguments)}function eW(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function tW(...e){return t=>e.forEach(n=>eW(n,t))}const d2=b.forwardRef((e,t)=>{const{children:n,...r}=e,i=b.Children.toArray(n),o=i.find(rW);if(o){const s=o.props.children,l=i.map(u=>u===o?b.Children.count(s)>1?b.Children.only(null):b.isValidElement(s)?s.props.children:null:u);return b.createElement(x0,_h({},r,{ref:t}),b.isValidElement(s)?b.cloneElement(s,void 0,l):null)}return b.createElement(x0,_h({},r,{ref:t}),n)});d2.displayName="Slot";const x0=b.forwardRef((e,t)=>{const{children:n,...r}=e;return b.isValidElement(n)?b.cloneElement(n,{...iW(r,n.props),ref:t?tW(t,n.ref):n.ref}):b.Children.count(n)>1?b.Children.only(null):null});x0.displayName="SlotClone";const nW=({children:e})=>b.createElement(b.Fragment,null,e);function rW(e){return b.isValidElement(e)&&e.type===nW}function iW(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...l)=>{o(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}const nT=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,rT=zy,oW=(e,t)=>n=>{var r;if(t?.variants==null)return rT(e,n?.class,n?.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(d=>{const h=n?.[d],p=o?.[d];if(h===null)return null;const m=nT(h)||nT(p);return i[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[p,m]=h;return m===void 0||(d[p]=m),d},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:m,...y}=h;return Object.entries(y).every(S=>{let[k,P]=S;return Array.isArray(P)?P.includes({...o,...l}[k]):{...o,...l}[k]===P})?[...d,p,m]:d},[]);return rT(e,s,u,n?.class,n?.className)},sW=oW("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Sl=b.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const s=r?d2:"button";return de.jsx(s,{className:u2(sW({variant:t,size:n,className:e})),ref:o,...i})});Sl.displayName="Button";function aW(){const{user:e}=B4();return de.jsxs("div",{className:"flex items-center justify-between bg-[#101010] px-2 py-4",children:[de.jsx("section",{children:de.jsx("img",{src:"/PlayVoiceLogo.png",alt:"Logo PlayVoice",className:"h-12 w-16"})}),de.jsxs("section",{className:"flex items-center",children:[de.jsx(Sl,{className:"bg-[#1A3472] text-white hover:bg-[#253d75]",children:"Ver Jogos"}),de.jsx(Sl,{variant:"ghost",className:"hover:bg-transparent",children:de.jsx("img",{src:"/games/LOL.png",alt:"League of Legends",className:"w-12 h-12"})}),de.jsx(Sl,{variant:"ghost",className:"hover:bg-transparent",children:de.jsx("img",{src:"/games/ADD.png",alt:"League of Legends",className:"w-12 h-12"})})]}),de.jsx("section",{className:"flex items-center gap-2",children:de.jsxs(m9,{children:[e?.firstName,e?.lastName,e?.username,de.jsx(V9,{})]})})]})}function lW(){const e=X$();return de.jsxs("div",{className:"flex flex-col gap-4",children:[de.jsx(aW,{}),de.jsx(Z$,{className:"mx-6"}),de.jsx("h1",{children:"Campeão Selecionado:"}),de.jsx("pre",{children:JSON.stringify(e,null,2)})]})}function cW(){return de.jsxs("main",{className:"flex w-full min-h-screen items-center justify-center p-8",children:[de.jsxs("div",{className:"flex flex-col w-2/3 items-center justify-center gap-4",children:[de.jsx("img",{src:"/PlayVoiceLogo.png",alt:"Logo PlayVoice",className:"h-[370px] w-[500px]"}),de.jsx("h1",{className:"text-3xl font-bold text-white",children:"Bem-vindo ao PlayVoice"}),de.jsx("p",{className:"text-lg text-[#A5A5A5]",children:"O aplicativo definitivo de comunicação para gamers!"})]}),de.jsxs("div",{className:"flex flex-col w-2/3 items-center justify-center gap-4",children:[de.jsx(xC,{to:"/sign-in",children:de.jsx(Sl,{className:"bg-[#1A3472] text-white py-3 px-8 hover:bg-[#253d75]",children:"Entrar"})}),de.jsx(xC,{to:"sign-up",children:de.jsx(Sl,{className:"bg-[#1A3472] text-white py-3 px-8 hover:bg-[#253d75]",children:"Cadastrar-se"})})]})]})}function uW(){return de.jsx("main",{className:"min-h-[640px] flex items-center justify-center",children:de.jsx(F9,{appearance:{layout:{logoImageUrl:"/PlayVoiceLogo.png",unsafe_disableDevelopmentModeWarnings:!0},elements:{card:"bg-[#101010]",footerItem:"bg-[#101010]",footer:{background:"#101010"},footerAction:"bg-[#101010]",footerActionText:"text-[#ffffff]",footerActionLink:"text-[#ffffff]",socialButtonsBlockButton:"bg-white hover:bg-gray-300",headerTitle:"text-white",formFieldLabel:"text-[#ffffff]",dividerText:"text-[#ffffff]",formButtonPrimary:"bg-[#0F172A] hover:bg-slate-600 text-[#ffffff] text-sm"}},path:"/sign-in",signUpUrl:"/sign-up",signUpForceRedirectUrl:"/dashboard",forceRedirectUrl:"/dashboard"})})}function dW(){return de.jsx("main",{className:"flex min-h-[640px] items-center justify-center",children:de.jsx(j9,{appearance:{layout:{logoImageUrl:"/PlayVoiceLogo.png",unsafe_disableDevelopmentModeWarnings:!0},elements:{card:"bg-[#101010]",footerItem:"bg-[#101010]",footer:{background:"#101010"},footerAction:"bg-[#101010]",footerActionText:"text-[#ffffff]",footerActionLink:"text-[#ffffff]",socialButtonsBlockButton:"bg-white hover:bg-gray-300",headerTitle:"text-white",formFieldLabel:"text-[#ffffff]",dividerText:"text-[#ffffff]",formButtonPrimary:"bg-[#0F172A] hover:bg-slate-400 text-[#ffffff] text-sm"}},path:"/sign-up",signInUrl:"/sign-in",afterSignOutUrl:"/sign-in"})})}const fW="pk_test_Y2xvc2UtZ3J1Yi03MS5jbGVyay5hY2NvdW50cy5kZXYk",hW=kU([{element:de.jsx(I8,{}),children:[{path:"/",element:de.jsx(cW,{})},{path:"/sign-in/*",element:de.jsx(uW,{})},{path:"/sign-up/*",element:de.jsx(dW,{})}]},{element:de.jsx(R8,{}),children:[{path:"/dashboard",element:de.jsx(lW,{})},{path:"/chat-voice",element:de.jsx(V$,{})}]}]);Vg.createRoot(document.getElementById("root")).render(de.jsx(re.StrictMode,{children:de.jsx(iP,{publishableKey:fW,children:de.jsx(BU,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:de.jsx("div",{className:"min-w-screen min-h-screen bg-black",children:de.jsx(RU,{router:hW})})})})}));
