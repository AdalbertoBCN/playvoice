function _b(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Rb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ib={exports:{}},Ou={},Ob={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var al=Symbol.for("react.element"),QE=Symbol.for("react.portal"),YE=Symbol.for("react.fragment"),XE=Symbol.for("react.strict_mode"),ZE=Symbol.for("react.profiler"),ex=Symbol.for("react.provider"),tx=Symbol.for("react.context"),nx=Symbol.for("react.forward_ref"),rx=Symbol.for("react.suspense"),ix=Symbol.for("react.memo"),ox=Symbol.for("react.lazy"),qg=Symbol.iterator;function sx(e){return e===null||typeof e!="object"?null:(e=qg&&e[qg]||e["@@iterator"],typeof e=="function"?e:null)}var Mb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nb=Object.assign,Db={};function Is(e,t,n){this.props=e,this.context=t,this.refs=Db,this.updater=n||Mb}Is.prototype.isReactComponent={};Is.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Is.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lb(){}Lb.prototype=Is.prototype;function Vp(e,t,n){this.props=e,this.context=t,this.refs=Db,this.updater=n||Mb}var Bp=Vp.prototype=new Lb;Bp.constructor=Vp;Nb(Bp,Is.prototype);Bp.isPureReactComponent=!0;var Jg=Array.isArray,Ab=Object.prototype.hasOwnProperty,Wp={current:null},Ub={key:!0,ref:!0,__self:!0,__source:!0};function jb(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Ab.call(t,r)&&!Ub.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:al,type:e,key:o,ref:s,props:i,_owner:Wp.current}}function ax(e,t){return{$$typeof:al,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hp(e){return typeof e=="object"&&e!==null&&e.$$typeof===al}function lx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qg=/\/+/g;function Id(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lx(""+e.key):t.toString(36)}function oc(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case al:case QE:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Id(s,0):r,Jg(i)?(n="",e!=null&&(n=e.replace(Qg,"$&/")+"/"),oc(i,t,n,"",function(c){return c})):i!=null&&(Hp(i)&&(i=ax(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Qg,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Jg(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+Id(o,a);s+=oc(o,t,n,l,i)}else if(l=sx(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+Id(o,a++),s+=oc(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function xl(e,t,n){if(e==null)return e;var r=[],i=0;return oc(e,r,"","",function(o){return t.call(n,o,i++)}),r}function cx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qt={current:null},sc={transition:null},ux={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:sc,ReactCurrentOwner:Wp};we.Children={map:xl,forEach:function(e,t,n){xl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xl(e,function(){t++}),t},toArray:function(e){return xl(e,function(t){return t})||[]},only:function(e){if(!Hp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Is;we.Fragment=YE;we.Profiler=ZE;we.PureComponent=Vp;we.StrictMode=XE;we.Suspense=rx;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ux;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nb({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Wp.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Ab.call(t,l)&&!Ub.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:al,type:e.type,key:i,ref:o,props:r,_owner:s}};we.createContext=function(e){return e={$$typeof:tx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ex,_context:e},e.Consumer=e};we.createElement=jb;we.createFactory=function(e){var t=jb.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:nx,render:e}};we.isValidElement=Hp;we.lazy=function(e){return{$$typeof:ox,_payload:{_status:-1,_result:e},_init:cx}};we.memo=function(e,t){return{$$typeof:ix,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=sc.transition;sc.transition={};try{e()}finally{sc.transition=t}};we.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};we.useCallback=function(e,t){return Qt.current.useCallback(e,t)};we.useContext=function(e){return Qt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return Qt.current.useDeferredValue(e)};we.useEffect=function(e,t){return Qt.current.useEffect(e,t)};we.useId=function(){return Qt.current.useId()};we.useImperativeHandle=function(e,t,n){return Qt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return Qt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return Qt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return Qt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return Qt.current.useReducer(e,t,n)};we.useRef=function(e){return Qt.current.useRef(e)};we.useState=function(e){return Qt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return Qt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return Qt.current.useTransition()};we.version="18.2.0";Ob.exports=we;var f=Ob.exports;const D=Rb(f),$b=_b({__proto__:null,default:D},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx=f,fx=Symbol.for("react.element"),hx=Symbol.for("react.fragment"),px=Object.prototype.hasOwnProperty,mx=dx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gx={key:!0,ref:!0,__self:!0,__source:!0};function Fb(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)px.call(t,r)&&!gx.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:fx,type:e,key:o,ref:s,props:i,_owner:mx.current}}Ou.Fragment=hx;Ou.jsx=Fb;Ou.jsxs=Fb;Ib.exports=Ou;var O=Ib.exports,Gf={},zb={exports:{}},yn={},Vb={exports:{}},Bb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,H){var ce=V.length;V.push(H);e:for(;0<ce;){var fe=ce-1>>>1,se=V[fe];if(0<i(se,H))V[fe]=H,V[ce]=se,ce=fe;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var H=V[0],ce=V.pop();if(ce!==H){V[0]=ce;e:for(var fe=0,se=V.length,ve=se>>>1;fe<ve;){var Je=2*(fe+1)-1,ft=V[Je],$e=Je+1,Ct=V[$e];if(0>i(ft,ce))$e<se&&0>i(Ct,ft)?(V[fe]=Ct,V[$e]=ce,fe=$e):(V[fe]=ft,V[Je]=ce,fe=Je);else if($e<se&&0>i(Ct,ce))V[fe]=Ct,V[$e]=ce,fe=$e;else break e}}return H}function i(V,H){var ce=V.sortIndex-H.sortIndex;return ce!==0?ce:V.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,v=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=V)r(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(c)}}function S(V){if(g=!1,C(V),!v)if(n(l)!==null)v=!0,Ee(w);else{var H=n(c);H!==null&&be(S,H.startTime-V)}}function w(V,H){v=!1,g&&(g=!1,m(k),k=-1),p=!0;var ce=h;try{for(C(H),d=n(l);d!==null&&(!(d.expirationTime>H)||V&&!M());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,h=d.priorityLevel;var se=fe(d.expirationTime<=H);H=e.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),C(H)}else r(l);d=n(l)}if(d!==null)var ve=!0;else{var Je=n(c);Je!==null&&be(S,Je.startTime-H),ve=!1}return ve}finally{d=null,h=ce,p=!1}}var T=!1,E=null,k=-1,P=5,_=-1;function M(){return!(e.unstable_now()-_<P)}function A(){if(E!==null){var V=e.unstable_now();_=V;var H=!0;try{H=E(!0,V)}finally{H?Z():(T=!1,E=null)}}else T=!1}var Z;if(typeof y=="function")Z=function(){y(A)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ge=X.port2;X.port1.onmessage=A,Z=function(){ge.postMessage(null)}}else Z=function(){b(A,0)};function Ee(V){E=V,T||(T=!0,Z())}function be(V,H){k=b(function(){V(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,Ee(w))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var ce=h;h=H;try{return V()}finally{h=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ce=h;h=V;try{return H()}finally{h=ce}},e.unstable_scheduleCallback=function(V,H,ce){var fe=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?fe+ce:fe):ce=fe,V){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ce+se,V={id:u++,callback:H,priorityLevel:V,startTime:ce,expirationTime:se,sortIndex:-1},ce>fe?(V.sortIndex=ce,t(c,V),n(l)===null&&V===n(c)&&(g?(m(k),k=-1):g=!0,be(S,ce-fe))):(V.sortIndex=se,t(l,V),v||p||(v=!0,Ee(w))),V},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(V){var H=h;return function(){var ce=h;h=H;try{return V.apply(this,arguments)}finally{h=ce}}}})(Bb);Vb.exports=Bb;var vx=Vb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb=f,mn=vx;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hb=new Set,Oa={};function mo(e,t){ps(e,t),ps(e+"Capture",t)}function ps(e,t){for(Oa[e]=t,e=0;e<t.length;e++)Hb.add(t[e])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kf=Object.prototype.hasOwnProperty,yx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yg={},Xg={};function bx(e){return Kf.call(Xg,e)?!0:Kf.call(Yg,e)?!1:yx.test(e)?Xg[e]=!0:(Yg[e]=!0,!1)}function kx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sx(e,t,n,r){if(t===null||typeof t>"u"||kx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yt(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ot[e]=new Yt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ot[t]=new Yt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ot[e]=new Yt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ot[e]=new Yt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ot[e]=new Yt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ot[e]=new Yt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ot[e]=new Yt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ot[e]=new Yt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ot[e]=new Yt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gp=/[\-:]([a-z])/g;function Kp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gp,Kp);Ot[t]=new Yt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gp,Kp);Ot[t]=new Yt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gp,Kp);Ot[t]=new Yt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ot[e]=new Yt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ot[e]=new Yt(e,1,!1,e.toLowerCase(),null,!0,!0)});function qp(e,t,n,r){var i=Ot.hasOwnProperty(t)?Ot[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sx(t,n,i,r)&&(n=null),r||i===null?bx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Br=Wb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pl=Symbol.for("react.element"),jo=Symbol.for("react.portal"),$o=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),qf=Symbol.for("react.profiler"),Gb=Symbol.for("react.provider"),Kb=Symbol.for("react.context"),Qp=Symbol.for("react.forward_ref"),Jf=Symbol.for("react.suspense"),Qf=Symbol.for("react.suspense_list"),Yp=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),Zg=Symbol.iterator;function zs(e){return e===null||typeof e!="object"?null:(e=Zg&&e[Zg]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Od;function sa(e){if(Od===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Od=t&&t[1]||""}return`
`+Od+e}var Md=!1;function Nd(e,t){if(!e||Md)return"";Md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{Md=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sa(e):""}function Cx(e){switch(e.tag){case 5:return sa(e.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return e=Nd(e.type,!1),e;case 11:return e=Nd(e.type.render,!1),e;case 1:return e=Nd(e.type,!0),e;default:return""}}function Yf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $o:return"Fragment";case jo:return"Portal";case qf:return"Profiler";case Jp:return"StrictMode";case Jf:return"Suspense";case Qf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kb:return(e.displayName||"Context")+".Consumer";case Gb:return(e._context.displayName||"Context")+".Provider";case Qp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yp:return t=e.displayName||null,t!==null?t:Yf(e.type)||"Memo";case ai:t=e._payload,e=e._init;try{return Yf(e(t))}catch{}}return null}function wx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yf(t);case 8:return t===Jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tx(e){var t=Jb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _l(e){e._valueTracker||(e._valueTracker=Tx(e))}function Qb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jb(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Uc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xf(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ev(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yb(e,t){t=t.checked,t!=null&&qp(e,"checked",t,!1)}function Zf(e,t){Yb(e,t);var n=xi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?eh(e,t.type,n):t.hasOwnProperty("defaultValue")&&eh(e,t.type,xi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function eh(e,t,n){(t!=="number"||Uc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aa=Array.isArray;function Zo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xi(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function th(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(aa(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xi(n)}}function Xb(e,t){var n=xi(t.value),r=xi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function rv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rl,e1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ma(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ex=["Webkit","ms","Moz","O"];Object.keys(pa).forEach(function(e){Ex.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pa[t]=pa[e]})});function t1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||pa.hasOwnProperty(e)&&pa[e]?(""+t).trim():t+"px"}function n1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=t1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var xx=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rh(e,t){if(t){if(xx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function ih(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oh=null;function Xp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sh=null,es=null,ts=null;function iv(e){if(e=ul(e)){if(typeof sh!="function")throw Error(B(280));var t=e.stateNode;t&&(t=Au(t),sh(e.stateNode,e.type,t))}}function r1(e){es?ts?ts.push(e):ts=[e]:es=e}function i1(){if(es){var e=es,t=ts;if(ts=es=null,iv(e),t)for(e=0;e<t.length;e++)iv(t[e])}}function o1(e,t){return e(t)}function s1(){}var Dd=!1;function a1(e,t,n){if(Dd)return e(t,n);Dd=!0;try{return o1(e,t,n)}finally{Dd=!1,(es!==null||ts!==null)&&(s1(),i1())}}function Na(e,t){var n=e.stateNode;if(n===null)return null;var r=Au(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var ah=!1;if(Lr)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){ah=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{ah=!1}function Px(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var ma=!1,jc=null,$c=!1,lh=null,_x={onError:function(e){ma=!0,jc=e}};function Rx(e,t,n,r,i,o,s,a,l){ma=!1,jc=null,Px.apply(_x,arguments)}function Ix(e,t,n,r,i,o,s,a,l){if(Rx.apply(this,arguments),ma){if(ma){var c=jc;ma=!1,jc=null}else throw Error(B(198));$c||($c=!0,lh=c)}}function go(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function l1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ov(e){if(go(e)!==e)throw Error(B(188))}function Ox(e){var t=e.alternate;if(!t){if(t=go(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ov(i),e;if(o===r)return ov(i),t;o=o.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function c1(e){return e=Ox(e),e!==null?u1(e):null}function u1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=u1(e);if(t!==null)return t;e=e.sibling}return null}var d1=mn.unstable_scheduleCallback,sv=mn.unstable_cancelCallback,Mx=mn.unstable_shouldYield,Nx=mn.unstable_requestPaint,ct=mn.unstable_now,Dx=mn.unstable_getCurrentPriorityLevel,Zp=mn.unstable_ImmediatePriority,f1=mn.unstable_UserBlockingPriority,Fc=mn.unstable_NormalPriority,Lx=mn.unstable_LowPriority,h1=mn.unstable_IdlePriority,Mu=null,dr=null;function Ax(e){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Mu,e,void 0,(e.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:$x,Ux=Math.log,jx=Math.LN2;function $x(e){return e>>>=0,e===0?32:31-(Ux(e)/jx|0)|0}var Il=64,Ol=4194304;function la(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=la(a):(o&=s,o!==0&&(r=la(o)))}else s=n&~i,s!==0?r=la(s):o!==0&&(r=la(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Gn(t),i=1<<n,r|=e[n],t&=~i;return r}function Fx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Gn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=Fx(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function ch(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function p1(){var e=Il;return Il<<=1,!(Il&4194240)&&(Il=64),e}function Ld(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ll(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Gn(t),e[t]=n}function Vx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Gn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function em(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Gn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Me=0;function m1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var g1,tm,v1,y1,b1,uh=!1,Ml=[],gi=null,vi=null,yi=null,Da=new Map,La=new Map,ci=[],Bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function av(e,t){switch(e){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(t.pointerId)}}function Bs(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=ul(t),t!==null&&tm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Wx(e,t,n,r,i){switch(t){case"focusin":return gi=Bs(gi,e,t,n,r,i),!0;case"dragenter":return vi=Bs(vi,e,t,n,r,i),!0;case"mouseover":return yi=Bs(yi,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Da.set(o,Bs(Da.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,La.set(o,Bs(La.get(o)||null,e,t,n,r,i)),!0}return!1}function k1(e){var t=Hi(e.target);if(t!==null){var n=go(t);if(n!==null){if(t=n.tag,t===13){if(t=l1(n),t!==null){e.blockedOn=t,b1(e.priority,function(){v1(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ac(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);oh=r,n.target.dispatchEvent(r),oh=null}else return t=ul(n),t!==null&&tm(t),e.blockedOn=n,!1;t.shift()}return!0}function lv(e,t,n){ac(e)&&n.delete(t)}function Hx(){uh=!1,gi!==null&&ac(gi)&&(gi=null),vi!==null&&ac(vi)&&(vi=null),yi!==null&&ac(yi)&&(yi=null),Da.forEach(lv),La.forEach(lv)}function Ws(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,Hx)))}function Aa(e){function t(i){return Ws(i,e)}if(0<Ml.length){Ws(Ml[0],e);for(var n=1;n<Ml.length;n++){var r=Ml[n];r.blockedOn===e&&(r.blockedOn=null)}}for(gi!==null&&Ws(gi,e),vi!==null&&Ws(vi,e),yi!==null&&Ws(yi,e),Da.forEach(t),La.forEach(t),n=0;n<ci.length;n++)r=ci[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ci.length&&(n=ci[0],n.blockedOn===null);)k1(n),n.blockedOn===null&&ci.shift()}var ns=Br.ReactCurrentBatchConfig,Vc=!0;function Gx(e,t,n,r){var i=Me,o=ns.transition;ns.transition=null;try{Me=1,nm(e,t,n,r)}finally{Me=i,ns.transition=o}}function Kx(e,t,n,r){var i=Me,o=ns.transition;ns.transition=null;try{Me=4,nm(e,t,n,r)}finally{Me=i,ns.transition=o}}function nm(e,t,n,r){if(Vc){var i=dh(e,t,n,r);if(i===null)Hd(e,t,r,Bc,n),av(e,r);else if(Wx(i,e,t,n,r))r.stopPropagation();else if(av(e,r),t&4&&-1<Bx.indexOf(e)){for(;i!==null;){var o=ul(i);if(o!==null&&g1(o),o=dh(e,t,n,r),o===null&&Hd(e,t,r,Bc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Hd(e,t,r,null,n)}}var Bc=null;function dh(e,t,n,r){if(Bc=null,e=Xp(r),e=Hi(e),e!==null)if(t=go(e),t===null)e=null;else if(n=t.tag,n===13){if(e=l1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bc=e,null}function S1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dx()){case Zp:return 1;case f1:return 4;case Fc:case Lx:return 16;case h1:return 536870912;default:return 16}default:return 16}}var di=null,rm=null,lc=null;function C1(){if(lc)return lc;var e,t=rm,n=t.length,r,i="value"in di?di.value:di.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return lc=i.slice(e,1<r?1-r:void 0)}function cc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nl(){return!0}function cv(){return!1}function bn(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Nl:cv,this.isPropagationStopped=cv,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),t}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},im=bn(Os),cl=Ze({},Os,{view:0,detail:0}),qx=bn(cl),Ad,Ud,Hs,Nu=Ze({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:om,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hs&&(Hs&&e.type==="mousemove"?(Ad=e.screenX-Hs.screenX,Ud=e.screenY-Hs.screenY):Ud=Ad=0,Hs=e),Ad)},movementY:function(e){return"movementY"in e?e.movementY:Ud}}),uv=bn(Nu),Jx=Ze({},Nu,{dataTransfer:0}),Qx=bn(Jx),Yx=Ze({},cl,{relatedTarget:0}),jd=bn(Yx),Xx=Ze({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),Zx=bn(Xx),eP=Ze({},Os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tP=bn(eP),nP=Ze({},Os,{data:0}),dv=bn(nP),rP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oP[e])?!!t[e]:!1}function om(){return sP}var aP=Ze({},cl,{key:function(e){if(e.key){var t=rP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:om,charCode:function(e){return e.type==="keypress"?cc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lP=bn(aP),cP=Ze({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fv=bn(cP),uP=Ze({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:om}),dP=bn(uP),fP=Ze({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),hP=bn(fP),pP=Ze({},Nu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mP=bn(pP),gP=[9,13,27,32],sm=Lr&&"CompositionEvent"in window,ga=null;Lr&&"documentMode"in document&&(ga=document.documentMode);var vP=Lr&&"TextEvent"in window&&!ga,w1=Lr&&(!sm||ga&&8<ga&&11>=ga),hv=String.fromCharCode(32),pv=!1;function T1(e,t){switch(e){case"keyup":return gP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fo=!1;function yP(e,t){switch(e){case"compositionend":return E1(t);case"keypress":return t.which!==32?null:(pv=!0,hv);case"textInput":return e=t.data,e===hv&&pv?null:e;default:return null}}function bP(e,t){if(Fo)return e==="compositionend"||!sm&&T1(e,t)?(e=C1(),lc=rm=di=null,Fo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return w1&&t.locale!=="ko"?null:t.data;default:return null}}var kP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kP[e.type]:t==="textarea"}function x1(e,t,n,r){r1(r),t=Wc(t,"onChange"),0<t.length&&(n=new im("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var va=null,Ua=null;function SP(e){U1(e,0)}function Du(e){var t=Bo(e);if(Qb(t))return e}function CP(e,t){if(e==="change")return t}var P1=!1;if(Lr){var $d;if(Lr){var Fd="oninput"in document;if(!Fd){var gv=document.createElement("div");gv.setAttribute("oninput","return;"),Fd=typeof gv.oninput=="function"}$d=Fd}else $d=!1;P1=$d&&(!document.documentMode||9<document.documentMode)}function vv(){va&&(va.detachEvent("onpropertychange",_1),Ua=va=null)}function _1(e){if(e.propertyName==="value"&&Du(Ua)){var t=[];x1(t,Ua,e,Xp(e)),a1(SP,t)}}function wP(e,t,n){e==="focusin"?(vv(),va=t,Ua=n,va.attachEvent("onpropertychange",_1)):e==="focusout"&&vv()}function TP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Du(Ua)}function EP(e,t){if(e==="click")return Du(t)}function xP(e,t){if(e==="input"||e==="change")return Du(t)}function PP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qn=typeof Object.is=="function"?Object.is:PP;function ja(e,t){if(qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Kf.call(t,i)||!qn(e[i],t[i]))return!1}return!0}function yv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bv(e,t){var n=yv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yv(n)}}function R1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?R1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function I1(){for(var e=window,t=Uc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Uc(e.document)}return t}function am(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _P(e){var t=I1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&R1(n.ownerDocument.documentElement,n)){if(r!==null&&am(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=bv(n,o);var s=bv(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RP=Lr&&"documentMode"in document&&11>=document.documentMode,zo=null,fh=null,ya=null,hh=!1;function kv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hh||zo==null||zo!==Uc(r)||(r=zo,"selectionStart"in r&&am(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ya&&ja(ya,r)||(ya=r,r=Wc(fh,"onSelect"),0<r.length&&(t=new im("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zo)))}function Dl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vo={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},zd={},O1={};Lr&&(O1=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Lu(e){if(zd[e])return zd[e];if(!Vo[e])return e;var t=Vo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in O1)return zd[e]=t[n];return e}var M1=Lu("animationend"),N1=Lu("animationiteration"),D1=Lu("animationstart"),L1=Lu("transitionend"),A1=new Map,Sv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){A1.set(e,t),mo(t,[e])}for(var Vd=0;Vd<Sv.length;Vd++){var Bd=Sv[Vd],IP=Bd.toLowerCase(),OP=Bd[0].toUpperCase()+Bd.slice(1);Mi(IP,"on"+OP)}Mi(M1,"onAnimationEnd");Mi(N1,"onAnimationIteration");Mi(D1,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(L1,"onTransitionEnd");ps("onMouseEnter",["mouseout","mouseover"]);ps("onMouseLeave",["mouseout","mouseover"]);ps("onPointerEnter",["pointerout","pointerover"]);ps("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function Cv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ix(r,t,void 0,e),e.currentTarget=null}function U1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Cv(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Cv(i,a,c),o=l}}}if($c)throw e=lh,$c=!1,lh=null,e}function Ve(e,t){var n=t[yh];n===void 0&&(n=t[yh]=new Set);var r=e+"__bubble";n.has(r)||(j1(t,e,2,!1),n.add(r))}function Wd(e,t,n){var r=0;t&&(r|=4),j1(n,e,r,t)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function $a(e){if(!e[Ll]){e[Ll]=!0,Hb.forEach(function(n){n!=="selectionchange"&&(MP.has(n)||Wd(n,!1,e),Wd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ll]||(t[Ll]=!0,Wd("selectionchange",!1,t))}}function j1(e,t,n,r){switch(S1(t)){case 1:var i=Gx;break;case 4:i=Kx;break;default:i=nm}n=i.bind(null,t,n,e),i=void 0,!ah||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hd(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Hi(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}a1(function(){var c=o,u=Xp(n),d=[];e:{var h=A1.get(e);if(h!==void 0){var p=im,v=e;switch(e){case"keypress":if(cc(n)===0)break e;case"keydown":case"keyup":p=lP;break;case"focusin":v="focus",p=jd;break;case"focusout":v="blur",p=jd;break;case"beforeblur":case"afterblur":p=jd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=uv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Qx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=dP;break;case M1:case N1:case D1:p=Zx;break;case L1:p=hP;break;case"scroll":p=qx;break;case"wheel":p=mP;break;case"copy":case"cut":case"paste":p=tP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fv}var g=(t&4)!==0,b=!g&&e==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var y=c,C;y!==null;){C=y;var S=C.stateNode;if(C.tag===5&&S!==null&&(C=S,m!==null&&(S=Na(y,m),S!=null&&g.push(Fa(y,S,C)))),b)break;y=y.return}0<g.length&&(h=new p(h,v,null,n,u),d.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==oh&&(v=n.relatedTarget||n.fromElement)&&(Hi(v)||v[Ar]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=c,v=v?Hi(v):null,v!==null&&(b=go(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(g=uv,S="onMouseLeave",m="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=fv,S="onPointerLeave",m="onPointerEnter",y="pointer"),b=p==null?h:Bo(p),C=v==null?h:Bo(v),h=new g(S,y+"leave",p,n,u),h.target=b,h.relatedTarget=C,S=null,Hi(u)===c&&(g=new g(m,y+"enter",v,n,u),g.target=C,g.relatedTarget=b,S=g),b=S,p&&v)t:{for(g=p,m=v,y=0,C=g;C;C=To(C))y++;for(C=0,S=m;S;S=To(S))C++;for(;0<y-C;)g=To(g),y--;for(;0<C-y;)m=To(m),C--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=To(g),m=To(m)}g=null}else g=null;p!==null&&wv(d,h,p,g,!1),v!==null&&b!==null&&wv(d,b,v,g,!0)}}e:{if(h=c?Bo(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=CP;else if(mv(h))if(P1)w=xP;else{w=TP;var T=wP}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=EP);if(w&&(w=w(e,c))){x1(d,w,n,u);break e}T&&T(e,h,c),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&eh(h,"number",h.value)}switch(T=c?Bo(c):window,e){case"focusin":(mv(T)||T.contentEditable==="true")&&(zo=T,fh=c,ya=null);break;case"focusout":ya=fh=zo=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,kv(d,n,u);break;case"selectionchange":if(RP)break;case"keydown":case"keyup":kv(d,n,u)}var E;if(sm)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Fo?T1(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(w1&&n.locale!=="ko"&&(Fo||k!=="onCompositionStart"?k==="onCompositionEnd"&&Fo&&(E=C1()):(di=u,rm="value"in di?di.value:di.textContent,Fo=!0)),T=Wc(c,k),0<T.length&&(k=new dv(k,e,null,n,u),d.push({event:k,listeners:T}),E?k.data=E:(E=E1(n),E!==null&&(k.data=E)))),(E=vP?yP(e,n):bP(e,n))&&(c=Wc(c,"onBeforeInput"),0<c.length&&(u=new dv("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}U1(d,t)})}function Fa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wc(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Na(e,n),o!=null&&r.unshift(Fa(e,o,i)),o=Na(e,t),o!=null&&r.push(Fa(e,o,i))),e=e.return}return r}function To(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wv(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Na(n,o),l!=null&&s.unshift(Fa(n,l,a))):i||(l=Na(n,o),l!=null&&s.push(Fa(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var NP=/\r\n?/g,DP=/\u0000|\uFFFD/g;function Tv(e){return(typeof e=="string"?e:""+e).replace(NP,`
`).replace(DP,"")}function Al(e,t,n){if(t=Tv(t),Tv(e)!==t&&n)throw Error(B(425))}function Hc(){}var ph=null,mh=null;function gh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,LP=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,AP=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(e){return Ev.resolve(null).then(e).catch(UP)}:vh;function UP(e){setTimeout(function(){throw e})}function Gd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Aa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Aa(t)}function bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),lr="__reactFiber$"+Ms,za="__reactProps$"+Ms,Ar="__reactContainer$"+Ms,yh="__reactEvents$"+Ms,jP="__reactListeners$"+Ms,$P="__reactHandles$"+Ms;function Hi(e){var t=e[lr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ar]||n[lr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xv(e);e!==null;){if(n=e[lr])return n;e=xv(e)}return t}e=n,n=e.parentNode}return null}function ul(e){return e=e[lr]||e[Ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function Au(e){return e[za]||null}var bh=[],Wo=-1;function Ni(e){return{current:e}}function Be(e){0>Wo||(e.current=bh[Wo],bh[Wo]=null,Wo--)}function je(e,t){Wo++,bh[Wo]=e.current,e.current=t}var Pi={},Vt=Ni(Pi),rn=Ni(!1),ro=Pi;function ms(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function on(e){return e=e.childContextTypes,e!=null}function Gc(){Be(rn),Be(Vt)}function Pv(e,t,n){if(Vt.current!==Pi)throw Error(B(168));je(Vt,t),je(rn,n)}function $1(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(B(108,wx(e)||"Unknown",i));return Ze({},n,r)}function Kc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,ro=Vt.current,je(Vt,e),je(rn,rn.current),!0}function _v(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=$1(e,t,ro),r.__reactInternalMemoizedMergedChildContext=e,Be(rn),Be(Vt),je(Vt,e)):Be(rn),je(rn,n)}var Tr=null,Uu=!1,Kd=!1;function F1(e){Tr===null?Tr=[e]:Tr.push(e)}function FP(e){Uu=!0,F1(e)}function Di(){if(!Kd&&Tr!==null){Kd=!0;var e=0,t=Me;try{var n=Tr;for(Me=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Tr=null,Uu=!1}catch(i){throw Tr!==null&&(Tr=Tr.slice(e+1)),d1(Zp,Di),i}finally{Me=t,Kd=!1}}return null}var Ho=[],Go=0,qc=null,Jc=0,kn=[],Sn=0,io=null,_r=1,Rr="";function Fi(e,t){Ho[Go++]=Jc,Ho[Go++]=qc,qc=e,Jc=t}function z1(e,t,n){kn[Sn++]=_r,kn[Sn++]=Rr,kn[Sn++]=io,io=e;var r=_r;e=Rr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var o=32-Gn(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,_r=1<<32-Gn(t)+i|n<<i|r,Rr=o+e}else _r=1<<o|n<<i|r,Rr=e}function lm(e){e.return!==null&&(Fi(e,1),z1(e,1,0))}function cm(e){for(;e===qc;)qc=Ho[--Go],Ho[Go]=null,Jc=Ho[--Go],Ho[Go]=null;for(;e===io;)io=kn[--Sn],kn[Sn]=null,Rr=kn[--Sn],kn[Sn]=null,_r=kn[--Sn],kn[Sn]=null}var fn=null,un=null,Ke=!1,Vn=null;function V1(e,t){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Rv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fn=e,un=bi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fn=e,un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=io!==null?{id:_r,overflow:Rr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,fn=e,un=null,!0):!1;default:return!1}}function kh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sh(e){if(Ke){var t=un;if(t){var n=t;if(!Rv(e,t)){if(kh(e))throw Error(B(418));t=bi(n.nextSibling);var r=fn;t&&Rv(e,t)?V1(r,n):(e.flags=e.flags&-4097|2,Ke=!1,fn=e)}}else{if(kh(e))throw Error(B(418));e.flags=e.flags&-4097|2,Ke=!1,fn=e}}}function Iv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fn=e}function Ul(e){if(e!==fn)return!1;if(!Ke)return Iv(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gh(e.type,e.memoizedProps)),t&&(t=un)){if(kh(e))throw B1(),Error(B(418));for(;t;)V1(e,t),t=bi(t.nextSibling)}if(Iv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){un=bi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}un=null}}else un=fn?bi(e.stateNode.nextSibling):null;return!0}function B1(){for(var e=un;e;)e=bi(e.nextSibling)}function gs(){un=fn=null,Ke=!1}function um(e){Vn===null?Vn=[e]:Vn.push(e)}var zP=Br.ReactCurrentBatchConfig;function jn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Qc=Ni(null),Yc=null,Ko=null,dm=null;function fm(){dm=Ko=Yc=null}function hm(e){var t=Qc.current;Be(Qc),e._currentValue=t}function Ch(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rs(e,t){Yc=e,dm=Ko=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nn=!0),e.firstContext=null)}function In(e){var t=e._currentValue;if(dm!==e)if(e={context:e,memoizedValue:t,next:null},Ko===null){if(Yc===null)throw Error(B(308));Ko=e,Yc.dependencies={lanes:0,firstContext:e}}else Ko=Ko.next=e;return t}var Gi=null;function pm(e){Gi===null?Gi=[e]:Gi.push(e)}function W1(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,pm(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ur(e,r)}function Ur(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var li=!1;function mm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ir(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ki(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ur(e,n)}return i=r.interleaved,i===null?(t.next=t,pm(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ur(e,n)}function uc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,em(e,n)}}function Ov(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xc(e,t,n,r){var i=e.updateQueue;li=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,g=a;switch(h=t,p=n,g.tag){case 1:if(v=g.payload,typeof v=="function"){d=v.call(p,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(p,d,h):v,h==null)break e;d=Ze({},d,h);break e;case 2:li=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);so|=s,e.lanes=s,e.memoizedState=d}}function Mv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var G1=new Wb.Component().refs;function wh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ju={isMounted:function(e){return(e=e._reactInternals)?go(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qt(),i=Ci(e),o=Ir(r,i);o.payload=t,n!=null&&(o.callback=n),t=ki(e,o,i),t!==null&&(Kn(t,e,i,r),uc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qt(),i=Ci(e),o=Ir(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ki(e,o,i),t!==null&&(Kn(t,e,i,r),uc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qt(),r=Ci(e),i=Ir(n,r);i.tag=2,t!=null&&(i.callback=t),t=ki(e,i,r),t!==null&&(Kn(t,e,r,n),uc(t,e,r))}};function Nv(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!ja(n,r)||!ja(i,o):!0}function K1(e,t,n){var r=!1,i=Pi,o=t.contextType;return typeof o=="object"&&o!==null?o=In(o):(i=on(t)?ro:Vt.current,r=t.contextTypes,o=(r=r!=null)?ms(e,i):Pi),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ju,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Dv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ju.enqueueReplaceState(t,t.state,null)}function Th(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=G1,mm(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=In(o):(o=on(t)?ro:Vt.current,i.context=ms(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(wh(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ju.enqueueReplaceState(i,i.state,null),Xc(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Gs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;a===G1&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function jl(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lv(e){var t=e._init;return t(e._payload)}function q1(e){function t(m,y){if(e){var C=m.deletions;C===null?(m.deletions=[y],m.flags|=16):C.push(y)}}function n(m,y){if(!e)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=wi(m,y),m.index=0,m.sibling=null,m}function o(m,y,C){return m.index=C,e?(C=m.alternate,C!==null?(C=C.index,C<y?(m.flags|=2,y):C):(m.flags|=2,y)):(m.flags|=1048576,y)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,y,C,S){return y===null||y.tag!==6?(y=ef(C,m.mode,S),y.return=m,y):(y=i(y,C),y.return=m,y)}function l(m,y,C,S){var w=C.type;return w===$o?u(m,y,C.props.children,S,C.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ai&&Lv(w)===y.type)?(S=i(y,C.props),S.ref=Gs(m,y,C),S.return=m,S):(S=gc(C.type,C.key,C.props,null,m.mode,S),S.ref=Gs(m,y,C),S.return=m,S)}function c(m,y,C,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=tf(C,m.mode,S),y.return=m,y):(y=i(y,C.children||[]),y.return=m,y)}function u(m,y,C,S,w){return y===null||y.tag!==7?(y=Xi(C,m.mode,S,w),y.return=m,y):(y=i(y,C),y.return=m,y)}function d(m,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ef(""+y,m.mode,C),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pl:return C=gc(y.type,y.key,y.props,null,m.mode,C),C.ref=Gs(m,null,y),C.return=m,C;case jo:return y=tf(y,m.mode,C),y.return=m,y;case ai:var S=y._init;return d(m,S(y._payload),C)}if(aa(y)||zs(y))return y=Xi(y,m.mode,C,null),y.return=m,y;jl(m,y)}return null}function h(m,y,C,S){var w=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return w!==null?null:a(m,y,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Pl:return C.key===w?l(m,y,C,S):null;case jo:return C.key===w?c(m,y,C,S):null;case ai:return w=C._init,h(m,y,w(C._payload),S)}if(aa(C)||zs(C))return w!==null?null:u(m,y,C,S,null);jl(m,C)}return null}function p(m,y,C,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(C)||null,a(y,m,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pl:return m=m.get(S.key===null?C:S.key)||null,l(y,m,S,w);case jo:return m=m.get(S.key===null?C:S.key)||null,c(y,m,S,w);case ai:var T=S._init;return p(m,y,C,T(S._payload),w)}if(aa(S)||zs(S))return m=m.get(C)||null,u(y,m,S,w,null);jl(y,S)}return null}function v(m,y,C,S){for(var w=null,T=null,E=y,k=y=0,P=null;E!==null&&k<C.length;k++){E.index>k?(P=E,E=null):P=E.sibling;var _=h(m,E,C[k],S);if(_===null){E===null&&(E=P);break}e&&E&&_.alternate===null&&t(m,E),y=o(_,y,k),T===null?w=_:T.sibling=_,T=_,E=P}if(k===C.length)return n(m,E),Ke&&Fi(m,k),w;if(E===null){for(;k<C.length;k++)E=d(m,C[k],S),E!==null&&(y=o(E,y,k),T===null?w=E:T.sibling=E,T=E);return Ke&&Fi(m,k),w}for(E=r(m,E);k<C.length;k++)P=p(E,m,k,C[k],S),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?k:P.key),y=o(P,y,k),T===null?w=P:T.sibling=P,T=P);return e&&E.forEach(function(M){return t(m,M)}),Ke&&Fi(m,k),w}function g(m,y,C,S){var w=zs(C);if(typeof w!="function")throw Error(B(150));if(C=w.call(C),C==null)throw Error(B(151));for(var T=w=null,E=y,k=y=0,P=null,_=C.next();E!==null&&!_.done;k++,_=C.next()){E.index>k?(P=E,E=null):P=E.sibling;var M=h(m,E,_.value,S);if(M===null){E===null&&(E=P);break}e&&E&&M.alternate===null&&t(m,E),y=o(M,y,k),T===null?w=M:T.sibling=M,T=M,E=P}if(_.done)return n(m,E),Ke&&Fi(m,k),w;if(E===null){for(;!_.done;k++,_=C.next())_=d(m,_.value,S),_!==null&&(y=o(_,y,k),T===null?w=_:T.sibling=_,T=_);return Ke&&Fi(m,k),w}for(E=r(m,E);!_.done;k++,_=C.next())_=p(E,m,k,_.value,S),_!==null&&(e&&_.alternate!==null&&E.delete(_.key===null?k:_.key),y=o(_,y,k),T===null?w=_:T.sibling=_,T=_);return e&&E.forEach(function(A){return t(m,A)}),Ke&&Fi(m,k),w}function b(m,y,C,S){if(typeof C=="object"&&C!==null&&C.type===$o&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Pl:e:{for(var w=C.key,T=y;T!==null;){if(T.key===w){if(w=C.type,w===$o){if(T.tag===7){n(m,T.sibling),y=i(T,C.props.children),y.return=m,m=y;break e}}else if(T.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ai&&Lv(w)===T.type){n(m,T.sibling),y=i(T,C.props),y.ref=Gs(m,T,C),y.return=m,m=y;break e}n(m,T);break}else t(m,T);T=T.sibling}C.type===$o?(y=Xi(C.props.children,m.mode,S,C.key),y.return=m,m=y):(S=gc(C.type,C.key,C.props,null,m.mode,S),S.ref=Gs(m,y,C),S.return=m,m=S)}return s(m);case jo:e:{for(T=C.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(m,y.sibling),y=i(y,C.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else t(m,y);y=y.sibling}y=tf(C,m.mode,S),y.return=m,m=y}return s(m);case ai:return T=C._init,b(m,y,T(C._payload),S)}if(aa(C))return v(m,y,C,S);if(zs(C))return g(m,y,C,S);jl(m,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,C),y.return=m,m=y):(n(m,y),y=ef(C,m.mode,S),y.return=m,m=y),s(m)):n(m,y)}return b}var vs=q1(!0),J1=q1(!1),dl={},fr=Ni(dl),Va=Ni(dl),Ba=Ni(dl);function Ki(e){if(e===dl)throw Error(B(174));return e}function gm(e,t){switch(je(Ba,t),je(Va,e),je(fr,dl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nh(t,e)}Be(fr),je(fr,t)}function ys(){Be(fr),Be(Va),Be(Ba)}function Q1(e){Ki(Ba.current);var t=Ki(fr.current),n=nh(t,e.type);t!==n&&(je(Va,e),je(fr,n))}function vm(e){Va.current===e&&(Be(fr),Be(Va))}var Ye=Ni(0);function Zc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qd=[];function ym(){for(var e=0;e<qd.length;e++)qd[e]._workInProgressVersionPrimary=null;qd.length=0}var dc=Br.ReactCurrentDispatcher,Jd=Br.ReactCurrentBatchConfig,oo=0,Xe=null,bt=null,Tt=null,eu=!1,ba=!1,Wa=0,VP=0;function Lt(){throw Error(B(321))}function bm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qn(e[n],t[n]))return!1;return!0}function km(e,t,n,r,i,o){if(oo=o,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dc.current=e===null||e.memoizedState===null?GP:KP,e=n(r,i),ba){o=0;do{if(ba=!1,Wa=0,25<=o)throw Error(B(301));o+=1,Tt=bt=null,t.updateQueue=null,dc.current=qP,e=n(r,i)}while(ba)}if(dc.current=tu,t=bt!==null&&bt.next!==null,oo=0,Tt=bt=Xe=null,eu=!1,t)throw Error(B(300));return e}function Sm(){var e=Wa!==0;return Wa=0,e}function ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Xe.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function On(){if(bt===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Tt===null?Xe.memoizedState:Tt.next;if(t!==null)Tt=t,bt=e;else{if(e===null)throw Error(B(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Tt===null?Xe.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function Ha(e,t){return typeof t=="function"?t(e):t}function Qd(e){var t=On(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=bt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((oo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Xe.lanes|=u,so|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,qn(r,t.memoizedState)||(nn=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Xe.lanes|=o,so|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yd(e){var t=On(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);qn(o,t.memoizedState)||(nn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Y1(){}function X1(e,t){var n=Xe,r=On(),i=t(),o=!qn(r.memoizedState,i);if(o&&(r.memoizedState=i,nn=!0),r=r.queue,Cm(tk.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Ga(9,ek.bind(null,n,r,i,t),void 0,null),Et===null)throw Error(B(349));oo&30||Z1(n,t,i)}return i}function Z1(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ek(e,t,n,r){t.value=n,t.getSnapshot=r,nk(t)&&rk(e)}function tk(e,t,n){return n(function(){nk(t)&&rk(e)})}function nk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qn(e,n)}catch{return!0}}function rk(e){var t=Ur(e,1);t!==null&&Kn(t,e,1,-1)}function Av(e){var t=ir();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t.queue=e,e=e.dispatch=HP.bind(null,Xe,e),[t.memoizedState,e]}function Ga(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ik(){return On().memoizedState}function fc(e,t,n,r){var i=ir();Xe.flags|=e,i.memoizedState=Ga(1|t,n,void 0,r===void 0?null:r)}function $u(e,t,n,r){var i=On();r=r===void 0?null:r;var o=void 0;if(bt!==null){var s=bt.memoizedState;if(o=s.destroy,r!==null&&bm(r,s.deps)){i.memoizedState=Ga(t,n,o,r);return}}Xe.flags|=e,i.memoizedState=Ga(1|t,n,o,r)}function Uv(e,t){return fc(8390656,8,e,t)}function Cm(e,t){return $u(2048,8,e,t)}function ok(e,t){return $u(4,2,e,t)}function sk(e,t){return $u(4,4,e,t)}function ak(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lk(e,t,n){return n=n!=null?n.concat([e]):null,$u(4,4,ak.bind(null,t,e),n)}function wm(){}function ck(e,t){var n=On();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uk(e,t){var n=On();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&bm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dk(e,t,n){return oo&21?(qn(n,t)||(n=p1(),Xe.lanes|=n,so|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nn=!0),e.memoizedState=n)}function BP(e,t){var n=Me;Me=n!==0&&4>n?n:4,e(!0);var r=Jd.transition;Jd.transition={};try{e(!1),t()}finally{Me=n,Jd.transition=r}}function fk(){return On().memoizedState}function WP(e,t,n){var r=Ci(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hk(e))pk(t,n);else if(n=W1(e,t,n,r),n!==null){var i=qt();Kn(n,e,r,i),mk(n,t,r)}}function HP(e,t,n){var r=Ci(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hk(e))pk(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,qn(a,s)){var l=t.interleaved;l===null?(i.next=i,pm(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=W1(e,t,i,r),n!==null&&(i=qt(),Kn(n,e,r,i),mk(n,t,r))}}function hk(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function pk(e,t){ba=eu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,em(e,n)}}var tu={readContext:In,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},GP={readContext:In,useCallback:function(e,t){return ir().memoizedState=[e,t===void 0?null:t],e},useContext:In,useEffect:Uv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,fc(4194308,4,ak.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fc(4194308,4,e,t)},useInsertionEffect:function(e,t){return fc(4,2,e,t)},useMemo:function(e,t){var n=ir();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ir();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=WP.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=ir();return e={current:e},t.memoizedState=e},useState:Av,useDebugValue:wm,useDeferredValue:function(e){return ir().memoizedState=e},useTransition:function(){var e=Av(!1),t=e[0];return e=BP.bind(null,e[1]),ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,i=ir();if(Ke){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),Et===null)throw Error(B(349));oo&30||Z1(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uv(tk.bind(null,r,o,e),[e]),r.flags|=2048,Ga(9,ek.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ir(),t=Et.identifierPrefix;if(Ke){var n=Rr,r=_r;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wa++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},KP={readContext:In,useCallback:ck,useContext:In,useEffect:Cm,useImperativeHandle:lk,useInsertionEffect:ok,useLayoutEffect:sk,useMemo:uk,useReducer:Qd,useRef:ik,useState:function(){return Qd(Ha)},useDebugValue:wm,useDeferredValue:function(e){var t=On();return dk(t,bt.memoizedState,e)},useTransition:function(){var e=Qd(Ha)[0],t=On().memoizedState;return[e,t]},useMutableSource:Y1,useSyncExternalStore:X1,useId:fk,unstable_isNewReconciler:!1},qP={readContext:In,useCallback:ck,useContext:In,useEffect:Cm,useImperativeHandle:lk,useInsertionEffect:ok,useLayoutEffect:sk,useMemo:uk,useReducer:Yd,useRef:ik,useState:function(){return Yd(Ha)},useDebugValue:wm,useDeferredValue:function(e){var t=On();return bt===null?t.memoizedState=e:dk(t,bt.memoizedState,e)},useTransition:function(){var e=Yd(Ha)[0],t=On().memoizedState;return[e,t]},useMutableSource:Y1,useSyncExternalStore:X1,useId:fk,unstable_isNewReconciler:!1};function bs(e,t){try{var n="",r=t;do n+=Cx(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Xd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Eh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var JP=typeof WeakMap=="function"?WeakMap:Map;function gk(e,t,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ru||(ru=!0,Lh=r),Eh(e,t)},n}function vk(e,t,n){n=Ir(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Eh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Eh(e,t),typeof r!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function jv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new JP;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=c2.bind(null,e,t,n),t.then(e,e))}function $v(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fv(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ir(-1,1),t.tag=2,ki(n,t,1))),n.lanes|=1),e)}var QP=Br.ReactCurrentOwner,nn=!1;function Gt(e,t,n,r){t.child=e===null?J1(t,null,n,r):vs(t,e.child,n,r)}function zv(e,t,n,r,i){n=n.render;var o=t.ref;return rs(t,i),r=km(e,t,n,r,o,i),n=Sm(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jr(e,t,i)):(Ke&&n&&lm(t),t.flags|=1,Gt(e,t,r,i),t.child)}function Vv(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Om(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,yk(e,t,o,r,i)):(e=gc(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ja,n(s,r)&&e.ref===t.ref)return jr(e,t,i)}return t.flags|=1,e=wi(o,r),e.ref=t.ref,e.return=t,t.child=e}function yk(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(ja(o,r)&&e.ref===t.ref)if(nn=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(nn=!0);else return t.lanes=e.lanes,jr(e,t,i)}return xh(e,t,n,r,i)}function bk(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Jo,ln),ln|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(Jo,ln),ln|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,je(Jo,ln),ln|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,je(Jo,ln),ln|=r;return Gt(e,t,i,n),t.child}function kk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xh(e,t,n,r,i){var o=on(n)?ro:Vt.current;return o=ms(t,o),rs(t,i),n=km(e,t,n,r,o,i),r=Sm(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,jr(e,t,i)):(Ke&&r&&lm(t),t.flags|=1,Gt(e,t,n,i),t.child)}function Bv(e,t,n,r,i){if(on(n)){var o=!0;Kc(t)}else o=!1;if(rs(t,i),t.stateNode===null)hc(e,t),K1(t,n,r),Th(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=on(n)?ro:Vt.current,c=ms(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Dv(t,s,r,c),li=!1;var h=t.memoizedState;s.state=h,Xc(t,r,s,i),l=t.memoizedState,a!==r||h!==l||rn.current||li?(typeof u=="function"&&(wh(t,n,u,r),l=t.memoizedState),(a=li||Nv(t,n,a,r,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,H1(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:jn(t.type,a),s.props=c,d=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=In(l):(l=on(n)?ro:Vt.current,l=ms(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Dv(t,s,r,l),li=!1,h=t.memoizedState,s.state=h,Xc(t,r,s,i);var v=t.memoizedState;a!==d||h!==v||rn.current||li?(typeof p=="function"&&(wh(t,n,p,r),v=t.memoizedState),(c=li||Nv(t,n,c,r,h,v,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ph(e,t,n,r,o,i)}function Ph(e,t,n,r,i,o){kk(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&_v(t,n,!1),jr(e,t,o);r=t.stateNode,QP.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=vs(t,e.child,null,o),t.child=vs(t,null,a,o)):Gt(e,t,a,o),t.memoizedState=r.state,i&&_v(t,n,!0),t.child}function Sk(e){var t=e.stateNode;t.pendingContext?Pv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pv(e,t.context,!1),gm(e,t.containerInfo)}function Wv(e,t,n,r,i){return gs(),um(i),t.flags|=256,Gt(e,t,n,r),t.child}var _h={dehydrated:null,treeContext:null,retryLane:0};function Rh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ck(e,t,n){var r=t.pendingProps,i=Ye.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),je(Ye,i&1),e===null)return Sh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Vu(s,r,0,null),e=Xi(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Rh(n),t.memoizedState=_h,e):Tm(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return YP(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=wi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=wi(a,o):(o=Xi(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Rh(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=_h,r}return o=e.child,e=o.sibling,r=wi(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tm(e,t){return t=Vu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $l(e,t,n,r){return r!==null&&um(r),vs(t,e.child,null,n),e=Tm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YP(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=Xd(Error(B(422))),$l(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Vu({mode:"visible",children:r.children},i,0,null),o=Xi(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&vs(t,e.child,null,s),t.child.memoizedState=Rh(s),t.memoizedState=_h,o);if(!(t.mode&1))return $l(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(B(419)),r=Xd(o,r,void 0),$l(e,t,s,r)}if(a=(s&e.childLanes)!==0,nn||a){if(r=Et,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ur(e,i),Kn(r,e,i,-1))}return Im(),r=Xd(Error(B(421))),$l(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=u2.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,un=bi(i.nextSibling),fn=t,Ke=!0,Vn=null,e!==null&&(kn[Sn++]=_r,kn[Sn++]=Rr,kn[Sn++]=io,_r=e.id,Rr=e.overflow,io=t),t=Tm(t,r.children),t.flags|=4096,t)}function Hv(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ch(e.return,t,n)}function Zd(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function wk(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Gt(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hv(e,n,t);else if(e.tag===19)Hv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(je(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Zc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zd(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Zc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zd(t,!0,n,null,o);break;case"together":Zd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),so|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=wi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=wi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XP(e,t,n){switch(t.tag){case 3:Sk(t),gs();break;case 5:Q1(t);break;case 1:on(t.type)&&Kc(t);break;case 4:gm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;je(Qc,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(je(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?Ck(e,t,n):(je(Ye,Ye.current&1),e=jr(e,t,n),e!==null?e.sibling:null);je(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return wk(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,bk(e,t,n)}return jr(e,t,n)}var Tk,Ih,Ek,xk;Tk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ih=function(){};Ek=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ki(fr.current);var o=null;switch(n){case"input":i=Xf(e,i),r=Xf(e,r),o=[];break;case"select":i=Ze({},i,{value:void 0}),r=Ze({},r,{value:void 0}),o=[];break;case"textarea":i=th(e,i),r=th(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Hc)}rh(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Oa.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Oa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ve("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};xk=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ks(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function At(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ZP(e,t,n){var r=t.pendingProps;switch(cm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(t),null;case 1:return on(t.type)&&Gc(),At(t),null;case 3:return r=t.stateNode,ys(),Be(rn),Be(Vt),ym(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ul(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vn!==null&&(jh(Vn),Vn=null))),Ih(e,t),At(t),null;case 5:vm(t);var i=Ki(Ba.current);if(n=t.type,e!==null&&t.stateNode!=null)Ek(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return At(t),null}if(e=Ki(fr.current),Ul(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[lr]=t,r[za]=o,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<ca.length;i++)Ve(ca[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":ev(r,o),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ve("invalid",r);break;case"textarea":nv(r,o),Ve("invalid",r)}rh(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Al(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Al(r.textContent,a,e),i=["children",""+a]):Oa.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ve("scroll",r)}switch(n){case"input":_l(r),tv(r,o,!0);break;case"textarea":_l(r),rv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Hc)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[lr]=t,e[za]=r,Tk(e,t,!1,!1),t.stateNode=e;e:{switch(s=ih(n,r),n){case"dialog":Ve("cancel",e),Ve("close",e),i=r;break;case"iframe":case"object":case"embed":Ve("load",e),i=r;break;case"video":case"audio":for(i=0;i<ca.length;i++)Ve(ca[i],e);i=r;break;case"source":Ve("error",e),i=r;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),i=r;break;case"details":Ve("toggle",e),i=r;break;case"input":ev(e,r),i=Xf(e,r),Ve("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ze({},r,{value:void 0}),Ve("invalid",e);break;case"textarea":nv(e,r),i=th(e,r),Ve("invalid",e);break;default:i=r}rh(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?n1(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&e1(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ma(e,l):typeof l=="number"&&Ma(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Oa.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ve("scroll",e):l!=null&&qp(e,o,l,s))}switch(n){case"input":_l(e),tv(e,r,!1);break;case"textarea":_l(e),rv(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xi(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Zo(e,!!r.multiple,o,!1):r.defaultValue!=null&&Zo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Hc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return At(t),null;case 6:if(e&&t.stateNode!=null)xk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=Ki(Ba.current),Ki(fr.current),Ul(t)){if(r=t.stateNode,n=t.memoizedProps,r[lr]=t,(o=r.nodeValue!==n)&&(e=fn,e!==null))switch(e.tag){case 3:Al(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Al(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=t,t.stateNode=r}return At(t),null;case 13:if(Be(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&un!==null&&t.mode&1&&!(t.flags&128))B1(),gs(),t.flags|=98560,o=!1;else if(o=Ul(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(B(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[lr]=t}else gs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;At(t),o=!1}else Vn!==null&&(jh(Vn),Vn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?kt===0&&(kt=3):Im())),t.updateQueue!==null&&(t.flags|=4),At(t),null);case 4:return ys(),Ih(e,t),e===null&&$a(t.stateNode.containerInfo),At(t),null;case 10:return hm(t.type._context),At(t),null;case 17:return on(t.type)&&Gc(),At(t),null;case 19:if(Be(Ye),o=t.memoizedState,o===null)return At(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Ks(o,!1);else{if(kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Zc(e),s!==null){for(t.flags|=128,Ks(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return je(Ye,Ye.current&1|2),t.child}e=e.sibling}o.tail!==null&&ct()>ks&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(e=Zc(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ke)return At(t),null}else 2*ct()-o.renderingStartTime>ks&&n!==1073741824&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ct(),t.sibling=null,n=Ye.current,je(Ye,r?n&1|2:n&1),t):(At(t),null);case 22:case 23:return Rm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ln&1073741824&&(At(t),t.subtreeFlags&6&&(t.flags|=8192)):At(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function e2(e,t){switch(cm(t),t.tag){case 1:return on(t.type)&&Gc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ys(),Be(rn),Be(Vt),ym(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vm(t),null;case 13:if(Be(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));gs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ye),null;case 4:return ys(),null;case 10:return hm(t.type._context),null;case 22:case 23:return Rm(),null;case 24:return null;default:return null}}var Fl=!1,$t=!1,t2=typeof WeakSet=="function"?WeakSet:Set,Y=null;function qo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(e,t,r)}else n.current=null}function Oh(e,t,n){try{n()}catch(r){rt(e,t,r)}}var Gv=!1;function n2(e,t){if(ph=Vc,e=I1(),am(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===i&&(a=s),h===o&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},Vc=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,b=v.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:jn(t.type,g),b);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(S){rt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return v=Gv,Gv=!1,v}function ka(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Oh(t,n,o)}i=i.next}while(i!==r)}}function Fu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Mh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Pk(e){var t=e.alternate;t!==null&&(e.alternate=null,Pk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lr],delete t[za],delete t[yh],delete t[jP],delete t[$P])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _k(e){return e.tag===5||e.tag===3||e.tag===4}function Kv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_k(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hc));else if(r!==4&&(e=e.child,e!==null))for(Nh(e,t,n),e=e.sibling;e!==null;)Nh(e,t,n),e=e.sibling}function Dh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Dh(e,t,n),e=e.sibling;e!==null;)Dh(e,t,n),e=e.sibling}var xt=null,$n=!1;function ti(e,t,n){for(n=n.child;n!==null;)Rk(e,t,n),n=n.sibling}function Rk(e,t,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Mu,n)}catch{}switch(n.tag){case 5:$t||qo(n,t);case 6:var r=xt,i=$n;xt=null,ti(e,t,n),xt=r,$n=i,xt!==null&&($n?(e=xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&($n?(e=xt,n=n.stateNode,e.nodeType===8?Gd(e.parentNode,n):e.nodeType===1&&Gd(e,n),Aa(e)):Gd(xt,n.stateNode));break;case 4:r=xt,i=$n,xt=n.stateNode.containerInfo,$n=!0,ti(e,t,n),xt=r,$n=i;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Oh(n,t,s),i=i.next}while(i!==r)}ti(e,t,n);break;case 1:if(!$t&&(qo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rt(n,t,a)}ti(e,t,n);break;case 21:ti(e,t,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,ti(e,t,n),$t=r):ti(e,t,n);break;default:ti(e,t,n)}}function qv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new t2),t.forEach(function(r){var i=d2.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,$n=!1;break e;case 3:xt=a.stateNode.containerInfo,$n=!0;break e;case 4:xt=a.stateNode.containerInfo,$n=!0;break e}a=a.return}if(xt===null)throw Error(B(160));Rk(o,s,i),xt=null,$n=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){rt(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ik(t,e),t=t.sibling}function Ik(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ln(t,e),tr(e),r&4){try{ka(3,e,e.return),Fu(3,e)}catch(g){rt(e,e.return,g)}try{ka(5,e,e.return)}catch(g){rt(e,e.return,g)}}break;case 1:Ln(t,e),tr(e),r&512&&n!==null&&qo(n,n.return);break;case 5:if(Ln(t,e),tr(e),r&512&&n!==null&&qo(n,n.return),e.flags&32){var i=e.stateNode;try{Ma(i,"")}catch(g){rt(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Yb(i,o),ih(a,s);var c=ih(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?n1(i,d):u==="dangerouslySetInnerHTML"?e1(i,d):u==="children"?Ma(i,d):qp(i,u,d,c)}switch(a){case"input":Zf(i,o);break;case"textarea":Xb(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Zo(i,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Zo(i,!!o.multiple,o.defaultValue,!0):Zo(i,!!o.multiple,o.multiple?[]:"",!1))}i[za]=o}catch(g){rt(e,e.return,g)}}break;case 6:if(Ln(t,e),tr(e),r&4){if(e.stateNode===null)throw Error(B(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){rt(e,e.return,g)}}break;case 3:if(Ln(t,e),tr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(t.containerInfo)}catch(g){rt(e,e.return,g)}break;case 4:Ln(t,e),tr(e);break;case 13:Ln(t,e),tr(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Pm=ct())),r&4&&qv(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?($t=(c=$t)||u,Ln(t,e),$t=c):Ln(t,e),tr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Y=e,u=e.child;u!==null;){for(d=Y=u;Y!==null;){switch(h=Y,p=h.child,h.tag){case 0:case 11:case 14:case 15:ka(4,h,h.return);break;case 1:qo(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){rt(r,n,g)}}break;case 5:qo(h,h.return);break;case 22:if(h.memoizedState!==null){Qv(d);continue}}p!==null?(p.return=h,Y=p):Qv(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=t1("display",s))}catch(g){rt(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){rt(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(t,e),tr(e),r&4&&qv(e);break;case 21:break;default:Ln(t,e),tr(e)}}function tr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_k(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ma(i,""),r.flags&=-33);var o=Kv(e);Dh(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Kv(e);Nh(e,a,s);break;default:throw Error(B(161))}}catch(l){rt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function r2(e,t,n){Y=e,Ok(e)}function Ok(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var i=Y,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Fl;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||$t;a=Fl;var c=$t;if(Fl=s,($t=l)&&!c)for(Y=i;Y!==null;)s=Y,l=s.child,s.tag===22&&s.memoizedState!==null?Yv(i):l!==null?(l.return=s,Y=l):Yv(i);for(;o!==null;)Y=o,Ok(o),o=o.sibling;Y=i,Fl=a,$t=c}Jv(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Y=o):Jv(e)}}function Jv(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$t||Fu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$t)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:jn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Mv(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mv(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Aa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}$t||t.flags&512&&Mh(t)}catch(h){rt(t,t.return,h)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Qv(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function Yv(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fu(4,t)}catch(l){rt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){rt(t,i,l)}}var o=t.return;try{Mh(t)}catch(l){rt(t,o,l)}break;case 5:var s=t.return;try{Mh(t)}catch(l){rt(t,s,l)}}}catch(l){rt(t,t.return,l)}if(t===e){Y=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Y=a;break}Y=t.return}}var i2=Math.ceil,nu=Br.ReactCurrentDispatcher,Em=Br.ReactCurrentOwner,Rn=Br.ReactCurrentBatchConfig,Re=0,Et=null,mt=null,It=0,ln=0,Jo=Ni(0),kt=0,Ka=null,so=0,zu=0,xm=0,Sa=null,Zt=null,Pm=0,ks=1/0,wr=null,ru=!1,Lh=null,Si=null,zl=!1,fi=null,iu=0,Ca=0,Ah=null,pc=-1,mc=0;function qt(){return Re&6?ct():pc!==-1?pc:pc=ct()}function Ci(e){return e.mode&1?Re&2&&It!==0?It&-It:zP.transition!==null?(mc===0&&(mc=p1()),mc):(e=Me,e!==0||(e=window.event,e=e===void 0?16:S1(e.type)),e):1}function Kn(e,t,n,r){if(50<Ca)throw Ca=0,Ah=null,Error(B(185));ll(e,n,r),(!(Re&2)||e!==Et)&&(e===Et&&(!(Re&2)&&(zu|=n),kt===4&&ui(e,It)),sn(e,r),n===1&&Re===0&&!(t.mode&1)&&(ks=ct()+500,Uu&&Di()))}function sn(e,t){var n=e.callbackNode;zx(e,t);var r=zc(e,e===Et?It:0);if(r===0)n!==null&&sv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sv(n),t===1)e.tag===0?FP(Xv.bind(null,e)):F1(Xv.bind(null,e)),AP(function(){!(Re&6)&&Di()}),n=null;else{switch(m1(r)){case 1:n=Zp;break;case 4:n=f1;break;case 16:n=Fc;break;case 536870912:n=h1;break;default:n=Fc}n=$k(n,Mk.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Mk(e,t){if(pc=-1,mc=0,Re&6)throw Error(B(327));var n=e.callbackNode;if(is()&&e.callbackNode!==n)return null;var r=zc(e,e===Et?It:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ou(e,r);else{t=r;var i=Re;Re|=2;var o=Dk();(Et!==e||It!==t)&&(wr=null,ks=ct()+500,Yi(e,t));do try{a2();break}catch(a){Nk(e,a)}while(1);fm(),nu.current=o,Re=i,mt!==null?t=0:(Et=null,It=0,t=kt)}if(t!==0){if(t===2&&(i=ch(e),i!==0&&(r=i,t=Uh(e,i))),t===1)throw n=Ka,Yi(e,0),ui(e,r),sn(e,ct()),n;if(t===6)ui(e,r);else{if(i=e.current.alternate,!(r&30)&&!o2(i)&&(t=ou(e,r),t===2&&(o=ch(e),o!==0&&(r=o,t=Uh(e,o))),t===1))throw n=Ka,Yi(e,0),ui(e,r),sn(e,ct()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:zi(e,Zt,wr);break;case 3:if(ui(e,r),(r&130023424)===r&&(t=Pm+500-ct(),10<t)){if(zc(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){qt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=vh(zi.bind(null,e,Zt,wr),t);break}zi(e,Zt,wr);break;case 4:if(ui(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Gn(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i2(r/1960))-r,10<r){e.timeoutHandle=vh(zi.bind(null,e,Zt,wr),r);break}zi(e,Zt,wr);break;case 5:zi(e,Zt,wr);break;default:throw Error(B(329))}}}return sn(e,ct()),e.callbackNode===n?Mk.bind(null,e):null}function Uh(e,t){var n=Sa;return e.current.memoizedState.isDehydrated&&(Yi(e,t).flags|=256),e=ou(e,t),e!==2&&(t=Zt,Zt=n,t!==null&&jh(t)),e}function jh(e){Zt===null?Zt=e:Zt.push.apply(Zt,e)}function o2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!qn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ui(e,t){for(t&=~xm,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gn(t),r=1<<n;e[n]=-1,t&=~r}}function Xv(e){if(Re&6)throw Error(B(327));is();var t=zc(e,0);if(!(t&1))return sn(e,ct()),null;var n=ou(e,t);if(e.tag!==0&&n===2){var r=ch(e);r!==0&&(t=r,n=Uh(e,r))}if(n===1)throw n=Ka,Yi(e,0),ui(e,t),sn(e,ct()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zi(e,Zt,wr),sn(e,ct()),null}function _m(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(ks=ct()+500,Uu&&Di())}}function ao(e){fi!==null&&fi.tag===0&&!(Re&6)&&is();var t=Re;Re|=1;var n=Rn.transition,r=Me;try{if(Rn.transition=null,Me=1,e)return e()}finally{Me=r,Rn.transition=n,Re=t,!(Re&6)&&Di()}}function Rm(){ln=Jo.current,Be(Jo)}function Yi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,LP(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(cm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gc();break;case 3:ys(),Be(rn),Be(Vt),ym();break;case 5:vm(r);break;case 4:ys();break;case 13:Be(Ye);break;case 19:Be(Ye);break;case 10:hm(r.type._context);break;case 22:case 23:Rm()}n=n.return}if(Et=e,mt=e=wi(e.current,null),It=ln=t,kt=0,Ka=null,xm=zu=so=0,Zt=Sa=null,Gi!==null){for(t=0;t<Gi.length;t++)if(n=Gi[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Gi=null}return e}function Nk(e,t){do{var n=mt;try{if(fm(),dc.current=tu,eu){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}eu=!1}if(oo=0,Tt=bt=Xe=null,ba=!1,Wa=0,Em.current=null,n===null||n.return===null){kt=1,Ka=t,mt=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=It,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=$v(s);if(p!==null){p.flags&=-257,Fv(p,s,a,o,t),p.mode&1&&jv(o,c,t),t=p,l=c;var v=t.updateQueue;if(v===null){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break e}else{if(!(t&1)){jv(o,c,t),Im();break e}l=Error(B(426))}}else if(Ke&&a.mode&1){var b=$v(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Fv(b,s,a,o,t),um(bs(l,a));break e}}o=l=bs(l,a),kt!==4&&(kt=2),Sa===null?Sa=[o]:Sa.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=gk(o,l,t);Ov(o,m);break e;case 1:a=l;var y=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Si===null||!Si.has(C)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=vk(o,a,t);Ov(o,S);break e}}o=o.return}while(o!==null)}Ak(n)}catch(w){t=w,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(1)}function Dk(){var e=nu.current;return nu.current=tu,e===null?tu:e}function Im(){(kt===0||kt===3||kt===2)&&(kt=4),Et===null||!(so&268435455)&&!(zu&268435455)||ui(Et,It)}function ou(e,t){var n=Re;Re|=2;var r=Dk();(Et!==e||It!==t)&&(wr=null,Yi(e,t));do try{s2();break}catch(i){Nk(e,i)}while(1);if(fm(),Re=n,nu.current=r,mt!==null)throw Error(B(261));return Et=null,It=0,kt}function s2(){for(;mt!==null;)Lk(mt)}function a2(){for(;mt!==null&&!Mx();)Lk(mt)}function Lk(e){var t=jk(e.alternate,e,ln);e.memoizedProps=e.pendingProps,t===null?Ak(e):mt=t,Em.current=null}function Ak(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=e2(n,t),n!==null){n.flags&=32767,mt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kt=6,mt=null;return}}else if(n=ZP(n,t,ln),n!==null){mt=n;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);kt===0&&(kt=5)}function zi(e,t,n){var r=Me,i=Rn.transition;try{Rn.transition=null,Me=1,l2(e,t,n,r)}finally{Rn.transition=i,Me=r}return null}function l2(e,t,n,r){do is();while(fi!==null);if(Re&6)throw Error(B(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Vx(e,o),e===Et&&(mt=Et=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,$k(Fc,function(){return is(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Rn.transition,Rn.transition=null;var s=Me;Me=1;var a=Re;Re|=4,Em.current=null,n2(e,n),Ik(n,e),_P(mh),Vc=!!ph,mh=ph=null,e.current=n,r2(n),Nx(),Re=a,Me=s,Rn.transition=o}else e.current=n;if(zl&&(zl=!1,fi=e,iu=i),o=e.pendingLanes,o===0&&(Si=null),Ax(n.stateNode),sn(e,ct()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ru)throw ru=!1,e=Lh,Lh=null,e;return iu&1&&e.tag!==0&&is(),o=e.pendingLanes,o&1?e===Ah?Ca++:(Ca=0,Ah=e):Ca=0,Di(),null}function is(){if(fi!==null){var e=m1(iu),t=Rn.transition,n=Me;try{if(Rn.transition=null,Me=16>e?16:e,fi===null)var r=!1;else{if(e=fi,fi=null,iu=0,Re&6)throw Error(B(331));var i=Re;for(Re|=4,Y=e.current;Y!==null;){var o=Y,s=o.child;if(Y.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:ka(8,u,o)}var d=u.child;if(d!==null)d.return=u,Y=d;else for(;Y!==null;){u=Y;var h=u.sibling,p=u.return;if(Pk(u),u===c){Y=null;break}if(h!==null){h.return=p,Y=h;break}Y=p}}}var v=o.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Y=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Y=s;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ka(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Y=m;break e}Y=o.return}}var y=e.current;for(Y=y;Y!==null;){s=Y;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,Y=C;else e:for(s=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fu(9,a)}}catch(w){rt(a,a.return,w)}if(a===s){Y=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Y=S;break e}Y=a.return}}if(Re=i,Di(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Mu,e)}catch{}r=!0}return r}finally{Me=n,Rn.transition=t}}return!1}function Zv(e,t,n){t=bs(n,t),t=gk(e,t,1),e=ki(e,t,1),t=qt(),e!==null&&(ll(e,1,t),sn(e,t))}function rt(e,t,n){if(e.tag===3)Zv(e,e,n);else for(;t!==null;){if(t.tag===3){Zv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Si===null||!Si.has(r))){e=bs(n,e),e=vk(t,e,1),t=ki(t,e,1),e=qt(),t!==null&&(ll(t,1,e),sn(t,e));break}}t=t.return}}function c2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qt(),e.pingedLanes|=e.suspendedLanes&n,Et===e&&(It&n)===n&&(kt===4||kt===3&&(It&130023424)===It&&500>ct()-Pm?Yi(e,0):xm|=n),sn(e,t)}function Uk(e,t){t===0&&(e.mode&1?(t=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):t=1);var n=qt();e=Ur(e,t),e!==null&&(ll(e,t,n),sn(e,n))}function u2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Uk(e,n)}function d2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),Uk(e,n)}var jk;jk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rn.current)nn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return nn=!1,XP(e,t,n);nn=!!(e.flags&131072)}else nn=!1,Ke&&t.flags&1048576&&z1(t,Jc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;hc(e,t),e=t.pendingProps;var i=ms(t,Vt.current);rs(t,n),i=km(null,t,r,e,i,n);var o=Sm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,on(r)?(o=!0,Kc(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mm(t),i.updater=ju,t.stateNode=i,i._reactInternals=t,Th(t,r,e,n),t=Ph(null,t,r,!0,o,n)):(t.tag=0,Ke&&o&&lm(t),Gt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(hc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=h2(r),e=jn(r,e),i){case 0:t=xh(null,t,r,e,n);break e;case 1:t=Bv(null,t,r,e,n);break e;case 11:t=zv(null,t,r,e,n);break e;case 14:t=Vv(null,t,r,jn(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),xh(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),Bv(e,t,r,i,n);case 3:e:{if(Sk(t),e===null)throw Error(B(387));r=t.pendingProps,o=t.memoizedState,i=o.element,H1(e,t),Xc(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=bs(Error(B(423)),t),t=Wv(e,t,r,n,i);break e}else if(r!==i){i=bs(Error(B(424)),t),t=Wv(e,t,r,n,i);break e}else for(un=bi(t.stateNode.containerInfo.firstChild),fn=t,Ke=!0,Vn=null,n=J1(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gs(),r===i){t=jr(e,t,n);break e}Gt(e,t,r,n)}t=t.child}return t;case 5:return Q1(t),e===null&&Sh(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,gh(r,i)?s=null:o!==null&&gh(r,o)&&(t.flags|=32),kk(e,t),Gt(e,t,s,n),t.child;case 6:return e===null&&Sh(t),null;case 13:return Ck(e,t,n);case 4:return gm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vs(t,null,r,n):Gt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),zv(e,t,r,i,n);case 7:return Gt(e,t,t.pendingProps,n),t.child;case 8:return Gt(e,t,t.pendingProps.children,n),t.child;case 12:return Gt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,je(Qc,r._currentValue),r._currentValue=s,o!==null)if(qn(o.value,s)){if(o.children===i.children&&!rn.current){t=jr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ir(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ch(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(B(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ch(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Gt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,rs(t,n),i=In(i),r=r(i),t.flags|=1,Gt(e,t,r,n),t.child;case 14:return r=t.type,i=jn(r,t.pendingProps),i=jn(r.type,i),Vv(e,t,r,i,n);case 15:return yk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:jn(r,i),hc(e,t),t.tag=1,on(r)?(e=!0,Kc(t)):e=!1,rs(t,n),K1(t,r,i),Th(t,r,i,n),Ph(null,t,r,!0,e,n);case 19:return wk(e,t,n);case 22:return bk(e,t,n)}throw Error(B(156,t.tag))};function $k(e,t){return d1(e,t)}function f2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,t,n,r){return new f2(e,t,n,r)}function Om(e){return e=e.prototype,!(!e||!e.isReactComponent)}function h2(e){if(typeof e=="function")return Om(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qp)return 11;if(e===Yp)return 14}return 2}function wi(e,t){var n=e.alternate;return n===null?(n=En(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gc(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")Om(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case $o:return Xi(n.children,i,o,t);case Jp:s=8,i|=8;break;case qf:return e=En(12,n,t,i|2),e.elementType=qf,e.lanes=o,e;case Jf:return e=En(13,n,t,i),e.elementType=Jf,e.lanes=o,e;case Qf:return e=En(19,n,t,i),e.elementType=Qf,e.lanes=o,e;case qb:return Vu(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gb:s=10;break e;case Kb:s=9;break e;case Qp:s=11;break e;case Yp:s=14;break e;case ai:s=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=En(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Xi(e,t,n,r){return e=En(7,e,r,t),e.lanes=n,e}function Vu(e,t,n,r){return e=En(22,e,r,t),e.elementType=qb,e.lanes=n,e.stateNode={isHidden:!1},e}function ef(e,t,n){return e=En(6,e,null,t),e.lanes=n,e}function tf(e,t,n){return t=En(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function p2(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ld(0),this.expirationTimes=Ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ld(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mm(e,t,n,r,i,o,s,a,l){return e=new p2(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=En(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mm(o),e}function m2(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Fk(e){if(!e)return Pi;e=e._reactInternals;e:{if(go(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(on(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(on(n))return $1(e,n,t)}return t}function zk(e,t,n,r,i,o,s,a,l){return e=Mm(n,r,!0,e,i,o,s,a,l),e.context=Fk(null),n=e.current,r=qt(),i=Ci(n),o=Ir(r,i),o.callback=t??null,ki(n,o,i),e.current.lanes=i,ll(e,i,r),sn(e,r),e}function Bu(e,t,n,r){var i=t.current,o=qt(),s=Ci(i);return n=Fk(n),t.context===null?t.context=n:t.pendingContext=n,t=Ir(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ki(i,t,s),e!==null&&(Kn(e,i,s,o),uc(e,i,s)),s}function su(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function e0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nm(e,t){e0(e,t),(e=e.alternate)&&e0(e,t)}function g2(){return null}var Vk=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dm(e){this._internalRoot=e}Wu.prototype.render=Dm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));Bu(e,t,null,null)};Wu.prototype.unmount=Dm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ao(function(){Bu(null,e,null,null)}),t[Ar]=null}};function Wu(e){this._internalRoot=e}Wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=y1();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ci.length&&t!==0&&t<ci[n].priority;n++);ci.splice(n,0,e),n===0&&k1(e)}};function Lm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function t0(){}function v2(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=su(s);o.call(c)}}var s=zk(t,r,e,0,null,!1,!1,"",t0);return e._reactRootContainer=s,e[Ar]=s.current,$a(e.nodeType===8?e.parentNode:e),ao(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=su(l);a.call(c)}}var l=Mm(e,0,!1,null,null,!1,!1,"",t0);return e._reactRootContainer=l,e[Ar]=l.current,$a(e.nodeType===8?e.parentNode:e),ao(function(){Bu(t,l,n,r)}),l}function Gu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=su(s);a.call(l)}}Bu(t,s,e,i)}else s=v2(n,t,e,i,r);return su(s)}g1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=la(t.pendingLanes);n!==0&&(em(t,n|1),sn(t,ct()),!(Re&6)&&(ks=ct()+500,Di()))}break;case 13:ao(function(){var r=Ur(e,1);if(r!==null){var i=qt();Kn(r,e,1,i)}}),Nm(e,1)}};tm=function(e){if(e.tag===13){var t=Ur(e,134217728);if(t!==null){var n=qt();Kn(t,e,134217728,n)}Nm(e,134217728)}};v1=function(e){if(e.tag===13){var t=Ci(e),n=Ur(e,t);if(n!==null){var r=qt();Kn(n,e,t,r)}Nm(e,t)}};y1=function(){return Me};b1=function(e,t){var n=Me;try{return Me=e,t()}finally{Me=n}};sh=function(e,t,n){switch(t){case"input":if(Zf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Au(r);if(!i)throw Error(B(90));Qb(r),Zf(r,i)}}}break;case"textarea":Xb(e,n);break;case"select":t=n.value,t!=null&&Zo(e,!!n.multiple,t,!1)}};o1=_m;s1=ao;var y2={usingClientEntryPoint:!1,Events:[ul,Bo,Au,r1,i1,_m]},qs={findFiberByHostInstance:Hi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},b2={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=c1(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||g2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{Mu=Vl.inject(b2),dr=Vl}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y2;yn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lm(t))throw Error(B(200));return m2(e,t,null,n)};yn.createRoot=function(e,t){if(!Lm(e))throw Error(B(299));var n=!1,r="",i=Vk;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Mm(e,1,!1,null,null,n,!1,r,i),e[Ar]=t.current,$a(e.nodeType===8?e.parentNode:e),new Dm(t)};yn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=c1(t),e=e===null?null:e.stateNode,e};yn.flushSync=function(e){return ao(e)};yn.hydrate=function(e,t,n){if(!Hu(t))throw Error(B(200));return Gu(null,e,t,!0,n)};yn.hydrateRoot=function(e,t,n){if(!Lm(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Vk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=zk(t,null,e,1,n??null,i,!1,o,s),e[Ar]=t.current,$a(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Wu(t)};yn.render=function(e,t,n){if(!Hu(t))throw Error(B(200));return Gu(null,e,t,!1,n)};yn.unmountComponentAtNode=function(e){if(!Hu(e))throw Error(B(40));return e._reactRootContainer?(ao(function(){Gu(null,null,e,!1,function(){e._reactRootContainer=null,e[Ar]=null})}),!0):!1};yn.unstable_batchedUpdates=_m;yn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Hu(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return Gu(e,t,n,!1,r)};yn.version="18.2.0-next-9e3b772b8-20220608";function Bk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bk)}catch(e){console.error(e)}}Bk(),zb.exports=yn;var Ns=zb.exports;const Wk=Rb(Ns),k2=_b({__proto__:null,default:Wk},[Ns]);var n0=Ns;Gf.createRoot=n0.createRoot,Gf.hydrateRoot=n0.hydrateRoot;var S2=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function Hk({packageName:e,customMessages:t}){let n=e;const r={...S2,...t};function i(o,s){if(!s)return`${n}: ${o}`;let a=o;const l=o.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const c of l){const u=(s[c[1]]||"").toString();a=a.replace(`{{${c[1]}}}`,u)}return`${n}: ${a}`}return{setPackageName({packageName:o}){return typeof o=="string"&&(n=o),this},setMessages({customMessages:o}){return Object.assign(r,o||{}),this},throwInvalidPublishableKeyError(o){throw new Error(i(r.InvalidPublishableKeyErrorMessage,o))},throwInvalidProxyUrl(o){throw new Error(i(r.InvalidProxyUrlErrorMessage,o))},throwMissingPublishableKeyError(){throw new Error(i(r.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(i(r.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(o){throw new Error(i(r.MissingClerkProvider,o))},throw(o){throw new Error(i(o))}}}var Gk=Object.defineProperty,C2=Object.getOwnPropertyDescriptor,w2=Object.getOwnPropertyNames,T2=Object.prototype.hasOwnProperty,E2=(e,t)=>{for(var n in t)Gk(e,n,{get:t[n],enumerable:!0})},r0=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of w2(t))!T2.call(e,i)&&i!==n&&Gk(e,i,{get:()=>t[i],enumerable:!(r=C2(t,i))||r.enumerable});return e},x2=(e,t,n)=>(r0(e,t,"default"),n&&r0(n,t,"default")),P2={"A1.10min":10,"A2.1hr":60,"A3.4hr":240,"A4.1day":1440,"A5.1wk":10080};new Set(Object.keys(P2));var Kk={exports:{}},qk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss=f;function _2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var R2=typeof Object.is=="function"?Object.is:_2,I2=Ss.useState,O2=Ss.useEffect,M2=Ss.useLayoutEffect,N2=Ss.useDebugValue;function D2(e,t){var n=t(),r=I2({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return M2(function(){i.value=n,i.getSnapshot=t,nf(i)&&o({inst:i})},[e,n,t]),O2(function(){return nf(i)&&o({inst:i}),e(function(){nf(i)&&o({inst:i})})},[e]),N2(n),n}function nf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!R2(e,n)}catch{return!0}}function L2(e,t){return t()}var A2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?L2:D2;qk.useSyncExternalStore=Ss.useSyncExternalStore!==void 0?Ss.useSyncExternalStore:A2;Kk.exports=qk;var Am=Kk.exports;const hi=()=>{},pt=hi(),wa=Object,ee=e=>e===pt,tn=e=>typeof e=="function",pr=(e,t)=>({...e,...t}),U2=e=>tn(e.then),Bl=new WeakMap;let j2=0;const qa=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let i,o;if(wa(e)===e&&!r&&n!=RegExp){if(i=Bl.get(e),i)return i;if(i=++j2+"~",Bl.set(e,i),n==Array){for(i="@",o=0;o<e.length;o++)i+=qa(e[o])+",";Bl.set(e,i)}if(n==wa){i="#";const s=wa.keys(e).sort();for(;!ee(o=s.pop());)ee(e[o])||(i+=o+":"+qa(e[o])+",");Bl.set(e,i)}}else i=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return i},wn=new WeakMap,rf={},Wl={},Um="undefined",Ku=typeof window!=Um,$h=typeof document!=Um,$2=()=>Ku&&typeof window.requestAnimationFrame!=Um,Er=(e,t)=>{const n=wn.get(e);return[()=>!ee(t)&&e.get(t)||rf,r=>{if(!ee(t)){const i=e.get(t);t in Wl||(Wl[t]=i),n[5](t,pr(i,r),i||rf)}},n[6],()=>!ee(t)&&t in Wl?Wl[t]:!ee(t)&&e.get(t)||rf]};let Fh=!0;const F2=()=>Fh,[zh,Vh]=Ku&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[hi,hi],z2=()=>{const e=$h&&document.visibilityState;return ee(e)||e!=="hidden"},V2=e=>($h&&document.addEventListener("visibilitychange",e),zh("focus",e),()=>{$h&&document.removeEventListener("visibilitychange",e),Vh("focus",e)}),B2=e=>{const t=()=>{Fh=!0,e()},n=()=>{Fh=!1};return zh("online",t),zh("offline",n),()=>{Vh("online",t),Vh("offline",n)}},W2={isOnline:F2,isVisible:z2},H2={initFocus:V2,initReconnect:B2},au=!D.useId,lo=!Ku||"Deno"in window,Jk=e=>$2()?window.requestAnimationFrame(e):setTimeout(e,1),Ti=lo?f.useEffect:f.useLayoutEffect,of=typeof navigator<"u"&&navigator.connection,i0=!lo&&of&&(["slow-2g","2g"].includes(of.effectiveType)||of.saveData),$r=e=>{if(tn(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?qa(e):"",[e,t]};let G2=0;const lu=()=>++G2,Qk=0,Yk=1,Xk=2,K2=3;var cr={__proto__:null,ERROR_REVALIDATE_EVENT:K2,FOCUS_EVENT:Qk,MUTATE_EVENT:Xk,RECONNECT_EVENT:Yk};async function jm(...e){const[t,n,r,i]=e,o=pr({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let s=o.populateCache;const a=o.rollbackOnError;let l=o.optimisticData;const c=h=>typeof a=="function"?a(h):a!==!1,u=o.throwOnError;if(tn(n)){const h=n,p=[],v=t.keys();for(const g of v)!/^\$(inf|sub)\$/.test(g)&&h(t.get(g)._k)&&p.push(g);return Promise.all(p.map(d))}return d(n);async function d(h){const[p]=$r(h);if(!p)return;const[v,g]=Er(t,p),[b,m,y,C]=wn.get(t),S=()=>{const Z=b[p];return(tn(o.revalidate)?o.revalidate(v().data,h):o.revalidate!==!1)&&(delete y[p],delete C[p],Z&&Z[0])?Z[0](Xk).then(()=>v().data):v().data};if(e.length<3)return S();let w=r,T;const E=lu();m[p]=[E,0];const k=!ee(l),P=v(),_=P.data,M=P._c,A=ee(M)?_:M;if(k&&(l=tn(l)?l(A,_):l,g({data:l,_c:A})),tn(w))try{w=w(A)}catch(Z){T=Z}if(w&&U2(w))if(w=await w.catch(Z=>{T=Z}),E!==m[p][0]){if(T)throw T;return w}else T&&k&&c(T)&&(s=!0,g({data:A,_c:pt}));if(s&&!T)if(tn(s)){const Z=s(w,A);g({data:Z,error:pt,_c:pt})}else g({data:w,error:pt,_c:pt});if(m[p][1]=lu(),Promise.resolve(S()).then(()=>{g({_c:pt})}),T){if(u)throw T;return}return w}}const o0=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Zk=(e,t)=>{if(!wn.has(e)){const n=pr(H2,t),r={},i=jm.bind(pt,e);let o=hi;const s={},a=(u,d)=>{const h=s[u]||[];return s[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},l=(u,d,h)=>{e.set(u,d);const p=s[u];if(p)for(const v of p)v(d,h)},c=()=>{if(!wn.has(e)&&(wn.set(e,[r,{},{},{},i,l,a]),!lo)){const u=n.initFocus(setTimeout.bind(pt,o0.bind(pt,r,Qk))),d=n.initReconnect(setTimeout.bind(pt,o0.bind(pt,r,Yk)));o=()=>{u&&u(),d&&d(),wn.delete(e)}}};return c(),[e,i,c,o]}return[e,wn.get(e)[4]]},q2=(e,t,n,r,i)=>{const o=n.errorRetryCount,s=i.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!ee(o)&&s>o||setTimeout(r,a,i)},J2=(e,t)=>qa(e)==qa(t),[fl,eS]=Zk(new Map),$m=pr({onLoadingSlow:hi,onSuccess:hi,onError:hi,onErrorRetry:q2,onDiscarded:hi,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:i0?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:i0?5e3:3e3,compare:J2,isPaused:()=>!1,cache:fl,mutate:eS,fallback:{}},W2),tS=(e,t)=>{const n=pr(e,t);if(t){const{use:r,fallback:i}=e,{use:o,fallback:s}=t;r&&o&&(n.use=r.concat(o)),i&&s&&(n.fallback=pr(i,s))}return n},Bh=f.createContext({}),nS=e=>{const{value:t}=e,n=f.useContext(Bh),r=tn(t),i=f.useMemo(()=>r?t(n):t,[r,n,t]),o=f.useMemo(()=>r?i:tS(n,i),[r,n,i]),s=i&&i.provider,a=f.useRef(pt);s&&!a.current&&(a.current=Zk(s(o.cache||fl),i));const l=a.current;return l&&(o.cache=l[0],o.mutate=l[1]),Ti(()=>{if(l)return l[2]&&l[2](),l[3]},[]),f.createElement(Bh.Provider,pr(e,{value:o}))},rS="$inf$",iS=Ku&&window.__SWR_DEVTOOLS_USE__,Q2=iS?window.__SWR_DEVTOOLS_USE__:[],Y2=()=>{iS&&(window.__SWR_DEVTOOLS_REACT__=D)},oS=e=>tn(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],sS=()=>pr($m,f.useContext(Bh)),X2=(e,t)=>{const[n,r]=$r(e),[,,,i]=wn.get(fl);if(i[n])return i[n];const o=t(r);return i[n]=o,o},Z2=e=>(t,n,r)=>e(t,n&&((...o)=>{const[s]=$r(t),[,,,a]=wn.get(fl);if(s.startsWith(rS))return n(...o);const l=a[s];return ee(l)?n(...o):(delete a[s],l)}),r),e_=Q2.concat(Z2),aS=e=>function(...n){const r=sS(),[i,o,s]=oS(n),a=tS(r,s);let l=e;const{use:c}=a,u=(c||[]).concat(e_);for(let d=u.length;d--;)l=u[d](l);return l(i,o||a.fetcher||null,a)},lS=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}},t_=(e,t)=>(...n)=>{const[r,i,o]=oS(n),s=(o.use||[]).concat(t);return e(r,i,{...o,use:s})};Y2();const n_=e=>$r(e)[0],s0=D.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),sf={dedupe:!0},r_=(e,t,n)=>{const{cache:r,compare:i,suspense:o,fallbackData:s,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[p,v,g,b]=wn.get(r),[m,y]=$r(e),C=f.useRef(!1),S=f.useRef(!1),w=f.useRef(m),T=f.useRef(t),E=f.useRef(n),k=()=>E.current,P=()=>k().isVisible()&&k().isOnline(),[_,M,A,Z]=Er(r,m),X=f.useRef({}).current,ge=ee(s)?n.fallback[m]:s,Ee=(ae,le)=>{for(const he in X){const de=he;if(de==="data"){if(!i(ae[de],le[de])&&(!ee(ae[de])||!i(ft,le[de])))return!1}else if(le[de]!==ae[de])return!1}return!0},be=f.useMemo(()=>{const ae=(()=>!m||!t?!1:ee(a)?k().isPaused()||o?!1:ee(l)?!0:l:a)(),le=xe=>{const st=pr(xe);return delete st._k,ae?{isValidating:!0,isLoading:!0,...st}:st},he=_(),de=Z(),He=le(he),Bt=he===de?He:le(de);let me=He;return[()=>{const xe=le(_());return Ee(xe,me)?(me.data=xe.data,me.isLoading=xe.isLoading,me.isValidating=xe.isValidating,me.error=xe.error,me):(me=xe,xe)},()=>Bt]},[r,m]),V=Am.useSyncExternalStore(f.useCallback(ae=>A(m,(le,he)=>{Ee(he,le)||ae()}),[r,m]),be[0],be[1]),H=!C.current,ce=p[m]&&p[m].length>0,fe=V.data,se=ee(fe)?ge:fe,ve=V.error,Je=f.useRef(se),ft=h?ee(fe)?Je.current:fe:se,$e=(()=>ce&&!ee(ve)?!1:H&&!ee(a)?a:k().isPaused()?!1:o?ee(se)?!1:l:ee(se)||l)(),Ct=!!(m&&t&&H&&$e),Dn=ee(V.isValidating)?Ct:V.isValidating,$s=ee(V.isLoading)?Ct:V.isLoading,Dt=f.useCallback(async ae=>{const le=T.current;if(!m||!le||S.current||k().isPaused())return!1;let he,de,He=!0;const Bt=ae||{},me=!g[m]||!Bt.dedupe,xe=()=>au?!S.current&&m===w.current&&C.current:m===w.current,st={isValidating:!1,isLoading:!1},Yr=()=>{M(st)},ji=()=>{const Le=g[m];Le&&Le[1]===de&&delete g[m]},$i={isValidating:!0};ee(_().data)&&($i.isLoading=!0);try{if(me&&(M($i),n.loadingTimeout&&ee(_().data)&&setTimeout(()=>{He&&xe()&&k().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[le(y),lu()]),[he,de]=g[m],he=await he,me&&setTimeout(ji,n.dedupingInterval),!g[m]||g[m][1]!==de)return me&&xe()&&k().onDiscarded(m),!1;st.error=pt;const Le=v[m];if(!ee(Le)&&(de<=Le[0]||de<=Le[1]||Le[1]===0))return Yr(),me&&xe()&&k().onDiscarded(m),!1;const at=_().data;st.data=i(at,he)?at:he,me&&xe()&&k().onSuccess(he,m,n)}catch(Le){ji();const at=k(),{shouldRetryOnError:Wt}=at;at.isPaused()||(st.error=Le,me&&xe()&&(at.onError(Le,m,at),(Wt===!0||tn(Wt)&&Wt(Le))&&(!k().revalidateOnFocus||!k().revalidateOnReconnect||P())&&at.onErrorRetry(Le,m,at,yr=>{const er=p[m];er&&er[0]&&er[0](cr.ERROR_REVALIDATE_EVENT,yr)},{retryCount:(Bt.retryCount||0)+1,dedupe:!0})))}return He=!1,Yr(),!0},[m,r]),Ui=f.useCallback((...ae)=>jm(r,w.current,...ae),[]);if(Ti(()=>{T.current=t,E.current=n,ee(fe)||(Je.current=fe)}),Ti(()=>{if(!m)return;const ae=Dt.bind(pt,sf);let le=0;const de=lS(m,p,(He,Bt={})=>{if(He==cr.FOCUS_EVENT){const me=Date.now();k().revalidateOnFocus&&me>le&&P()&&(le=me+k().focusThrottleInterval,ae())}else if(He==cr.RECONNECT_EVENT)k().revalidateOnReconnect&&P()&&ae();else{if(He==cr.MUTATE_EVENT)return Dt();if(He==cr.ERROR_REVALIDATE_EVENT)return Dt(Bt)}});return S.current=!1,w.current=m,C.current=!0,M({_k:y}),$e&&(ee(se)||lo?ae():Jk(ae)),()=>{S.current=!0,de()}},[m]),Ti(()=>{let ae;function le(){const de=tn(c)?c(_().data):c;de&&ae!==-1&&(ae=setTimeout(he,de))}function he(){!_().error&&(u||k().isVisible())&&(d||k().isOnline())?Dt(sf).then(le):le()}return le(),()=>{ae&&(clearTimeout(ae),ae=-1)}},[c,u,d,m]),f.useDebugValue(ft),o&&ee(se)&&m){if(!au&&lo)throw new Error("Fallback data is required when using suspense in SSR.");T.current=t,E.current=n,S.current=!1;const ae=b[m];if(!ee(ae)){const le=Ui(ae);s0(le)}if(ee(ve)){const le=Dt(sf);ee(ft)||(le.status="fulfilled",le.value=!0),s0(le)}else throw ve}return{mutate:Ui,get data(){return X.data=!0,ft},get error(){return X.error=!0,ve},get isValidating(){return X.isValidating=!0,Dn},get isLoading(){return X.isLoading=!0,$s}}},Fm=wa.defineProperty(nS,"defaultValue",{value:$m}),cS=aS(r_),i_=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Fm,default:cS,mutate:eS,preload:X2,unstable_serialize:n_,useSWRConfig:sS},Symbol.toStringTag,{value:"Module"})),a0=D.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),af={dedupe:!0},o_=(e,t,n)=>{const{cache:r,compare:i,suspense:o,fallbackData:s,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[p,v,g,b]=wn.get(r),[m,y]=$r(e),C=f.useRef(!1),S=f.useRef(!1),w=f.useRef(m),T=f.useRef(t),E=f.useRef(n),k=()=>E.current,P=()=>k().isVisible()&&k().isOnline(),[_,M,A,Z]=Er(r,m),X=f.useRef({}).current,ge=ee(s)?n.fallback[m]:s,Ee=(ae,le)=>{for(const he in X){const de=he;if(de==="data"){if(!i(ae[de],le[de])&&(!ee(ae[de])||!i(ft,le[de])))return!1}else if(le[de]!==ae[de])return!1}return!0},be=f.useMemo(()=>{const ae=(()=>!m||!t?!1:ee(a)?k().isPaused()||o?!1:ee(l)?!0:l:a)(),le=xe=>{const st=pr(xe);return delete st._k,ae?{isValidating:!0,isLoading:!0,...st}:st},he=_(),de=Z(),He=le(he),Bt=he===de?He:le(de);let me=He;return[()=>{const xe=le(_());return Ee(xe,me)?(me.data=xe.data,me.isLoading=xe.isLoading,me.isValidating=xe.isValidating,me.error=xe.error,me):(me=xe,xe)},()=>Bt]},[r,m]),V=Am.useSyncExternalStore(f.useCallback(ae=>A(m,(le,he)=>{Ee(he,le)||ae()}),[r,m]),be[0],be[1]),H=!C.current,ce=p[m]&&p[m].length>0,fe=V.data,se=ee(fe)?ge:fe,ve=V.error,Je=f.useRef(se),ft=h?ee(fe)?Je.current:fe:se,$e=(()=>ce&&!ee(ve)?!1:H&&!ee(a)?a:k().isPaused()?!1:o?ee(se)?!1:l:ee(se)||l)(),Ct=!!(m&&t&&H&&$e),Dn=ee(V.isValidating)?Ct:V.isValidating,$s=ee(V.isLoading)?Ct:V.isLoading,Dt=f.useCallback(async ae=>{const le=T.current;if(!m||!le||S.current||k().isPaused())return!1;let he,de,He=!0;const Bt=ae||{},me=!g[m]||!Bt.dedupe,xe=()=>au?!S.current&&m===w.current&&C.current:m===w.current,st={isValidating:!1,isLoading:!1},Yr=()=>{M(st)},ji=()=>{const Le=g[m];Le&&Le[1]===de&&delete g[m]},$i={isValidating:!0};ee(_().data)&&($i.isLoading=!0);try{if(me&&(M($i),n.loadingTimeout&&ee(_().data)&&setTimeout(()=>{He&&xe()&&k().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[le(y),lu()]),[he,de]=g[m],he=await he,me&&setTimeout(ji,n.dedupingInterval),!g[m]||g[m][1]!==de)return me&&xe()&&k().onDiscarded(m),!1;st.error=pt;const Le=v[m];if(!ee(Le)&&(de<=Le[0]||de<=Le[1]||Le[1]===0))return Yr(),me&&xe()&&k().onDiscarded(m),!1;const at=_().data;st.data=i(at,he)?at:he,me&&xe()&&k().onSuccess(he,m,n)}catch(Le){ji();const at=k(),{shouldRetryOnError:Wt}=at;at.isPaused()||(st.error=Le,me&&xe()&&(at.onError(Le,m,at),(Wt===!0||tn(Wt)&&Wt(Le))&&(!k().revalidateOnFocus||!k().revalidateOnReconnect||P())&&at.onErrorRetry(Le,m,at,yr=>{const er=p[m];er&&er[0]&&er[0](cr.ERROR_REVALIDATE_EVENT,yr)},{retryCount:(Bt.retryCount||0)+1,dedupe:!0})))}return He=!1,Yr(),!0},[m,r]),Ui=f.useCallback((...ae)=>jm(r,w.current,...ae),[]);if(Ti(()=>{T.current=t,E.current=n,ee(fe)||(Je.current=fe)}),Ti(()=>{if(!m)return;const ae=Dt.bind(pt,af);let le=0;const de=lS(m,p,(He,Bt={})=>{if(He==cr.FOCUS_EVENT){const me=Date.now();k().revalidateOnFocus&&me>le&&P()&&(le=me+k().focusThrottleInterval,ae())}else if(He==cr.RECONNECT_EVENT)k().revalidateOnReconnect&&P()&&ae();else{if(He==cr.MUTATE_EVENT)return Dt();if(He==cr.ERROR_REVALIDATE_EVENT)return Dt(Bt)}});return S.current=!1,w.current=m,C.current=!0,M({_k:y}),$e&&(ee(se)||lo?ae():Jk(ae)),()=>{S.current=!0,de()}},[m]),Ti(()=>{let ae;function le(){const de=tn(c)?c(_().data):c;de&&ae!==-1&&(ae=setTimeout(he,de))}function he(){!_().error&&(u||k().isVisible())&&(d||k().isOnline())?Dt(af).then(le):le()}return le(),()=>{ae&&(clearTimeout(ae),ae=-1)}},[c,u,d,m]),f.useDebugValue(ft),o&&ee(se)&&m){if(!au&&lo)throw new Error("Fallback data is required when using suspense in SSR.");T.current=t,E.current=n,S.current=!1;const ae=b[m];if(!ee(ae)){const le=Ui(ae);a0(le)}if(ee(ve)){const le=Dt(af);ee(ft)||(le.status="fulfilled",le.value=!0),a0(le)}else throw ve}return{mutate:Ui,get data(){return X.data=!0,ft},get error(){return X.error=!0,ve},get isValidating(){return X.isValidating=!0,Dn},get isLoading(){return X.isLoading=!0,$s}}};wa.defineProperty(nS,"defaultValue",{value:$m});const s_=aS(o_),a_=e=>$r(e?e(0,null):null)[0],lf=Promise.resolve(),l_=e=>(t,n,r)=>{const i=f.useRef(!1),{cache:o,initialSize:s=1,revalidateAll:a=!1,persistSize:l=!1,revalidateFirstPage:c=!0,revalidateOnMount:u=!1,parallel:d=!1}=r,[,,,h]=wn.get(fl);let p;try{p=a_(t),p&&(p=rS+p)}catch{}const[v,g,b]=Er(o,p),m=f.useCallback(()=>ee(v()._l)?s:v()._l,[o,p,s]);Am.useSyncExternalStore(f.useCallback(k=>p?b(p,()=>{k()}):()=>{},[o,p]),m,m);const y=f.useCallback(()=>{const k=v()._l;return ee(k)?s:k},[p,s]),C=f.useRef(y());Ti(()=>{if(!i.current){i.current=!0;return}p&&g({_l:l?C.current:y()})},[p,o]);const S=u&&!i.current,w=e(p,async k=>{const P=v()._i,_=v()._r;g({_r:pt});const M=[],A=y(),[Z]=Er(o,k),X=Z().data,ge=[];let Ee=null;for(let be=0;be<A;++be){const[V,H]=$r(t(be,d?null:Ee));if(!V)break;const[ce,fe]=Er(o,V);let se=ce().data;const ve=a||P||ee(se)||c&&!be&&!ee(X)||S||X&&!ee(X[be])&&!r.compare(X[be],se);if(n&&(typeof _=="function"?_(se,H):ve)){const Je=async()=>{if(!(V in h))se=await n(H);else{const $e=h[V];delete h[V],se=await $e}fe({data:se,_k:H}),M[be]=se};d?ge.push(Je):await Je()}else M[be]=se;d||(Ee=se)}return d&&await Promise.all(ge.map(be=>be())),g({_i:pt}),M},r),T=f.useCallback(function(k,P){const _=typeof P=="boolean"?{revalidate:P}:P||{},M=_.revalidate!==!1;return p?(M&&(ee(k)?g({_i:!0,_r:_.revalidate}):g({_i:!1,_r:_.revalidate})),arguments.length?w.mutate(k,{..._,revalidate:M}):w.mutate()):lf},[p,o]),E=f.useCallback(k=>{if(!p)return lf;const[,P]=Er(o,p);let _;if(tn(k)?_=k(y()):typeof k=="number"&&(_=k),typeof _!="number")return lf;P({_l:_}),C.current=_;const M=[],[A]=Er(o,p);let Z=null;for(let X=0;X<_;++X){const[ge]=$r(t(X,Z)),[Ee]=Er(o,ge),be=ge?Ee().data:pt;if(ee(be))return T(A().data);M.push(be),Z=be}return T(M)},[p,o,T,y]);return{size:y(),setSize:E,mutate:T,get data(){return w.data},get error(){return w.error},get isValidating(){return w.isValidating},get isLoading(){return w.isLoading}}},c_=t_(s_,l_);function u_(e,t){if(!e)throw typeof t=="string"?new Error(t):new Error(`${t.displayName} not found`)}var Ds=(e,t)=>{const{assertCtxFn:n=u_}=t||{},r=D.createContext(void 0);return r.displayName=e,[r,()=>{const s=D.useContext(r);return n(s,`${e} not found`),s.value},()=>{const s=D.useContext(r);return s?s.value:{}}]},uS={};E2(uS,{SWRConfig:()=>Fm,useSWR:()=>cS,useSWRInfinite:()=>c_});x2(uS,i_);var[dS,d_]=Ds("ClerkInstanceContext"),[f_,h_]=Ds("UserContext"),[p_,g8]=Ds("ClientContext"),[m_,v8]=Ds("SessionContext");D.createContext({});var[g_,y8]=Ds("OrganizationContext"),v_=({children:e,organization:t,swrConfig:n})=>D.createElement(Fm,{value:n},D.createElement(g_.Provider,{value:{value:{organization:t}}},e));function fS(e){if(!D.useContext(dS)){if(typeof e=="function"){e();return}throw new Error(`${e} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider`)}}typeof window<"u"?D.useLayoutEffect:D.useEffect;function y_(){fS("useUser");const e=h_();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}var l0=Object.prototype.hasOwnProperty;function c0(e,t,n){for(n of e.keys())if(Ta(n,t))return n}function Ta(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ta(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=c0(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=c0(t,i),!i)||!Ta(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(l0.call(e,n)&&++r&&!l0.call(t,n)||!(n in t)||!Ta(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}var b_=Ta,hS=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,k_=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],pS="pk_live_",S_="pk_test_";function u0(e,t={}){if(e=e||"",!e||!mS(e)){if(t.fatal)throw new Error("Publishable key not valid.");return null}const n=e.startsWith(pS)?"production":"development";let r=hS(e.split("_")[2]);return r=r.slice(0,-1),t.proxyUrl?r=t.proxyUrl:n!=="development"&&t.domain&&(r=`clerk.${t.domain}`),{instanceType:n,frontendApi:r}}function mS(e){e=e||"";const t=e.startsWith(pS)||e.startsWith(S_),n=hS(e.split("_")[2]||"").endsWith("$");return t&&n}function C_(){const e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;const n=typeof t=="string"?t:t.hostname;let r=e.get(n);return r===void 0&&(r=k_.some(i=>n.endsWith(i)),e.set(n,r)),r}}}var Or=Hk({packageName:"@clerk/clerk-react"});function w_(e){Or.setMessages(e).setPackageName(e)}var[T_,E_]=Ds("AuthContext"),x_=dS,P_=d_,__="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",R_=e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,cf="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",I_="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",O_="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",M_="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",N_="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",D_=e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored.`,L_=e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,A_=e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`,U_="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored.",j_="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored.",$_="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",F_="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",z_="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",V_="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",B_="Missing props. <UserButton.Action /> component requires the following props: label.",gS=e=>{fS(()=>{Or.throwMissingClerkProviderError({source:e})})},gt=(e,t)=>{t=t||e.displayName||e.name||"Component",e.displayName=t;const n=r=>{gS(t||"withClerk");const i=P_();return i.loaded?D.createElement(e,{...r,clerk:i}):null};return n.displayName=`withClerk(${t})`,n},W_=({children:e})=>{gS("SignedIn");const{userId:t}=E_();return t?D.createElement(D.Fragment,null,e):null};gt(({clerk:e,...t})=>{const{client:n,session:r}=e,i=n.activeSessions&&n.activeSessions.length>0;return D.useEffect(()=>{r===null&&i?e.redirectToAfterSignOut():e.redirectToSignIn(t)},[]),null},"RedirectToSignIn");gt(({clerk:e,...t})=>(D.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp");gt(({clerk:e})=>(D.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");gt(({clerk:e})=>(D.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");gt(({clerk:e})=>(D.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");gt(({clerk:e,...t})=>(D.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");var vS=e=>{throw TypeError(e)},zm=(e,t,n)=>t.has(e)||vS("Cannot "+n),G=(e,t,n)=>(zm(e,t,"read from private field"),n?n.call(e):t.get(e)),Do=(e,t,n)=>t.has(e)?vS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Eo=(e,t,n,r)=>(zm(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),d0=(e,t,n)=>(zm(e,t,"access private method"),n),H_=(e,t="5.22.2")=>{if(e)return e;const n=G_(t);return n?n==="snapshot"?"5.22.2":n:K_(t)},G_=e=>{var t;return(t=e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:t[1]},K_=e=>e.trim().replace(/^v/,"").split(".")[0];function q_(e){return e?J_(e)||yS(e):!0}function J_(e){return/^http(s)?:\/\//.test(e||"")}function yS(e){return e.startsWith("/")}function Q_(e){return e?yS(e)?new URL(e,window.location.origin).toString():e:""}function Y_(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}return`clerk.${e.replace(t,"")}`}var X_="loadScript cannot be called when document does not exist",Z_="loadScript cannot be called without a src";async function eR(e="",t){const{async:n,defer:r,beforeLoad:i,crossOrigin:o,nonce:s}=t||{};return new Promise((a,l)=>{e||l(Z_),(!document||!document.body)&&l(X_);const c=document.createElement("script");o&&c.setAttribute("crossorigin",o),c.async=n||!1,c.defer=r||!1,c.addEventListener("load",()=>{c.remove(),a(c)}),c.addEventListener("error",()=>{c.remove(),l()}),c.src=e,c.nonce=s,i?.(c),document.body.appendChild(c)})}var f0="Clerk: Failed to load Clerk",{isDevOrStagingUrl:tR}=C_(),bS=Hk({packageName:"@clerk/shared"});function nR(e){bS.setPackageName({packageName:e})}var rR=async e=>{const t=document.querySelector("script[data-clerk-js-script]");if(t)return new Promise((n,r)=>{t.addEventListener("load",()=>{n(t)}),t.addEventListener("error",()=>{r(f0)})});if(!e?.publishableKey){bS.throwMissingPublishableKeyError();return}return eR(iR(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:sR(e)}).catch(()=>{throw new Error(f0)})},iR=e=>{var t,n;const{clerkJSUrl:r,clerkJSVariant:i,clerkJSVersion:o,proxyUrl:s,domain:a,publishableKey:l}=e;if(r)return r;let c="";s&&q_(s)?c=Q_(s).replace(/http(s)?:\/\//,""):a&&!tR(((t=u0(l))==null?void 0:t.frontendApi)||"")?c=Y_(a):c=((n=u0(l))==null?void 0:n.frontendApi)||"";const u=i?`${i.replace(/\.+$/,"")}.`:"",d=H_(o);return`https://${c}/npm/@clerk/clerk-js@${d}/dist/clerk.${u}browser.js`},oR=e=>{const t={};return e.publishableKey&&(t["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(t["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(t["data-clerk-domain"]=e.domain),e.nonce&&(t.nonce=e.nonce),t},sR=e=>t=>{const n=oR(e);for(const r in n)t.setAttribute(r,n[r])},h0=(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n},aR=()=>{try{return!1}catch{}return!1};function uf(e,t,n){if(typeof e=="function")return e(t);if(typeof e<"u")return e;if(typeof n<"u")return n}function p0(){return typeof window<"u"}var Kt=e=>{aR()&&console.error(`Clerk: ${e}`)};typeof window<"u"&&!window.global&&(window.global=typeof global>"u"?window:global);var qu=e=>t=>{try{return D.Children.only(e)}catch{return Or.throw(R_(t))}},Ju=(e,t)=>(e||(e=t),typeof e=="string"&&(e=D.createElement("button",null,e)),e),Qu=e=>(...t)=>{if(e&&typeof e=="function")return e(...t)};function lR(e){return typeof e=="function"}var Hl=new Map;function cR(e,t,n=1){D.useEffect(()=>{const r=Hl.get(e)||0;return r==n?Or.throw(t):(Hl.set(e,r+1),()=>{Hl.set(e,(Hl.get(e)||1)-1)})},[])}function uR(e,t,n){const r=e.displayName||e.name||t||"Component",i=o=>(cR(t,n),D.createElement(e,{...o}));return i.displayName=`withMaxAllowedInstancesGuard(${r})`,i}var Ea=e=>{const t=Array(e.length).fill(null),[n,r]=f.useState(t);return e.map((i,o)=>({id:i.id,mount:s=>r(a=>a.map((l,c)=>c===o?s:l)),unmount:()=>r(s=>s.map((a,l)=>l===o?null:a)),portal:()=>D.createElement(D.Fragment,null,n[o]?Ns.createPortal(i.component,n[o]):null)}))},Xt=(e,t)=>!!e&&D.isValidElement(e)&&e?.type===t,kS=e=>CS({children:e,reorderItemsLabels:["account","security"],LinkComponent:Xu,PageComponent:Yu,MenuItemsComponent:Vm,componentName:"UserProfile"}),SS=e=>CS({children:e,reorderItemsLabels:["general","members"],LinkComponent:Wm,PageComponent:Bm,componentName:"OrganizationProfile"}),CS=({children:e,LinkComponent:t,PageComponent:n,MenuItemsComponent:r,reorderItemsLabels:i,componentName:o})=>{const s=[];D.Children.forEach(e,g=>{if(!Xt(g,n)&&!Xt(g,t)&&!Xt(g,r)){g&&Kt(D_(o));return}const{props:b}=g,{children:m,label:y,url:C,labelIcon:S}=b;if(Xt(g,n))if(m0(b,i))s.push({label:y});else if(df(b))s.push({label:y,labelIcon:S,children:m,url:C});else{Kt(L_(o));return}if(Xt(g,t))if(ff(b))s.push({label:y,labelIcon:S,url:C});else{Kt(A_(o));return}});const a=[],l=[],c=[];s.forEach((g,b)=>{if(df(g)){a.push({component:g.children,id:b}),l.push({component:g.labelIcon,id:b});return}ff(g)&&c.push({component:g.labelIcon,id:b})});const u=Ea(a),d=Ea(l),h=Ea(c),p=[],v=[];return s.forEach((g,b)=>{if(m0(g,i)){p.push({label:g.label});return}if(df(g)){const{portal:m,mount:y,unmount:C}=u.find(E=>E.id===b),{portal:S,mount:w,unmount:T}=d.find(E=>E.id===b);p.push({label:g.label,url:g.url,mount:y,unmount:C,mountIcon:w,unmountIcon:T}),v.push(m),v.push(S);return}if(ff(g)){const{portal:m,mount:y,unmount:C}=h.find(S=>S.id===b);p.push({label:g.label,url:g.url,mountIcon:y,unmountIcon:C}),v.push(m);return}}),{customPages:p,customPagesPortals:v}},m0=(e,t)=>{const{children:n,label:r,url:i,labelIcon:o}=e;return!n&&!i&&!o&&t.some(s=>s===r)},df=e=>{const{children:t,label:n,url:r,labelIcon:i}=e;return!!t&&!!r&&!!i&&!!n},ff=e=>{const{children:t,label:n,url:r,labelIcon:i}=e;return!t&&!!r&&!!i&&!!n},dR=e=>fR({children:e,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:Vm,MenuActionComponent:wS,MenuLinkComponent:TS,UserProfileLinkComponent:Xu,UserProfilePageComponent:Yu}),fR=({children:e,MenuItemsComponent:t,MenuActionComponent:n,MenuLinkComponent:r,UserProfileLinkComponent:i,UserProfilePageComponent:o,reorderItemsLabels:s})=>{const a=[],l=[],c=[];D.Children.forEach(e,v=>{if(!Xt(v,t)&&!Xt(v,i)&&!Xt(v,o)){v&&Kt(U_);return}if(Xt(v,i)||Xt(v,o))return;const{props:g}=v;D.Children.forEach(g.children,b=>{if(!Xt(b,n)&&!Xt(b,r)){b&&Kt(j_);return}const{props:m}=b,{label:y,labelIcon:C,href:S,onClick:w,open:T}=m;if(Xt(b,n))if(g0(m,s))a.push({label:y});else if(hf(m)){const E={label:y,labelIcon:C};if(w!==void 0)a.push({...E,onClick:w});else if(T!==void 0)a.push({...E,open:T.startsWith("/")?T:`/${T}`});else{Kt("Custom menu item must have either onClick or open property");return}}else{Kt(B_);return}if(Xt(b,r))if(pf(m))a.push({label:y,labelIcon:C,href:S});else{Kt(V_);return}})});const u=[],d=[];a.forEach((v,g)=>{hf(v)&&u.push({component:v.labelIcon,id:g}),pf(v)&&d.push({component:v.labelIcon,id:g})});const h=Ea(u),p=Ea(d);return a.forEach((v,g)=>{if(g0(v,s)&&l.push({label:v.label}),hf(v)){const{portal:b,mount:m,unmount:y}=h.find(S=>S.id===g),C={label:v.label,mountIcon:m,unmountIcon:y};"onClick"in v?C.onClick=v.onClick:"open"in v&&(C.open=v.open),l.push(C),c.push(b)}if(pf(v)){const{portal:b,mount:m,unmount:y}=p.find(C=>C.id===g);l.push({label:v.label,href:v.href,mountIcon:m,unmountIcon:y}),c.push(b)}}),{customMenuItems:l,customMenuItemsPortals:c}},g0=(e,t)=>{const{children:n,label:r,onClick:i,labelIcon:o}=e;return!n&&!i&&!o&&t.some(s=>s===r)},hf=e=>{const{label:t,labelIcon:n,onClick:r,open:i}=e;return!!n&&!!t&&(typeof r=="function"||typeof i=="string")},pf=e=>{const{label:t,href:n,labelIcon:r}=e;return!!n&&!!r&&!!t},xo=e=>"mount"in e,v0=e=>"open"in e,gr=class extends D.PureComponent{constructor(){super(...arguments),this.portalRef=D.createRef()}componentDidUpdate(e){var t,n,r,i;if(!xo(e)||!xo(this.props))return;const o=h0(e.props,"customPages","customMenuItems","children"),s=h0(this.props.props,"customPages","customMenuItems","children"),a=((t=o.customPages)==null?void 0:t.length)!==((n=s.customPages)==null?void 0:n.length),l=((r=o.customMenuItems)==null?void 0:r.length)!==((i=s.customMenuItems)==null?void 0:i.length);(!b_(o,s)||a||l)&&this.props.updateProps({node:this.portalRef.current,props:this.props.props})}componentDidMount(){this.portalRef.current&&(xo(this.props)&&this.props.mount(this.portalRef.current,this.props.props),v0(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.portalRef.current&&(xo(this.props)&&this.props.unmount(this.portalRef.current),v0(this.props)&&this.props.close())}render(){var e,t,n,r;return D.createElement(D.Fragment,null,D.createElement("div",{ref:this.portalRef}),xo(this.props)&&((t=(e=this.props)==null?void 0:e.customPagesPortals)==null?void 0:t.map((i,o)=>f.createElement(i,{key:o}))),xo(this.props)&&((r=(n=this.props)==null?void 0:n.customMenuItemsPortals)==null?void 0:r.map((i,o)=>f.createElement(i,{key:o}))))}},hR=gt(({clerk:e,...t})=>D.createElement(gr,{mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:t}),"SignIn"),pR=gt(({clerk:e,...t})=>D.createElement(gr,{mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:t}),"SignUp");function Yu({children:e}){return Kt(I_),D.createElement(D.Fragment,null,e)}function Xu({children:e}){return Kt(O_),D.createElement(D.Fragment,null,e)}var mR=gt(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=kS(t.children);return D.createElement(gr,{mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...t,customPages:n},customPagesPortals:r})},"UserProfile");Object.assign(mR,{Page:Yu,Link:Xu});var gR=gt(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=kS(t.children),i=Object.assign(t.userProfileProps||{},{customPages:n}),{customMenuItems:o,customMenuItemsPortals:s}=dR(t.children);return D.createElement(gr,{mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...t,userProfileProps:i,customMenuItems:o},customPagesPortals:r,customMenuItemsPortals:s})},"UserButton");function Vm({children:e}){return Kt($_),D.createElement(D.Fragment,null,e)}function wS({children:e}){return Kt(F_),D.createElement(D.Fragment,null,e)}function TS({children:e}){return Kt(z_),D.createElement(D.Fragment,null,e)}var vR=Object.assign(gR,{UserProfilePage:Yu,UserProfileLink:Xu,MenuItems:Vm,Action:wS,Link:TS});gt(({clerk:e,...t})=>D.createElement(gr,{mount:e.__experimental_mountUserVerification,unmount:e.__experimental_unmountUserVerification,updateProps:e.__unstable__updateProps,props:t}),"__experimental_UserVerification");function Bm({children:e}){return Kt(M_),D.createElement(D.Fragment,null,e)}function Wm({children:e}){return Kt(N_),D.createElement(D.Fragment,null,e)}var yR=gt(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=SS(t.children);return D.createElement(gr,{mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...t,customPages:n},customPagesPortals:r})},"OrganizationProfile");Object.assign(yR,{Page:Bm,Link:Wm});gt(({clerk:e,...t})=>D.createElement(gr,{mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:t}),"CreateOrganization");var bR=gt(({clerk:e,...t})=>{const{customPages:n,customPagesPortals:r}=SS(t.children),i=Object.assign(t.organizationProfileProps||{},{customPages:n});return D.createElement(gr,{mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...t,organizationProfileProps:i},customPagesPortals:r})},"OrganizationSwitcher");Object.assign(bR,{OrganizationProfilePage:Bm,OrganizationProfileLink:Wm});gt(({clerk:e,...t})=>D.createElement(gr,{mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:t}),"OrganizationList");gt(({clerk:e,...t})=>D.createElement(gr,{open:e.openGoogleOneTap,close:e.closeGoogleOneTap,props:t}),"GoogleOneTap");gt(({clerk:e,children:t,...n})=>{const{signUpFallbackRedirectUrl:r,forceRedirectUrl:i,fallbackRedirectUrl:o,signUpForceRedirectUrl:s,mode:a,...l}=n;t=Ju(t,"Sign in");const c=qu(t)("SignInButton"),u=()=>{const p={forceRedirectUrl:i,fallbackRedirectUrl:o,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:s};return a==="modal"?e.openSignIn(p):e.redirectToSignIn({...p,signInFallbackRedirectUrl:o,signInForceRedirectUrl:i})},h={...l,onClick:async p=>(c&&typeof c=="object"&&"props"in c&&await Qu(c.props.onClick)(p),u())};return D.cloneElement(c,h)},"SignInButton");gt(({clerk:e,children:t,...n})=>{const{fallbackRedirectUrl:r,forceRedirectUrl:i,signInFallbackRedirectUrl:o,signInForceRedirectUrl:s,mode:a,unsafeMetadata:l,...c}=n;t=Ju(t,"Sign up");const u=qu(t)("SignUpButton"),d=()=>{const v={fallbackRedirectUrl:r,forceRedirectUrl:i,signInFallbackRedirectUrl:o,signInForceRedirectUrl:s,unsafeMetadata:l};return a==="modal"?e.openSignUp(v):e.redirectToSignUp({...v,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:i})},p={...c,onClick:async v=>(u&&typeof u=="object"&&"props"in u&&await Qu(u.props.onClick)(v),d())};return D.cloneElement(u,p)},"SignUpButton");gt(({clerk:e,children:t,...n})=>{const{redirectUrl:r="/",signOutOptions:i,...o}=n;t=Ju(t,"Sign out");const s=qu(t)("SignOutButton"),a=()=>e.signOut({redirectUrl:r}),c={...o,onClick:async u=>(await Qu(s.props.onClick)(u),a())};return D.cloneElement(s,c)},"SignOutButton");gt(({clerk:e,children:t,...n})=>{const{redirectUrl:r,...i}=n;t=Ju(t,"Sign in with Metamask");const o=qu(t)("SignInWithMetamaskButton"),s=async()=>{async function c(){await e.authenticateWithMetamask({redirectUrl:r||void 0})}c()},l={...i,onClick:async c=>(await Qu(o.props.onClick)(c),s())};return D.cloneElement(o,l)},"SignInWithMetamask");var kR={name:"@clerk/clerk-react",version:"5.9.1",environment:"production"},Q,Lo,Ao,Vi,Bi,vc,Wh,ES=class xS{constructor(t){Do(this,vc),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountUserVerificationNodes=new Map,this.premountMethodCalls=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],Do(this,Q,!1),Do(this,Lo),Do(this,Ao),Do(this,Vi),this.buildSignInUrl=i=>{const o=()=>{var s;return((s=this.clerkjs)==null?void 0:s.buildSignInUrl(i))||""};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("buildSignInUrl",o)},this.buildSignUpUrl=i=>{const o=()=>{var s;return((s=this.clerkjs)==null?void 0:s.buildSignUpUrl(i))||""};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("buildSignUpUrl",o)},this.buildAfterSignInUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignInUrl())||""};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("buildAfterSignInUrl",i)},this.buildAfterSignUpUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignUpUrl())||""};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("buildAfterSignUpUrl",i)},this.buildAfterSignOutUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignOutUrl())||""};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("buildAfterSignOutUrl",i)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",i)},this.buildUserProfileUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildUserProfileUrl())||""};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("buildUserProfileUrl",i)},this.buildCreateOrganizationUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildCreateOrganizationUrl())||""};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("buildCreateOrganizationUrl",i)},this.buildOrganizationProfileUrl=()=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildOrganizationProfileUrl())||""};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("buildOrganizationProfileUrl",i)},this.buildUrlWithAuth=i=>{const o=()=>{var s;return((s=this.clerkjs)==null?void 0:s.buildUrlWithAuth(i))||""};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("buildUrlWithAuth",o)},this.handleUnauthenticated=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.handleUnauthenticated()};this.clerkjs&&G(this,Q)?i():this.premountMethodCalls.set("handleUnauthenticated",i)},this.addOnLoaded=i=>{this.loadedListeners.push(i),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(i=>i()),this.loadedListeners=[]},this.hydrateClerkJS=i=>{if(!i)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=i,this.premountMethodCalls.forEach(o=>o()),this.premountAddListenerCalls.forEach((o,s)=>{o.nativeUnsubscribe=i.addListener(s)}),this.preopenSignIn!==null&&i.openSignIn(this.preopenSignIn),this.preopenSignUp!==null&&i.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&i.openUserProfile(this.preopenUserProfile),this.preopenUserVerification!==null&&i.__experimental_openUserVerification(this.preopenUserVerification),this.preopenOneTap!==null&&i.openGoogleOneTap(this.preopenOneTap),this.preopenOrganizationProfile!==null&&i.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&i.openCreateOrganization(this.preopenCreateOrganization),this.premountSignInNodes.forEach((o,s)=>{i.mountSignIn(s,o)}),this.premountSignUpNodes.forEach((o,s)=>{i.mountSignUp(s,o)}),this.premountUserProfileNodes.forEach((o,s)=>{i.mountUserProfile(s,o)}),this.premountUserVerificationNodes.forEach((o,s)=>{i.__experimental_mountUserVerification(s,o)}),this.premountUserButtonNodes.forEach((o,s)=>{i.mountUserButton(s,o)}),this.premountOrganizationListNodes.forEach((o,s)=>{i.mountOrganizationList(s,o)}),Eo(this,Q,!0),this.emitLoaded(),this.clerkjs},this.__unstable__updateProps=async i=>{const o=await d0(this,vc,Wh).call(this);if(o&&"__unstable__updateProps"in o)return o.__unstable__updateProps(i)},this.setActive=({session:i,organization:o,beforeEmit:s})=>this.clerkjs?this.clerkjs.setActive({session:i,organization:o,beforeEmit:s}):Promise.reject(),this.openSignIn=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.openSignIn(i):this.preopenSignIn=i},this.closeSignIn=()=>{this.clerkjs&&G(this,Q)?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__experimental_openUserVerification=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.__experimental_openUserVerification(i):this.preopenUserVerification=i},this.__experimental_closeUserVerification=()=>{this.clerkjs&&G(this,Q)?this.clerkjs.__experimental_closeUserVerification():this.preopenUserVerification=null},this.openGoogleOneTap=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.openGoogleOneTap(i):this.preopenOneTap=i},this.closeGoogleOneTap=()=>{this.clerkjs&&G(this,Q)?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.openUserProfile(i):this.preopenUserProfile=i},this.closeUserProfile=()=>{this.clerkjs&&G(this,Q)?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.openOrganizationProfile(i):this.preopenOrganizationProfile=i},this.closeOrganizationProfile=()=>{this.clerkjs&&G(this,Q)?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.openCreateOrganization(i):this.preopenCreateOrganization=i},this.closeCreateOrganization=()=>{this.clerkjs&&G(this,Q)?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openSignUp=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.openSignUp(i):this.preopenSignUp=i},this.closeSignUp=()=>{this.clerkjs&&G(this,Q)?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountSignIn(i,o):this.premountSignInNodes.set(i,o)},this.unmountSignIn=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountSignIn(i):this.premountSignInNodes.delete(i)},this.__experimental_mountUserVerification=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.__experimental_mountUserVerification(i,o):this.premountUserVerificationNodes.set(i,o)},this.__experimental_unmountUserVerification=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.__experimental_unmountUserVerification(i):this.premountUserVerificationNodes.delete(i)},this.mountSignUp=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountSignUp(i,o):this.premountSignUpNodes.set(i,o)},this.unmountSignUp=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountSignUp(i):this.premountSignUpNodes.delete(i)},this.mountUserProfile=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountUserProfile(i,o):this.premountUserProfileNodes.set(i,o)},this.unmountUserProfile=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountUserProfile(i):this.premountUserProfileNodes.delete(i)},this.mountOrganizationProfile=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountOrganizationProfile(i,o):this.premountOrganizationProfileNodes.set(i,o)},this.unmountOrganizationProfile=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountOrganizationProfile(i):this.premountOrganizationProfileNodes.delete(i)},this.mountCreateOrganization=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountCreateOrganization(i,o):this.premountCreateOrganizationNodes.set(i,o)},this.unmountCreateOrganization=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountCreateOrganization(i):this.premountCreateOrganizationNodes.delete(i)},this.mountOrganizationSwitcher=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountOrganizationSwitcher(i,o):this.premountOrganizationSwitcherNodes.set(i,o)},this.unmountOrganizationSwitcher=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountOrganizationSwitcher(i):this.premountOrganizationSwitcherNodes.delete(i)},this.mountOrganizationList=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountOrganizationList(i,o):this.premountOrganizationListNodes.set(i,o)},this.unmountOrganizationList=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountOrganizationList(i):this.premountOrganizationListNodes.delete(i)},this.mountUserButton=(i,o)=>{this.clerkjs&&G(this,Q)?this.clerkjs.mountUserButton(i,o):this.premountUserButtonNodes.set(i,o)},this.unmountUserButton=i=>{this.clerkjs&&G(this,Q)?this.clerkjs.unmountUserButton(i):this.premountUserButtonNodes.delete(i)},this.addListener=i=>{if(this.clerkjs)return this.clerkjs.addListener(i);{const o=()=>{var s;const a=this.premountAddListenerCalls.get(i);a&&((s=a.nativeUnsubscribe)==null||s.call(a),this.premountAddListenerCalls.delete(i))};return this.premountAddListenerCalls.set(i,{unsubscribe:o,nativeUnsubscribe:void 0}),o}},this.navigate=i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.navigate(i)};this.clerkjs&&G(this,Q)?o():this.premountMethodCalls.set("navigate",o)},this.redirectWithAuth=async(...i)=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.redirectWithAuth(...i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("redirectWithAuth",o)},this.redirectToSignIn=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.redirectToSignIn(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("redirectToSignIn",o)},this.redirectToSignUp=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.redirectToSignUp(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("redirectToSignUp",o)},this.redirectToUserProfile=async()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToUserProfile()};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("redirectToUserProfile",i)},this.redirectToAfterSignUp=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToAfterSignUp()};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("redirectToAfterSignUp",i)},this.redirectToAfterSignIn=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToAfterSignIn()};this.clerkjs&&G(this,Q)?i():this.premountMethodCalls.set("redirectToAfterSignIn",i)},this.redirectToAfterSignOut=()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToAfterSignOut()};this.clerkjs&&G(this,Q)?i():this.premountMethodCalls.set("redirectToAfterSignOut",i)},this.redirectToOrganizationProfile=async()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToOrganizationProfile()};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("redirectToOrganizationProfile",i)},this.redirectToCreateOrganization=async()=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToCreateOrganization()};if(this.clerkjs&&G(this,Q))return i();this.premountMethodCalls.set("redirectToCreateOrganization",i)},this.handleRedirectCallback=i=>{var o;const s=()=>{var a;return(a=this.clerkjs)==null?void 0:a.handleRedirectCallback(i)};this.clerkjs&&G(this,Q)?(o=s())==null||o.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",s)},this.handleGoogleOneTapCallback=(i,o)=>{var s;const a=()=>{var l;return(l=this.clerkjs)==null?void 0:l.handleGoogleOneTapCallback(i,o)};this.clerkjs&&G(this,Q)?(s=a())==null||s.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",a)},this.handleEmailLinkVerification=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.handleEmailLinkVerification(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("handleEmailLinkVerification",o)},this.authenticateWithMetamask=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.authenticateWithMetamask(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("authenticateWithMetamask",o)},this.authenticateWithCoinbaseWallet=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.authenticateWithCoinbaseWallet(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",o)},this.authenticateWithWeb3=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.authenticateWithWeb3(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("authenticateWithWeb3",o)},this.authenticateWithGoogleOneTap=async i=>(await d0(this,vc,Wh).call(this)).authenticateWithGoogleOneTap(i),this.createOrganization=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.createOrganization(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("createOrganization",o)},this.getOrganization=async i=>{const o=()=>{var s;return(s=this.clerkjs)==null?void 0:s.getOrganization(i)};if(this.clerkjs&&G(this,Q))return o();this.premountMethodCalls.set("getOrganization",o)},this.signOut=async(i,o)=>{const s=()=>{var a;return(a=this.clerkjs)==null?void 0:a.signOut(i,o)};if(this.clerkjs&&G(this,Q))return s();this.premountMethodCalls.set("signOut",s)};const{Clerk:n=null,publishableKey:r}=t||{};Eo(this,Vi,r),Eo(this,Ao,t?.proxyUrl),Eo(this,Lo,t?.domain),this.options=t,this.Clerk=n,this.mode=p0()?"browser":"server",this.options.sdkMetadata||(this.options.sdkMetadata=kR),this.loadClerkJS()}get publishableKey(){return G(this,Vi)}get loaded(){return G(this,Q)}static getOrCreateInstance(t){return(!p0()||!G(this,Bi)||t.Clerk&&G(this,Bi).Clerk!==t.Clerk)&&Eo(this,Bi,new xS(t)),G(this,Bi)}static clearInstance(){Eo(this,Bi,null)}get domain(){return typeof window<"u"&&window.location?uf(G(this,Lo),new URL(window.location.href),""):typeof G(this,Lo)=="function"?Or.throw(cf):G(this,Lo)||""}get proxyUrl(){return typeof window<"u"&&window.location?uf(G(this,Ao),new URL(window.location.href),""):typeof G(this,Ao)=="function"?Or.throw(cf):G(this,Ao)||""}get sdkMetadata(){var t;return((t=this.clerkjs)==null?void 0:t.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var t;return(t=this.clerkjs)==null?void 0:t.instanceType}get frontendApi(){var t;return((t=this.clerkjs)==null?void 0:t.frontendApi)||""}get isStandardBrowser(){var t;return((t=this.clerkjs)==null?void 0:t.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return typeof window<"u"&&window.location?uf(this.options.isSatellite,new URL(window.location.href),!1):typeof this.options.isSatellite=="function"?Or.throw(cf):!1}async loadClerkJS(){var t;if(!(this.mode!=="browser"||G(this,Q))){typeof window<"u"&&(window.__clerk_publishable_key=G(this,Vi),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let n;lR(this.Clerk)?(n=new this.Clerk(G(this,Vi),{proxyUrl:this.proxyUrl,domain:this.domain}),await n.load(this.options)):(n=this.Clerk,n.loaded||await n.load(this.options)),global.Clerk=n}else{if(global.Clerk||await rR({...this.options,publishableKey:G(this,Vi),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");await global.Clerk.load(this.options)}return(t=global.Clerk)!=null&&t.loaded?this.hydrateClerkJS(global.Clerk):void 0}catch(n){const r=n;console.error(r.stack||r.message||r);return}}}get version(){var t;return(t=this.clerkjs)==null?void 0:t.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get telemetry(){if(this.clerkjs)return this.clerkjs.telemetry}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}__unstable__setEnvironment(...t){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(t);else return}};Q=new WeakMap;Lo=new WeakMap;Ao=new WeakMap;Vi=new WeakMap;Bi=new WeakMap;vc=new WeakSet;Wh=function(){return new Promise(e=>{this.addOnLoaded(()=>e(this.clerkjs))})};Do(ES,Bi);var y0=ES,SR=(e,t,n)=>!e&&n?CR(n):wR(t),CR=e=>{const t=e.userId,n=e.user,r=e.sessionId,i=e.session,o=e.organization,s=e.orgId,a=e.orgRole,l=e.orgPermissions,c=e.orgSlug,u=e.actor,d=e.__experimental_factorVerificationAge;return{userId:t,user:n,sessionId:r,session:i,organization:o,orgId:s,orgRole:a,orgPermissions:l,orgSlug:c,actor:u,__experimental_factorVerificationAge:d}},wR=e=>{var t;const n=e.user?e.user.id:e.user,r=e.user,i=e.session?e.session.id:e.session,o=e.session,s=e.session?e.session.__experimental_factorVerificationAge:null,a=o?.actor,l=e.organization,c=e.organization?e.organization.id:e.organization,u=l?.slug,d=l&&((t=r?.organizationMemberships)==null?void 0:t.find(v=>v.organization.id===c)),h=d&&d.permissions,p=d&&d.role;return{userId:n,user:r,sessionId:i,session:o,organization:l,orgId:c,orgRole:p,orgSlug:u,orgPermissions:h,actor:a,__experimental_factorVerificationAge:s}};function TR(e){const{isomorphicClerkOptions:t,initialState:n,children:r}=e,{isomorphicClerk:i,loaded:o}=ER(t),[s,a]=D.useState({client:i.client,session:i.session,user:i.user,organization:i.organization});D.useEffect(()=>i.addListener(_=>a({..._})),[]);const l=SR(o,s,n),c=D.useMemo(()=>({value:i}),[o]),u=D.useMemo(()=>({value:s.client}),[s.client]),{sessionId:d,session:h,userId:p,user:v,orgId:g,actor:b,organization:m,orgRole:y,orgSlug:C,orgPermissions:S,__experimental_factorVerificationAge:w}=l,T=D.useMemo(()=>({value:{sessionId:d,userId:p,actor:b,orgId:g,orgRole:y,orgSlug:C,orgPermissions:S,__experimental_factorVerificationAge:w}}),[d,p,b,g,y,C,w]),E=D.useMemo(()=>({value:h}),[d,h]),k=D.useMemo(()=>({value:v}),[p,v]),P=D.useMemo(()=>({value:{organization:m}}),[g,m]);return D.createElement(x_.Provider,{value:c},D.createElement(p_.Provider,{value:u},D.createElement(m_.Provider,{value:E},D.createElement(v_,{...P.value},D.createElement(T_.Provider,{value:T},D.createElement(f_.Provider,{value:k},r))))))}var ER=e=>{const[t,n]=D.useState(!1),r=D.useMemo(()=>y0.getOrCreateInstance(e),[]);return D.useEffect(()=>{r.__unstable__updateProps({appearance:e.appearance})},[e.appearance]),D.useEffect(()=>{r.__unstable__updateProps({options:e})},[e.localization]),D.useEffect(()=>{r.addOnLoaded(()=>n(!0))},[]),D.useEffect(()=>()=>{y0.clearInstance()},[]),{isomorphicClerk:r,loaded:t}};function xR(e){const{initialState:t,children:n,...r}=e,{publishableKey:i="",Clerk:o}=r;return o||(i?i&&!mS(i)&&Or.throwInvalidPublishableKeyError({key:i}):Or.throwMissingPublishableKeyError()),D.createElement(TR,{initialState:t,isomorphicClerkOptions:r},n)}var PS=uR(xR,"ClerkProvider",__);PS.displayName="ClerkProvider";w_({packageName:"@clerk/clerk-react"});nR("@clerk/clerk-react");/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}var lt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(lt||(lt={}));const b0="popstate";function PR(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return Ja("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:co(i)}return RR(t,n,null,e)}function ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _R(){return Math.random().toString(36).substr(2,8)}function k0(e,t){return{usr:e.state,key:e.key,idx:t}}function Ja(e,t,n,r){return n===void 0&&(n=null),Qe({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Wr(t):t,{state:n,key:t&&t.key||r||_R()})}function co(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Wr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function RR(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=lt.Pop,l=null,c=u();c==null&&(c=0,s.replaceState(Qe({},s.state,{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=lt.Pop;let b=u(),m=b==null?null:b-c;c=b,l&&l({action:a,location:g.location,delta:m})}function h(b,m){a=lt.Push;let y=Ja(g.location,b,m);n&&n(y,b),c=u()+1;let C=k0(y,c),S=g.createHref(y);try{s.pushState(C,"",S)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(S)}o&&l&&l({action:a,location:g.location,delta:1})}function p(b,m){a=lt.Replace;let y=Ja(g.location,b,m);n&&n(y,b),c=u();let C=k0(y,c),S=g.createHref(y);s.replaceState(C,"",S),o&&l&&l({action:a,location:g.location,delta:0})}function v(b){let m=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof b=="string"?b:co(b);return y=y.replace(/ $/,"%20"),ke(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let g={get action(){return a},get location(){return e(i,s)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(b0,d),l=b,()=>{i.removeEventListener(b0,d),l=null}},createHref(b){return t(i,b)},createURL:v,encodeLocation(b){let m=v(b);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:p,go(b){return s.go(b)}};return g}var Ne;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ne||(Ne={}));const IR=new Set(["lazy","caseSensitive","path","id","index","children"]);function OR(e){return e.index===!0}function Qa(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,o)=>{let s=[...n,String(o)],a=typeof i.id=="string"?i.id:s.join("-");if(ke(i.index!==!0||!i.children,"Cannot specify children on an index route"),ke(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),OR(i)){let l=Qe({},i,t(i),{id:a});return r[a]=l,l}else{let l=Qe({},i,t(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Qa(i.children,t,s,r)),l}})}function Wi(e,t,n){return n===void 0&&(n="/"),yc(e,t,n,!1)}function yc(e,t,n,r){let i=typeof t=="string"?Wr(t):t,o=Ls(i.pathname||"/",n);if(o==null)return null;let s=_S(e);NR(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=WR(o);a=VR(s[l],c,r)}return a}function MR(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function _S(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(ke(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Mr([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(ke(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_S(o.children,t,u,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:FR(c,o.index),routesMeta:u})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of RS(o.path))i(o,s,l)}),t}function RS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=RS(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function NR(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zR(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DR=/^:[\w-]+$/,LR=3,AR=2,UR=1,jR=10,$R=-2,S0=e=>e==="*";function FR(e,t){let n=e.split("/"),r=n.length;return n.some(S0)&&(r+=$R),t&&(r+=AR),n.filter(i=>!S0(i)).reduce((i,o)=>i+(DR.test(o)?LR:o===""?UR:jR),r)}function zR(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function VR(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=C0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=C0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Mr([o,d.pathname]),pathnameBase:KR(Mr([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=Mr([o,d.pathnameBase]))}return s}function C0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=BR(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let g=a[d]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const v=a[d];return p&&!v?c[h]=void 0:c[h]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:e}}function BR(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Cs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function WR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cs(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ls(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function HR(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Wr(e):e;return{pathname:n?n.startsWith("/")?n:GR(n,t):t,search:qR(r),hash:JR(i)}}function GR(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function mf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hm(e,t){let n=IS(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Gm(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Wr(e):(i=Qe({},e),ke(!i.pathname||!i.pathname.includes("?"),mf("?","pathname","search",i)),ke(!i.pathname||!i.pathname.includes("#"),mf("#","pathname","hash",i)),ke(!i.search||!i.search.includes("#"),mf("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=t.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=HR(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Mr=e=>e.join("/").replace(/\/\/+/g,"/"),KR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class cu{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Zu(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const OS=["post","put","patch","delete"],QR=new Set(OS),YR=["get",...OS],XR=new Set(YR),ZR=new Set([301,302,303,307,308]),e5=new Set([307,308]),gf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},t5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Js={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Km=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n5=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),MS="remix-router-transitions";function r5(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;ke(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let x=e.detectErrorBoundary;i=I=>({hasErrorBoundary:x(I)})}else i=n5;let o={},s=Qa(e.routes,i,void 0,o),a,l=e.basename||"/",c=e.unstable_dataStrategy||c5,u=e.unstable_patchRoutesOnNavigation,d=Qe({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),h=null,p=new Set,v=1e3,g=new Set,b=null,m=null,y=null,C=e.hydrationData!=null,S=Wi(s,e.history.location,l),w=null;if(S==null&&!u){let x=Ht(404,{pathname:e.history.location.pathname}),{matches:I,route:N}=O0(s);S=I,w={[N.id]:x}}S&&!e.hydrationData&&kl(S,s,e.history.location.pathname).active&&(S=null);let T;if(S)if(S.some(x=>x.route.lazy))T=!1;else if(!S.some(x=>x.route.loader))T=!0;else if(d.v7_partialHydration){let x=e.hydrationData?e.hydrationData.loaderData:null,I=e.hydrationData?e.hydrationData.errors:null,N=z=>z.route.loader?typeof z.route.loader=="function"&&z.route.loader.hydrate===!0?!1:x&&x[z.route.id]!==void 0||I&&I[z.route.id]!==void 0:!0;if(I){let z=S.findIndex(J=>I[J.route.id]!==void 0);T=S.slice(0,z+1).every(N)}else T=S.every(N)}else T=e.hydrationData!=null;else if(T=!1,S=[],d.v7_partialHydration){let x=kl(null,s,e.history.location.pathname);x.active&&x.matches&&(S=x.matches)}let E,k={historyAction:e.history.action,location:e.history.location,matches:S,initialized:T,navigation:gf,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||w,fetchers:new Map,blockers:new Map},P=lt.Pop,_=!1,M,A=!1,Z=new Map,X=null,ge=!1,Ee=!1,be=[],V=new Set,H=new Map,ce=0,fe=-1,se=new Map,ve=new Set,Je=new Map,ft=new Map,$e=new Set,Ct=new Map,Dn=new Map,$s=new Map,Dt;function Ui(){if(h=e.history.listen(x=>{let{action:I,location:N,delta:z}=x;if(Dt){Dt(),Dt=void 0;return}Cs(Dn.size===0||z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let J=Bg({currentLocation:k.location,nextLocation:N,historyAction:I});if(J&&z!=null){let ie=new Promise(pe=>{Dt=pe});e.history.go(z*-1),yl(J,{state:"blocked",location:N,proceed(){yl(J,{state:"proceeding",proceed:void 0,reset:void 0,location:N}),ie.then(()=>e.history.go(z))},reset(){let pe=new Map(k.blockers);pe.set(J,Js),he({blockers:pe})}});return}return me(I,N)}),n){T5(t,Z);let x=()=>E5(t,Z);t.addEventListener("pagehide",x),X=()=>t.removeEventListener("pagehide",x)}return k.initialized||me(lt.Pop,k.location,{initialHydration:!0}),E}function ae(){h&&h(),X&&X(),p.clear(),M&&M.abort(),k.fetchers.forEach((x,I)=>vl(I)),k.blockers.forEach((x,I)=>Vg(I))}function le(x){return p.add(x),()=>p.delete(x)}function he(x,I){I===void 0&&(I={}),k=Qe({},k,x);let N=[],z=[];d.v7_fetcherPersist&&k.fetchers.forEach((J,ie)=>{J.state==="idle"&&($e.has(ie)?z.push(ie):N.push(ie))}),[...p].forEach(J=>J(k,{deletedFetchers:z,unstable_viewTransitionOpts:I.viewTransitionOpts,unstable_flushSync:I.flushSync===!0})),d.v7_fetcherPersist&&(N.forEach(J=>k.fetchers.delete(J)),z.forEach(J=>vl(J)))}function de(x,I,N){var z,J;let{flushSync:ie}=N===void 0?{}:N,pe=k.actionData!=null&&k.navigation.formMethod!=null&&Fn(k.navigation.formMethod)&&k.navigation.state==="loading"&&((z=x.state)==null?void 0:z._isRedirect)!==!0,K;I.actionData?Object.keys(I.actionData).length>0?K=I.actionData:K=null:pe?K=k.actionData:K=null;let ue=I.loaderData?R0(k.loaderData,I.loaderData,I.matches||[],I.errors):k.loaderData,te=k.blockers;te.size>0&&(te=new Map(te),te.forEach((Oe,Fe)=>te.set(Fe,Js)));let ne=_===!0||k.navigation.formMethod!=null&&Fn(k.navigation.formMethod)&&((J=x.state)==null?void 0:J._isRedirect)!==!0;a&&(s=a,a=void 0),ge||P===lt.Pop||(P===lt.Push?e.history.push(x,x.state):P===lt.Replace&&e.history.replace(x,x.state));let Ie;if(P===lt.Pop){let Oe=Z.get(k.location.pathname);Oe&&Oe.has(x.pathname)?Ie={currentLocation:k.location,nextLocation:x}:Z.has(x.pathname)&&(Ie={currentLocation:x,nextLocation:k.location})}else if(A){let Oe=Z.get(k.location.pathname);Oe?Oe.add(x.pathname):(Oe=new Set([x.pathname]),Z.set(k.location.pathname,Oe)),Ie={currentLocation:k.location,nextLocation:x}}he(Qe({},I,{actionData:K,loaderData:ue,historyAction:P,location:x,initialized:!0,navigation:gf,revalidation:"idle",restoreScrollPosition:Hg(x,I.matches||k.matches),preventScrollReset:ne,blockers:te}),{viewTransitionOpts:Ie,flushSync:ie===!0}),P=lt.Pop,_=!1,A=!1,ge=!1,Ee=!1,be=[]}async function He(x,I){if(typeof x=="number"){e.history.go(x);return}let N=Hh(k.location,k.matches,l,d.v7_prependBasename,x,d.v7_relativeSplatPath,I?.fromRouteId,I?.relative),{path:z,submission:J,error:ie}=w0(d.v7_normalizeFormMethod,!1,N,I),pe=k.location,K=Ja(k.location,z,I&&I.state);K=Qe({},K,e.history.encodeLocation(K));let ue=I&&I.replace!=null?I.replace:void 0,te=lt.Push;ue===!0?te=lt.Replace:ue===!1||J!=null&&Fn(J.formMethod)&&J.formAction===k.location.pathname+k.location.search&&(te=lt.Replace);let ne=I&&"preventScrollReset"in I?I.preventScrollReset===!0:void 0,Ie=(I&&I.unstable_flushSync)===!0,Oe=Bg({currentLocation:pe,nextLocation:K,historyAction:te});if(Oe){yl(Oe,{state:"blocked",location:K,proceed(){yl(Oe,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),He(x,I)},reset(){let Fe=new Map(k.blockers);Fe.set(Oe,Js),he({blockers:Fe})}});return}return await me(te,K,{submission:J,pendingError:ie,preventScrollReset:ne,replace:I&&I.replace,enableViewTransition:I&&I.unstable_viewTransition,flushSync:Ie})}function Bt(){if(Pd(),he({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){me(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}me(P||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:A===!0})}}async function me(x,I,N){M&&M.abort(),M=null,P=x,ge=(N&&N.startUninterruptedRevalidation)===!0,GE(k.location,k.matches),_=(N&&N.preventScrollReset)===!0,A=(N&&N.enableViewTransition)===!0;let z=a||s,J=N&&N.overrideNavigation,ie=Wi(z,I,l),pe=(N&&N.flushSync)===!0,K=kl(ie,z,I.pathname);if(K.active&&K.matches&&(ie=K.matches),!ie){let{error:Pe,notFoundMatches:wt,route:ht}=_d(I.pathname);de(I,{matches:wt,loaderData:{},errors:{[ht.id]:Pe}},{flushSync:pe});return}if(k.initialized&&!Ee&&m5(k.location,I)&&!(N&&N.submission&&Fn(N.submission.formMethod))){de(I,{matches:ie},{flushSync:pe});return}M=new AbortController;let ue=Po(e.history,I,M.signal,N&&N.submission),te;if(N&&N.pendingError)te=[Qo(ie).route.id,{type:Ne.error,error:N.pendingError}];else if(N&&N.submission&&Fn(N.submission.formMethod)){let Pe=await xe(ue,I,N.submission,ie,K.active,{replace:N.replace,flushSync:pe});if(Pe.shortCircuited)return;if(Pe.pendingActionResult){let[wt,ht]=Pe.pendingActionResult;if(cn(ht)&&Zu(ht.error)&&ht.error.status===404){M=null,de(I,{matches:Pe.matches,loaderData:{},errors:{[wt]:ht.error}});return}}ie=Pe.matches||ie,te=Pe.pendingActionResult,J=vf(I,N.submission),pe=!1,K.active=!1,ue=Po(e.history,ue.url,ue.signal)}let{shortCircuited:ne,matches:Ie,loaderData:Oe,errors:Fe}=await st(ue,I,ie,K.active,J,N&&N.submission,N&&N.fetcherSubmission,N&&N.replace,N&&N.initialHydration===!0,pe,te);ne||(M=null,de(I,Qe({matches:Ie||ie},I0(te),{loaderData:Oe,errors:Fe})))}async function xe(x,I,N,z,J,ie){ie===void 0&&(ie={}),Pd();let pe=C5(I,N);if(he({navigation:pe},{flushSync:ie.flushSync===!0}),J){let te=await Sl(z,I.pathname,x.signal);if(te.type==="aborted")return{shortCircuited:!0};if(te.type==="error"){let{boundaryId:ne,error:Ie}=bl(I.pathname,te);return{matches:te.partialMatches,pendingActionResult:[ne,{type:Ne.error,error:Ie}]}}else if(te.matches)z=te.matches;else{let{notFoundMatches:ne,error:Ie,route:Oe}=_d(I.pathname);return{matches:ne,pendingActionResult:[Oe.id,{type:Ne.error,error:Ie}]}}}let K,ue=ua(z,I);if(!ue.route.action&&!ue.route.lazy)K={type:Ne.error,error:Ht(405,{method:x.method,pathname:I.pathname,routeId:ue.route.id})};else if(K=(await yr("action",k,x,[ue],z,null))[ue.route.id],x.signal.aborted)return{shortCircuited:!0};if(qi(K)){let te;return ie&&ie.replace!=null?te=ie.replace:te=x0(K.response.headers.get("Location"),new URL(x.url),l)===k.location.pathname+k.location.search,await Wt(x,K,!0,{submission:N,replace:te}),{shortCircuited:!0}}if(pi(K))throw Ht(400,{type:"defer-action"});if(cn(K)){let te=Qo(z,ue.route.id);return(ie&&ie.replace)!==!0&&(P=lt.Push),{matches:z,pendingActionResult:[te.route.id,K]}}return{matches:z,pendingActionResult:[ue.route.id,K]}}async function st(x,I,N,z,J,ie,pe,K,ue,te,ne){let Ie=J||vf(I,ie),Oe=ie||pe||N0(Ie),Fe=!ge&&(!d.v7_partialHydration||!ue);if(z){if(Fe){let et=Yr(ne);he(Qe({navigation:Ie},et!==void 0?{actionData:et}:{}),{flushSync:te})}let ye=await Sl(N,I.pathname,x.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let{boundaryId:et,error:an}=bl(I.pathname,ye);return{matches:ye.partialMatches,loaderData:{},errors:{[et]:an}}}else if(ye.matches)N=ye.matches;else{let{error:et,notFoundMatches:an,route:tt}=_d(I.pathname);return{matches:an,loaderData:{},errors:{[tt.id]:et}}}}let Pe=a||s,[wt,ht]=T0(e.history,k,N,Oe,I,d.v7_partialHydration&&ue===!0,d.v7_skipActionErrorRevalidation,Ee,be,V,$e,Je,ve,Pe,l,ne);if(Rd(ye=>!(N&&N.some(et=>et.route.id===ye))||wt&&wt.some(et=>et.route.id===ye)),fe=++ce,wt.length===0&&ht.length===0){let ye=Fg();return de(I,Qe({matches:N,loaderData:{},errors:ne&&cn(ne[1])?{[ne[0]]:ne[1].error}:null},I0(ne),ye?{fetchers:new Map(k.fetchers)}:{}),{flushSync:te}),{shortCircuited:!0}}if(Fe){let ye={};if(!z){ye.navigation=Ie;let et=Yr(ne);et!==void 0&&(ye.actionData=et)}ht.length>0&&(ye.fetchers=ji(ht)),he(ye,{flushSync:te})}ht.forEach(ye=>{H.has(ye.key)&&Zr(ye.key),ye.controller&&H.set(ye.key,ye.controller)});let Fs=()=>ht.forEach(ye=>Zr(ye.key));M&&M.signal.addEventListener("abort",Fs);let{loaderResults:kr,fetcherResults:wo}=await er(k,N,wt,ht,x);if(x.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",Fs),ht.forEach(ye=>H.delete(ye.key));let ei=Gl(kr);if(ei)return await Wt(x,ei.result,!0,{replace:K}),{shortCircuited:!0};if(ei=Gl(wo),ei)return ve.add(ei.key),await Wt(x,ei.result,!0,{replace:K}),{shortCircuited:!0};let{loaderData:Cl,errors:Sr}=_0(k,N,wt,kr,ne,ht,wo,Ct);Ct.forEach((ye,et)=>{ye.subscribe(an=>{(an||ye.done)&&Ct.delete(et)})}),d.v7_partialHydration&&ue&&k.errors&&Object.entries(k.errors).filter(ye=>{let[et]=ye;return!wt.some(an=>an.route.id===et)}).forEach(ye=>{let[et,an]=ye;Sr=Object.assign(Sr||{},{[et]:an})});let wl=Fg(),Tl=zg(fe),El=wl||Tl||ht.length>0;return Qe({matches:N,loaderData:Cl,errors:Sr},El?{fetchers:new Map(k.fetchers)}:{})}function Yr(x){if(x&&!cn(x[1]))return{[x[0]]:x[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function ji(x){return x.forEach(I=>{let N=k.fetchers.get(I.key),z=Qs(void 0,N?N.data:void 0);k.fetchers.set(I.key,z)}),new Map(k.fetchers)}function $i(x,I,N,z){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(x)&&Zr(x);let J=(z&&z.unstable_flushSync)===!0,ie=a||s,pe=Hh(k.location,k.matches,l,d.v7_prependBasename,N,d.v7_relativeSplatPath,I,z?.relative),K=Wi(ie,pe,l),ue=kl(K,ie,pe);if(ue.active&&ue.matches&&(K=ue.matches),!K){br(x,I,Ht(404,{pathname:pe}),{flushSync:J});return}let{path:te,submission:ne,error:Ie}=w0(d.v7_normalizeFormMethod,!0,pe,z);if(Ie){br(x,I,Ie,{flushSync:J});return}let Oe=ua(K,te);if(_=(z&&z.preventScrollReset)===!0,ne&&Fn(ne.formMethod)){Le(x,I,te,Oe,K,ue.active,J,ne);return}Je.set(x,{routeId:I,path:te}),at(x,I,te,Oe,K,ue.active,J,ne)}async function Le(x,I,N,z,J,ie,pe,K){Pd(),Je.delete(x);function ue(tt){if(!tt.route.action&&!tt.route.lazy){let Cr=Ht(405,{method:K.formMethod,pathname:N,routeId:I});return br(x,I,Cr,{flushSync:pe}),!0}return!1}if(!ie&&ue(z))return;let te=k.fetchers.get(x);Xr(x,w5(K,te),{flushSync:pe});let ne=new AbortController,Ie=Po(e.history,N,ne.signal,K);if(ie){let tt=await Sl(J,N,Ie.signal);if(tt.type==="aborted")return;if(tt.type==="error"){let{error:Cr}=bl(N,tt);br(x,I,Cr,{flushSync:pe});return}else if(tt.matches){if(J=tt.matches,z=ua(J,N),ue(z))return}else{br(x,I,Ht(404,{pathname:N}),{flushSync:pe});return}}H.set(x,ne);let Oe=ce,Pe=(await yr("action",k,Ie,[z],J,x))[z.route.id];if(Ie.signal.aborted){H.get(x)===ne&&H.delete(x);return}if(d.v7_fetcherPersist&&$e.has(x)){if(qi(Pe)||cn(Pe)){Xr(x,ii(void 0));return}}else{if(qi(Pe))if(H.delete(x),fe>Oe){Xr(x,ii(void 0));return}else return ve.add(x),Xr(x,Qs(K)),Wt(Ie,Pe,!1,{fetcherSubmission:K});if(cn(Pe)){br(x,I,Pe.error);return}}if(pi(Pe))throw Ht(400,{type:"defer-action"});let wt=k.navigation.location||k.location,ht=Po(e.history,wt,ne.signal),Fs=a||s,kr=k.navigation.state!=="idle"?Wi(Fs,k.navigation.location,l):k.matches;ke(kr,"Didn't find any matches after fetcher action");let wo=++ce;se.set(x,wo);let ei=Qs(K,Pe.data);k.fetchers.set(x,ei);let[Cl,Sr]=T0(e.history,k,kr,K,wt,!1,d.v7_skipActionErrorRevalidation,Ee,be,V,$e,Je,ve,Fs,l,[z.route.id,Pe]);Sr.filter(tt=>tt.key!==x).forEach(tt=>{let Cr=tt.key,Kg=k.fetchers.get(Cr),JE=Qs(void 0,Kg?Kg.data:void 0);k.fetchers.set(Cr,JE),H.has(Cr)&&Zr(Cr),tt.controller&&H.set(Cr,tt.controller)}),he({fetchers:new Map(k.fetchers)});let wl=()=>Sr.forEach(tt=>Zr(tt.key));ne.signal.addEventListener("abort",wl);let{loaderResults:Tl,fetcherResults:El}=await er(k,kr,Cl,Sr,ht);if(ne.signal.aborted)return;ne.signal.removeEventListener("abort",wl),se.delete(x),H.delete(x),Sr.forEach(tt=>H.delete(tt.key));let ye=Gl(Tl);if(ye)return Wt(ht,ye.result,!1);if(ye=Gl(El),ye)return ve.add(ye.key),Wt(ht,ye.result,!1);let{loaderData:et,errors:an}=_0(k,kr,Cl,Tl,void 0,Sr,El,Ct);if(k.fetchers.has(x)){let tt=ii(Pe.data);k.fetchers.set(x,tt)}zg(wo),k.navigation.state==="loading"&&wo>fe?(ke(P,"Expected pending action"),M&&M.abort(),de(k.navigation.location,{matches:kr,loaderData:et,errors:an,fetchers:new Map(k.fetchers)})):(he({errors:an,loaderData:R0(k.loaderData,et,kr,an),fetchers:new Map(k.fetchers)}),Ee=!1)}async function at(x,I,N,z,J,ie,pe,K){let ue=k.fetchers.get(x);Xr(x,Qs(K,ue?ue.data:void 0),{flushSync:pe});let te=new AbortController,ne=Po(e.history,N,te.signal);if(ie){let Pe=await Sl(J,N,ne.signal);if(Pe.type==="aborted")return;if(Pe.type==="error"){let{error:wt}=bl(N,Pe);br(x,I,wt,{flushSync:pe});return}else if(Pe.matches)J=Pe.matches,z=ua(J,N);else{br(x,I,Ht(404,{pathname:N}),{flushSync:pe});return}}H.set(x,te);let Ie=ce,Fe=(await yr("loader",k,ne,[z],J,x))[z.route.id];if(pi(Fe)&&(Fe=await qm(Fe,ne.signal,!0)||Fe),H.get(x)===te&&H.delete(x),!ne.signal.aborted){if($e.has(x)){Xr(x,ii(void 0));return}if(qi(Fe))if(fe>Ie){Xr(x,ii(void 0));return}else{ve.add(x),await Wt(ne,Fe,!1);return}if(cn(Fe)){br(x,I,Fe.error);return}ke(!pi(Fe),"Unhandled fetcher deferred data"),Xr(x,ii(Fe.data))}}async function Wt(x,I,N,z){let{submission:J,fetcherSubmission:ie,replace:pe}=z===void 0?{}:z;I.response.headers.has("X-Remix-Revalidate")&&(Ee=!0);let K=I.response.headers.get("Location");ke(K,"Expected a Location header on the redirect Response"),K=x0(K,new URL(x.url),l);let ue=Ja(k.location,K,{_isRedirect:!0});if(n){let Pe=!1;if(I.response.headers.has("X-Remix-Reload-Document"))Pe=!0;else if(Km.test(K)){const wt=e.history.createURL(K);Pe=wt.origin!==t.location.origin||Ls(wt.pathname,l)==null}if(Pe){pe?t.location.replace(K):t.location.assign(K);return}}M=null;let te=pe===!0||I.response.headers.has("X-Remix-Replace")?lt.Replace:lt.Push,{formMethod:ne,formAction:Ie,formEncType:Oe}=k.navigation;!J&&!ie&&ne&&Ie&&Oe&&(J=N0(k.navigation));let Fe=J||ie;if(e5.has(I.response.status)&&Fe&&Fn(Fe.formMethod))await me(te,ue,{submission:Qe({},Fe,{formAction:K}),preventScrollReset:_,enableViewTransition:N?A:void 0});else{let Pe=vf(ue,J);await me(te,ue,{overrideNavigation:Pe,fetcherSubmission:ie,preventScrollReset:_,enableViewTransition:N?A:void 0})}}async function yr(x,I,N,z,J,ie){let pe,K={};try{pe=await u5(c,x,I,N,z,J,ie,o,i)}catch(ue){return z.forEach(te=>{K[te.route.id]={type:Ne.error,error:ue}}),K}for(let[ue,te]of Object.entries(pe))if(v5(te)){let ne=te.result;K[ue]={type:Ne.redirect,response:h5(ne,N,ue,J,l,d.v7_relativeSplatPath)}}else K[ue]=await f5(te);return K}async function er(x,I,N,z,J){let ie=x.matches,pe=yr("loader",x,J,N,I,null),K=Promise.all(z.map(async ne=>{if(ne.matches&&ne.match&&ne.controller){let Oe=(await yr("loader",x,Po(e.history,ne.path,ne.controller.signal),[ne.match],ne.matches,ne.key))[ne.match.route.id];return{[ne.key]:Oe}}else return Promise.resolve({[ne.key]:{type:Ne.error,error:Ht(404,{pathname:ne.path})}})})),ue=await pe,te=(await K).reduce((ne,Ie)=>Object.assign(ne,Ie),{});return await Promise.all([k5(I,ue,J.signal,ie,x.loaderData),S5(I,te,z)]),{loaderResults:ue,fetcherResults:te}}function Pd(){Ee=!0,be.push(...Rd()),Je.forEach((x,I)=>{H.has(I)&&(V.add(I),Zr(I))})}function Xr(x,I,N){N===void 0&&(N={}),k.fetchers.set(x,I),he({fetchers:new Map(k.fetchers)},{flushSync:(N&&N.flushSync)===!0})}function br(x,I,N,z){z===void 0&&(z={});let J=Qo(k.matches,I);vl(x),he({errors:{[J.route.id]:N},fetchers:new Map(k.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function jg(x){return d.v7_fetcherPersist&&(ft.set(x,(ft.get(x)||0)+1),$e.has(x)&&$e.delete(x)),k.fetchers.get(x)||t5}function vl(x){let I=k.fetchers.get(x);H.has(x)&&!(I&&I.state==="loading"&&se.has(x))&&Zr(x),Je.delete(x),se.delete(x),ve.delete(x),$e.delete(x),V.delete(x),k.fetchers.delete(x)}function BE(x){if(d.v7_fetcherPersist){let I=(ft.get(x)||0)-1;I<=0?(ft.delete(x),$e.add(x)):ft.set(x,I)}else vl(x);he({fetchers:new Map(k.fetchers)})}function Zr(x){let I=H.get(x);ke(I,"Expected fetch controller: "+x),I.abort(),H.delete(x)}function $g(x){for(let I of x){let N=jg(I),z=ii(N.data);k.fetchers.set(I,z)}}function Fg(){let x=[],I=!1;for(let N of ve){let z=k.fetchers.get(N);ke(z,"Expected fetcher: "+N),z.state==="loading"&&(ve.delete(N),x.push(N),I=!0)}return $g(x),I}function zg(x){let I=[];for(let[N,z]of se)if(z<x){let J=k.fetchers.get(N);ke(J,"Expected fetcher: "+N),J.state==="loading"&&(Zr(N),se.delete(N),I.push(N))}return $g(I),I.length>0}function WE(x,I){let N=k.blockers.get(x)||Js;return Dn.get(x)!==I&&Dn.set(x,I),N}function Vg(x){k.blockers.delete(x),Dn.delete(x)}function yl(x,I){let N=k.blockers.get(x)||Js;ke(N.state==="unblocked"&&I.state==="blocked"||N.state==="blocked"&&I.state==="blocked"||N.state==="blocked"&&I.state==="proceeding"||N.state==="blocked"&&I.state==="unblocked"||N.state==="proceeding"&&I.state==="unblocked","Invalid blocker state transition: "+N.state+" -> "+I.state);let z=new Map(k.blockers);z.set(x,I),he({blockers:z})}function Bg(x){let{currentLocation:I,nextLocation:N,historyAction:z}=x;if(Dn.size===0)return;Dn.size>1&&Cs(!1,"A router only supports one blocker at a time");let J=Array.from(Dn.entries()),[ie,pe]=J[J.length-1],K=k.blockers.get(ie);if(!(K&&K.state==="proceeding")&&pe({currentLocation:I,nextLocation:N,historyAction:z}))return ie}function _d(x){let I=Ht(404,{pathname:x}),N=a||s,{matches:z,route:J}=O0(N);return Rd(),{notFoundMatches:z,route:J,error:I}}function bl(x,I){return{boundaryId:Qo(I.partialMatches).route.id,error:Ht(400,{type:"route-discovery",pathname:x,message:I.error!=null&&"message"in I.error?I.error:String(I.error)})}}function Rd(x){let I=[];return Ct.forEach((N,z)=>{(!x||x(z))&&(N.cancel(),I.push(z),Ct.delete(z))}),I}function HE(x,I,N){if(b=x,y=I,m=N||null,!C&&k.navigation===gf){C=!0;let z=Hg(k.location,k.matches);z!=null&&he({restoreScrollPosition:z})}return()=>{b=null,y=null,m=null}}function Wg(x,I){return m&&m(x,I.map(z=>MR(z,k.loaderData)))||x.key}function GE(x,I){if(b&&y){let N=Wg(x,I);b[N]=y()}}function Hg(x,I){if(b){let N=Wg(x,I),z=b[N];if(typeof z=="number")return z}return null}function kl(x,I,N){if(u){if(g.has(N))return{active:!1,matches:x};if(x){if(Object.keys(x[0].params).length>0)return{active:!0,matches:yc(I,N,l,!0)}}else return{active:!0,matches:yc(I,N,l,!0)||[]}}return{active:!1,matches:null}}async function Sl(x,I,N){let z=x;for(;;){let J=a==null,ie=a||s;try{await a5(u,I,z,ie,o,i,$s,N)}catch(ue){return{type:"error",error:ue,partialMatches:z}}finally{J&&(s=[...s])}if(N.aborted)return{type:"aborted"};let pe=Wi(ie,I,l);if(pe)return Gg(I,g),{type:"success",matches:pe};let K=yc(ie,I,l,!0);if(!K||z.length===K.length&&z.every((ue,te)=>ue.route.id===K[te].route.id))return Gg(I,g),{type:"success",matches:null};z=K}}function Gg(x,I){if(I.size>=v){let N=I.values().next().value;I.delete(N)}I.add(x)}function KE(x){o={},a=Qa(x,i,void 0,o)}function qE(x,I){let N=a==null;DS(x,I,a||s,o,i),N&&(s=[...s],he({}))}return E={get basename(){return l},get future(){return d},get state(){return k},get routes(){return s},get window(){return t},initialize:Ui,subscribe:le,enableScrollRestoration:HE,navigate:He,fetch:$i,revalidate:Bt,createHref:x=>e.history.createHref(x),encodeLocation:x=>e.history.encodeLocation(x),getFetcher:jg,deleteFetcher:BE,dispose:ae,getBlocker:WE,deleteBlocker:Vg,patchRoutes:qE,_internalFetchControllers:H,_internalActiveDeferreds:Ct,_internalSetRoutes:KE},E}function i5(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Hh(e,t,n,r,i,o,s,a){let l,c;if(s){l=[];for(let d of t)if(l.push(d),d.route.id===s){c=d;break}}else l=t,c=t[t.length-1];let u=Gm(i||".",Hm(l,o),Ls(e.pathname,n)||e.pathname,a==="path");return i==null&&(u.search=e.search,u.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Jm(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Mr([n,u.pathname])),co(u)}function w0(e,t,n,r){if(!r||!i5(r))return{path:n};if(r.formMethod&&!b5(r.formMethod))return{path:n,error:Ht(405,{method:r.formMethod})};let i=()=>({path:n,error:Ht(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=e?o.toUpperCase():o.toLowerCase(),a=LS(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Fn(s))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,v)=>{let[g,b]=v;return""+p+g+"="+b+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!Fn(s))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}ke(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Gh(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Gh(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=P0(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=P0(l)}catch{return i()}let u={formMethod:s,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Fn(u.formMethod))return{path:n,submission:u};let d=Wr(n);return t&&d.search&&Jm(d.search)&&l.append("index",""),d.search="?"+l,{path:co(d),submission:u}}function o5(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function T0(e,t,n,r,i,o,s,a,l,c,u,d,h,p,v,g){let b=g?cn(g[1])?g[1].error:g[1].data:void 0,m=e.createURL(t.location),y=e.createURL(i),C=g&&cn(g[1])?g[0]:void 0,S=C?o5(n,C):n,w=g?g[1].statusCode:void 0,T=s&&w&&w>=400,E=S.filter((P,_)=>{let{route:M}=P;if(M.lazy)return!0;if(M.loader==null)return!1;if(o)return typeof M.loader!="function"||M.loader.hydrate?!0:t.loaderData[M.id]===void 0&&(!t.errors||t.errors[M.id]===void 0);if(s5(t.loaderData,t.matches[_],P)||l.some(X=>X===P.route.id))return!0;let A=t.matches[_],Z=P;return E0(P,Qe({currentUrl:m,currentParams:A.params,nextUrl:y,nextParams:Z.params},r,{actionResult:b,actionStatus:w,defaultShouldRevalidate:T?!1:a||m.pathname+m.search===y.pathname+y.search||m.search!==y.search||NS(A,Z)}))}),k=[];return d.forEach((P,_)=>{if(o||!n.some(ge=>ge.route.id===P.routeId)||u.has(_))return;let M=Wi(p,P.path,v);if(!M){k.push({key:_,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let A=t.fetchers.get(_),Z=ua(M,P.path),X=!1;h.has(_)?X=!1:c.has(_)?(c.delete(_),X=!0):A&&A.state!=="idle"&&A.data===void 0?X=a:X=E0(Z,Qe({currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:b,actionStatus:w,defaultShouldRevalidate:T?!1:a})),X&&k.push({key:_,routeId:P.routeId,path:P.path,matches:M,match:Z,controller:new AbortController})}),[E,k]}function s5(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function NS(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function E0(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function a5(e,t,n,r,i,o,s,a){let l=[t,...n.map(c=>c.route.id)].join("-");try{let c=s.get(l);c||(c=e({path:t,matches:n,patch:(u,d)=>{a.aborted||DS(u,d,r,i,o)}}),s.set(l,c)),c&&g5(c)&&await c}finally{s.delete(l)}}function DS(e,t,n,r,i){if(e){var o;let s=r[e];ke(s,"No route found to patch children into: routeId = "+e);let a=Qa(t,i,[e,"patch",String(((o=s.children)==null?void 0:o.length)||"0")],r);s.children?s.children.push(...a):s.children=a}else{let s=Qa(t,i,["patch",String(n.length||"0")],r);n.push(...s)}}async function l5(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];ke(i,"No route found in manifest");let o={};for(let s in r){let l=i[s]!==void 0&&s!=="hasErrorBoundary";Cs(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!IR.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,Qe({},t(i),{lazy:void 0}))}async function c5(e){let{matches:t}=e,n=t.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,o,s)=>Object.assign(i,{[n[s].route.id]:o}),{})}async function u5(e,t,n,r,i,o,s,a,l,c){let u=o.map(p=>p.route.lazy?l5(p.route,l,a):void 0),d=o.map((p,v)=>{let g=u[v],b=i.some(y=>y.route.id===p.route.id);return Qe({},p,{shouldLoad:b,resolve:async y=>(y&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(b=!0),b?d5(t,r,p,g,y,c):Promise.resolve({type:Ne.data,result:void 0}))})}),h=await e({matches:d,request:r,params:o[0].params,fetcherKey:s,context:c});try{await Promise.all(u)}catch{}return h}async function d5(e,t,n,r,i,o){let s,a,l=c=>{let u,d=new Promise((v,g)=>u=g);a=()=>u(),t.signal.addEventListener("abort",a);let h=v=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):c({request:t,params:n.params,context:o},...v!==void 0?[v]:[]),p=(async()=>{try{return{type:"data",result:await(i?i(g=>h(g)):h())}}catch(v){return{type:"error",result:v}}})();return Promise.race([p,d])};try{let c=n.route[e];if(r)if(c){let u,[d]=await Promise.all([l(c).catch(h=>{u=h}),r]);if(u!==void 0)throw u;s=d}else if(await r,c=n.route[e],c)s=await l(c);else if(e==="action"){let u=new URL(t.url),d=u.pathname+u.search;throw Ht(405,{method:t.method,pathname:d,routeId:n.route.id})}else return{type:Ne.data,result:void 0};else if(c)s=await l(c);else{let u=new URL(t.url),d=u.pathname+u.search;throw Ht(404,{pathname:d})}ke(s.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Ne.error,result:c}}finally{a&&t.signal.removeEventListener("abort",a)}return s}async function f5(e){let{result:t,type:n}=e;if(AS(t)){let c;try{let u=t.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(u){return{type:Ne.error,error:u}}return n===Ne.error?{type:Ne.error,error:new cu(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:Ne.data,data:c,statusCode:t.status,headers:t.headers}}if(n===Ne.error){if(M0(t)){var r;if(t.data instanceof Error){var i;return{type:Ne.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new cu(((r=t.init)==null?void 0:r.status)||500,void 0,t.data)}return{type:Ne.error,error:t,statusCode:Zu(t)?t.status:void 0}}if(y5(t)){var o,s;return{type:Ne.deferred,deferredData:t,statusCode:(o=t.init)==null?void 0:o.status,headers:((s=t.init)==null?void 0:s.headers)&&new Headers(t.init.headers)}}if(M0(t)){var a,l;return{type:Ne.data,data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}}return{type:Ne.data,data:t}}function h5(e,t,n,r,i,o){let s=e.headers.get("Location");if(ke(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Km.test(s)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);s=Hh(new URL(t.url),a,i,!0,s,o),e.headers.set("Location",s)}return e}function x0(e,t,n){if(Km.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),o=Ls(i.pathname,n)!=null;if(i.origin===t.origin&&o)return i.pathname+i.search+i.hash}return e}function Po(e,t,n,r){let i=e.createURL(LS(t)).toString(),o={signal:n};if(r&&Fn(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=Gh(r.formData):o.body=r.formData}return new Request(i,o)}function Gh(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function P0(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function p5(e,t,n,r,i){let o={},s=null,a,l=!1,c={},u=n&&cn(n[1])?n[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let h=d.route.id,p=t[h];if(ke(!qi(p),"Cannot handle redirect results in processLoaderData"),cn(p)){let v=p.error;if(u!==void 0&&(v=u,u=void 0),s=s||{},i)s[h]=v;else{let g=Qo(e,h);s[g.route.id]==null&&(s[g.route.id]=v)}o[h]=void 0,l||(l=!0,a=Zu(p.error)?p.error.status:500),p.headers&&(c[h]=p.headers)}else pi(p)?(r.set(h,p.deferredData),o[h]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[h]=p.headers)):(o[h]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[h]=p.headers))}),u!==void 0&&n&&(s={[n[0]]:u},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:c}}function _0(e,t,n,r,i,o,s,a){let{loaderData:l,errors:c}=p5(t,r,i,a,!1);return o.forEach(u=>{let{key:d,match:h,controller:p}=u,v=s[d];if(ke(v,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(cn(v)){let g=Qo(e.matches,h?.route.id);c&&c[g.route.id]||(c=Qe({},c,{[g.route.id]:v.error})),e.fetchers.delete(d)}else if(qi(v))ke(!1,"Unhandled fetcher revalidation redirect");else if(pi(v))ke(!1,"Unhandled fetcher deferred data");else{let g=ii(v.data);e.fetchers.set(d,g)}}),{loaderData:l,errors:c}}function R0(e,t,n,r){let i=Qe({},t);for(let o of n){let s=o.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(i[s]=t[s]):e[s]!==void 0&&o.route.loader&&(i[s]=e[s]),r&&r.hasOwnProperty(s))break}return i}function I0(e){return e?cn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Qo(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function O0(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ht(e,t){let{pathname:n,routeId:r,method:i,type:o,message:s}=t===void 0?{}:t,a="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(a="Bad Request",o==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+s):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?l="defer() is not supported in actions":o==="invalid-body"&&(l="Unable to encode submission body")):e===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):e===404?(a="Not Found",l='No route matches URL "'+n+'"'):e===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new cu(e||500,a,new Error(l),!0)}function Gl(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,i]=t[n];if(qi(i))return{key:r,result:i}}}function LS(e){let t=typeof e=="string"?Wr(e):e;return co(Qe({},t,{hash:""}))}function m5(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function g5(e){return typeof e=="object"&&e!=null&&"then"in e}function v5(e){return AS(e.result)&&ZR.has(e.result.status)}function pi(e){return e.type===Ne.deferred}function cn(e){return e.type===Ne.error}function qi(e){return(e&&e.type)===Ne.redirect}function M0(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function y5(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function AS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function b5(e){return XR.has(e.toLowerCase())}function Fn(e){return QR.has(e.toLowerCase())}async function k5(e,t,n,r,i){let o=Object.entries(t);for(let s=0;s<o.length;s++){let[a,l]=o[s],c=e.find(h=>h?.route.id===a);if(!c)continue;let u=r.find(h=>h.route.id===c.route.id),d=u!=null&&!NS(u,c)&&(i&&i[c.route.id])!==void 0;pi(l)&&d&&await qm(l,n,!1).then(h=>{h&&(t[a]=h)})}}async function S5(e,t,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:s}=n[r],a=t[i];e.find(c=>c?.route.id===o)&&pi(a)&&(ke(s,"Expected an AbortController for revalidating fetcher deferred result"),await qm(a,s.signal,!0).then(c=>{c&&(t[i]=c)}))}}async function qm(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Ne.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Ne.error,error:i}}return{type:Ne.data,data:e.deferredData.data}}}function Jm(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function ua(e,t){let n=typeof t=="string"?Wr(t).search:t.search;if(e[e.length-1].route.index&&Jm(n||""))return e[e.length-1];let r=IS(e);return r[r.length-1]}function N0(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:o,json:s}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function vf(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function C5(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Qs(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function w5(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ii(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function T5(e,t){try{let n=e.sessionStorage.getItem(MS);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&t.set(i,new Set(o||[]))}}catch{}}function E5(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem(MS,JSON.stringify(n))}catch(r){Cs(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ya.apply(this,arguments)}const ed=f.createContext(null),US=f.createContext(null),vo=f.createContext(null),td=f.createContext(null),Li=f.createContext({outlet:null,matches:[],isDataRoute:!1}),jS=f.createContext(null);function x5(e,t){let{relative:n}=t===void 0?{}:t;hl()||ke(!1);let{basename:r,navigator:i}=f.useContext(vo),{hash:o,pathname:s,search:a}=FS(e,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:Mr([r,s])),i.createHref({pathname:l,search:a,hash:o})}function hl(){return f.useContext(td)!=null}function nd(){return hl()||ke(!1),f.useContext(td).location}function $S(e){f.useContext(vo).static||f.useLayoutEffect(e)}function Qm(){let{isDataRoute:e}=f.useContext(Li);return e?F5():P5()}function P5(){hl()||ke(!1);let e=f.useContext(ed),{basename:t,future:n,navigator:r}=f.useContext(vo),{matches:i}=f.useContext(Li),{pathname:o}=nd(),s=JSON.stringify(Hm(i,n.v7_relativeSplatPath)),a=f.useRef(!1);return $S(()=>{a.current=!0}),f.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Gm(c,JSON.parse(s),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Mr([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,s,o,e])}const _5=f.createContext(null);function R5(e){let t=f.useContext(Li).outlet;return t&&f.createElement(_5.Provider,{value:e},t)}function FS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=f.useContext(vo),{matches:i}=f.useContext(Li),{pathname:o}=nd(),s=JSON.stringify(Hm(i,r.v7_relativeSplatPath));return f.useMemo(()=>Gm(e,JSON.parse(s),o,n==="path"),[e,s,o,n])}function I5(e,t,n,r){hl()||ke(!1);let{navigator:i}=f.useContext(vo),{matches:o}=f.useContext(Li),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=nd(),u;if(t){var d;let b=typeof t=="string"?Wr(t):t;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||ke(!1),u=b}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=Wi(e,{pathname:p}),g=L5(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Mr([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Mr([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return t&&g?f.createElement(td.Provider,{value:{location:Ya({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:lt.Pop}},g):g}function O5(){let e=$5(),t=Zu(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:i},n):null,o)}const M5=f.createElement(O5,null);class N5 extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(Li.Provider,{value:this.props.routeContext},f.createElement(jS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D5(e){let{routeContext:t,match:n,children:r}=e,i=f.useContext(ed);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Li.Provider,{value:t},r)}function L5(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);u>=0||ke(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=n,v=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let p,v=!1,g=null,b=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||M5,l&&(c<0&&h===0?(z5("route-fallback",!1),v=!0,b=null):c===h&&(v=!0,b=d.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,h+1)),y=()=>{let C;return p?C=g:v?C=b:d.route.Component?C=f.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,f.createElement(D5,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?f.createElement(N5,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var zS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zS||{}),uu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(uu||{});function A5(e){let t=f.useContext(ed);return t||ke(!1),t}function U5(e){let t=f.useContext(US);return t||ke(!1),t}function j5(e){let t=f.useContext(Li);return t||ke(!1),t}function VS(e){let t=j5(),n=t.matches[t.matches.length-1];return n.route.id||ke(!1),n.route.id}function $5(){var e;let t=f.useContext(jS),n=U5(uu.UseRouteError),r=VS(uu.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function F5(){let{router:e}=A5(zS.UseNavigateStable),t=VS(uu.UseNavigateStable),n=f.useRef(!1);return $S(()=>{n.current=!0}),f.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ya({fromRouteId:t},o)))},[e,t])}const D0={};function z5(e,t,n){!t&&!D0[e]&&(D0[e]=!0)}function BS(e){return R5(e.context)}function V5(e){let{basename:t="/",children:n=null,location:r,navigationType:i=lt.Pop,navigator:o,static:s=!1,future:a}=e;hl()&&ke(!1);let l=t.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:l,navigator:o,static:s,future:Ya({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=Wr(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:v="default"}=r,g=f.useMemo(()=>{let b=Ls(u,l);return b==null?null:{location:{pathname:b,search:d,hash:h,state:p,key:v},navigationType:i}},[l,u,d,h,p,v,i]);return g==null?null:f.createElement(vo.Provider,{value:c},f.createElement(td.Provider,{children:n,value:g}))}new Promise(()=>{});function B5(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:f.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:f.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:f.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}function W5(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function H5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function G5(e,t){return e.button===0&&(!t||t==="_self")&&!H5(e)}const K5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],q5="6";try{window.__reactRouterVersion=q5}catch{}function J5(e,t){return r5({basename:t?.basename,future:Xa({},t?.future,{v7_prependBasename:!0}),history:PR({window:t?.window}),hydrationData:t?.hydrationData||Q5(),routes:e,mapRouteProperties:B5,unstable_dataStrategy:t?.unstable_dataStrategy,unstable_patchRoutesOnNavigation:t?.unstable_patchRoutesOnNavigation,window:t?.window}).initialize()}function Q5(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Xa({},t,{errors:Y5(t.errors)})),t}function Y5(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new cu(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const X5=f.createContext({isTransitioning:!1}),Z5=f.createContext(new Map),eI="startTransition",L0=$b[eI],tI="flushSync",A0=k2[tI];function nI(e){L0?L0(e):e()}function Ys(e){A0?A0(e):e()}class rI{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function iI(e){let{fallbackElement:t,router:n,future:r}=e,[i,o]=f.useState(n.state),[s,a]=f.useState(),[l,c]=f.useState({isTransitioning:!1}),[u,d]=f.useState(),[h,p]=f.useState(),[v,g]=f.useState(),b=f.useRef(new Map),{v7_startTransition:m}=r||{},y=f.useCallback(k=>{m?nI(k):k()},[m]),C=f.useCallback((k,P)=>{let{deletedFetchers:_,unstable_flushSync:M,unstable_viewTransitionOpts:A}=P;_.forEach(X=>b.current.delete(X)),k.fetchers.forEach((X,ge)=>{X.data!==void 0&&b.current.set(ge,X.data)});let Z=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!A||Z){M?Ys(()=>o(k)):y(()=>o(k));return}if(M){Ys(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:A.currentLocation,nextLocation:A.nextLocation})});let X=n.window.document.startViewTransition(()=>{Ys(()=>o(k))});X.finished.finally(()=>{Ys(()=>{d(void 0),p(void 0),a(void 0),c({isTransitioning:!1})})}),Ys(()=>p(X));return}h?(u&&u.resolve(),h.skipTransition(),g({state:k,currentLocation:A.currentLocation,nextLocation:A.nextLocation})):(a(k),c({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}))},[n.window,h,u,b,y]);f.useLayoutEffect(()=>n.subscribe(C),[n,C]),f.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new rI)},[l]),f.useEffect(()=>{if(u&&s&&n.window){let k=s,P=u.promise,_=n.window.document.startViewTransition(async()=>{y(()=>o(k)),await P});_.finished.finally(()=>{d(void 0),p(void 0),a(void 0),c({isTransitioning:!1})}),p(_)}},[y,s,u,n.window]),f.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,h,i.location,s]),f.useEffect(()=>{!l.isTransitioning&&v&&(a(v.state),c({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),g(void 0))},[l.isTransitioning,v]),f.useEffect(()=>{},[]);let S=f.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:k=>n.navigate(k),push:(k,P,_)=>n.navigate(k,{state:P,preventScrollReset:_?.preventScrollReset}),replace:(k,P,_)=>n.navigate(k,{replace:!0,state:P,preventScrollReset:_?.preventScrollReset})}),[n]),w=n.basename||"/",T=f.useMemo(()=>({router:n,navigator:S,static:!1,basename:w}),[n,S,w]),E=f.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return f.createElement(f.Fragment,null,f.createElement(ed.Provider,{value:T},f.createElement(US.Provider,{value:i},f.createElement(Z5.Provider,{value:b.current},f.createElement(X5.Provider,{value:l},f.createElement(V5,{basename:w,location:i.location,navigationType:i.historyAction,navigator:S,future:E},i.initialized||n.future.v7_partialHydration?f.createElement(oI,{routes:n.routes,future:n.future,state:i}):t))))),null)}const oI=f.memo(sI);function sI(e){let{routes:t,future:n,state:r}=e;return I5(t,void 0,r,n)}const aI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kh=f.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=t,h=W5(t,K5),{basename:p}=f.useContext(vo),v,g=!1;if(typeof c=="string"&&lI.test(c)&&(v=c,aI))try{let C=new URL(window.location.href),S=c.startsWith("//")?new URL(C.protocol+c):new URL(c),w=Ls(S.pathname,p);S.origin===C.origin&&w!=null?c=w+S.search+S.hash:g=!0}catch{}let b=x5(c,{relative:i}),m=cI(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function y(C){r&&r(C),C.defaultPrevented||m(C)}return f.createElement("a",Xa({},h,{href:v||b,onClick:g||o?r:y,ref:n,target:l}))});var U0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(U0||(U0={}));var j0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(j0||(j0={}));function cI(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:a}=t===void 0?{}:t,l=Qm(),c=nd(),u=FS(e,{relative:s});return f.useCallback(d=>{if(G5(d,n)){d.preventDefault();let h=r!==void 0?r:co(c)===co(u);l(e,{replace:h,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:a})}},[c,l,u,r,i,n,e,o,s,a])}const du=["light","dark"],Ym="(prefers-color-scheme: dark)",uI=typeof window>"u",WS=f.createContext(void 0),dI=e=>f.useContext(WS)?D.createElement(f.Fragment,null,e.children):D.createElement(hI,e),fI=["light","dark"],hI=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:o=fI,defaultTheme:s=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u})=>{const[d,h]=f.useState(()=>$0(i,s)),[p,v]=f.useState(()=>$0(i)),g=l?Object.values(l):o,b=f.useCallback(S=>{let w=S;if(!w)return;S==="system"&&n&&(w=F0());const T=l?l[w]:w,E=t?mI():null,k=document.documentElement;if(a==="class"?(k.classList.remove(...g),T&&k.classList.add(T)):T?k.setAttribute(a,T):k.removeAttribute(a),r){const P=du.includes(s)?s:null,_=du.includes(w)?w:P;k.style.colorScheme=_}E?.()},[]),m=f.useCallback(S=>{h(S);try{localStorage.setItem(i,S)}catch{}},[e]),y=f.useCallback(S=>{const w=F0(S);v(w),d==="system"&&n&&!e&&b("system")},[d,e]);f.useEffect(()=>{const S=window.matchMedia(Ym);return S.addListener(y),y(S),()=>S.removeListener(y)},[y]),f.useEffect(()=>{const S=w=>{w.key===i&&m(w.newValue||s)};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[m]),f.useEffect(()=>{b(e??d)},[e,d]);const C=f.useMemo(()=>({theme:d,setTheme:m,forcedTheme:e,resolvedTheme:d==="system"?p:d,themes:n?[...o,"system"]:o,systemTheme:n?p:void 0}),[d,m,e,p,n,o]);return D.createElement(WS.Provider,{value:C},D.createElement(pI,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:i,themes:o,defaultTheme:s,attribute:a,value:l,children:c,attrs:g,nonce:u}),c)},pI=f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:s,attrs:a,nonce:l})=>{const c=o==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;c.remove(${a.map(v=>`'${v}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?du.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(v,g=!1,b=!0)=>{const m=s?s[v]:v,y=g?v+"|| ''":`'${m}'`;let C="";return i&&b&&!g&&du.includes(v)&&(C+=`d.style.colorScheme = '${v}';`),n==="class"?C+=g||m?`c.add(${y})`:"null":m&&(C+=`d[s](n,${y})`),C},p=e?`!function(){${u}${h(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${Ym}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}${c?"":"else{"+h(o,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${d}}catch(t){}}();`;return D.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})},()=>!0),$0=(e,t)=>{if(uI)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},mI=()=>{const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},F0=e=>(e||(e=window.matchMedia(Ym)),e.matches?"dark":"light");function gI({children:e,...t}){return O.jsx(dI,{...t,children:e})}const vI="modulepreload",yI=function(e){return"/"+e},z0={},fu=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=yI(o),o in z0)return;z0[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===o&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":vI,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function HS(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=HS(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Xm(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=HS(e))&&(r&&(r+=" "),r+=t);return r}function bI(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=GS(t))&&(r&&(r+=" "),r+=n);return r}function GS(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=GS(e[r]))&&(n&&(n+=" "),n+=t);return n}var Zm="-";function kI(e){var t=CI(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,i=r===void 0?{}:r;function o(a){var l=a.split(Zm);return l[0]===""&&l.length!==1&&l.shift(),KS(l,t)||SI(a)}function s(a,l){var c=n[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:o,getConflictingClassGroupIds:s}}function KS(e,t){if(e.length===0)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),i=r?KS(e.slice(1),r):void 0;if(i)return i;if(t.validators.length!==0){var o=e.join(Zm);return t.validators.find(function(s){var a=s.validator;return a(o)})?.classGroupId}}var V0=/^\[(.+)\]$/;function SI(e){if(V0.test(e)){var t=V0.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function CI(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},i=TI(Object.entries(e.classGroups),n);return i.forEach(function(o){var s=o[0],a=o[1];qh(a,r,s,t)}),r}function qh(e,t,n,r){e.forEach(function(i){if(typeof i=="string"){var o=i===""?t:B0(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(wI(i)){qh(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(s){var a=s[0],l=s[1];qh(l,B0(t,a),n,r)})})}function B0(e,t){var n=e;return t.split(Zm).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function wI(e){return e.isThemeGetter}function TI(e,t){return t?e.map(function(n){var r=n[0],i=n[1],o=i.map(function(s){return typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(function(a){var l=a[0],c=a[1];return[t+l,c]})):s});return[r,o]}):e}function EI(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function i(o,s){n.set(o,s),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(s){var a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set:function(s,a){n.has(s)?n.set(s,a):i(s,a)}}}var qS="!";function xI(e){var t=e.separator||":",n=t.length===1,r=t[0],i=t.length;return function(s){for(var a=[],l=0,c=0,u,d=0;d<s.length;d++){var h=s[d];if(l===0){if(h===r&&(n||s.slice(d,d+i)===t)){a.push(s.slice(c,d)),c=d+i;continue}if(h==="/"){u=d;continue}}h==="["?l++:h==="]"&&l--}var p=a.length===0?s:s.substring(c),v=p.startsWith(qS),g=v?p.substring(1):p,b=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:b}}}function PI(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var i=r[0]==="[";i?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function _I(e){return{cache:EI(e.cacheSize),splitModifiers:xI(e),...kI(e)}}var RI=/\s+/;function II(e,t){var n=t.splitModifiers,r=t.getClassGroupId,i=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(RI).map(function(s){var a=n(s),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,d=a.maybePostfixModifierPosition,h=r(d?u.substring(0,d):u),p=!!d;if(!h){if(!d)return{isTailwindClass:!1,originalClassName:s};if(h=r(u),!h)return{isTailwindClass:!1,originalClassName:s};p=!1}var v=PI(l).join(":"),g=c?v+qS:v;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:s,hasPostfixModifier:p}}).reverse().filter(function(s){if(!s.isTailwindClass)return!0;var a=s.modifierId,l=s.classGroupId,c=s.hasPostfixModifier,u=a+l;return o.has(u)?!1:(o.add(u),i(l,c).forEach(function(d){return o.add(a+d)}),!0)}).reverse().map(function(s){return s.originalClassName}).join(" ")}function OI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,o,s=a;function a(c){var u=t[0],d=t.slice(1),h=d.reduce(function(p,v){return v(p)},u());return r=_I(h),i=r.cache.get,o=r.cache.set,s=l,l(c)}function l(c){var u=i(c);if(u)return u;var d=II(c,r);return o(c,d),d}return function(){return s(bI.apply(null,arguments))}}function ze(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var JS=/^\[(?:([a-z-]+):)?(.+)\]$/i,MI=/^\d+\/\d+$/,NI=new Set(["px","full","screen"]),DI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AI=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function An(e){return Ji(e)||NI.has(e)||MI.test(e)||Jh(e)}function Jh(e){return yo(e,"length",VI)}function UI(e){return yo(e,"size",QS)}function jI(e){return yo(e,"position",QS)}function $I(e){return yo(e,"url",BI)}function Kl(e){return yo(e,"number",Ji)}function Ji(e){return!Number.isNaN(Number(e))}function FI(e){return e.endsWith("%")&&Ji(e.slice(0,-1))}function Xs(e){return W0(e)||yo(e,"number",W0)}function Ce(e){return JS.test(e)}function Zs(){return!0}function ni(e){return DI.test(e)}function zI(e){return yo(e,"",WI)}function yo(e,t,n){var r=JS.exec(e);return r?r[1]?r[1]===t:n(r[2]):!1}function VI(e){return LI.test(e)}function QS(){return!1}function BI(e){return e.startsWith("url(")}function W0(e){return Number.isInteger(Number(e))}function WI(e){return AI.test(e)}function HI(){var e=ze("colors"),t=ze("spacing"),n=ze("blur"),r=ze("brightness"),i=ze("borderColor"),o=ze("borderRadius"),s=ze("borderSpacing"),a=ze("borderWidth"),l=ze("contrast"),c=ze("grayscale"),u=ze("hueRotate"),d=ze("invert"),h=ze("gap"),p=ze("gradientColorStops"),v=ze("gradientColorStopPositions"),g=ze("inset"),b=ze("margin"),m=ze("opacity"),y=ze("padding"),C=ze("saturate"),S=ze("scale"),w=ze("sepia"),T=ze("skew"),E=ze("space"),k=ze("translate"),P=function(){return["auto","contain","none"]},_=function(){return["auto","hidden","clip","visible","scroll"]},M=function(){return["auto",Ce,t]},A=function(){return[Ce,t]},Z=function(){return["",An]},X=function(){return["auto",Ji,Ce]},ge=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Ee=function(){return["solid","dashed","dotted","double","none"]},be=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},V=function(){return["start","end","center","between","around","evenly","stretch"]},H=function(){return["","0",Ce]},ce=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},fe=function(){return[Ji,Kl]},se=function(){return[Ji,Ce]};return{cacheSize:500,theme:{colors:[Zs],spacing:[An],blur:["none","",ni,Ce],brightness:fe(),borderColor:[e],borderRadius:["none","","full",ni,Ce],borderSpacing:A(),borderWidth:Z(),contrast:fe(),grayscale:H(),hueRotate:se(),invert:H(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[FI,Jh],inset:M(),margin:M(),opacity:fe(),padding:A(),saturate:fe(),scale:fe(),sepia:H(),skew:se(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[ni]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ge(),[Ce])}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xs]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Xs]}],"grid-cols":[{"grid-cols":[Zs]}],"col-start-end":[{col:["auto",{span:["full",Xs]},Ce]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[Zs]}],"row-start-end":[{row:["auto",{span:[Xs]},Ce]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(V())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(V(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(V(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ce,t]}],"min-w":[{"min-w":["min","max","fit",Ce,An]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ni]},ni,Ce]}],h:[{h:[Ce,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ce,An]}],"max-h":[{"max-h":[Ce,t,"min","max","fit"]}],"font-size":[{text:["base",ni,Jh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kl]}],"font-family":[{font:[Zs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",Ji,Kl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ce,An]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Ee(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",An]}],"underline-offset":[{"underline-offset":["auto",Ce,An]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ge(),[jI])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",UI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$I]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[].concat(Ee(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:Ee()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Ee())}],"outline-offset":[{"outline-offset":[Ce,An]}],"outline-w":[{outline:[An]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[An]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ni,zI]}],"shadow-color":[{shadow:[Zs]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":be()}],"bg-blend":[{"bg-blend":be()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ni,Ce]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[C]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Xs,Ce]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[An,Kl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var YS=OI(HI),H0,XS={exports:{}},ea={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */XS.exports=function(){if(H0)return ea;H0=1;var e=D,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,c){var u,d={},h=null,p=null;for(u in c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref),l)r.call(l,u)&&!o.hasOwnProperty(u)&&(d[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:t,type:a,key:h,ref:p,props:d,_owner:i.current}}return ea.Fragment=n,ea.jsx=s,ea.jsxs=s,ea}();var re=XS.exports;function Hn(...e){return YS(Xm(e))}const rd=f.createContext({appWindow:null,isWindowMaximized:!1,minimizeWindow:()=>Promise.resolve(),maximizeWindow:()=>Promise.resolve(),fullscreenWindow:()=>Promise.resolve(),closeWindow:()=>Promise.resolve()}),GI=({children:e})=>{const[t,n]=f.useState(null),[r,i]=f.useState(!1);f.useEffect(()=>{typeof window<"u"&&fu(()=>import("./index.min-87da6a88.js"),[]).then(s=>{n(s.appWindow)})},[]);const o=f.useCallback(async()=>{if(t){const s=await t.isMaximized();i(s)}},[t]);return f.useEffect(()=>{o();let s=()=>{};return(async()=>t&&(s=await t.onResized(()=>{o()})))(),()=>s&&s()},[t,o]),re.jsx(rd.Provider,{value:{appWindow:t,isWindowMaximized:r,minimizeWindow:async()=>{t&&await t.minimize()},maximizeWindow:async()=>{t&&await t.toggleMaximize()},fullscreenWindow:async()=>{t&&(await t.isFullscreen()?await t.setFullscreen(!1):await t.setFullscreen(!0))},closeWindow:async()=>{t&&await t.close()}},children:e})},xn={minimizeWin:e=>re.jsx("svg",{width:"10",height:"1",viewBox:"0 0 10 1",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("path",{d:"M0.498047 1.00098C0.429688 1.00098 0.364583 0.987956 0.302734 0.961914C0.244141 0.935872 0.192057 0.900065 0.146484 0.854492C0.100911 0.808919 0.0651042 0.756836 0.0390625 0.698242C0.0130208 0.636393 0 0.571289 0 0.50293C0 0.43457 0.0130208 0.371094 0.0390625 0.3125C0.0651042 0.250651 0.100911 0.19694 0.146484 0.151367C0.192057 0.102539 0.244141 0.0651042 0.302734 0.0390625C0.364583 0.0130208 0.429688 0 0.498047 0H9.50195C9.57031 0 9.63379 0.0130208 9.69238 0.0390625C9.75423 0.0651042 9.80794 0.102539 9.85352 0.151367C9.89909 0.19694 9.9349 0.250651 9.96094 0.3125C9.98698 0.371094 10 0.43457 10 0.50293C10 0.571289 9.98698 0.636393 9.96094 0.698242C9.9349 0.756836 9.89909 0.808919 9.85352 0.854492C9.80794 0.900065 9.75423 0.935872 9.69238 0.961914C9.63379 0.987956 9.57031 1.00098 9.50195 1.00098H0.498047Z",fill:"currentColor",fillOpacity:"0.8956"})}),maximizeWin:e=>re.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("path",{d:"M1.47461 10.001C1.2793 10.001 1.09212 9.96191 0.913086 9.88379C0.734049 9.80241 0.576172 9.69499 0.439453 9.56152C0.30599 9.4248 0.198568 9.26693 0.117188 9.08789C0.0390625 8.90885 0 8.72168 0 8.52637V1.47559C0 1.28027 0.0390625 1.0931 0.117188 0.914062C0.198568 0.735026 0.30599 0.578776 0.439453 0.445312C0.576172 0.308594 0.734049 0.201172 0.913086 0.123047C1.09212 0.0416667 1.2793 0.000976562 1.47461 0.000976562H8.52539C8.7207 0.000976562 8.90788 0.0416667 9.08691 0.123047C9.26595 0.201172 9.4222 0.308594 9.55566 0.445312C9.69238 0.578776 9.7998 0.735026 9.87793 0.914062C9.95931 1.0931 10 1.28027 10 1.47559V8.52637C10 8.72168 9.95931 8.90885 9.87793 9.08789C9.7998 9.26693 9.69238 9.4248 9.55566 9.56152C9.4222 9.69499 9.26595 9.80241 9.08691 9.88379C8.90788 9.96191 8.7207 10.001 8.52539 10.001H1.47461ZM8.50098 9C8.56934 9 8.63281 8.98698 8.69141 8.96094C8.75326 8.9349 8.80697 8.89909 8.85254 8.85352C8.89811 8.80794 8.93392 8.75586 8.95996 8.69727C8.986 8.63542 8.99902 8.57031 8.99902 8.50195V1.5C8.99902 1.43164 8.986 1.36816 8.95996 1.30957C8.93392 1.24772 8.89811 1.19401 8.85254 1.14844C8.80697 1.10286 8.75326 1.06706 8.69141 1.04102C8.63281 1.01497 8.56934 1.00195 8.50098 1.00195H1.49902C1.43066 1.00195 1.36556 1.01497 1.30371 1.04102C1.24512 1.06706 1.19303 1.10286 1.14746 1.14844C1.10189 1.19401 1.06608 1.24772 1.04004 1.30957C1.014 1.36816 1.00098 1.43164 1.00098 1.5V8.50195C1.00098 8.57031 1.014 8.63542 1.04004 8.69727C1.06608 8.75586 1.10189 8.80794 1.14746 8.85352C1.19303 8.89909 1.24512 8.9349 1.30371 8.96094C1.36556 8.98698 1.43066 9 1.49902 9H8.50098Z",fill:"currentColor",fillOpacity:"0.8956"})}),maximizeRestoreWin:e=>re.jsx("svg",{width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("path",{d:"M8.99902 2.98096C8.99902 2.71077 8.94531 2.45687 8.83789 2.21924C8.73047 1.97835 8.58398 1.77002 8.39844 1.59424C8.21615 1.4152 8.00293 1.27523 7.75879 1.17432C7.5179 1.07015 7.264 1.01807 6.99707 1.01807H2.08496C2.13704 0.868327 2.21029 0.731608 2.30469 0.60791C2.39909 0.484212 2.50814 0.378418 2.63184 0.290527C2.75553 0.202637 2.89062 0.135905 3.03711 0.090332C3.18685 0.0415039 3.34147 0.0170898 3.50098 0.0170898H6.99707C7.41048 0.0170898 7.79948 0.0968424 8.16406 0.256348C8.52865 0.412598 8.84603 0.625814 9.11621 0.895996C9.38965 1.16618 9.60449 1.48356 9.76074 1.84814C9.92025 2.21273 10 2.60173 10 3.01514V6.51611C10 6.67562 9.97559 6.83024 9.92676 6.97998C9.88118 7.12646 9.81445 7.26156 9.72656 7.38525C9.63867 7.50895 9.53288 7.618 9.40918 7.7124C9.28548 7.8068 9.14876 7.88005 8.99902 7.93213V2.98096ZM1.47461 10.0171C1.2793 10.0171 1.09212 9.97803 0.913086 9.8999C0.734049 9.81852 0.576172 9.7111 0.439453 9.57764C0.30599 9.44092 0.198568 9.28304 0.117188 9.104C0.0390625 8.92497 0 8.73779 0 8.54248V3.49365C0 3.29508 0.0390625 3.10791 0.117188 2.93213C0.198568 2.75309 0.30599 2.59684 0.439453 2.46338C0.576172 2.32666 0.732422 2.21924 0.908203 2.14111C1.08724 2.05973 1.27604 2.01904 1.47461 2.01904H6.52344C6.72201 2.01904 6.91081 2.05973 7.08984 2.14111C7.26888 2.21924 7.42513 2.32503 7.55859 2.4585C7.69206 2.59196 7.79785 2.74821 7.87598 2.92725C7.95736 3.10628 7.99805 3.29508 7.99805 3.49365V8.54248C7.99805 8.74105 7.95736 8.92985 7.87598 9.10889C7.79785 9.28467 7.69043 9.44092 7.55371 9.57764C7.42025 9.7111 7.264 9.81852 7.08496 9.8999C6.90918 9.97803 6.72201 10.0171 6.52344 10.0171H1.47461ZM6.49902 9.01611C6.56738 9.01611 6.63086 9.00309 6.68945 8.97705C6.7513 8.95101 6.80501 8.9152 6.85059 8.86963C6.89941 8.82406 6.93685 8.77197 6.96289 8.71338C6.98893 8.65153 7.00195 8.58643 7.00195 8.51807V3.51807C7.00195 3.44971 6.98893 3.3846 6.96289 3.32275C6.93685 3.2609 6.90104 3.20719 6.85547 3.16162C6.8099 3.11605 6.75618 3.08024 6.69434 3.0542C6.63249 3.02816 6.56738 3.01514 6.49902 3.01514H1.49902C1.43066 3.01514 1.36556 3.02816 1.30371 3.0542C1.24512 3.08024 1.19303 3.11768 1.14746 3.1665C1.10189 3.21208 1.06608 3.26579 1.04004 3.32764C1.014 3.38623 1.00098 3.44971 1.00098 3.51807V8.51807C1.00098 8.58643 1.014 8.65153 1.04004 8.71338C1.06608 8.77197 1.10189 8.82406 1.14746 8.86963C1.19303 8.9152 1.24512 8.95101 1.30371 8.97705C1.36556 9.00309 1.43066 9.01611 1.49902 9.01611H6.49902Z",fill:"currentColor",fillOpacity:"0.8956"})}),closeWin:e=>re.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("path",{d:"M5 5.70898L0.854492 9.85449C0.756836 9.95215 0.639648 10.001 0.50293 10.001C0.359701 10.001 0.239258 9.95378 0.141602 9.85938C0.0472005 9.76172 0 9.64128 0 9.49805C0 9.36133 0.0488281 9.24414 0.146484 9.14648L4.29199 5.00098L0.146484 0.855469C0.0488281 0.757812 0 0.638997 0 0.499023C0 0.430664 0.0130208 0.36556 0.0390625 0.303711C0.0651042 0.241862 0.100911 0.189779 0.146484 0.147461C0.192057 0.101888 0.245768 0.0660807 0.307617 0.0400391C0.369466 0.0139974 0.43457 0.000976562 0.50293 0.000976562C0.639648 0.000976562 0.756836 0.0498047 0.854492 0.147461L5 4.29297L9.14551 0.147461C9.24316 0.0498047 9.36198 0.000976562 9.50195 0.000976562C9.57031 0.000976562 9.63379 0.0139974 9.69238 0.0400391C9.75423 0.0660807 9.80794 0.101888 9.85352 0.147461C9.89909 0.193034 9.9349 0.246745 9.96094 0.308594C9.98698 0.367188 10 0.430664 10 0.499023C10 0.638997 9.95117 0.757812 9.85352 0.855469L5.70801 5.00098L9.85352 9.14648C9.95117 9.24414 10 9.36133 10 9.49805C10 9.56641 9.98698 9.63151 9.96094 9.69336C9.9349 9.75521 9.89909 9.80892 9.85352 9.85449C9.8112 9.90007 9.75911 9.93587 9.69727 9.96191C9.63542 9.98796 9.57031 10.001 9.50195 10.001C9.36198 10.001 9.24316 9.95215 9.14551 9.85449L5 5.70898Z",fill:"currentColor",fillOpacity:"0.8956"})}),closeMac:e=>re.jsx("svg",{width:"6",height:"6",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("path",{d:"M15.7522 4.44381L11.1543 9.04165L15.7494 13.6368C16.0898 13.9771 16.078 14.5407 15.724 14.8947L13.8907 16.728C13.5358 17.0829 12.9731 17.0938 12.6328 16.7534L8.03766 12.1583L3.44437 16.7507C3.10402 17.091 2.54132 17.0801 2.18645 16.7253L0.273257 14.8121C-0.0807018 14.4572 -0.0925004 13.8945 0.247845 13.5542L4.84024 8.96087L0.32499 4.44653C-0.0153555 4.10619 -0.00355681 3.54258 0.350402 3.18862L2.18373 1.35529C2.53859 1.00042 3.1013 0.989533 3.44164 1.32988L7.95689 5.84422L12.5556 1.24638C12.8951 0.906035 13.4587 0.917833 13.8126 1.27179L15.7267 3.18589C16.0807 3.53985 16.0925 4.10346 15.7522 4.44381Z",fill:"currentColor"})}),minMac:e=>re.jsx("svg",{width:"8",height:"8",viewBox:"0 0 17 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("g",{clipPath:"url(#clip0_20_2051)",children:re.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.47211 1.18042H15.4197C15.8052 1.18042 16.1179 1.50551 16.1179 1.90769V3.73242C16.1179 4.13387 15.8052 4.80006 15.4197 4.80006H1.47211C1.08665 4.80006 0.773926 4.47497 0.773926 4.07278V1.90769C0.773926 1.50551 1.08665 1.18042 1.47211 1.18042Z",fill:"currentColor"})})}),fullMac:e=>re.jsx("svg",{width:"6",height:"6",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("g",{clipPath:"url(#clip0_20_2057)",children:re.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.53068 0.433838L15.0933 12.0409C15.0933 12.0409 15.0658 5.35028 15.0658 4.01784C15.0658 1.32095 14.1813 0.433838 11.5378 0.433838C10.6462 0.433838 3.53068 0.433838 3.53068 0.433838ZM12.4409 15.5378L0.87735 3.93073C0.87735 3.93073 0.905794 10.6214 0.905794 11.9538C0.905794 14.6507 1.79024 15.5378 4.43291 15.5378C5.32535 15.5378 12.4409 15.5378 12.4409 15.5378Z",fill:"currentColor"})})}),plusMac:e=>re.jsx("svg",{width:"8",height:"8",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:re.jsx("g",{clipPath:"url(#clip0_20_2053)",children:re.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5308 9.80147H10.3199V15.0095C10.3199 15.3949 9.9941 15.7076 9.59265 15.7076H7.51555C7.11337 15.7076 6.78828 15.3949 6.78828 15.0095V9.80147H1.58319C1.19774 9.80147 0.88501 9.47638 0.88501 9.07419V6.90619C0.88501 6.50401 1.19774 6.17892 1.58319 6.17892H6.78828V1.06183C6.78828 0.676375 7.11337 0.363647 7.51555 0.363647H9.59265C9.9941 0.363647 10.3199 0.676375 10.3199 1.06183V6.17892H15.5308C15.9163 6.17892 16.229 6.50401 16.229 6.90619V9.07419C16.229 9.47638 15.9163 9.80147 15.5308 9.80147Z",fill:"currentColor"})})})};function Nr({className:e,children:t,...n}){return re.jsx("button",{className:Hn("inline-flex cursor-default items-center justify-center",e),...n,children:t})}function KI({className:e,...t}){const{isWindowMaximized:n,minimizeWindow:r,maximizeWindow:i,closeWindow:o}=f.useContext(rd);return re.jsxs("div",{className:Hn("h-8",e),...t,children:[re.jsx(Nr,{onClick:r,className:"max-h-8 w-[46px] cursor-default rounded-none bg-transparent text-black/90 hover:bg-black/[.05] active:bg-black/[.03]  dark:text-white dark:hover:bg-white/[.06] dark:active:bg-white/[.04]",children:re.jsx(xn.minimizeWin,{})}),re.jsx(Nr,{onClick:i,className:Hn("max-h-8 w-[46px] cursor-default rounded-none bg-transparent","text-black/90 hover:bg-black/[.05] active:bg-black/[.03] dark:text-white dark:hover:bg-white/[.06] dark:active:bg-white/[.04]"),children:n?re.jsx(xn.maximizeRestoreWin,{}):re.jsx(xn.maximizeWin,{})}),re.jsx(Nr,{onClick:o,className:"max-h-8 w-[46px] cursor-default rounded-none bg-transparent text-black/90 hover:bg-[#c42b1c] hover:text-white active:bg-[#c42b1c]/90 dark:text-white",children:re.jsx(xn.closeWin,{})})]})}function qI({className:e,...t}){const{minimizeWindow:n,maximizeWindow:r,fullscreenWindow:i,closeWindow:o}=f.useContext(rd),[s,a]=f.useState(!1),[l,c]=f.useState(!1),u=s?re.jsx(xn.plusMac,{}):re.jsx(xn.fullMac,{}),d=p=>{p.key==="Alt"&&a(!0)},h=p=>{p.key==="Alt"&&a(!1)};return f.useEffect(()=>{window.addEventListener("keydown",d),window.addEventListener("keyup",h)},[]),re.jsxs("div",{className:Hn("px-2 text-black active:text-black dark:text-black",e),onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},...t,children:[re.jsx(Nr,{onClick:o,className:"mr-2 aspect-square h-3 w-3 cursor-default content-center items-center justify-center self-center rounded-full border border-black/[.12] bg-[#ff544d] text-center text-black/60 hover:bg-[#ff544d] active:bg-[#bf403a] active:text-black/60 dark:border-none",children:l&&re.jsx(xn.closeMac,{})}),re.jsx(Nr,{onClick:n,className:"mr-2 aspect-square h-3 w-3 cursor-default content-center items-center justify-center self-center rounded-full border border-black/[.12]  bg-[#ffbd2e] text-center text-black/60 hover:bg-[#ffbd2e] active:bg-[#bf9122] active:text-black/60 dark:border-none",children:l&&re.jsx(xn.minMac,{})}),re.jsx(Nr,{onClick:s?r:i,className:"aspect-square h-3 w-3 cursor-default content-center items-center justify-center self-center rounded-full border border-black/[.12] bg-[#28c93f] text-center text-black/60 hover:bg-[#28c93f] active:bg-[#1e9930] active:text-black/60 dark:border-none",children:l&&u})]})}function JI({className:e,...t}){const{isWindowMaximized:n,minimizeWindow:r,maximizeWindow:i,closeWindow:o}=f.useContext(rd);return re.jsxs("div",{className:Hn("h-auto items-center px-2",e),...t,children:[re.jsx(Nr,{onClick:r,className:"m-0 mr-4 aspect-square h-6 w-6 cursor-default rounded-full bg-[#dadada] p-0 text-[#3d3d3d] hover:bg-[#d1d1d1] active:bg-[#bfbfbf] dark:bg-[#373737] dark:text-white dark:hover:bg-[#424242] dark:active:bg-[#565656]",children:re.jsx(xn.minimizeWin,{className:"w-[9px]"})}),re.jsx(Nr,{onClick:i,className:"m-0 mr-4 aspect-square h-6 w-6 cursor-default rounded-full bg-[#dadada] p-0 text-[#3d3d3d] hover:bg-[#d1d1d1] active:bg-[#bfbfbf] dark:bg-[#373737] dark:text-white dark:hover:bg-[#424242] dark:active:bg-[#565656]",children:n?re.jsx(xn.maximizeRestoreWin,{className:"h-[9px] w-[9px]"}):re.jsx(xn.maximizeWin,{className:"h-2 w-2"})}),re.jsx(Nr,{onClick:o,className:"m-0 aspect-square h-6 w-6 cursor-default rounded-full bg-[#dadada] p-0 text-[#3d3d3d] hover:bg-[#d1d1d1] active:bg-[#bfbfbf] dark:bg-[#373737] dark:text-white dark:hover:bg-[#424242] dark:active:bg-[#565656]",children:re.jsx(xn.closeWin,{className:"h-2 w-2"})})]})}let ZS,eC=null;function tC(){return eC||Promise.resolve(ZS)}function G0({platform:e,justify:t=!1,hide:n=!1,hideMethod:r="display",className:i,...o}){const[s,a]=f.useState(void 0);f.useEffect(()=>{tC().then(c=>{a(c)})},[]);const l=Hn("flex",i,n&&(r==="display"?"hidden":"invisible"));if(!e)switch(s){case"Darwin":e="macos";break;case"Linux":e="gnome";break;default:e="windows"}return re.jsx(GI,{children:re.jsx(()=>{switch(e){case"windows":default:return re.jsx(KI,{className:Hn(l,t&&"ml-auto"),...o});case"macos":return re.jsx(qI,{className:Hn(l,t&&"ml-0"),...o});case"gnome":return re.jsx(JI,{className:Hn(l,t&&"ml-auto"),...o})}},{})})}function QI({children:e,controlsOrder:t="system",className:n,windowControlsProps:r,...i}){const[o,s]=f.useState(void 0);f.useEffect(()=>{tC().then(c=>{s(c)})},[]);const a=t==="left"||t==="platform"&&r?.platform==="macos"||t==="system"&&o==="Darwin",l=c=>{if(r?.justify!==void 0)return r;const{justify:u,className:d,...h}=r||{};return{justify:!1,className:Hn(d,c),...h}};return re.jsx("div",{className:Hn("bg-background flex select-none flex-row overflow-hidden",n),"data-tauri-drag-region":!0,...i,children:a?re.jsxs(re.Fragment,{children:[re.jsx(G0,{...l("ml-0")}),e]}):re.jsxs(re.Fragment,{children:[e,re.jsx(G0,{...l("ml-auto")})]})})}typeof window<"u"&&(eC=fu(()=>import("./index.min-74dbd1cc.js"),[]).then(e=>e.type().then(t=>(ZS=t,t))));var YI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const XI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZI=(e,t)=>{const n=f.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:a,...l},c)=>f.createElement("svg",{ref:c,...YI,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:`lucide lucide-${XI(e)}`,...l},[...t.map(([u,d])=>f.createElement(u,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${e}`,n};var Hr=ZI;const eO=Hr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),tO=Hr("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),nO=Hr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),K0=Hr("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),rO=Hr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),iO=Hr("SendHorizonal",[["path",{d:"m3 3 3 9-3 9 19-9Z",key:"1aobqy"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),oO=Hr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),sO=Hr("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),eg=Hr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function aO(){const e=f.useCallback(async()=>{const{appWindow:n}=await fu(()=>import("./index.min-87da6a88.js"),[]);n.close()},[]),t=f.useCallback(async()=>{const{appWindow:n}=await fu(()=>import("./index.min-87da6a88.js"),[]);n.minimize()},[]);return O.jsxs("div",{className:"h-auto items-center ml-auto flex",children:[O.jsx("div",{onClick:t,className:"inline-flex items-center justify-center m-0 aspect-square h-8 w-8 cursor-default p-2 text-white hover:bg-[#424242] active:bg-[#565656]",children:O.jsx(nO,{})}),O.jsx("div",{className:"inline-flex items-center justify-center m-0 aspect-square h-8 w-8 cursor-default p-2 text-white hover:bg-[#424242] active:bg-[#565656]",children:O.jsx(oO,{})}),O.jsx("div",{onClick:e,className:"inline-flex items-center justify-center m-0 aspect-square h-8 w-8 cursor-default p-2 text-white hover:bg-red-700 active:bg-red-500",children:O.jsx(eg,{})})]})}function nC(){return O.jsx(QI,{windowControlsProps:{hide:!0},className:"sticky top-0 z-50 bg-[#242424]",children:O.jsx(aO,{})})}const q0=e=>{let t;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,i,a);return a},lO=e=>e?q0(e):q0,cO=e=>e;function uO(e,t=cO){const n=D.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return D.useDebugValue(n),n}const J0=e=>{const t=lO(e),n=r=>uO(t,r);return Object.assign(n,t),n},dO=e=>e?J0(e):J0,tg=dO(e=>({user:{id:"",name:"",image:"",description:"",friends:[],games:[]},setUser:(t,n,r)=>{(async()=>{try{const i=await fetch("http://localhost:3333/user/".concat(String(t))),o=await i.json();if(console.log(i.status),i.status===404){const s=await fetch("http://localhost:3333/users/".concat(String(t)),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,image:n})}).then(a=>a.json());e({user:s.user})}e({user:o.user})}catch(i){console.error("Error fetching user:",i)}})()},addFriend:t=>{},blockFriend:t=>{},updateUser:async t=>{await fetch("http://localhost:3333/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t})}),e(n=>({user:{...n.user,...t}}))}}));function fO(){const{isLoaded:e,user:t}=y_(),{setUser:n}=tg(),r=Qm();return f.useEffect(()=>{t&&n(t.id,t.imageUrl,t.fullName??"name"),e&&!t&&r("/sign-in")},[e]),e?O.jsxs("div",{children:[O.jsx(nC,{}),O.jsx(BS,{})]}):"Loading..."}function hO(){return Qm(),O.jsxs(O.Fragment,{children:[O.jsx(nC,{}),O.jsx("main",{children:O.jsx(BS,{})})]})}function pO(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}function it(e,t){if(!e)throw new Error(t)}const mO=34028234663852886e22,gO=-34028234663852886e22,vO=4294967295,yO=2147483647,bO=-2147483648;function bc(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>yO||e<bO)throw new Error("invalid int 32: "+e)}function Qh(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>vO||e<0)throw new Error("invalid uint 32: "+e)}function rC(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>mO||e<gO))throw new Error("invalid float 32: "+e)}const iC=Symbol("@bufbuild/protobuf/enum-type");function kO(e){const t=e[iC];return it(t,"missing enum type on enum object"),t}function oC(e,t,n,r){e[iC]=sC(t,n.map(i=>({no:i.no,name:i.name,localName:e[i.no]})))}function sC(e,t,n){const r=Object.create(null),i=Object.create(null),o=[];for(const s of t){const a=aC(s);o.push(a),r[s.name]=a,i[s.no]=a}return{typeName:e,values:o,findName(s){return r[s]},findNumber(s){return i[s]}}}function SO(e,t,n){const r={};for(const i of t){const o=aC(i);r[o.localName]=o.no,r[o.no]=o.localName}return oC(r,e,t),r}function aC(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class ng{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(t),t.byteLength,o),this}fromJson(t,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,t,o,this),this}fromJsonString(t,n){let r;try{r=JSON.parse(t)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(t){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(t),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(t){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(t);return r.writeMessage(this,i)}toJsonString(t){var n;const r=this.toJson(t);return JSON.stringify(r,null,(n=t?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function CO(e,t,n,r){var i;const o=(i=r?.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),s={[o]:function(a){e.util.initFields(this),e.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(s.prototype,new ng),Object.assign(s,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(a,l){return new s().fromBinary(a,l)},fromJson(a,l){return new s().fromJson(a,l)},fromJsonString(a,l){return new s().fromJsonString(a,l)},equals(a,l){return e.util.equals(s,a,l)}}),s}function wO(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function yf(e,t,n){for(let o=0;o<28;o=o+7){const s=e>>>o,a=!(!(s>>>7)&&t==0),l=(a?s|128:s)&255;if(n.push(l),!a)return}const r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const s=t>>>o,a=!!(s>>>7),l=(a?s|128:s)&255;if(n.push(l),!a)return}n.push(t>>>31&1)}}const kc=4294967296;function Q0(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function o(s,a){const l=Number(e.slice(s,a));i*=n,r=r*n+l,r>=kc&&(i=i+(r/kc|0),r=r%kc)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?cC(r,i):rg(r,i)}function TO(e,t){let n=rg(e,t);const r=n.hi&2147483648;r&&(n=cC(n.lo,n.hi));const i=lC(n.lo,n.hi);return r?"-"+i:i}function lC(e,t){if({lo:e,hi:t}=EO(e,t),t<=2097151)return String(kc*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,i=t>>16&65535;let o=n+r*6777216+i*6710656,s=r+i*8147497,a=i*2;const l=1e7;return o>=l&&(s+=Math.floor(o/l),o%=l),s>=l&&(a+=Math.floor(s/l),s%=l),a.toString()+Y0(s)+Y0(o)}function EO(e,t){return{lo:e>>>0,hi:t>>>0}}function rg(e,t){return{lo:e|0,hi:t|0}}function cC(e,t){return t=~t,e?e=~e+1:t+=1,rg(e,t)}const Y0=e=>{const t=String(e);return"0000000".slice(t.length)+t};function X0(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function xO(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function PO(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof process.env!="object"||{}.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>o||c<i)throw new Error("int64 invalid: ".concat(l));return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<s)throw new Error("uint64 invalid: ".concat(l));return c},enc(l){return e.setBigInt64(0,this.parse(l),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(l){return e.setBigInt64(0,this.uParse(l),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(l,c){return e.setInt32(0,l,!0),e.setInt32(4,c,!0),e.getBigInt64(0,!0)},uDec(l,c){return e.setInt32(0,l,!0),e.setInt32(4,c,!0),e.getBigUint64(0,!0)}}}const n=i=>it(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>it(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),Q0(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Q0(i)},dec(i,o){return TO(i,o)},uDec(i,o){return lC(i,o)}}}const qe=PO();var F;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(F||(F={}));var _i;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(_i||(_i={}));function ri(e,t,n){if(t===n)return!0;if(e==F.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:return t==n}return!1}function ws(e,t){switch(e){case F.BOOL:return!1;case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:return t==0?qe.zero:"0";case F.DOUBLE:case F.FLOAT:return 0;case F.BYTES:return new Uint8Array(0);case F.STRING:return"";default:return 0}}function uC(e,t){switch(e){case F.BOOL:return t===!1;case F.STRING:return t==="";case F.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}var ut;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(ut||(ut={}));class _O{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Qh(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return bc(t),X0(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){rC(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Qh(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){bc(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return bc(t),t=(t<<1^t>>31)>>>0,X0(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=qe.enc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=qe.uEnc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=qe.enc(t);return yf(n.lo,n.hi,this.buf),this}sint64(t){let n=qe.enc(t),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return yf(i,o,this.buf),this}uint64(t){let n=qe.uEnc(t);return yf(n.lo,n.hi,this.buf),this}}class RO{constructor(t,n){this.varint64=wO,this.uint32=xO,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case ut.Varint:for(;this.buf[this.pos++]&128;);break;case ut.Bit64:this.pos+=4;case ut.Bit32:this.pos+=4;break;case ut.LengthDelimited:let i=this.uint32();this.pos+=i;break;case ut.StartGroup:for(;;){const[o,s]=this.tag();if(s===ut.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(s,o)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return qe.dec(...this.varint64())}uint64(){return qe.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,qe.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return qe.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return qe.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function IO(e,t,n,r){let i;return{typeName:t,extendee:n,get field(){if(!i){const o=typeof r=="function"?r():r;o.name=t.split(".").pop(),o.jsonName="[".concat(t,"]"),i=e.util.newFieldList([o]).list()[0]}return i},runtime:e}}function dC(e){const t=e.field.localName,n=Object.create(null);return n[t]=OO(e),[n,()=>n[t]]}function OO(e){const t=e.field;if(t.repeated)return[];if(t.default!==void 0)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return ws(t.T,t.L);case"message":const n=t.T,r=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}function MO(e,t){if(!t.repeated&&(t.kind=="enum"||t.kind=="scalar")){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter(n=>n.no===t.no)}let Pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),id=[];for(let e=0;e<Pr.length;e++)id[Pr[e].charCodeAt(0)]=e;id["-".charCodeAt(0)]=Pr.indexOf("+");id["_".charCodeAt(0)]=Pr.indexOf("/");const fC={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,o,s=0;for(let a=0;a<e.length;a++){if(o=id[e.charCodeAt(a)],o===void 0)switch(e[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=o,i=1;break;case 1:n[r++]=s<<2|(o&48)>>4,s=o,i=2;break;case 2:n[r++]=(s&15)<<4|(o&60)>>2,s=o,i=3;break;case 3:n[r++]=(s&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,i=0;for(let o=0;o<e.length;o++)switch(r=e[o],n){case 0:t+=Pr[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=Pr[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=Pr[i|r>>6],t+=Pr[r&63],n=0;break}return n&&(t+=Pr[i],t+="=",n==1&&(t+="=")),t}};function NO(e,t,n){pC(t,e);const r=t.runtime.bin.makeReadOptions(n),i=MO(e.getType().runtime.bin.listUnknownFields(e),t.field),[o,s]=dC(t);for(const a of i)t.runtime.bin.readField(o,r.readerFactory(a.data),t.field,a.wireType,r);return s()}function DO(e,t,n,r){pC(t,e);const i=t.runtime.bin.makeReadOptions(r),o=t.runtime.bin.makeWriteOptions(r);if(hC(e,t)){const c=e.getType().runtime.bin.listUnknownFields(e).filter(u=>u.no!=t.field.no);e.getType().runtime.bin.discardUnknownFields(e);for(const u of c)e.getType().runtime.bin.onUnknownField(e,u.no,u.wireType,u.data)}const s=o.writerFactory();let a=t.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(a,n,s,o);const l=i.readerFactory(s.finish());for(;l.pos<l.len;){const[c,u]=l.tag(),d=l.skip(u,c);e.getType().runtime.bin.onUnknownField(e,c,u,d)}}function hC(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find(r=>r.no==t.field.no)}function pC(e,t){it(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function mC(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?t[n]!==void 0:e.kind=="enum"?t[n]!==e.T.values[0].no:!uC(e.T,t[n]);case"message":return t[n]!==void 0;case"map":return Object.keys(t[n]).length>0}}function Z0(e,t){const n=e.localName,r=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=r?e.T.values[0].no:void 0;break;case"scalar":t[n]=r?ws(e.T,e.L):void 0;break;case"message":t[n]=void 0;break}}function Zi(e,t){if(e===null||typeof e!="object"||!Object.getOwnPropertyNames(ng.prototype).every(r=>r in e&&typeof e[r]=="function"))return!1;const n=e.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:t===void 0?!0:n.typeName==t.typeName}function gC(e,t){return Zi(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}F.DOUBLE,F.FLOAT,F.INT64,F.UINT64,F.INT32,F.UINT32,F.BOOL,F.STRING,F.BYTES;const ey={ignoreUnknownFields:!1},ty={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function LO(e){return e?Object.assign(Object.assign({},ey),e):ey}function AO(e){return e?Object.assign(Object.assign({},ty),e):ty}const hu=Symbol(),Sc=Symbol();function UO(){return{makeReadOptions:LO,makeWriteOptions:AO,readMessage(e,t,n,r){if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(or(t)));r=r??new e;const i=new Map,o=n.typeRegistry;for(const[s,a]of Object.entries(t)){const l=e.fields.findJsonName(s);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=i.get(l.oneof);if(c!==void 0)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(c,'", "').concat(s,'"'));i.set(l.oneof,s)}ny(r,a,l,n,e)}else{let c=!1;if(o?.findExtension&&s.startsWith("[")&&s.endsWith("]")){const u=o.findExtension(s.substring(1,s.length-1));if(u&&u.extendee.typeName==e.typeName){c=!0;const[d,h]=dC(u);ny(d,a,u.field,n,u),DO(r,u,h(),n)}}if(!c&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(s,'" is unknown'))}}return r},writeMessage(e,t){const n=e.getType(),r={};let i;try{for(i of n.fields.byNumber()){if(!mC(i,e)){if(i.req)throw"required field not set";if(!t.emitDefaultValues||!$O(i))continue}const s=i.oneof?e[i.oneof.localName].value:e[i.localName],a=ry(i,s,t);a!==void 0&&(r[t.useProtoFieldName?i.name:i.jsonName]=a)}const o=t.typeRegistry;if(o?.findExtensionFor)for(const s of n.runtime.bin.listUnknownFields(e)){const a=o.findExtensionFor(n.typeName,s.no);if(a&&hC(e,a)){const l=NO(e,a,t),c=ry(a.field,l,t);c!==void 0&&(r[a.field.jsonName]=c)}}}catch(o){const s=i?"cannot encode field ".concat(n.typeName,".").concat(i.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),a=o instanceof Error?o.message:String(o);throw new Error(s+(a.length>0?": ".concat(a):""))}return r},readScalar(e,t,n){return xa(e,t,n??_i.BIGINT,!0)},writeScalar(e,t,n){if(t!==void 0&&(n||uC(e,t)))return Cc(e,t)},debug:or}}function or(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function ny(e,t,n,r,i){let o=n.localName;if(n.repeated){if(it(n.kind!="map"),t===null)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(or(t)));const s=e[o];for(const a of t){if(a===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(or(a)));switch(n.kind){case"message":s.push(n.T.fromJson(a,r));break;case"enum":const l=bf(n.T,a,r.ignoreUnknownFields,!0);l!==Sc&&s.push(l);break;case"scalar":try{s.push(xa(n.T,a,n.L,!0))}catch(c){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(or(a));throw c instanceof Error&&c.message.length>0&&(u+=": ".concat(c.message)),new Error(u)}break}}}else if(n.kind=="map"){if(t===null)return;if(typeof t!="object"||Array.isArray(t))throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(or(t)));const s=e[o];for(const[a,l]of Object.entries(t)){if(l===null)throw new Error("cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: map value null"));let c;try{c=jO(n.K,a)}catch(u){let d="cannot decode map key for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(or(t));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(n.V.kind){case"message":s[c]=n.V.T.fromJson(l,r);break;case"enum":const u=bf(n.V.T,l,r.ignoreUnknownFields,!0);u!==Sc&&(s[c]=u);break;case"scalar":try{s[c]=xa(n.V.T,l,_i.BIGINT,!0)}catch(d){let h="cannot decode map value for field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(or(t));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const s=n.T;if(t===null&&s.typeName!="google.protobuf.Value")return;let a=e[o];Zi(a)?a.fromJson(t,r):(e[o]=a=s.fromJson(t,r),s.fieldWrapper&&!n.oneof&&(e[o]=s.fieldWrapper.unwrapField(a)));break;case"enum":const l=bf(n.T,t,r.ignoreUnknownFields,!1);switch(l){case hu:Z0(n,e);break;case Sc:break;default:e[o]=l;break}break;case"scalar":try{const c=xa(n.T,t,n.L,!1);switch(c){case hu:Z0(n,e);break;default:e[o]=c;break}}catch(c){let u="cannot decode field ".concat(i.typeName,".").concat(n.name," from JSON: ").concat(or(t));throw c instanceof Error&&c.message.length>0&&(u+=": ".concat(c.message)),new Error(u)}break}}function jO(e,t){if(e===F.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1;break}return xa(e,t,_i.BIGINT,!0).toString()}function xa(e,t,n,r){if(t===null)return r?ws(e,n):hu;switch(e){case F.DOUBLE:case F.FLOAT:if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const i=Number(t);if(Number.isNaN(i)||!Number.isFinite(i))break;return e==F.FLOAT&&rC(i),i;case F.INT32:case F.FIXED32:case F.SFIXED32:case F.SINT32:case F.UINT32:let o;if(typeof t=="number"?o=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(o=Number(t)),o===void 0)break;return e==F.UINT32||e==F.FIXED32?Qh(o):bc(o),o;case F.INT64:case F.SFIXED64:case F.SINT64:if(typeof t!="number"&&typeof t!="string")break;const s=qe.parse(t);return n?s.toString():s;case F.FIXED64:case F.UINT64:if(typeof t!="number"&&typeof t!="string")break;const a=qe.uParse(t);return n?a.toString():a;case F.BOOL:if(typeof t!="boolean")break;return t;case F.STRING:if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case F.BYTES:if(t==="")return new Uint8Array(0);if(typeof t!="string")break;return fC.dec(t)}throw new Error}function bf(e,t,n,r){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:r?e.values[0].no:hu;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(i!==void 0)return i.no;if(n)return Sc;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(or(t)))}function $O(e){return e.repeated||e.kind=="map"?!0:!(e.oneof||e.kind=="message"||e.opt||e.req)}function ry(e,t,n){if(e.kind=="map"){it(typeof t=="object"&&t!=null);const r={},i=Object.entries(t);switch(e.V.kind){case"scalar":for(const[s,a]of i)r[s.toString()]=Cc(e.V.T,a);break;case"message":for(const[s,a]of i)r[s.toString()]=a.toJson(n);break;case"enum":const o=e.V.T;for(const[s,a]of i)r[s.toString()]=kf(o,a,n.enumAsInteger);break}return n.emitDefaultValues||i.length>0?r:void 0}if(e.repeated){it(Array.isArray(t));const r=[];switch(e.kind){case"scalar":for(let i=0;i<t.length;i++)r.push(Cc(e.T,t[i]));break;case"enum":for(let i=0;i<t.length;i++)r.push(kf(e.T,t[i],n.enumAsInteger));break;case"message":for(let i=0;i<t.length;i++)r.push(t[i].toJson(n));break}return n.emitDefaultValues||r.length>0?r:void 0}switch(e.kind){case"scalar":return Cc(e.T,t);case"enum":return kf(e.T,t,n.enumAsInteger);case"message":return gC(e.T,t).toJson(n)}}function kf(e,t,n){var r;if(it(typeof t=="number"),e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const i=e.findNumber(t);return(r=i?.name)!==null&&r!==void 0?r:t}function Cc(e,t){switch(e){case F.INT32:case F.SFIXED32:case F.SINT32:case F.FIXED32:case F.UINT32:return it(typeof t=="number"),t;case F.FLOAT:case F.DOUBLE:return it(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case F.STRING:return it(typeof t=="string"),t;case F.BOOL:return it(typeof t=="boolean"),t;case F.UINT64:case F.FIXED64:case F.INT64:case F.SFIXED64:case F.SINT64:return it(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),t.toString();case F.BYTES:return it(t instanceof Uint8Array),fC.enc(t)}}const _o=Symbol("@bufbuild/protobuf/unknown-fields"),iy={readUnknownFields:!0,readerFactory:e=>new RO(e)},oy={writeUnknownFields:!0,writerFactory:()=>new _O};function FO(e){return e?Object.assign(Object.assign({},iy),e):iy}function zO(e){return e?Object.assign(Object.assign({},oy),e):oy}function VO(){return{makeReadOptions:FO,makeWriteOptions:zO,listUnknownFields(e){var t;return(t=e[_o])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[_o]},writeUnknownFields(e,t){const r=e[_o];if(r)for(const i of r)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,r){const i=e;Array.isArray(i[_o])||(i[_o]=[]),i[_o].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r,i){const o=e.getType(),s=i?t.len:t.pos+n;let a,l;for(;t.pos<s&&([a,l]=t.tag(),!(i===!0&&l==ut.EndGroup));){const c=o.fields.find(a);if(!c){const u=t.skip(l,a);r.readUnknownFields&&this.onUnknownField(e,a,l,u);continue}sy(e,t,c,l,r)}if(i&&(l!=ut.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:sy,writeMessage(e,t,n){const r=e.getType();for(const i of r.fields.byNumber()){if(!mC(i,e)){if(i.req)throw new Error("cannot encode field ".concat(r.typeName,".").concat(i.name," to binary: required field not set"));continue}const o=i.oneof?e[i.oneof.localName].value:e[i.localName];ay(i,o,t,n)}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,r){t!==void 0&&ay(e,t,n,r)}}}function sy(e,t,n,r,i){let{repeated:o,localName:s}=n;switch(n.oneof&&(e=e[n.oneof.localName],e.case!=s&&delete e.value,e.case=s,s="value"),n.kind){case"scalar":case"enum":const a=n.kind=="enum"?F.INT32:n.T;let l=pu;if(n.kind=="scalar"&&n.L>0&&(l=WO),o){let h=e[s];if(r==ut.LengthDelimited&&a!=F.STRING&&a!=F.BYTES){let v=t.uint32()+t.pos;for(;t.pos<v;)h.push(l(t,a))}else h.push(l(t,a))}else e[s]=l(t,a);break;case"message":const c=n.T;o?e[s].push(wc(t,new c,i,n)):Zi(e[s])?wc(t,e[s],i,n):(e[s]=wc(t,new c,i,n),c.fieldWrapper&&!n.oneof&&!n.repeated&&(e[s]=c.fieldWrapper.unwrapField(e[s])));break;case"map":let[u,d]=BO(n,t,i);e[s][u]=d;break}}function wc(e,t,n,r){const i=t.getType().runtime.bin,o=r?.delimited;return i.readMessage(t,e,o?r.no:e.uint32(),n,o),t}function BO(e,t,n){const r=t.uint32(),i=t.pos+r;let o,s;for(;t.pos<i;){const[a]=t.tag();switch(a){case 1:o=pu(t,e.K);break;case 2:switch(e.V.kind){case"scalar":s=pu(t,e.V.T);break;case"enum":s=t.int32();break;case"message":s=wc(t,new e.V.T,n,void 0);break}break}}if(o===void 0&&(o=ws(e.K,_i.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(e.V.kind){case"scalar":s=ws(e.V.T,_i.BIGINT);break;case"enum":s=e.V.T.values[0].no;break;case"message":s=new e.V.T;break}return[o,s]}function WO(e,t){const n=pu(e,t);return typeof n=="bigint"?n.toString():n}function pu(e,t){switch(t){case F.STRING:return e.string();case F.BOOL:return e.bool();case F.DOUBLE:return e.double();case F.FLOAT:return e.float();case F.INT32:return e.int32();case F.INT64:return e.int64();case F.UINT64:return e.uint64();case F.FIXED64:return e.fixed64();case F.BYTES:return e.bytes();case F.FIXED32:return e.fixed32();case F.SFIXED32:return e.sfixed32();case F.SFIXED64:return e.sfixed64();case F.SINT64:return e.sint64();case F.UINT32:return e.uint32();case F.SINT32:return e.sint32()}}function ay(e,t,n,r){it(t!==void 0);const i=e.repeated;switch(e.kind){case"scalar":case"enum":let o=e.kind=="enum"?F.INT32:e.T;if(i)if(it(Array.isArray(t)),e.packed)GO(n,o,e.no,t);else for(const s of t)Pa(n,o,e.no,s);else Pa(n,o,e.no,t);break;case"message":if(i){it(Array.isArray(t));for(const s of t)ly(n,r,e,s)}else ly(n,r,e,t);break;case"map":it(typeof t=="object"&&t!=null);for(const[s,a]of Object.entries(t))HO(n,r,e,s,a);break}}function HO(e,t,n,r,i){e.tag(n.no,ut.LengthDelimited),e.fork();let o=r;switch(n.K){case F.INT32:case F.FIXED32:case F.UINT32:case F.SFIXED32:case F.SINT32:o=Number.parseInt(r);break;case F.BOOL:it(r=="true"||r=="false"),o=r=="true";break}switch(Pa(e,n.K,1,o),n.V.kind){case"scalar":Pa(e,n.V.T,2,i);break;case"enum":Pa(e,F.INT32,2,i);break;case"message":it(i!==void 0),e.tag(2,ut.LengthDelimited).bytes(i.toBinary(t));break}e.join()}function ly(e,t,n,r){const i=gC(n.T,r);n.delimited?e.tag(n.no,ut.StartGroup).raw(i.toBinary(t)).tag(n.no,ut.EndGroup):e.tag(n.no,ut.LengthDelimited).bytes(i.toBinary(t))}function Pa(e,t,n,r){it(r!==void 0);let[i,o]=vC(t);e.tag(n,i)[o](r)}function GO(e,t,n,r){if(!r.length)return;e.tag(n,ut.LengthDelimited).fork();let[,i]=vC(t);for(let o=0;o<r.length;o++)e[i](r[o]);e.join()}function vC(e){let t=ut.Varint;switch(e){case F.BYTES:case F.STRING:t=ut.LengthDelimited;break;case F.DOUBLE:case F.FIXED64:case F.SFIXED64:t=ut.Bit64;break;case F.FIXED32:case F.SFIXED32:case F.FLOAT:t=ut.Bit32;break}const n=F[e].toLowerCase();return[t,n]}function KO(){return{setEnumType:oC,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const r of n.fields.byMember()){const i=r.localName,o=t,s=e;if(s[i]!=null)switch(r.kind){case"oneof":const a=s[i].case;if(a===void 0)continue;const l=r.findField(a);let c=s[i].value;l&&l.kind=="message"&&!Zi(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===F.BYTES&&(c=ta(c)),o[i]={case:a,value:c};break;case"scalar":case"enum":let u=s[i];r.T===F.BYTES&&(u=r.repeated?u.map(ta):ta(u)),o[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===F.BYTES)for(const[p,v]of Object.entries(s[i]))o[i][p]=ta(v);else Object.assign(o[i],s[i]);break;case"message":const h=r.V.T;for(const p of Object.keys(s[i])){let v=s[i][p];h.fieldWrapper||(v=new h(v)),o[i][p]=v}break}break;case"message":const d=r.T;if(r.repeated)o[i]=s[i].map(h=>Zi(h,d)?h:new d(h));else{const h=s[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[i]=ta(h):o[i]=h:o[i]=Zi(h,d)?h:new d(h)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{const i=t[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((s,a)=>r.T.equals(s,o[a]));case"scalar":return i.every((s,a)=>ri(r.T,s,o[a]));case"enum":return i.every((s,a)=>ri(F.INT32,s,o[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return ri(F.INT32,i,o);case"scalar":return ri(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const s=r.findField(i.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(i.value,o.value);case"enum":return ri(F.INT32,i.value,o.value);case"scalar":return ri(s.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(s.kind));case"map":const a=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const l=r.V.T;return a.every(u=>l.equals(i[u],o[u]));case"enum":return a.every(u=>ri(F.INT32,i[u],o[u]));case"scalar":const c=r.V.T;return a.every(u=>ri(c,i[u],o[u]))}break}})},clone(e){const t=e.getType(),n=new t,r=n;for(const i of t.fields.byMember()){const o=e[i.localName];let s;if(i.repeated)s=o.map(ql);else if(i.kind=="map"){s=r[i.localName];for(const[a,l]of Object.entries(o))s[a]=ql(l)}else i.kind=="oneof"?s=i.findField(o.case)?{case:o.case,value:ql(o.value)}:{case:void 0}:s=ql(o);r[i.localName]=s}for(const i of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(r,i.no,i.wireType,i.data);return n}}}function ql(e){if(e===void 0)return e;if(Zi(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function ta(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function qO(e,t,n){return{syntax:e,json:UO(),bin:VO(),util:Object.assign(Object.assign({},KO()),{newFieldList:t,initFields:n}),makeMessageType(r,i,o){return CO(this,r,i,o)},makeEnum:SO,makeEnumType:sC,getEnumType:kO,makeExtension(r,i,o){return IO(this,r,i,o)}}}class JO{constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,t.push(n)):t.push(r)}return this.members}}function yC(e,t){const n=bC(e);return t?n:tM(eM(n))}function QO(e){return yC(e,!1)}const YO=bC;function bC(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const XO=new Set(["constructor","toString","toJSON","valueOf"]),ZO=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),kC=e=>"".concat(e,"$"),eM=e=>ZO.has(e)?kC(e):e,tM=e=>XO.has(e)?kC(e):e;class nM{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=QO(t)}addField(t){it(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}function rM(e,t){var n,r,i,o,s,a;const l=[];let c;for(const u of typeof e=="function"?e():e){const d=u;if(d.localName=yC(u.name,u.oneof!==void 0),d.jsonName=(n=u.jsonName)!==null&&n!==void 0?n:YO(u.name),d.repeated=(r=u.repeated)!==null&&r!==void 0?r:!1,u.kind=="scalar"&&(d.L=(i=u.L)!==null&&i!==void 0?i:_i.BIGINT),d.delimited=(o=u.delimited)!==null&&o!==void 0?o:!1,d.req=(s=u.req)!==null&&s!==void 0?s:!1,d.opt=(a=u.opt)!==null&&a!==void 0?a:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=F.BYTES&&u.T!=F.STRING),u.oneof!==void 0){const h=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!c||c.name!=h)&&(c=new nM(h)),d.oneof=c,c.addField(d)}l.push(d)}return l}const j=qO("proto3",e=>new JO(e,t=>rM(t)),e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=ws(t.T,t.L);break}}});class en extends ng{constructor(t){super(),this.seconds=qe.zero,this.nanos=0,j.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(j.json.debug(t)));const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=qe.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return en.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new en({seconds:qe.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new en().fromBinary(t,n)}static fromJson(t,n){return new en().fromJson(t,n)}static fromJsonString(t,n){return new en().fromJsonString(t,n)}static equals(t,n){return j.util.equals(en,t,n)}}en.runtime=j;en.typeName="google.protobuf.Timestamp";en.fields=j.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const iM=j.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:en},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:oM,repeated:!0},{no:5,name:"events",kind:"message",T:aM,repeated:!0}]),oM=j.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:sM,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),sM=j.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:en},{no:3,name:"value",kind:"scalar",T:2}]),aM=j.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:en},{no:7,name:"normalized_end_timestamp",kind:"message",T:en,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),Bn=j.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),jt=j.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),ig=j.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),da=j.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Za=j.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),os=j.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"}]),Ro=j.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),lM=j.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),sr=j.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),og=j.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:mu,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:_C}]),mu=j.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),cM=j.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:j.getEnumType(jt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),el=j.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:j.getEnumType(Yh)},{no:4,name:"tracks",kind:"message",T:Yo,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:cM},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:j.getEnumType(gu)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:j.getEnumType(os)}]),Yh=j.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),gu=j.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),Cn=j.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),uM=j.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:eo,repeated:!0}]),Yo=j.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:j.getEnumType(Bn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:j.getEnumType(jt)},{no:10,name:"layers",kind:"message",T:eo,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:uM,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:j.getEnumType(Cn)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:_C},{no:19,name:"audio_features",kind:"enum",T:j.getEnumType(sr),repeated:!0}]),eo=j.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:j.getEnumType(ig)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),fa=j.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:j.getEnumType(yt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:CC,oneof:"value"},{no:3,name:"speaker",kind:"message",T:dM,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:wC,oneof:"value"},{no:7,name:"transcription",kind:"message",T:fM,oneof:"value"},{no:8,name:"metrics",kind:"message",T:iM,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Xh,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:pM,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:mM,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:gM,oneof:"value"}]),yt=j.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),dM=j.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:SC,repeated:!0}]),SC=j.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),CC=j.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0}]),wC=j.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),fM=j.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:hM,repeated:!0}]),hM=j.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Xh=j.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),pM=j.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),mM=j.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),gM=j.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:vM,oneof:"value"}]),vM=j.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),TC=j.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),yM=j.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:j.getEnumType(EC)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),EC=j.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),bM=j.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:j.getEnumType(xC)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),xC=j.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]),PC=j.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:cy},{no:2,name:"screen",kind:"message",T:cy},{no:3,name:"resume_connection",kind:"enum",T:j.getEnumType(Za)},{no:4,name:"disabled_codecs",kind:"message",T:kM},{no:5,name:"force_relay",kind:"enum",T:j.getEnumType(Za)}]),cy=j.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:j.getEnumType(Za)}]),kM=j.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:mu,repeated:!0},{no:2,name:"publish",kind:"message",T:mu,repeated:!0}]),_C=j.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Wn=j.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),Zh=j.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),SM=j.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),CM=j.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:uo,oneof:"message"},{no:2,name:"answer",kind:"message",T:uo,oneof:"message"},{no:3,name:"trickle",kind:"message",T:sg,oneof:"message"},{no:4,name:"add_track",kind:"message",T:tp,oneof:"message"},{no:5,name:"mute",kind:"message",T:ag,oneof:"message"},{no:6,name:"subscription",kind:"message",T:od,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:RC,oneof:"message"},{no:8,name:"leave",kind:"message",T:sd,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:OC,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:LC,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:AC,oneof:"message"},{no:13,name:"simulate",kind:"message",T:rr,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:MC,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:jC,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:IC,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:PM,oneof:"message"}]),uy=j.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:wM,oneof:"message"},{no:2,name:"answer",kind:"message",T:uo,oneof:"message"},{no:3,name:"offer",kind:"message",T:uo,oneof:"message"},{no:4,name:"trickle",kind:"message",T:sg,oneof:"message"},{no:5,name:"update",kind:"message",T:xM,oneof:"message"},{no:6,name:"track_published",kind:"message",T:lg,oneof:"message"},{no:8,name:"leave",kind:"message",T:sd,oneof:"message"},{no:9,name:"mute",kind:"message",T:ag,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:_M,oneof:"message"},{no:11,name:"room_update",kind:"message",T:RM,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:OM,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:NM,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:LM,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:AM,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:EM,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:TM,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:UM,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:FM,oneof:"message"},{no:22,name:"request_response",kind:"message",T:zM,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:VM,oneof:"message"}]),ep=j.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),tp=j.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:j.getEnumType(Bn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:j.getEnumType(jt)},{no:9,name:"layers",kind:"message",T:eo,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:ep,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:j.getEnumType(Cn)},{no:15,name:"stream",kind:"scalar",T:9}]),sg=j.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:j.getEnumType(Wn)},{no:3,name:"final",kind:"scalar",T:8}]),ag=j.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),wM=j.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:og},{no:2,name:"participant",kind:"message",T:el},{no:3,name:"other_participants",kind:"message",T:el,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:NC,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:PC},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:yM},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:mu,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),TM=j.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:NC,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:PC}]),lg=j.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Yo}]),EM=j.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),uo=j.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),xM=j.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:el,repeated:!0}]),od=j.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:TC,repeated:!0}]),RC=j.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:j.getEnumType(ig)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),IC=j.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:j.getEnumType(sr),repeated:!0}]),PM=j.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),sd=j.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:j.getEnumType(os)},{no:3,name:"action",kind:"enum",T:j.getEnumType(ss)},{no:4,name:"regions",kind:"message",T:jM}]),ss=j.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),OC=j.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:eo,repeated:!0}]),MC=j.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),NC=j.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),_M=j.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:SC,repeated:!0}]),RM=j.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:og}]),IM=j.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:j.getEnumType(da)},{no:3,name:"score",kind:"scalar",T:2}]),OM=j.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:IM,repeated:!0}]),MM=j.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:j.getEnumType(Zh)}]),NM=j.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:MM,repeated:!0}]),cg=j.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:j.getEnumType(ig)},{no:2,name:"enabled",kind:"scalar",T:8}]),DM=j.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:cg,repeated:!0}]),LM=j.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:cg,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:DM,repeated:!0}]),DC=j.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),LC=j.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:DC,repeated:!0}]),AM=j.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),AC=j.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:uo},{no:2,name:"subscription",kind:"message",T:od},{no:3,name:"publish_tracks",kind:"message",T:lg,repeated:!0},{no:4,name:"data_channels",kind:"message",T:UC,repeated:!0},{no:5,name:"offer",kind:"message",T:uo},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),UC=j.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:j.getEnumType(Wn)}]),rr=j.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:j.getEnumType(SM),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),jC=j.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),UM=j.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),jM=j.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:$M,repeated:!0}]),$M=j.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),FM=j.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:j.getEnumType(lM)}]),zM=j.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:j.getEnumType($C)},{no:3,name:"message",kind:"scalar",T:9}]),$C=j.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),VM=j.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function BM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tc={exports:{}},WM=Tc.exports,dy;function HM(){return dy||(dy=1,function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(WM,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(g,b){var m=g[b];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?l:console[g]!==void 0?a(console,g):console.log!==void 0?a(console,"log"):t}function u(){for(var g=this.getLevel(),b=0;b<i.length;b++){var m=i[b];this[m]=b<g?t:this.methodFactory(m,g,this.name)}if(this.log=this.debug,typeof console===n&&g<this.levels.SILENT)return"No console available for logging"}function d(g){return function(){typeof console!==n&&(u.call(this),this[g].apply(this,arguments))}}function h(g,b,m){return c(g)||d.apply(this,arguments)}function p(g,b){var m=this,y,C,S,w="loglevel";typeof g=="string"?w+=":"+g:typeof g=="symbol"&&(w=void 0);function T(M){var A=(i[M]||"silent").toUpperCase();if(!(typeof window===n||!w)){try{window.localStorage[w]=A;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+A+";"}catch{}}}function E(){var M;if(!(typeof window===n||!w)){try{M=window.localStorage[w]}catch{}if(typeof M===n)try{var A=window.document.cookie,Z=encodeURIComponent(w),X=A.indexOf(Z+"=");X!==-1&&(M=/^([^;]+)/.exec(A.slice(X+Z.length+1))[1])}catch{}return m.levels[M]===void 0&&(M=void 0),M}}function k(){if(!(typeof window===n||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(M){var A=M;if(typeof A=="string"&&m.levels[A.toUpperCase()]!==void 0&&(A=m.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=m.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+M)}m.name=g,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=b||h,m.getLevel=function(){return S??C??y},m.setLevel=function(M,A){return S=P(M),A!==!1&&T(S),u.call(m)},m.setDefaultLevel=function(M){C=P(M),E()||m.setLevel(M,!1)},m.resetLevel=function(){S=null,k(),u.call(m)},m.enableAll=function(M){m.setLevel(m.levels.TRACE,M)},m.disableAll=function(M){m.setLevel(m.levels.SILENT,M)},m.rebuild=function(){if(s!==m&&(y=P(s.getLevel())),u.call(m),s===m)for(var M in o)o[M].rebuild()},y=P(s?s.getLevel():"WARN");var _=E();_!=null&&(S=P(_)),u.call(m)}s=new p,s.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var m=o[b];return m||(m=o[b]=new p(b,s.methodFactory)),m};var v=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=v),s},s.getLoggers=function(){return o},s.default=s,s})}(Tc)),Tc.exports}var ad=HM(),np;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(np||(np={}));var Jn;(function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(Jn||(Jn={}));let Se=ad.getLogger("livekit");Object.values(Jn).map(e=>ad.getLogger(e));Se.setDefaultLevel(np.info);function Fr(e){const t=ad.getLogger(e);return t.setDefaultLevel(Se.getLevel()),t}const GM=ad.getLogger("lk-e2ee"),na=7e3,KM=[0,300,2*2*300,3*3*300,4*4*300,na,na,na,na,na];class qM{constructor(t){this._retryDelays=t!==void 0?[...t]:KM}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function R(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function fy(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uo(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof fy=="function"?fy(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){s=e[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Jl={exports:{}},hy;function JM(){if(hy)return Jl.exports;hy=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(w,T,E){return Function.prototype.apply.call(w,T,E)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:n=function(w){return Object.getOwnPropertyNames(w)};function r(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(w){return w!==w};function o(){o.init.call(this)}Jl.exports=o,Jl.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");s=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function l(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(w){for(var T=[],E=1;E<arguments.length;E++)T.push(arguments[E]);var k=w==="error",P=this._events;if(P!==void 0)k=k&&P.error===void 0;else if(!k)return!1;if(k){var _;if(T.length>0&&(_=T[0]),_ instanceof Error)throw _;var M=new Error("Unhandled error."+(_?" ("+_.message+")":""));throw M.context=_,M}var A=P[w];if(A===void 0)return!1;if(typeof A=="function")t(A,this,T);else for(var Z=A.length,X=v(A,Z),E=0;E<Z;++E)t(X[E],this,T);return!0};function c(S,w,T,E){var k,P,_;if(a(T),P=S._events,P===void 0?(P=S._events=Object.create(null),S._eventsCount=0):(P.newListener!==void 0&&(S.emit("newListener",w,T.listener?T.listener:T),P=S._events),_=P[w]),_===void 0)_=P[w]=T,++S._eventsCount;else if(typeof _=="function"?_=P[w]=E?[T,_]:[_,T]:E?_.unshift(T):_.push(T),k=l(S),k>0&&_.length>k&&!_.warned){_.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+_.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=S,M.type=w,M.count=_.length,r(M)}return S}o.prototype.addListener=function(w,T){return c(this,w,T,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(w,T){return c(this,w,T,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(S,w,T){var E={fired:!1,wrapFn:void 0,target:S,type:w,listener:T},k=u.bind(E);return k.listener=T,E.wrapFn=k,k}o.prototype.once=function(w,T){return a(T),this.on(w,d(this,w,T)),this},o.prototype.prependOnceListener=function(w,T){return a(T),this.prependListener(w,d(this,w,T)),this},o.prototype.removeListener=function(w,T){var E,k,P,_,M;if(a(T),k=this._events,k===void 0)return this;if(E=k[w],E===void 0)return this;if(E===T||E.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete k[w],k.removeListener&&this.emit("removeListener",w,E.listener||T));else if(typeof E!="function"){for(P=-1,_=E.length-1;_>=0;_--)if(E[_]===T||E[_].listener===T){M=E[_].listener,P=_;break}if(P<0)return this;P===0?E.shift():g(E,P),E.length===1&&(k[w]=E[0]),k.removeListener!==void 0&&this.emit("removeListener",w,M||T)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(w){var T,E,k;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[w]),this;if(arguments.length===0){var P=Object.keys(E),_;for(k=0;k<P.length;++k)_=P[k],_!=="removeListener"&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=E[w],typeof T=="function")this.removeListener(w,T);else if(T!==void 0)for(k=T.length-1;k>=0;k--)this.removeListener(w,T[k]);return this};function h(S,w,T){var E=S._events;if(E===void 0)return[];var k=E[w];return k===void 0?[]:typeof k=="function"?T?[k.listener||k]:[k]:T?b(k):v(k,k.length)}o.prototype.listeners=function(w){return h(this,w,!0)},o.prototype.rawListeners=function(w){return h(this,w,!1)},o.listenerCount=function(S,w){return typeof S.listenerCount=="function"?S.listenerCount(w):p.call(S,w)},o.prototype.listenerCount=p;function p(S){var w=this._events;if(w!==void 0){var T=w[S];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(S,w){for(var T=new Array(w),E=0;E<w;++E)T[E]=S[E];return T}function g(S,w){for(;w+1<S.length;w++)S[w]=S[w+1];S.pop()}function b(S){for(var w=new Array(S.length),T=0;T<w.length;++T)w[T]=S[T].listener||S[T];return w}function m(S,w){return new Promise(function(T,E){function k(_){S.removeListener(w,P),E(_)}function P(){typeof S.removeListener=="function"&&S.removeListener("error",k),T([].slice.call(arguments))}C(S,w,P,{once:!0}),w!=="error"&&y(S,k,{once:!0})})}function y(S,w,T){typeof S.on=="function"&&C(S,"error",w,T)}function C(S,w,T,E){if(typeof S.on=="function")E.once?S.once(w,T):S.on(w,T);else if(typeof S.addEventListener=="function")S.addEventListener(w,function k(P){E.once&&S.removeEventListener(w,k),T(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Jl.exports}var vr=JM();let FC=!0,zC=!0;function Ec(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function bo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==t)return i.apply(this,arguments);const l=c=>{const u=n(c);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,l),i.apply(this,[s,l])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(a))return o.apply(this,arguments);const l=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,l])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function QM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(FC=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function YM(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(zC=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function VC(){if(typeof window=="object"){if(FC)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ug(e,t){zC&&console.warn(e+" is deprecated, please use "+t+" instead.")}function XM(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=Ec(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Ec(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Ec(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function py(e){return Object.prototype.toString.call(e)==="[object Object]"}function BC(e){return py(e)?Object.keys(e).reduce(function(t,n){const r=py(e[n]),i=r?BC(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function rp(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?rp(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{rp(e,e.get(i),n)})}))}function my(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(a=>{a.type===r&&a.trackId===s.id&&rp(e,a,i)})}),i}const gy=VC;function WC(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof a[c]=="object"?a[c]:{ideal:a[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,p){return h?h+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){l.optional=l.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",c)]=u.ideal,l.optional.push(h),h={},h[d("max",c)]=u.ideal,l.optional.push(h)):(h[d("",c)]=u.ideal,l.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",c)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(h,c)]=u[h])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},i=function(a,l){if(t.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(v=>v.kind==="videoinput");let p=h.find(v=>d.some(g=>v.label.toLowerCase().includes(g)));return!p&&h.length&&d.includes("back")&&(p=h[h.length-1]),p&&(a.video.deviceId=c.exact?{exact:p.deviceId}:{ideal:p.deviceId}),a.video=r(a.video),gy("chrome: "+JSON.stringify(a)),l(a)})}a.video=r(a.video)}return gy("chrome: "+JSON.stringify(a)),l(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,l,c){i(a,u=>{n.webkitGetUserMedia(u,l,d=>{c&&c(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,c=>a(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function HC(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function GC(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else bo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function KC(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){let c=i.apply(this,arguments);return c||(c=t(this,a),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(l=>l.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function qC(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>my(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),bo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>my(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function JC(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(l)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(s);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function QC(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return JC(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(g=>g===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const v=this._streams[d.id];if(v)v.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new e.MediaStream([u]);this._streams[d.id]=g,this._reverseStreams[g.id]=d,this.addStream(g)}return this.getSenders().find(g=>g.track===u)};function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const p=c._reverseStreams[h],v=c._streams[p.id];d=d.replace(new RegExp(v.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const p=c._reverseStreams[h],v=c._streams[p.id];d=d.replace(new RegExp(p.id,"g"),v.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=e.RTCPeerConnection.prototype[c],d={[c](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[v=>{const g=o(this,v);h[0].apply(null,[g])},v=>{h[1]&&h[1].apply(null,v)},arguments[2]]):u.apply(this,arguments).then(v=>o(this,v))}};e.RTCPeerConnection.prototype[c]=d[c]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(g=>u.track===g)&&(h=this._streams[p])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ip(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function YC(e,t){bo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var vy=Object.freeze({__proto__:null,fixNegotiationNeeded:YC,shimAddTrackRemoveTrack:QC,shimAddTrackRemoveTrackWithNative:JC,shimGetSendersWithDtmf:KC,shimGetUserMedia:WC,shimMediaStream:HC,shimOnTrack:GC,shimPeerConnection:ip,shimSenderReceiverGetStats:qC});function XC(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){ug("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,a,l){a in s&&!(l in s)&&(s[l]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function ZM(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function ZC(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function op(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(l=>{if(t.version<53&&!s)try{l.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((u,d)=>{l.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return l}).then(s,a)}}function ew(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function tw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),bo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function nw(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){ug("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function rw(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function iw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function ow(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function sw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function aw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var yy=Object.freeze({__proto__:null,shimAddTransceiver:iw,shimCreateAnswer:aw,shimCreateOffer:sw,shimGetDisplayMedia:ZM,shimGetParameters:ow,shimGetUserMedia:XC,shimOnTrack:ZC,shimPeerConnection:op,shimRTCDataChannel:rw,shimReceiverGetStats:tw,shimRemoveStream:nw,shimSenderGetStats:ew});function lw(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function cw(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),t.apply(r,arguments)}}}function uw(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h},t.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h};let a=function(l,c,u){const d=i.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(l,c,u){const d=o.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(l,c,u){const d=s.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},t.addIceCandidate=a}function dw(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(fw(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function fw(e){return e&&e.video!==void 0?Object.assign({},e,{video:BC(e.video)}):e}function hw(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];a.urls===void 0&&a.url?(ug("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function pw(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function mw(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function gw(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var by=Object.freeze({__proto__:null,shimAudioContext:gw,shimCallbacksAPI:uw,shimConstraints:fw,shimCreateOfferLegacy:mw,shimGetUserMedia:dw,shimLocalStreamsAPI:lw,shimRTCIceServerUrls:hw,shimRemoteStreamsAPI:cw,shimTrackEventTransceiver:pw}),Sf={exports:{}},ky;function e3(){return ky||(ky=1,function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(n)[0].split(" ");r.profile=o[2];for(let a=3;a<o.length;a++){const l=o[a],c=t.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(c){const u=t.parseRtpMap(c),d=t.matchPrefix(n,"a=fmtp:"+l+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const s=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{s.forEach(l=>{a.rtcpFeedback.find(u=>u.type===l.type&&u.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=t.writeRtpMap(s),i+=t.writeFmtp(s),i+=t.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=t.writeExtmap(s)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(h=>t.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(v=>parseInt(v,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let p={ssrc:l,codecPayloadType:parseInt(h.parameters.apt,10)};l&&c&&(p.rtx={ssrc:c}),r.push(p),o&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:l,mechanism:s?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&l&&r.push({ssrc:l});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(h=>{h.maxBitrate=d})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=t.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=t.matchPrefix(n,"a=ssrc:").map(s=>t.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=t.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t}(Sf)),Sf.exports}var vw=e3(),as=BM(vw),t3=pO({__proto__:null,default:as},[vw]);function xc(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),o=as.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,bo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function sp(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||bo(e,"icecandidate",t=>{if(t.candidate){const n=as.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Pc(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=as.splitSections(a.sdp);return l.shift(),l.some(c=>{const u=as.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},i=function(a){let l=65536;return t.browser==="firefox"&&(t.version<57?a===-1?l=16384:l=2147483637:t.version<60?l=t.version===57?65535:65536:l=2147483637),l},o=function(a,l){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const u=as.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):t.browser==="firefox"&&l!==-1&&(c=2147483637),c},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),c=i(l),u=o(arguments[0],l);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return s.apply(this,arguments)}}function _c(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},bo(e,"datachannel",r=>(t(r.channel,r.target),r))}function ap(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function lp(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Rc(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ic(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var n3=Object.freeze({__proto__:null,removeExtmapAllowMixed:lp,shimAddIceCandidateNullOrEmpty:Rc,shimConnectionState:ap,shimMaxMessageSize:Pc,shimParameterlessSetLocalDescription:Ic,shimRTCIceCandidate:xc,shimRTCIceCandidateRelayProtocol:sp,shimSendThrowTypeError:_c});function r3(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=VC,r=XM(e),i={browserDetails:r,commonShim:n3,extractVersion:Ec,disableLog:QM,disableWarnings:YM,sdp:t3};switch(r.browser){case"chrome":if(!vy||!ip||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=vy,Rc(e,r),Ic(e),WC(e,r),HC(e),ip(e,r),GC(e),QC(e,r),KC(e),qC(e),YC(e,r),xc(e),sp(e),ap(e),Pc(e,r),_c(e),lp(e,r);break;case"firefox":if(!yy||!op||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=yy,Rc(e,r),Ic(e),XC(e,r),op(e,r),ZC(e),nw(e),ew(e),tw(e),rw(e),iw(e),ow(e),sw(e),aw(e),xc(e),ap(e),Pc(e,r),_c(e);break;case"safari":if(!by||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=by,Rc(e,r),Ic(e),hw(e),mw(e),uw(e),lw(e),cw(e),pw(e),dw(e),gw(e),xc(e),sp(e),Pc(e,r),_c(e),lp(e,r);break;default:n("Unsupported browser!");break}return i}r3({window:typeof window>"u"?void 0:window});const i3=10,Ql="lk_e2ee",o3="LKFrameEncryptionKey",s3={sharedKey:!1,ratchetSalt:o3,ratchetWindowSize:8,failureTolerance:i3,keyringSize:16};var Ei;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(Ei||(Ei={}));var Sy;(function(e){e.KeyRatcheted="keyRatcheted"})(Sy||(Sy={}));var mi;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(mi||(mi={}));var Cy;(function(e){e.Error="cryptorError"})(Cy||(Cy={}));function a3(){return l3()||cp()}function cp(){return typeof window.RTCRtpScriptTransform<"u"}function l3(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class b8 extends vr.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{Se.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},s3),t),this.on(Ei.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,r){const i={key:t,participantIdentity:n,keyIndex:r};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Ei.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(Ei.RatchetRequest,t,n)}}class ko extends Error{constructor(t,n){super(n||"an error has occured"),this.code=t}}var zt;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest"})(zt||(zt={}));class Ue extends ko{constructor(t,n,r){super(1,t),this.status=r,this.reason=n}}class dg extends ko{constructor(t){super(21,t??"device is unsupported")}}class ar extends ko{constructor(t){super(20,t??"track is invalid")}}class c3 extends ko{constructor(t){super(10,t??"unsupported server")}}class vt extends ko{constructor(t){super(12,t??"unexpected connection state")}}class up extends ko{constructor(t){super(13,t??"unable to negotiate")}}class wy extends ko{constructor(t,n){super(15,t),this.reason=n}}var tl;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(tl||(tl={}));(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(tl||(tl={}));var Ty;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})(Ty||(Ty={}));var U;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"})(U||(U={}));var $;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage"})($||($={}));var q;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse"})(q||(q={}));var W;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate"})(W||(W={}));function fg(e,t,n){var r,i,o;t===void 0&&(t=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,l=n.maxWait,c=Date.now(),u=[];function d(){if(l!==void 0){var p=Date.now()-c;if(p+t>=l)return l-p}return t}var h=function(){var p=[].slice.call(arguments),v=this;return new Promise(function(g,b){var m=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!s){var C=e.apply(v,p);a&&a(C),u.forEach(function(S){return(0,S.resolve)(C)}),u=[]}},d()),m){var y=e.apply(v,p);return a&&a(y),g(y)}u.push({resolve:g,reject:b})})};return h.cancel=function(p){o!==void 0&&clearTimeout(o),u.forEach(function(v){return(0,v.reject)(p)}),u=[]},h}const u3=/version\/(\d+(\.?_?\d+)+)/i;let Cf;function zr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof e>"u"&&typeof navigator>"u")return;const n=(e??navigator.userAgent).toLowerCase();if(Cf===void 0||t){const r=d3.find(i=>{let{test:o}=i;return o.test(n)});Cf=r?.describe(n)}return Cf}const d3=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:Oc(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:wf(e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:Oc(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:wf(e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:Oc(u3,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:wf(e)}}}];function Oc(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=t.match(e);return r&&r.length>=n&&r[n]||""}function wf(e){return e.includes("mac os")?Oc(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var f3="2.5.9";const h3=f3,p3=15;class Rt{}Rt.setTimeout=function(){return setTimeout(...arguments)};Rt.setInterval=function(){return setInterval(...arguments)};Rt.clearTimeout=function(){return clearTimeout(...arguments)};Rt.clearInterval=function(){return clearInterval(...arguments)};class De{constructor(t,n,r,i,o){if(typeof t=="object")this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRatio,this.encoding={maxBitrate:t.maxBitrate,maxFramerate:t.maxFramerate,priority:t.priority};else if(n!==void 0&&r!==void 0)this.width=t,this.height=n,this.aspectRatio=t/n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const m3=["vp8","h264"],yw=["vp8","h264","vp9","av1"];function g3(e){return!!m3.find(t=>t===e)}var dp;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3},e.musicStereo={maxBitrate:48e3},e.musicHighQuality={maxBitrate:64e3},e.musicHighQualityStereo={maxBitrate:96e3}})(dp||(dp={}));const nl={h90:new De(160,90,9e4,20),h180:new De(320,180,16e4,20),h216:new De(384,216,18e4,20),h360:new De(640,360,45e4,20),h540:new De(960,540,8e5,25),h720:new De(1280,720,17e5,30),h1080:new De(1920,1080,3e6,30),h1440:new De(2560,1440,5e6,30),h2160:new De(3840,2160,8e6,30)},fp={h120:new De(160,120,7e4,20),h180:new De(240,180,125e3,20),h240:new De(320,240,14e4,20),h360:new De(480,360,33e4,20),h480:new De(640,480,5e5,20),h540:new De(720,540,6e5,25),h720:new De(960,720,13e5,30),h1080:new De(1440,1080,23e5,30),h1440:new De(1920,1440,38e5,30)},hg={h360fps3:new De(640,360,2e5,3,"medium"),h360fps15:new De(640,360,4e5,15,"medium"),h720fps5:new De(1280,720,8e5,5,"medium"),h720fps15:new De(1280,720,15e5,15,"medium"),h720fps30:new De(1280,720,2e6,30,"medium"),h1080fps15:new De(1920,1080,25e5,15,"medium"),h1080fps30:new De(1920,1080,5e6,30,"medium"),original:new De(0,0,7e6,30,"medium")};function v3(e){if(!(typeof e>"u"))return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}const y3=5e3,ra=[];var Pn;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"})(Pn||(Pn={}));class L extends vr.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=L.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Se,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),y3):this.handleAppVisibilityChanged()},this.log=Fr((i=r.loggerName)!==null&&i!==void 0?i:Jn.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=L.Source.Unknown}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Ae(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===L.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===L.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(ra.forEach(o=>{o.parentElement===null&&!t&&(t=o)}),t&&ra.splice(ra.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),Xo(this.mediaStreamTrack,t);const r=t.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return t.play().then(()=>{this.emit(i?W.AudioPlaybackStarted:W.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?W.AudioPlaybackFailed:W.VideoPlaybackFailed,o):o.name==="AbortError"?Se.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Se.warn("could not playback ".concat(i?"audio":"video"),o),i&&t&&r.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(W.ElementAttached,t),t}detach(t){try{if(t){ls(this.mediaStreamTrack,t);const r=this.attachedElements.indexOf(t);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(t),this.emit(W.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(r=>{ls(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(W.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(t){t.loggerName&&(this.log=Fr(t.loggerName)),t.loggerContextCb&&(this.loggerContextCb=t.loggerContextCb)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),ra.forEach(r=>{r.parentElement||(n=!1)}),n&&ra.push(t)}}handleAppVisibilityChanged(){return R(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===L.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(t=>t.play().catch(()=>{})),0)})}addAppVisibilityListener(){hn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){hn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Xo(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let r;e.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(e)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(e)),(!fo()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(fo()||Ts())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function ls(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(n=e.Source||(e.Source={}));let r;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(r=e.StreamState||(e.StreamState={}));function i(c){switch(c){case t.Audio:return Bn.AUDIO;case t.Video:return Bn.VIDEO;default:return Bn.DATA}}e.kindToProto=i;function o(c){switch(c){case Bn.AUDIO:return t.Audio;case Bn.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=o;function s(c){switch(c){case n.Camera:return jt.CAMERA;case n.Microphone:return jt.MICROPHONE;case n.ScreenShare:return jt.SCREEN_SHARE;case n.ScreenShareAudio:return jt.SCREEN_SHARE_AUDIO;default:return jt.UNKNOWN}}e.sourceToProto=s;function a(c){switch(c){case jt.CAMERA:return n.Camera;case jt.MICROPHONE:return n.Microphone;case jt.SCREEN_SHARE:return n.ScreenShare;case jt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=a;function l(c){switch(c){case Zh.ACTIVE:return r.Active;case Zh.PAUSED:return r.Paused;default:return r.Unknown}}e.streamStateFromProto=l})(L||(L={}));function bw(e,t,n){var r;const i=(r=v3(e))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&hp(i.audio,t),i.video&&hp(i.video,n),i}function hp(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function ld(e){const t={};if(e.video)if(typeof e.video=="object"){const n={},r=n,i=e.video;Object.keys(i).forEach(o=>{switch(o){case"resolution":hp(r,i.resolution);break;default:r[o]=i[o]}}),t.video=n}else t.video=e.video;else t.video=!1;return e.audio?typeof e.audio=="object"?t.audio=e.audio:t.audio=!0:t.audio=!1,t}function b3(e){return R(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const r=pg();if(r){const i=r.createAnalyser();i.fftSize=2048;const o=i.frequencyBinCount,s=new Uint8Array(o);r.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(i),yield hr(n),i.getByteTimeDomainData(s);const l=s.some(c=>c!==128&&c!==0);return r.close(),!l}return!1}()})}function pg(){const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e)return new e({latencyHint:"interactive"})}function Ey(e){return e===L.Source.Microphone?"audioinput":e===L.Source.Camera?"videoinput":void 0}function k3(e){var t,n;let r=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(r=typeof r=="boolean"?{}:r,fo()?r=Object.assign(Object.assign({},r),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:r,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function Mc(e){const t=e.split("/")[1].toLowerCase();if(!yw.includes(t))throw Error("Video codec not supported: ".concat(t));return t}function S3(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new lg({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}function Ae(e){return e instanceof L?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?Ae(e.track):{})}}function C3(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function w3(e,t){var n;e===void 0&&(e={}),t===void 0&&(t={});const r=[...Object.keys(t),...Object.keys(e)],i={};for(const o of r)e[o]!==t[o]&&(i[o]=(n=t[o])!==null&&n!==void 0?n:"");return i}const T3="|",xy="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function E3(e){const t=e.split(T3);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function hr(e){return R(this,void 0,void 0,function*(){return new Promise(t=>Rt.setTimeout(t,e))})}function pp(){return"addTransceiver"in RTCPeerConnection.prototype}function mp(){return"addTrack"in RTCPeerConnection.prototype}function x3(){if(!("getCapabilities"in RTCRtpSender)||fo())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/AV1"){t=!0;break}}return t}function P3(){if(!("getCapabilities"in RTCRtpSender)||Ts())return!1;if(fo()){const n=zr();if(n?.version&&Es(n.version,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/VP9"){t=!0;break}}return t}function _a(e){return e==="av1"||e==="vp9"}function gp(e){return document?(e||(e=document.createElement("audio")),"setSinkId"in e):!1}function _3(){return typeof RTCPeerConnection>"u"?!1:pp()||mp()}function Ts(){var e;return((e=zr())===null||e===void 0?void 0:e.name)==="Firefox"}function fo(){var e;return((e=zr())===null||e===void 0?void 0:e.name)==="Safari"}function R3(){const e=zr();return e?.name==="Safari"&&e.version.startsWith("17.")}function kw(){var e,t;return hn()?(t=(e=navigator.userAgentData)===null||e===void 0?void 0:e.mobile)!==null&&t!==void 0?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function I3(){const e=zr(),t="17.2";if(e)return e.name!=="Safari"&&e.os!=="iOS"||e.os==="iOS"&&e.osVersion&&Es(t,e.osVersion)>=0?!0:e.name==="Safari"&&Es(t,e.version)>=0}function hn(){return typeof document<"u"}function Vr(){return navigator.product=="ReactNative"}function vp(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function Sw(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function Cw(){if(!Vr())return;let e=Sw();if(e)return e.platform}function Py(){if(hn())return window.devicePixelRatio;if(Vr()){let e=Sw();if(e)return e.devicePixelRatio}return 1}function Es(e,t){const n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const s=parseInt(n[o],10),a=parseInt(r[o],10);if(s>a)return 1;if(s<a)return-1;if(o===i-1&&s===a)return 0}return e===""&&t!==""?-1:t===""?1:n.length==r.length?0:n.length<r.length?-1:1}function O3(e){for(const t of e)t.target.handleResize(t)}function M3(e){for(const t of e)t.target.handleVisibilityChanged(t)}let Tf=null;const _y=()=>(Tf||(Tf=new ResizeObserver(O3)),Tf);let Ef=null;const Ry=()=>(Ef||(Ef=new IntersectionObserver(M3,{root:null,rootMargin:"0px"})),Ef);function N3(){var e;const t=new bM({sdk:xC.JS,protocol:p3,version:h3});return Vr()&&(t.os=(e=Cw())!==null&&e!==void 0?e:""),t}function Iy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=e,i.height=t;const o=i.getContext("2d");o?.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(e/2,t/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=i.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let ia;function xf(){if(!ia){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const r=e.createMediaStreamDestination();if(t.connect(n),n.connect(r),t.start(),[ia]=r.stream.getAudioTracks(),!ia)throw Error("Could not get empty media stream audio track");ia.enabled=!1}return ia.clone()}class ww{constructor(t,n){this.onFinally=n,this.promise=new Promise((r,i)=>R(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,t&&(yield t(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function D3(e,t){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},t),r=pg();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?e.mediaStreamTrack.clone():e.mediaStreamTrack,o=r.createMediaStreamSource(new MediaStream([i])),s=r.createAnalyser();s.minDecibels=n.minDecibels,s.maxDecibels=n.maxDecibels,s.fftSize=n.fftSize,s.smoothingTimeConstant=n.smoothingTimeConstant,o.connect(s);const a=new Uint8Array(s.frequencyBinCount);return{calculateVolume:()=>{s.getByteFrequencyData(a);let u=0;for(const h of a)u+=Math.pow(h/255,2);return Math.sqrt(u/a.length)},analyser:s,cleanup:()=>R(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class dn{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(i=>t=()=>{this._locks-=1,i()}),r=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),r}}function L3(e){return yw.includes(e)}function Dr(e){if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))return e[0];if(e.exact)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function A3(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function Oy(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function U3(e,t){return e.segments.map(n=>{let{id:r,text:i,language:o,startTime:s,endTime:a,final:l}=n;var c;const u=(c=t.get(r))!==null&&c!==void 0?c:Date.now(),d=Date.now();return l?t.delete(r):t.set(r,u),{id:r,text:i,startTime:Number.parseInt(s.toString()),endTime:Number.parseInt(a.toString()),final:l,language:o,firstReceivedTime:u,lastReceivedTime:d}})}function j3(e){const{id:t,timestamp:n,message:r,editTimestamp:i}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:i?Number.parseInt(i.toString()):void 0,message:r}}const Pf="default";class _t{static getInstance(){return this.instance===void 0&&(this.instance=new _t),this.instance}getDevices(t){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;if(((o=_t.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){Se.debug("awaiting getUserMedia promise");try{n?yield _t.userMediaPromiseMap.get(n):yield Promise.all(_t.userMediaPromiseMap.values())}catch{Se.warn("error waiting for media permissons")}}let s=yield navigator.mediaDevices.enumerateDevices();if(i&&!(fo()&&r.hasDeviceInUse(n))&&(s.filter(l=>l.kind===n).length===0||s.some(l=>{const c=l.label==="",u=n?l.kind===n:!0;return c&&u}))){const l={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"},c=yield navigator.mediaDevices.getUserMedia(l);s=yield navigator.mediaDevices.enumerateDevices(),c.getTracks().forEach(u=>{u.stop()})}return n&&(s=s.filter(a=>a.kind===n)),s}()})}normalizeDeviceId(t,n,r){return R(this,void 0,void 0,function*(){if(n!==Pf)return n;const i=yield this.getDevices(t),o=i.find(a=>a.deviceId===Pf);if(!o){Se.warn("could not reliably determine default device");return}const s=i.find(a=>a.deviceId!==Pf&&a.groupId===(r??o.groupId));if(!s){Se.warn("could not reliably determine default device");return}return s?.deviceId})}hasDeviceInUse(t){return t?_t.userMediaPromiseMap.has(t):_t.userMediaPromiseMap.size>0}}_t.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];_t.userMediaPromiseMap=new Map;const $3=1e3;class to extends L{get sender(){return this._sender}set sender(t){this._sender=t}get constraints(){return this._constraints}constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(t,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=fg(()=>R(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>R(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(W.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new dn,this.pauseUpstreamLock=new dn,this.processorLock=new dn,this.restartLock=new dn,this.setMediaStreamTrack(t,!0),this._constraints=t.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==L.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(t,n){return R(this,void 0,void 0,function*(){if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{ls(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let r;if(this.processor&&t){const i=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Xo(t,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}finally{i()}}this.sender&&(yield this.sender.replaceTrack(r??t)),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{Xo(r??t,i)}))})}waitForDimensions(){return R(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$3;return function*(){var r;if(t.kind===L.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((r=zr())===null||r===void 0?void 0:r.os)==="iOS"&&(yield hr(10));const i=Date.now();for(;Date.now()-i<n;){const o=t.dimensions;if(o)return o;yield hr(50)}throw new ar("unable to get track dimensions after timeout")}()})}getDeviceId(){return R(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(t.source===L.Source.ScreenShare)return;const{deviceId:r,groupId:i}=t._mediaStreamTrack.getSettings(),o=t.kind===L.Kind.Audio?"audioinput":"videoinput";return n?_t.getInstance().normalizeDeviceId(o,r,i):r}()})}mute(){return R(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return R(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t,n){return R(this,void 0,void 0,function*(){if(!this.sender)throw new ar("unable to replace an unpublished track");let r,i;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,i=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(t),i&&this.processor&&(yield this.stopProcessor()),this})}restart(t){return R(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{t||(t=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:t}));const r={audio:!1,video:!1};this.kind===L.Kind.Video?r.video=t:r.audio=t,this.attachedElements.forEach(s=>{ls(this.mediaStreamTrack,s)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const o=(yield navigator.mediaDevices.getUserMedia(r)).getTracks()[0];return o.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(o),this._constraints=t,this.emit(W.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(t){this.log.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted"),this.logContext),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?W.Muted:W.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return R(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),kw()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return R(this,void 0,void 0,function*(){const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(W.UpstreamPaused,this);const n=zr();if(n?.name==="Safari"&&Es(n.version,"12.0")<0)throw new dg("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{t()}})}resumeUpstream(){return R(this,void 0,void 0,function*(){const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(W.UpstreamResumed,this),yield this.sender.replaceTrack(this.mediaStreamTrack)}finally{t()}})}getRTCStatsReport(){return R(this,void 0,void 0,function*(){var t;return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o;const s=yield r.processorLock.lock();try{r.log.debug("setting up processor",r.logContext);const a=document.createElement(r.kind),l={kind:r.kind,track:r._mediaStreamTrack,element:a,audioContext:r.audioContext};if(yield n.init(l),r.log.debug("processor initialized",r.logContext),r.processor&&(yield r.stopProcessor()),r.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Xo(r._mediaStreamTrack,a),a.muted=!0,a.play().catch(c=>r.log.error("failed to play processor element",Object.assign(Object.assign({},r.logContext),{error:c}))),r.processor=n,r.processorElement=a,r.processor.processedTrack){for(const c of r.attachedElements)c!==r.processorElement&&i&&(ls(r._mediaStreamTrack,c),Xo(r.processor.processedTrack,c));yield(o=r.sender)===null||o===void 0?void 0:o.replaceTrack(r.processor.processedTrack)}r.emit(W.TrackProcessorUpdate,r.processor)}finally{s()}}()})}getProcessor(){return this.processor}stopProcessor(){return R(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var r,i;t.processor&&(t.log.debug("stopping processor",t.logContext),(r=t.processor.processedTrack)===null||r===void 0||r.stop(),yield t.processor.destroy(),t.processor=void 0,n||((i=t.processorElement)===null||i===void 0||i.remove(),t.processorElement=void 0),yield t._mediaStreamTrack.applyConstraints(t._constraints),yield t.setMediaStreamTrack(t._mediaStreamTrack,!0),t.emit(W.TrackProcessorUpdate))}()})}}class F3 extends vr.EventEmitter{constructor(t){super(),this.onWorkerMessage=n=>{var r,i;const{kind:o,data:s}=n.data;switch(o){case"error":Se.error(s.error.message),this.emit(mi.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)}),this.encryptionEnabled!==s.enabled&&s.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(mi.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(s.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(mi.ParticipantEncryptionStatusChanged,s.enabled,a)}break;case"ratchetKey":this.keyProvider.emit(Ei.KeyRatcheted,s.material,s.keyIndex);break}},this.onWorkerError=n=>{Se.error("e2ee worker encountered an error:",{error:n.error}),this.emit(mi.EncryptionError,n.error)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1}setup(t){if(!a3())throw new dg("tried to setup end-to-end encryption on an unsupported browser");if(Se.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:GM.getLevel()}};this.worker&&(Se.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){Se.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?Se.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(q.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(U.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Cn.NONE,i.identity)),t.on(U.ConnectionStateChanged,r=>{r===Te.Connected&&t.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Cn.NONE,i.identity)})})}).on(U.TrackUnsubscribed,(r,i,o)=>{var s;const a={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(a)}).on(U.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(U.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(r=>{this.postKey(r)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),t.localParticipant.on($.LocalTrackPublished,r=>R(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Ei.SetKey,r=>this.postKey(r)).on(Ei.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(r)}postKey(t){let{key:n,participantIdentity:r,keyIndex:i}=t;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(t,n){if(this.worker){const r={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,r){if(t.receiver){if(!r?.mimeType||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?Mc(r.mimeType):void 0)}}setupE2EESender(t,n){if(!(t instanceof to)||!n){n||Se.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,r,i){return R(this,void 0,void 0,function*(){if(this.worker){if(cp()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};t.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Ql in t&&i){const l={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(l);return}let o=t.writableStream,s=t.readableStream;if(!o||!s){const l=t.createEncodedStreams();t.writableStream=l.writable,o=l.writable,t.readableStream=l.readable,s=l.readable}const a={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[s,o])}t[Ql]=!0}})}handleSender(t,n,r){var i;if(!(Ql in t||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(cp()){Se.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,o)}else{Se.info("initialize encoded streams");const o=t.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s,[o.readable,o.writable])}t[Ql]=!0}}}var Ra;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(Ra||(Ra={}));class z3{constructor(){this.pendingTasks=new Map,this.taskMutex=new dn,this.nextTaskIndex=0}run(t){return R(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Ra.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Ra.RUNNING,yield t()}finally{n.status=Ra.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return R(this,void 0,void 0,function*(){return this.run(()=>R(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const V3=["syncState","trickle","offer","answer","simulate","leave"];function B3(e){const t=V3.indexOf(e.case)>=0;return Se.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var Ge;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(Ge||(Ge={}));class mg{get currentState(){return this.state}get isDisconnected(){return this.state===Ge.DISCONNECTING||this.state===Ge.DISCONNECTED}get isEstablishingConnection(){return this.state===Ge.CONNECTING||this.state===Ge.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Ge.DISCONNECTED,this.log=Se,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Fr((r=n.loggerName)!==null&&r!==void 0?r:Jn.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=t,this.requestQueue=new z3,this.queuedRequests=[],this.closingLock=new dn,this.connectionLock=new dn,this.state=Ge.DISCONNECTED}get logContext(){var t,n;return(n=(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:{}}join(t,n,r,i){return R(this,void 0,void 0,function*(){return this.state=Ge.CONNECTING,this.options=r,yield this.connect(t,n,r,i)})}reconnect(t,n,r,i){return R(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Ge.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(t,n,r,i){this.connectOptions=r,t=A3(t),t=t.replace(/\/$/,""),t+="/rtc";const o=N3(),s=W3(n,o,r);return new Promise((a,l)=>R(this,void 0,void 0,function*(){const c=yield this.connectionLock.lock();try{const u=()=>R(this,void 0,void 0,function*(){this.close(),clearTimeout(d),l(new Ue("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),l(new Ue("room connection has timed out (signal)"))},r.websocketTimeout);i?.aborted&&u(),i?.addEventListener("abort",u),this.log.debug("connecting to ".concat(t+s),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(t+s),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=h=>R(this,void 0,void 0,function*(){if(this.state!==Ge.CONNECTED){this.state=Ge.DISCONNECTED,clearTimeout(d);try{const p=yield fetch("http".concat(t.substring(2),"/validate").concat(s));if(p.status.toFixed(0).startsWith("4")){const v=yield p.text();l(new Ue(v,zt.NotAllowed,p.status))}else l(new Ue("Internal error",zt.InternalError,p.status))}catch{l(new Ue("server was not reachable",zt.ServerUnreachable))}return}this.handleWSError(h)}),this.ws.onmessage=h=>R(this,void 0,void 0,function*(){var p,v,g;let b;if(typeof h.data=="string"){const m=JSON.parse(h.data);b=uy.fromJson(m,{ignoreUnknownFields:!0})}else if(h.data instanceof ArrayBuffer)b=uy.fromBinary(new Uint8Array(h.data));else{this.log.error("could not decode websocket message: ".concat(typeof h.data),this.logContext);return}if(this.state!==Ge.CONNECTED){let m=!1;if(((p=b.message)===null||p===void 0?void 0:p.case)==="join"?(this.state=Ge.CONNECTED,i?.removeEventListener("abort",u),this.pingTimeoutDuration=b.message.value.pingTimeout,this.pingIntervalDuration=b.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(b.message.value)):this.state===Ge.RECONNECTING&&b.message.case!=="leave"?(this.state=Ge.CONNECTED,i?.removeEventListener("abort",u),this.startPingInterval(),((v=b.message)===null||v===void 0?void 0:v.case)==="reconnect"?a(b.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),a(void 0),m=!0)):this.isEstablishingConnection&&b.message.case==="leave"?l(new Ue("Received leave request while trying to (re)connect",zt.LeaveRequest)):r.reconnect||l(new Ue("did not receive join response, got ".concat((g=b.message)===null||g===void 0?void 0:g.case," instead"))),!m)return}this.signalLatency&&(yield hr(this.signalLatency)),this.handleSignalResponse(b)}),this.ws.onclose=h=>{this.isEstablishingConnection&&l(new Ue("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:h.reason,code:h.code,wasClean:h.wasClean,state:this.state})),this.handleOnClose(h.reason)}}finally{c()}}))}close(){return R(this,arguments,void 0,function(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const r=yield t.closingLock.lock();try{if(t.clearPingInterval(),n&&(t.state=Ge.DISCONNECTING),t.ws){t.ws.onmessage=null,t.ws.onopen=null,t.ws.onclose=null;const i=new Promise(o=>{t.ws?t.ws.onclose=()=>{o()}:o()});t.ws.readyState<t.ws.CLOSING&&(t.ws.close(),yield Promise.race([i,hr(250)])),t.ws=void 0}}finally{n&&(t.state=Ge.DISCONNECTED),r()}}()})}sendOffer(t){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:t.sdp})),this.sendRequest({case:"offer",value:vu(t)})}sendAnswer(t){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:t.sdp})),this.sendRequest({case:"answer",value:vu(t)})}sendIceCandidate(t,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:t})),this.sendRequest({case:"trickle",value:new sg({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new ag({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return R(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const a=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new MC({requestId:a,metadata:r,name:i,attributes:s})}),a}()})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new OC({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new LC({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:qe.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new jC({timestamp:qe.parse(Date.now()),rtt:qe.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(t,n){return this.sendRequest({case:"updateAudioTrack",value:new IC({trackSid:t,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new sd({reason:os.CLIENT_INITIATED,action:ss.DISCONNECT})})}sendRequest(t){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!i&&!B3(n)&&r.state===Ge.RECONNECTING){r.queuedRequests.push(()=>R(r,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(i||(yield r.requestQueue.flush()),r.signalLatency&&(yield hr(r.signalLatency)),!r.ws||r.ws.readyState!==r.ws.OPEN){r.log.error("cannot send signal request before connected, type: ".concat(n?.case),r.logContext);return}const s=new CM({message:n});try{r.useJSON?r.ws.send(s.toJsonString()):r.ws.send(s.toBinary())}catch(a){r.log.error("error sending signal message",Object.assign(Object.assign({},r.logContext),{error:a}))}}()})}handleSignalResponse(t){var n,r;const i=t.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const s=My(i.value);this.onAnswer&&this.onAnswer(s)}else if(i.case==="offer"){const s=My(i.value);this.onOffer&&this.onOffer(s)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):i.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(i.value):i.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return R(this,void 0,void 0,function*(){if(this.state===Ge.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(t),Object.assign(Object.assign({},this.logContext),{reason:t})),n&&n(t)})}handleWSError(t){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:t}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Rt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Rt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Rt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Rt.clearInterval(this.pingInterval)}}function My(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function vu(e){return new uo({sdp:e.sdp,type:e.type})}function W3(e,t,n){var r;const i=new URLSearchParams;return i.set("access_token",e),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Vr()?"reactnative":"js"),i.set("version",t.version),i.set("protocol",t.protocol.toString()),t.deviceModel&&i.set("device_model",t.deviceModel),t.os&&i.set("os",t.os),t.osVersion&&i.set("os_version",t.osVersion),t.browser&&i.set("browser",t.browser),t.browserVersion&&i.set("browser_version",t.browserVersion),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var nr={},_f={},Rf={exports:{}},Ny;function Tw(){if(Ny)return Rf.exports;Ny=1;var e=Rf.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Rf.exports}var Dy;function H3(){return Dy||(Dy=1,function(e){var t=function(a){return String(Number(a))===a?Number(a):a},n=function(a,l,c,u){if(u&&!c)l[u]=t(a[1]);else for(var d=0;d<c.length;d+=1)a[d+1]!=null&&(l[c[d]]=t(a[d+1]))},r=function(a,l,c){var u=a.name&&a.names;a.push&&!l[a.push]?l[a.push]=[]:u&&!l[a.name]&&(l[a.name]={});var d=a.push?{}:u?l[a.name]:l;n(c.match(a.reg),d,a.names,a.name),a.push&&l[a.push].push(d)},i=Tw(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(a){var l={},c=[],u=l;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var h=d[0],p=d.slice(2);h==="m"&&(c.push({rtp:[],fmtp:[]}),u=c[c.length-1]);for(var v=0;v<(i[h]||[]).length;v+=1){var g=i[h][v];if(g.reg.test(p))return r(g,u,p)}}),l.media=c,l};var s=function(a,l){var c=l.split(/=(.+)/,2);return c.length===2?a[c[0]]=t(c[1]):c.length===1&&l.length>1&&(a[c[0]]=void 0),a};e.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(a){return a.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(a){for(var l=[],c=a.split(" ").map(t),u=0;u<c.length;u+=3)l.push({component:c[u],ip:c[u+1],port:c[u+2]});return l},e.parseImageAttributes=function(a){return a.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(s,{})})},e.parseSimulcastStreamList=function(a){return a.split(";").map(function(l){return l.split(",").map(function(c){var u,d=!1;return c[0]!=="~"?u=t(c):(u=t(c.substring(1,c.length)),d=!0),{scid:u,paused:d}})})}}(_f)),_f}var If,Ly;function G3(){if(Ly)return If;Ly=1;var e=Tw(),t=/%[sdv%]/g,n=function(s){var a=1,l=arguments,c=l.length;return s.replace(t,function(u){if(a>=c)return u;var d=l[a];switch(a+=1,u){case"%%":return"%";case"%s":return String(d);case"%d":return Number(d);case"%v":return""}})},r=function(s,a,l){var c=a.format instanceof Function?a.format(a.push?l:l[a.name]):a.format,u=[s+"="+c];if(a.names)for(var d=0;d<a.names.length;d+=1){var h=a.names[d];a.name?u.push(l[a.name][h]):u.push(l[a.names[d]])}else u.push(l[a.name]);return n.apply(null,u)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return If=function(s,a){a=a||{},s.version==null&&(s.version=0),s.name==null&&(s.name=" "),s.media.forEach(function(d){d.payloads==null&&(d.payloads="")});var l=a.outerOrder||i,c=a.innerOrder||o,u=[];return l.forEach(function(d){e[d].forEach(function(h){h.name in s&&s[h.name]!=null?u.push(r(d,h,s)):h.push in s&&s[h.push]!=null&&s[h.push].forEach(function(p){u.push(r(d,h,p))})})}),s.media.forEach(function(d){u.push(r("m",e.m[0],d)),c.forEach(function(h){e[h].forEach(function(p){p.name in d&&d[p.name]!=null?u.push(r(h,p,d)):p.push in d&&d[p.push]!=null&&d[p.push].forEach(function(v){u.push(r(h,p,v))})})})}),u.join(`\r
`)+`\r
`},If}var Ay;function K3(){if(Ay)return nr;Ay=1;var e=H3(),t=G3();return nr.write=t,nr.parse=e.parse,nr.parseParams=e.parseParams,nr.parseFmtpConfig=e.parseFmtpConfig,nr.parsePayloads=e.parsePayloads,nr.parseRemoteCandidates=e.parseRemoteCandidates,nr.parseImageAttributes=e.parseImageAttributes,nr.parseSimulcastStreamList=e.parseSimulcastStreamList,nr}var oi=K3();const q3=.7,J3=20,cs={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Uy extends vr.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;super(),this.log=Se,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=fg(i=>R(this,void 0,void 0,function*(){this.emit(cs.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(i)i(o);else throw o}}),J3),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Fr((r=n.loggerName)!==null&&r!==void 0?r:Jn.PCTransport),this.loggerOptions=n,this.config=t,this._pc=this.createPC()}createPC(){const t=new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},t.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},t.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},t}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return R(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t){return R(this,void 0,void 0,function*(){var n;let r;if(t.type==="offer"){let{stereoMids:i,nackMids:o}=Y3(t);this.remoteStereoMids=i,this.remoteNackMids=o}else if(t.type==="answer"){const i=oi.parse((n=t.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(s=>{if(!s.transceiver||o.mid!=s.transceiver.mid)return!1;let a=0;if(o.rtp.some(c=>c.codec.toUpperCase()===s.codec.toUpperCase()?(a=c.payload,!0):!1),a===0)return!0;let l=!1;for(const c of o.fmtp)if(c.payload===a){c.config=c.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),s.maxbr>0&&(c.config+=";maxaveragebitrate=".concat(s.maxbr*1e3)),l=!0;break}return l||s.maxbr>0&&o.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(s.maxbr*1e3)}),!0})}),r=oi.write(i)}yield this.setMungedSDP(t,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(cs.NegotiationComplete),t.sdp&&oi.parse(t.sdp).media.forEach(o=>{o.type==="video"&&this.emit(cs.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(t){return R(this,void 0,void 0,function*(){var n;if(this.onOffer===void 0)return;if(t?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(t?.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(t);this.log.debug("original offer",Object.assign({sdp:r.sdp},this.logContext));const i=oi.parse((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"?jy(o,[],[]):o.type==="video"&&this.trackBitrates.some(s=>{if(!o.msid||!s.cid||!o.msid.includes(s.cid))return!1;let a=0;if(o.rtp.some(c=>c.codec.toUpperCase()===s.codec.toUpperCase()?(a=c.payload,!0):!1),a===0||(_a(s.codec)&&Q3(o),s.codec!=="av1"))return!0;const l=Math.round(s.maxbr*q3);for(const c of o.fmtp)if(c.payload===a){c.config.includes("x-google-start-bitrate")||(c.config+=";x-google-start-bitrate=".concat(l));break}return!0})}),yield this.setMungedSDP(r,oi.write(i)),this.onOffer(r)})}createAndSetAnswer(){return R(this,void 0,void 0,function*(){var t;const n=yield this.pc.createAnswer(),r=oi.parse((t=n.sdp)!==null&&t!==void 0?t:"");return r.media.forEach(i=>{i.type==="audio"&&jy(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,oi.write(r)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new vt("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new vt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return R(this,void 0,void 0,function*(){var t;if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const s=(t=r.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(t,n,r){return R(this,void 0,void 0,function*(){if(n){const i=t.sdp;t.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(o){this.log.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),t.sdp=i}}try{r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const s={error:o,sdp:t.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(t.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new up(o)}})}}function jy(e,t,n){let r=0;e.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&e.rtcpFb.push({payload:r,type:"nack"}),t.includes(e.mid)&&e.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function Q3(e){var t,n;let r=0;((t=e.ext)===null||t===void 0?void 0:t.some(o=>o.uri===xy?!0:(o.value>r&&(r=o.value),!1)))||(n=e.ext)===null||n===void 0||n.push({value:r+1,uri:xy})}function Y3(e){var t;const n=[],r=[],i=oi.parse((t=e.sdp)!==null&&t!==void 0?t:"");let o=0;return i.media.forEach(s=>{var a;s.type==="audio"&&(s.rtp.some(l=>l.codec==="opus"?(o=l.payload,!0):!1),!((a=s.rtcpFb)===null||a===void 0)&&a.some(l=>l.payload===o&&l.type==="nack")&&r.push(s.mid),s.fmtp.some(l=>l.payload===o?(l.config.includes("sprop-stereo=1")&&n.push(s.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const yp="vp8",X3={audioPreset:dp.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:hg.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:yp,backupCodec:!0},Ew={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},xw={resolution:nl.h720.resolution},Z3={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new qM,disconnectOnPageLeave:!0,webAudioMix:!1},gg={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var nt;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(nt||(nt={}));class eN{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n,r){var i;this.peerConnectionTimeout=gg.peerConnectionTimeout,this.log=Se,this.updateState=()=>{var o;const s=this.state,a=this.requiredTransports.map(l=>l.getConnectionState());a.every(l=>l==="connected")?this.state=nt.CONNECTED:a.some(l=>l==="failed")?this.state=nt.FAILED:a.some(l=>l==="connecting")?this.state=nt.CONNECTING:a.every(l=>l==="closed")?this.state=nt.CLOSED:a.some(l=>l==="closed")?this.state=nt.CLOSING:a.every(l=>l==="new")&&(this.state=nt.NEW),s!==this.state&&(this.log.debug("pc state change: from ".concat(nt[s]," to ").concat(nt[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Fr((i=r.loggerName)!==null&&i!==void 0?i:Jn.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new Uy(t,r),this.subscriber=new Uy(t,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,o,Wn.PUBLISHER)},this.subscriber.onIceCandidate=o=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,o,Wn.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var s;(s=this.onDataChannel)===null||s===void 0||s.call(this,o)},this.subscriber.onTrack=o=>{var s;(s=this.onTrack)===null||s===void 0||s.call(this,o)},this.publisher.onOffer=o=>{var s;(s=this.onPublisherOffer)===null||s===void 0||s.call(this,o)},this.state=nt.NEW,this.connectionLock=new dn,this.remoteOfferLock=new dn}get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(t))}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}requireSubscriber(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t){return this.publisher.setRemoteDescription(t)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return R(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const t=this.publisher;for(const n of t.getSenders())try{t.canRemoveTrack()&&t.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return R(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return R(this,void 0,void 0,function*(){n===Wn.PUBLISHER?yield this.publisher.addIceCandidate(t):yield this.subscriber.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t){return R(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type,sdp:t.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const n=yield this.remoteOfferLock.lock();try{return yield this.subscriber.setRemoteDescription(t),yield this.subscriber.createAndSetAnswer()}finally{n()}})}updateConfiguration(t,n){this.publisher.setConfiguration(t),this.subscriber.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){return R(this,void 0,void 0,function*(){var r;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,t,n)))}finally{i()}})}negotiate(t){return R(this,void 0,void 0,function*(){return new Promise((n,r)=>R(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r("negotiation aborted")};t.signal.addEventListener("abort",o),this.publisher.once(cs.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(cs.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===Wn.PUBLISHER?this.publisher.getConnectedAddress():t===Wn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&t.push(this.subscriber),t}ensureTransportConnected(t,n){return R(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(r.getConnectionState()!=="connected")return new Promise((l,c)=>R(o,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),Rt.clearTimeout(d),c(new Ue("room connection has been cancelled",zt.Cancelled))};i?.signal.aborted&&u(),i?.signal.addEventListener("abort",u);const d=Rt.setTimeout(()=>{i?.signal.removeEventListener("abort",u),c(new Ue("could not establish pc connection"))},s);for(;this.state!==nt.CONNECTED;)if(yield hr(50),i?.signal.aborted){c(new Ue("room connection has been cancelled",zt.Cancelled));return}Rt.clearTimeout(d),i?.signal.removeEventListener("abort",u),l()}))}()})}}const vg=2e3;function cd(e,t){if(!t)return 0;let n,r;return"bytesReceived"in e?(n=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,r=t.bytesSent),n===void 0||r===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-r)*8*1e3/(e.timestamp-t.timestamp)}class Pt extends to{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(t,L.Kind.Audio,n,r,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>R(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}s&&this.prevStats&&(this._currentBitrate=cd(s,this.prevStats)),this.prevStats=s}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(W.AudioTrackFeatureUpdate,this,sr.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(W.AudioTrackFeatureUpdate,this,sr.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}setDeviceId(t){return R(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===Dr(t)?!0:(this._constraints.deviceId=t,this.isMuted||(yield this.restartTrack()),this.isMuted||Dr(t)===this._mediaStreamTrack.getSettings().deviceId)})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===L.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Dr(this._constraints.deviceId);return this.source===L.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return R(this,void 0,void 0,function*(){let n;if(t){const r=ld({audio:t});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return R(this,void 0,void 0,function*(){const r=yield n.restart.call(this,t);return this.checkForSilence(),r})}startMonitor(){hn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},vg)))}setProcessor(t){return R(this,void 0,void 0,function*(){var n;const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(t.name),this.logContext),yield t.init(i),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(W.TrackProcessorUpdate,this.processor)}finally{r()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){return R(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return R(this,void 0,void 0,function*(){const t=yield b3(this);return t&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(W.AudioSilenceDetected)),t})}}function Pw(e,t,n){switch(e.kind){case"audio":return new Pt(e,t,!1,void 0,n);case"video":return new Ut(e,t,!1,n);default:throw new ar("unsupported track type: ".concat(e.kind))}}const tN=Object.values(nl),nN=Object.values(fp),rN=Object.values(hg),iN=[nl.h180,nl.h360],oN=[fp.h180,fp.h360],sN=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map(n=>{var r,i;return new De(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=e.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,e.encoding.priority)}),bp=["q","h","f"];function kp(e,t,n,r){var i,o;let s=r?.videoEncoding;e&&(s=r?.screenShareEncoding);const a=r?.simulcast,l=r?.scalabilityMode,c=r?.videoCodec;if(!s&&!a&&!l||!t||!n)return[{}];s||(s=lN(e,t,n,c),Se.debug("using video encoding",s));const u=new De(t,n,s.maxBitrate,s.maxFramerate,s.priority);if(l&&_a(c)){const p=new _w(l),v=[];if(p.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));const g=zr();if(fo()||Vr()||g?.name==="Chrome"&&Es(g?.version,"113")<0){const b=p.suffix=="h"?2:3;for(let m=0;m<p.spatial;m+=1)v.push({rid:bp[2-m],maxBitrate:s.maxBitrate/Math.pow(b,m),maxFramerate:u.encoding.maxFramerate});v[0].scalabilityMode=l}else v.push({maxBitrate:s.maxBitrate,maxFramerate:u.encoding.maxFramerate,scalabilityMode:l});return u.encoding.priority&&(v[0].priority=u.encoding.priority,v[0].networkPriority=u.encoding.priority),Se.debug("using svc encoding",{encodings:v}),v}if(!a)return[s];let d=[];e?d=(i=Fy(r?.screenShareSimulcastLayers))!==null&&i!==void 0?i:$y(e,u):d=(o=Fy(r?.videoSimulcastLayers))!==null&&o!==void 0?o:$y(e,u);let h;if(d.length>0){const p=d[0];d.length>1&&([,h]=d);const v=Math.max(t,n);if(v>=960&&h)return Of(t,n,[p,h,u]);if(v>=480)return Of(t,n,[p,u])}return Of(t,n,[u])}function aN(e,t,n){var r,i,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&Se.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const a=e.mediaStreamTrack.getSettings(),l=(r=a.width)!==null&&r!==void 0?r:(i=e.dimensions)===null||i===void 0?void 0:i.width,c=(o=a.height)!==null&&o!==void 0?o:(s=e.dimensions)===null||s===void 0?void 0:s.height;return kp(e.source===L.Source.ScreenShare,l,c,n)}function lN(e,t,n,r){const i=cN(e,t,n);let{encoding:o}=i[0];const s=Math.max(t,n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o=l.encoding,l.width>=s)break}if(r)switch(r){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function cN(e,t,n){if(e)return rN;const r=t>n?t/n:n/t;return Math.abs(r-16/9)<Math.abs(r-4/3)?tN:nN}function $y(e,t){if(e)return sN(t);const{width:n,height:r}=t,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?iN:oN}function Of(e,t,n){const r=[];if(n.forEach((i,o)=>{if(o>=bp.length)return;const s=Math.min(e,t),l={rid:bp[o],scaleResolutionDownBy:Math.max(1,s/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(l.maxFramerate=i.encoding.maxFramerate);const c=Ts()||o===0;i.encoding.priority&&c&&(l.priority=i.encoding.priority,l.networkPriority=i.encoding.priority),r.push(l)}),Vr()&&Cw()==="ios"){let i;r.forEach(s=>{i?s.maxFramerate&&s.maxFramerate>i&&(i=s.maxFramerate):i=s.maxFramerate});let o=!0;r.forEach(s=>{var a;s.maxFramerate!=i&&(o&&(o=!1,Se.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Se.info('Setting framerate of encoding "'.concat((a=s.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),s.maxFramerate=i)})}return r}function Fy(e){if(e)return e.sort((t,n)=>{const{encoding:r}=t,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class _w{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}function uN(e){return e.source===L.Source.ScreenShare||e.constraints.height&&Dr(e.constraints.height)>=1080?"maintain-resolution":"balanced"}const dN=5e3;class Ut extends to{get sender(){return this._sender}set sender(t){this._sender=t,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(t,L.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>R(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const s=new Map(o.map(a=>[a.rid,a]));if(this.prevStats){let a=0;s.forEach((l,c)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(c);a+=cd(l,d)}),this._currentBitrate=a}this.prevStats=s}),this.senderLock=new dn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!hn())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},vg))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return R(this,void 0,void 0,function*(){var n,r,i,o,s;yield t.pauseUpstream.call(this);try{for(var a=!0,l=Uo(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0)o=c.value,a=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return R(this,void 0,void 0,function*(){var n,r,i,o,s;yield t.resumeUpstream.call(this);try{for(var a=!0,l=Uo(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0){o=c.value,a=!1;const u=o;yield(s=u.sender)===null||s===void 0?void 0:s.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===L.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield t.mute.call(this),this)}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return R(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===L.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield t.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){return R(this,void 0,void 0,function*(){var t;if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,framesPerSecond:i.framesPerSecond,framesSent:i.framesSent,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationDurations:i.qualityLimitationDurations,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,targetBitrate:i.targetBitrate,timestamp:i.timestamp},a=r.get(i.remoteId);a&&(s.jitter=a.jitter,s.packetsLost=a.packetsLost,s.roundTripTime=a.roundTripTime),n.push(s)}}),n.sort((i,o)=>{var s,a;return((s=o.frameWidth)!==null&&s!==void 0?s:0)-((a=i.frameWidth)!==null&&a!==void 0?a:0)}),n})}setPublishingQuality(t){const n=[];for(let r=Pn.LOW;r<=Pn.HIGH;r+=1)n.push(new cg({quality:r,enabled:r<=t}));this.log.debug("setting publishing quality. max quality ".concat(t),this.logContext),this.setPublishingLayers(n)}setDeviceId(t){return R(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===Dr(t)?!0:(this._constraints.deviceId=t,this.isMuted||(yield this.restartTrack()),this.isMuted||Dr(t)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(t){return R(this,void 0,void 0,function*(){var n,r,i,o;let s;if(t){const u=ld({video:t});typeof u.video!="boolean"&&(s=u.video)}yield this.restart(s);try{for(var a=!0,l=Uo(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0){o=c.value,a=!1;const u=o;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}setProcessor(t){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return R(this,arguments,void 0,function(r){var i=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var s,a,l,c,u,d;if(yield n.setProcessor.call(i,r,o),!((u=i.processor)===null||u===void 0)&&u.processedTrack)try{for(var h=!0,p=Uo(i.simulcastCodecs.values()),v;v=yield p.next(),s=v.done,!s;h=!0)c=v.value,h=!1,yield(d=c.sender)===null||d===void 0?void 0:d.replaceTrack(i.processor.processedTrack)}catch(g){a={error:g}}finally{try{!h&&!s&&(l=p.return)&&(yield l.call(p))}finally{if(a)throw a.error}}}()})}setDegradationPreference(t){return R(this,void 0,void 0,function*(){if(this.degradationPreference=t,this.sender)try{this.log.debug("setting degradationPreference to ".concat(t),this.logContext);const n=this.sender.getParameters();n.degradationPreference=t,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t)){this.log.error("".concat(t," already added, skipping adding simulcast codec"),this.logContext);return}const r={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,r),r}setSimulcastTrackSender(t,n){const r=this.simulcastCodecs.get(t);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},dN))}setPublishingCodecs(t){return R(this,void 0,void 0,function*(){var n,r,i,o,s,a,l;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:t,currentCodec:this.codec})),!this.codec&&t.length>0)return yield this.setPublishingLayers(t[0].qualities),[];this.subscribedCodecs=t;const c=[];try{for(n=!0,r=Uo(t);i=yield r.next(),o=i.done,!o;n=!0){l=i.value,n=!1;const u=l;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){c.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield zy(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){s={error:u}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return c})}setPublishingLayers(t){return R(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:t})),!(!this.sender||!this.encodings)&&(yield zy(this.sender,this.encodings,t,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return R(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),kw()&&this.isInBackground&&this.source===L.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function zy(e,t,n,r,i,o){return R(this,void 0,void 0,function*(){const s=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:e,qualities:n,senderEncodings:t}));try{const a=e.getParameters(),{encodings:l}=a;if(!l)return;if(l.length!==t.length){i.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:l,senderEncodings:t}));return}let c=!1;!1&&l[0].scalabilityMode||l.forEach((d,h)=>{var p;let v=(p=d.rid)!==null&&p!==void 0?p:"";v===""&&(v="q");const g=Rw(v),b=n.find(m=>m.quality===g);b&&d.active!==b.enabled&&(c=!0,d.active=b.enabled,i.debug("setting layer ".concat(b.quality," to ").concat(d.active?"enabled":"disabled"),o),Ts()&&(b.enabled?(d.scaleResolutionDownBy=t[h].scaleResolutionDownBy,d.maxBitrate=t[h].maxBitrate,d.maxFrameRate=t[h].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),c&&(a.encodings=l,i.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:a.encodings})),yield e.setParameters(a))}finally{s()}})}function Rw(e){switch(e){case"f":return Pn.HIGH;case"h":return Pn.MEDIUM;case"q":return Pn.LOW;default:return Pn.HIGH}}function Vy(e,t,n,r){if(!n)return[new eo({quality:Pn.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new _w(i),s=[],a=o.suffix=="h"?1.5:2,l=o.suffix=="h"?2:3;for(let c=0;c<o.spatial;c+=1)s.push(new eo({quality:Math.min(Pn.HIGH,o.spatial-1)-c,width:Math.ceil(e/Math.pow(a,c)),height:Math.ceil(t/Math.pow(a,c)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(l,c)):0,ssrc:0}));return s}return n.map(i=>{var o,s,a;const l=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let c=Rw((s=i.rid)!==null&&s!==void 0?s:"");return new eo({quality:c,width:Math.ceil(e/l),height:Math.ceil(t/l),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}const By="_lossy",Wy="_reliable",fN=2*1e3,Mf="leave-reconnect";var Un;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(Un||(Un={}));class hN extends vr.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(t){var n;super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=gg.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=Un.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Se,this.handleDataChannel=r=>R(this,[r],void 0,function(i){var o=this;let{channel:s}=i;return function*(){if(s){if(s.label===Wy)o.reliableDCSub=s;else if(s.label===By)o.lossyDCSub=s;else return;o.log.debug("on data channel ".concat(s.id,", ").concat(s.label),o.logContext),s.onmessage=o.handleDataMessage}}()}),this.handleDataMessage=r=>R(this,void 0,void 0,function*(){var i,o;const s=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const l=fa.fromBinary(new Uint8Array(a));((i=l.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(q.ActiveSpeakersUpdate,l.value.value.speakers):(((o=l.value)===null||o===void 0?void 0:o.case)==="user"&&mN(l,l.value.value),this.emit(q.DataPacketReceived,l))}finally{s()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?yt.LOSSY:yt.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=l=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(l,"ms. giving up"),this.logContext),this.emit(q.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(a===null){o(s);return}r===Mf&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Rt.setTimeout(()=>this.attemptReconnect(i).finally(()=>this.reconnectTimeout=void 0),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Un.Connected&&r();const o=()=>{this.off(q.Disconnected,s),r()},s=()=>{this.off(q.Restarted,o),i()};this.once(q.Restarted,o),this.once(q.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(q.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Ge.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Ro.RR_SIGNAL_DISCONNECTED))},this.log=Fr((n=t.loggerName)!==null&&n!==void 0?n:Jn.Engine),this.loggerOptions={loggerName:t.loggerName,loggerContextCb:()=>this.logContext},this.client=new mg(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new dn,this.dataProcessLock=new dn,this.dcBufferStatus=new Map([[yt.LOSSY,!0],[yt.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(q.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(q.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(q.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(q.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(q.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(q.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(q.StreamStateChanged,r),this.client.onRequestResponse=r=>this.emit(q.SignalRequestResponse,r)}get logContext(){var t,n,r,i,o,s,a,l;return{room:(n=(t=this.latestJoinResponse)===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.name,roomID:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,participant:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity,pID:(l=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||l===void 0?void 0:l.sid}}join(t,n,r,i){return R(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(t,n,r,i);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),(!this.subscriberPrimary||o.fastPublish)&&this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof Ue&&o.reason===zt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,r,i);throw o}})}close(){return R(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.emit(q.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){return R(this,void 0,void 0,function*(){var t;yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return R(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new ar("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],r(new Ue("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[t.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){return R(this,void 0,void 0,function*(){var t;return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){return R(this,void 0,void 0,function*(){var n,r;if(this.pcManager&&this.pcManager.currentState!==nt.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const i=this.makeRTCConfiguration(t);this.pcManager=new eN(i,t.subscriberPrimary,this.loggerOptions),this.emit(q.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(o,s)=>{this.client.sendIceCandidate(o,s)},this.pcManager.onPublisherOffer=o=>{this.client.sendOffer(o)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(o,s,a)=>R(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(o),this.logContext),["closed","disconnected","failed"].includes(s)&&(this.publisherConnectionPromise=void 0),o===nt.CONNECTED){const u=this.pcState===Un.New;this.pcState=Un.Connected,u&&this.emit(q.Connected,t)}else o===nt.FAILED&&this.pcState===Un.Connected&&(this.pcState=Un.Disconnected,this.handleDisconnect("peerconnection failed",a==="failed"?Ro.RR_SUBSCRIBER_FAILED:Ro.RR_PUBLISHER_FAILED));const l=this.client.isDisconnected||this.client.currentState===Ge.RECONNECTING,c=[nt.FAILED,nt.CLOSING,nt.CLOSED].includes(o);l&&c&&!this._isClosed&&this.emit(q.Offline)}),this.pcManager.onTrack=o=>{this.emit(q.MediaTrackAdded,o.track,o.streams[0],o.receiver)},pN((r=t.serverInfo)===null||r===void 0?void 0:r.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=t=>R(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:t.type})),yield this.pcManager.setPublisherAnswer(t))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:t,target:n})),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=t=>R(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(t);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=t=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:t.cid,track:(n=t.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[t.cid]){this.log.error("missing track resolver for ".concat(t.cid),Object.assign(Object.assign({},this.logContext),{cid:t.cid}));return}const{resolve:r}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],r(t.track)},this.client.onLocalTrackUnpublished=t=>{this.emit(q.LocalTrackUnpublished,t)},this.client.onLocalTrackSubscribed=t=>{this.emit(q.LocalTrackSubscribed,t)},this.client.onTokenRefresh=t=>{this.token=t},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(q.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(q.SubscribedQualityUpdate,t)},this.client.onClose=()=>{this.handleDisconnect("signal",Ro.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:t?.reason})),t.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(t.regions)),t.action){case ss.DISCONNECT:this.emit(q.Disconnected,t?.reason),this.close();break;case ss.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Mf);break;case ss.RESUME:this.handleDisconnect(Mf)}}}makeRTCConfiguration(t){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),t.iceServers&&!r.iceServers){const i=[];t.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),i.push(s)}),r.iceServers=i}return t.clientConfiguration&&t.clientConfiguration.forceRelay===Za.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(By,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Wy,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(t,n,r){return R(this,void 0,void 0,function*(){if(pp())return yield this.createTransceiverRTCRtpSender(t,n,r);if(mp())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new vt("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,r,i){return R(this,void 0,void 0,function*(){if(pp())return this.createSimulcastTransceiverSender(t,n,r,i);if(mp())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(t.mediaStreamTrack);throw new vt("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,r){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new vt("publisher is closed");const i=[];t.mediaStream&&i.push(t.mediaStream),t instanceof Ut&&(t.codec=n.videoCodec);const o={direction:"sendonly",streams:i};return r&&(o.sendEncodings=r),(yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(t,n,r,i){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new vt("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return t.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(t){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new vt("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){return R(this,void 0,void 0,function*(){var n,r,i;if(!this._isClosed){if(this.attemptingReconnect){Se.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Za.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:nt.NEW)===nt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof vt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof Io||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",Ro.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(q.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(t){return R(this,void 0,void 0,function*(){var n,r,i;try{if(!this.url||!this.token)throw new vt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(q.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Io;o=yield this.join(t??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof Ue&&s.reason===zt.NotAllowed?new vt("could not reconnect, token might be expired"):new Io}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(q.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Ge.CONNECTED)throw new Io("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(q.Restarted)}catch(o){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(t){return R(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new vt("could not reconnect, url or token not saved");if(!this.pcManager)throw new vt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(q.Resuming);let r;try{this.setupSignalClientCallbacks(),r=yield this.client.reconnect(this.url,this.token,this.participantSid,t)}catch(i){let o="";throw i instanceof Error&&(o=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof Ue&&i.reason===zt.NotAllowed?new vt("could not reconnect, token might be expired"):i instanceof Ue&&i.reason===zt.LeaveRequest?i:new Io(o)}if(this.emit(q.SignalResumed),r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Ge.CONNECTED)throw new Io("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(q.Resumed)})}waitForPCInitialConnection(t,n){return R(this,void 0,void 0,function*(){if(!this.pcManager)throw new vt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return R(this,void 0,void 0,function*(){this.pcState=Un.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield hr(fN),!this.pcManager)throw new vt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Un.Connected}catch(t){throw this.pcState=Un.Disconnected,new Ue("could not establish PC connection, ".concat(t.message))}})}sendDataPacket(t,n){return R(this,void 0,void 0,function*(){const r=t.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(t){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var o;if(!r.pcManager)throw new vt("PC manager is closed");const s=i?r.pcManager.subscriber:r.pcManager.publisher,a=i?"Subscriber":"Publisher";if(!s)throw new Ue("".concat(a," connection not set"));let l=!1;!i&&!r.dataChannelForKind(n,i)&&(r.createDataChannels(),l=!0),!l&&!i&&!r.pcManager.publisher.isICEConnected&&r.pcManager.publisher.getICEConnectionState()!=="checking"&&(l=!0),l&&r.negotiate();const c=r.dataChannelForKind(n,i);if(c?.readyState==="open")return;const u=new Date().getTime()+r.peerConnectionTimeout;for(;new Date().getTime()<u;){if(s.isICEConnected&&((o=r.dataChannelForKind(n,i))===null||o===void 0?void 0:o.readyState)==="open")return;yield hr(50)}throw new Ue("could not establish ".concat(a," connection, state: ").concat(s.getICEConnectionState()))}()})}ensurePublisherConnected(t){return R(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(t,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==nt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return R(this,void 0,void 0,function*(){return new Promise((t,n)=>R(this,void 0,void 0,function*(){if(!this.pcManager){n(new up("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(q.Closing,i),this.pcManager.publisher.once(cs.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(a=>{const l=a.codec.toLowerCase();L3(l)&&s.set(a.payload,l)}),this.emit(q.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),t()}catch(o){o instanceof up&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Ro.RR_UNKNOWN),n(o)}finally{this.off(q.Closing,i)}}))})}dataChannelForKind(t,n){if(n){if(t===yt.LOSSY)return this.lossyDCSub;if(t===yt.RELIABLE)return this.reliableDCSub}else{if(t===yt.LOSSY)return this.lossyDC;if(t===yt.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,l=new Array,c=new Array;t.forEach(u=>{u.isDesired!==a&&l.push(u.trackSid),u.isEnabled||c.push(u.trackSid)}),this.client.sendSyncState(new AC({answer:o?vu({sdp:o.sdp,type:o.type}):void 0,offer:s?vu({sdp:s.sdp,type:s.type}):void 0,subscription:new od({trackSids:l,subscribe:!a,participantTracks:[]}),publishTracks:S3(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:c}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(r,i)=>{r?.id!==void 0&&r.id!==null&&t.push(new UC({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(yt.LOSSY),Wn.PUBLISHER),n(this.dataChannelForKind(yt.RELIABLE),Wn.PUBLISHER),n(this.dataChannelForKind(yt.LOSSY,!0),Wn.SUBSCRIBER),n(this.dataChannelForKind(yt.RELIABLE,!0),Wn.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&Rt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){hn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){hn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Io extends Error{}function pN(e){return e!==void 0&&e>13}function mN(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const r=e.destinationIdentities.length!==0?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=r,t.destinationIdentities=r}class Hy{constructor(t,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return vp(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(t){return R(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(t));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),Se.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(t){return R(this,void 0,void 0,function*(){const n=yield fetch("".concat(gN(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new Ue("Could not fetch region settings: ".concat(n.statusText),n.status===401?zt.NotAllowed:void 0,n.status)})}setServerReportedRegions(t){this.regionSettings=t,this.lastUpdateAt=Date.now()}}function gN(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class Iw extends L{constructor(t,n,r,i,o){super(t,r,o),this.sid=n,this.receiver=i}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?W.Muted:W.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=r=>{r.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(W.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return R(this,void 0,void 0,function*(){var t;return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(t){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=t:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),vg)),C3()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const t=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>t());const r=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(r){const{timestamp:i,rtpTimestamp:o}=r;o&&this.rtpTimestamp!==o&&(this.emit(W.TimeSyncUpdate,{timestamp:i,rtpTimestamp:o}),this.rtpTimestamp=o)}};t()}}class us extends Iw{constructor(t,n,r,i,o,s){super(t,n,L.Kind.Audio,r,s),this.monitorReceiver=()=>R(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=cd(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(t){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):r.volume=t;Vr()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(Vr())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return R(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(gp(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&gp(t)&&t.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=t.createGain(),r.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(W.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(W.AudioPlaybackFailed,i)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return R(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Nf=100;class Ia extends Iw{constructor(t,n,r,i,o){super(t,n,L.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>R(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=cd(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=fg(()=>{this.updateDimensions()},Nf),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?ls(this._mediaStreamTrack,n):Xo(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new vN(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(t){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===t);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return R(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,r="",i=new Map;return t.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(r=>r.element===t);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return R(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var t,n;const r=this.elementInfos.reduce((a,l)=>Math.max(a,l.visibilityChangedAt||0),0),i=!((n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(a=>a.pictureInPicture),s=this.elementInfos.some(a=>a.visible)&&!i||o;if(this.lastVisible!==s){if(!s&&Date.now()-r<Nf){Rt.setTimeout(()=>{this.updateVisibility()},Nf);return}this.lastVisible=s,this.emit(W.VisibilityChanged,s,this)}}updateDimensions(){var t,n;let r=0,i=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const a=s.width()*o,l=s.height()*o;a+l>r+i&&(r=a,i=l)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(W.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?Py():n||(Py()>2?2:1)}}class vN{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:s}=r;o===this.element&&(this.isIntersecting=s,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=t,this.isIntersecting=n??Gy(t),this.isPiP=hn()&&document.pictureInPictureElement===t,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=Gy(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var t;(t=this.handleResize)===null||t===void 0||t.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,Ry().observe(this.element),_y().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var t,n;(t=Ry())===null||t===void 0||t.unobserve(this.element),(n=_y())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function Gy(e){let t=e.offsetTop,n=e.offsetLeft;const r=e.offsetWidth,i=e.offsetHeight,{hidden:o}=e,{opacity:s,display:a}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+i>window.pageYOffset&&n+r>window.pageXOffset&&!o&&(s!==""?parseFloat(s)>0:!0)&&a!=="none"}class xr extends vr.EventEmitter{constructor(t,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=Cn.NONE,this.log=Se,this.handleMuted=()=>{this.emit(W.Muted)},this.handleUnmuted=()=>{this.emit(W.Unmuted)},this.log=Fr((o=i?.loggerName)!==null&&o!==void 0?o:Jn.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=r,this.source=L.Source.Unknown}setTrack(t){this.track&&(this.track.off(W.Muted,this.handleMuted),this.track.off(W.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(W.Muted,this.handleMuted),t.on(W.Unmuted,this.handleUnmuted))}get logContext(){var t;return Object.assign(Object.assign({},(t=this.loggerContextCb)===null||t===void 0?void 0:t.call(this)),Ae(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Cn.NONE}get audioTrack(){if(this.track instanceof Pt||this.track instanceof us)return this.track}get videoTrack(){if(this.track instanceof Ut||this.track instanceof Ia)return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=L.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===L.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:t}))}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"}(e.PermissionStatus||(e.PermissionStatus={}))})(xr||(xr={}));class rl extends xr{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(W.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(t){this.track&&this.track.off(W.Ended,this.handleTrackEnded),super.setTrack(t),t&&t.on(W.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){return R(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){return R(this,void 0,void 0,function*(){var t;return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){return R(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){return R(this,void 0,void 0,function*(){var t;yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}getTrackFeatures(){var t;if(this.track instanceof Pt){const n=this.track.mediaStreamTrack.getSettings(),r=new Set;return n.autoGainControl&&r.add(sr.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&r.add(sr.TF_ECHO_CANCELLATION),n.noiseSuppression&&r.add(sr.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&r.add(sr.TF_STEREO),!((t=this.options)===null||t===void 0)&&t.dtx||r.add(sr.TF_NO_DTX),this.track.enhancedNoiseCancellation&&r.add(sr.TF_ENHANCED_NOISE_CANCELLATION),Array.from(r.values())}else return[]}}function Ow(e){let t,n;return typeof e.audio=="object"&&e.audio.processor&&(t=e.audio.processor),typeof e.video=="object"&&e.video.processor&&(n=e.video.processor),{audioProcessor:t,videoProcessor:n}}function Mw(e){return R(this,void 0,void 0,function*(){var t,n;e??(e={}),(t=e.audio)!==null&&t!==void 0||(e.audio=!0),(n=e.video)!==null&&n!==void 0||(e.video=!0);const{audioProcessor:r,videoProcessor:i}=Ow(e),o=bw(e,Ew,xw),s=ld(o),a=navigator.mediaDevices.getUserMedia(s);e.audio&&(_t.userMediaPromiseMap.set("audioinput",a),a.catch(()=>_t.userMediaPromiseMap.delete("audioinput"))),e.video&&(_t.userMediaPromiseMap.set("videoinput",a),a.catch(()=>_t.userMediaPromiseMap.delete("videoinput")));const l=yield a;return Promise.all(l.getTracks().map(c=>R(this,void 0,void 0,function*(){const u=c.kind==="audio";u?o.audio:o.video;let d;const h=u?s.audio:s.video;typeof h!="boolean"&&(d=h),d?d.deviceId=c.getSettings().deviceId:d={deviceId:c.getSettings().deviceId};const p=Pw(c,d);return p.kind===L.Kind.Video?p.source=L.Source.Camera:p.kind===L.Kind.Audio&&(p.source=L.Source.Microphone),p.mediaStream=l,p instanceof Pt&&r?yield p.setProcessor(r):p instanceof Ut&&i&&(yield p.setProcessor(i)),p})))})}function yN(e){return R(this,void 0,void 0,function*(){return(yield Mw({audio:!1,video:e}))[0]})}function bN(e){return R(this,void 0,void 0,function*(){return(yield Mw({audio:e,video:!1}))[0]})}var Tn;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})(Tn||(Tn={}));function kN(e){switch(e){case da.EXCELLENT:return Tn.Excellent;case da.GOOD:return Tn.Good;case da.POOR:return Tn.Poor;case da.LOST:return Tn.Lost;default:return Tn.Unknown}}class Nw extends vr.EventEmitter{get logContext(){var t,n;return Object.assign({},(n=(t=this.loggerOptions)===null||t===void 0?void 0:t.loggerContextCb)===null||n===void 0?void 0:n.call(t))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(t=>t.isEncrypted)}get isAgent(){var t;return((t=this.permissions)===null||t===void 0?void 0:t.agent)||this.kind===gu.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(t,n,r,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:gu.STANDARD;var a;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Tn.Unknown,this.log=Se,this.log=Fr((a=o?.loggerName)!==null&&a!==void 0?a:Jn.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=r,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=s,this._attributes={}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(t){for(const[,n]of this.trackPublications)if(n.source===t)return n}getTrackPublicationByName(t){for(const[,n]of this.trackPublications)if(n.trackName===t)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrackPublication(L.Source.Camera);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrackPublication(L.Source.Microphone);return!(!((t=n?.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrackPublication(L.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),this._setAttributes(t.attributes),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:t})),!0)}_setMetadata(t){const n=this.metadata!==t,r=this.metadata;this.metadata=t,n&&this.emit($.ParticipantMetadataChanged,r)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit($.ParticipantNameChanged,t)}_setAttributes(t){const n=w3(this.attributes,t);this._attributes=t,Object.keys(n).length>0&&this.emit($.AttributesChanged,n)}setPermissions(t){var n,r,i,o,s,a;const l=this.permissions,c=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||t.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||t.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||t.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((u,d)=>{var h;return u!==((h=this.permissions)===null||h===void 0?void 0:h.canPublishSources[d])})||t.canSubscribeMetrics!==((a=this.permissions)===null||a===void 0?void 0:a.canSubscribeMetrics);return this.permissions=t,c&&this.emit($.ParticipantPermissionsChanged,l),c}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit($.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=kN(t),n!==this._connectionQuality&&this.emit($.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(t){this.audioContext=t,this.audioTrackPublications.forEach(n=>(n.track instanceof us||n.track instanceof Pt)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(W.Muted,()=>{this.emit($.TrackMuted,t)}),t.on(W.Unmuted,()=>{this.emit($.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.trackPublications.set(t.trackSid,t),t.kind){case L.Kind.Audio:this.audioTrackPublications.set(t.trackSid,t);break;case L.Kind.Video:this.videoTrackPublications.set(t.trackSid,t);break}}}function SN(e){var t,n,r;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new DC({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=e.allowAll)!==null&&r!==void 0?r:!1,trackSids:e.allowedTrackSids||[]})}class Sp extends Nw{constructor(t,n,r,i){super(t,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Cn.NONE,this.enabledPublishVideoCodecs=[],this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new ww)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=o=>{const{requestId:s,reason:a,message:l}=o,c=this.pendingSignalRequests.get(s);c&&(a!==$C.OK&&c.reject(new wy(l,a)),this.pendingSignalRequests.delete(s))},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>SN(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Ae(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Ae(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Ae(o))),this.onTrackMuted(o,o.isMuted)},this.onTrackFeatureUpdate=o=>{const s=this.audioTrackPublications.get(o.sid);if(!s){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(o.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(s.trackSid,s.getTrackFeatures())},this.handleSubscribedQualityUpdate=o=>R(this,void 0,void 0,function*(){var s,a,l,c,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const h=this.videoTrackPublications.get(o.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!h.videoTrack)return;const b=yield h.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var p=!0,v=Uo(b),g;g=yield v.next(),s=g.done,!s;p=!0){c=g.value,p=!1;const m=c;g3(m)&&(this.log.debug("publish ".concat(m," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Ae(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,m,h.options))}}catch(m){a={error:m}}finally{try{!p&&!s&&(l=v.return)&&(yield l.call(v))}finally{if(a)throw a.error}}}else o.subscribedQualities.length>0&&(yield(d=h.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.trackPublications.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>R(this,void 0,void 0,function*(){if(o.source===L.Source.ScreenShare||o.source===L.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Ae(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof Pt||o instanceof Ut)try{if(hn())try{const s=yield navigator?.permissions.query({name:o.source===L.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),Ae(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Ae(o))),o instanceof Pt?yield o.restartTrack({deviceId:"default"}):yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Ae(o))),yield o.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map,this.pendingSignalRequests=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Cn.NONE}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setupEngine(t){this.engine=t,this.engine.on(q.RemoteMute,(n,r)=>{const i=this.trackPublications.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(q.Connected,this.handleReconnected).on(q.SignalRestarted,this.handleReconnected).on(q.SignalResumed,this.handleReconnected).on(q.Restarting,this.handleReconnecting).on(q.Resuming,this.handleReconnecting).on(q.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(q.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(q.Disconnected,this.handleDisconnected).on(q.SignalRequestResponse,this.handleSignalRequestResponse)}setMetadata(t){return R(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:t})})}setName(t){return R(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:t})})}setAttributes(t){return R(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:t})})}requestMetadataUpdate(t){return R(this,arguments,void 0,function(n){var r=this;let{metadata:i,name:o,attributes:s}=n;return function*(){return new Promise((a,l)=>R(r,void 0,void 0,function*(){var c,u;try{let d=!1;const h=yield this.engine.client.sendUpdateLocalMetadata((c=i??this.metadata)!==null&&c!==void 0?c:"",(u=o??this.name)!==null&&u!==void 0?u:"",s),p=performance.now();for(this.pendingSignalRequests.set(h,{resolve:a,reject:v=>{l(v),d=!0},values:{name:o,metadata:i,attributes:s}});performance.now()-p<5e3&&!d;){if((!o||this.name===o)&&(!i||this.metadata===i)&&(!s||Object.entries(s).every(v=>{let[g,b]=v;return this.attributes[g]===b||b===""&&!this.attributes[g]}))){this.pendingSignalRequests.delete(h),a();return}yield hr(50)}l(new wy("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error&&l(d)}}))}()})}setCameraEnabled(t,n,r){return this.setTrackEnabled(L.Source.Camera,t,n,r)}setMicrophoneEnabled(t,n,r){return this.setTrackEnabled(L.Source.Microphone,t,n,r)}setScreenShareEnabled(t,n,r){return this.setTrackEnabled(L.Source.ScreenShare,t,n,r)}setPermissions(t){const n=this.permissions,r=super.setPermissions(t);return r&&n&&this.emit($.ParticipantPermissionsChanged,n),r}setE2EEEnabled(t){return R(this,void 0,void 0,function*(){this.encryptionType=t?Cn.GCM:Cn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,r,i){return R(this,void 0,void 0,function*(){var o,s;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:t,enabled:n})),this.republishPromise&&(yield this.republishPromise);let a=this.getTrackPublication(t);if(n)if(a)yield a.unmute();else{let l;if(this.pendingPublishing.has(t)){const c=yield this.waitForPendingPublicationOfSource(t);return c||this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:t})),yield c?.unmute(),c}this.pendingPublishing.add(t);try{switch(t){case L.Source.Camera:l=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case L.Source.Microphone:l=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case L.Source.ScreenShare:l=yield this.createScreenTracks(Object.assign({},r));break;default:throw new ar(t)}const c=[];for(const d of l)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Ae(d))),c.push(this.publishTrack(d,i));[a]=yield Promise.all(c)}catch(c){throw l?.forEach(u=>{u.stop()}),c instanceof Error&&!(c instanceof ar)&&this.emit($.MediaDevicesError,c),c}finally{this.pendingPublishing.delete(t)}}else if(a?.track||(a=yield this.waitForPendingPublicationOfSource(t)),a&&a.track)if(t===L.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const l=this.getTrackPublication(L.Source.ScreenShareAudio);l&&l.track&&this.unpublishTrack(l.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return R(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(L.Source.Camera)||this.pendingPublishing.has(L.Source.Microphone))){this.pendingPublishing.add(L.Source.Camera),this.pendingPublishing.add(L.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(L.Source.Camera),this.pendingPublishing.delete(L.Source.Microphone)}}})}createTracks(t){return R(this,void 0,void 0,function*(){var n,r;t??(t={});const{audioProcessor:i,videoProcessor:o}=Ow(t),s=bw(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),a=ld(s);let l;try{l=yield navigator.mediaDevices.getUserMedia(a)}catch(c){throw c instanceof Error&&(a.audio&&(this.microphoneError=c),a.video&&(this.cameraError=c)),c}return a.audio&&(this.microphoneError=void 0,this.emit($.AudioStreamAcquired)),a.video&&(this.cameraError=void 0),Promise.all(l.getTracks().map(c=>R(this,void 0,void 0,function*(){const u=c.kind==="audio";u?s.audio:s.video;let d;const h=u?a.audio:a.video;typeof h!="boolean"&&(d=h);const p=Pw(c,d,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return p.kind===L.Kind.Video?p.source=L.Source.Camera:p.kind===L.Kind.Audio&&(p.source=L.Source.Microphone,p.setAudioContext(this.audioContext)),p.mediaStream=l,p instanceof Pt&&i?yield p.setProcessor(i):p instanceof Ut&&o&&(yield p.setProcessor(o)),p})))})}createScreenTracks(t){return R(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new dg("getDisplayMedia not supported");t.resolution===void 0&&!R3()&&(t.resolution=hg.h1080fps30.resolution);const n=k3(t),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new ar("no video track found");const o=new Ut(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=L.Source.ScreenShare,t.contentHint&&(o.mediaStreamTrack.contentHint=t.contentHint);const s=[o];if(r.getAudioTracks().length>0){this.emit($.AudioStreamAcquired);const a=new Pt(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=L.Source.ScreenShareAudio,s.push(a)}return s})}publishTrack(t,n){return R(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(t,n)})}publishOrRepublishTrack(t,n){return R(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,l,c,u;r instanceof Pt&&r.setAudioContext(o.audioContext),yield(a=o.reconnectFuture)===null||a===void 0?void 0:a.promise,o.republishPromise&&!s&&(yield o.republishPromise),r instanceof to&&o.pendingPublishPromises.has(r)&&(yield o.pendingPublishPromises.get(r));let d;if(r instanceof MediaStreamTrack)d=r.getConstraints();else{d=r.constraints;let m;switch(r.source){case L.Source.Microphone:m="audioinput";break;case L.Source.Camera:m="videoinput"}m&&o.activeDeviceMap.has(m)&&(d=Object.assign(Object.assign({},d),{deviceId:o.activeDeviceMap.get(m)}))}if(r instanceof MediaStreamTrack)switch(r.kind){case"audio":r=new Pt(r,d,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":r=new Ut(r,d,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new ar("unsupported MediaStreamTrack kind ".concat(r.kind))}else r.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let h;if(o.trackPublications.forEach(m=>{m.track&&m.track===r&&(h=m)}),h)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),Ae(h))),h;const p="channelCount"in r.mediaStreamTrack.getSettings()&&r.mediaStreamTrack.getSettings().channelCount===2||r.mediaStreamTrack.getConstraints().channelCount===2,v=(l=i?.forceStereo)!==null&&l!==void 0?l:p;v&&(i||(i={}),i.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),Ae(r))),i.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(c=i.dtx)!==null&&c!==void 0||(i.dtx=!1),(u=i.red)!==null&&u!==void 0||(i.red=!1));const g=Object.assign(Object.assign({},o.roomOptions.publishDefaults),i);!I3()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),g.simulcast=!1),g.source&&(r.source=g.source);const b=o.publish(r,g,v);o.pendingPublishPromises.set(r,b);try{return yield b}catch(m){throw m}finally{o.pendingPublishPromises.delete(r)}}()})}publish(t,n,r){return R(this,void 0,void 0,function*(){var i,o,s,a,l,c,u,d,h,p;Array.from(this.trackPublications.values()).find(w=>t instanceof to&&w.source===t.source)&&t.source!==L.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(t.source),Object.assign(Object.assign({},this.logContext),Ae(t))),n.stopMicTrackOnMute&&t instanceof Pt&&(t.stopOnMute=!0),t.source===L.Source.ScreenShare&&Ts()&&(n.simulcast=!1),n.videoCodec==="av1"&&!x3()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!P3()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=yp),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(w=>n.videoCodec===Mc(w.mime))||(n.videoCodec=Mc(this.enabledPublishVideoCodecs[0].mime)));const g=n.videoCodec;t.on(W.Muted,this.onTrackMuted),t.on(W.Unmuted,this.onTrackUnmuted),t.on(W.Ended,this.handleTrackEnded),t.on(W.UpstreamPaused,this.onTrackUpstreamPaused),t.on(W.UpstreamResumed,this.onTrackUpstreamResumed),t.on(W.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const b=new tp({cid:t.mediaStreamTrack.id,name:n.name,type:L.kindToProto(t.kind),muted:t.isMuted,source:L.sourceToProto(t.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n?.stream});let m;if(t.kind===L.Kind.Video){let w={width:0,height:0};try{w=yield t.waitForDimensions()}catch{const E=(a=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&a!==void 0?a:nl.h720.resolution;w={width:E.width,height:E.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Ae(t)),{dims:w}))}b.width=w.width,b.height=w.height,t instanceof Ut&&(_a(g)&&(t.source===L.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in t.mediaStreamTrack&&(t.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Ae(t))))),n.scalabilityMode=(l=n.scalabilityMode)!==null&&l!==void 0?l:"L3T3_KEY"),b.simulcastCodecs=[new ep({codec:g,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:yp}),n.backupCodec&&g!==n.backupCodec.codec&&b.encryption===Cn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),b.simulcastCodecs.push(new ep({codec:n.backupCodec.codec,cid:""})))),m=kp(t.source===L.Source.ScreenShare,b.width,b.height,n),b.layers=Vy(b.width,b.height,m,_a(n.videoCodec))}else t.kind===L.Kind.Audio&&(m=[{maxBitrate:(c=n.audioPreset)===null||c===void 0?void 0:c.maxBitrate,priority:(d=(u=n.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new vt("cannot publish track when not connected");const y=()=>R(this,void 0,void 0,function*(){var w,T,E;if(!this.engine.pcManager)throw new vt("pcManager is not ready");if(t.sender=yield this.engine.createSender(t,n,m),t instanceof Ut&&((w=n.degradationPreference)!==null&&w!==void 0||(n.degradationPreference=uN(t)),t.setDegradationPreference(n.degradationPreference)),m)if(Ts()&&t.kind===L.Kind.Audio){let k;for(const P of this.engine.pcManager.publisher.getTransceivers())if(P.sender===t.sender){k=P;break}k&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:k,codec:"opus",maxbr:!((T=m[0])===null||T===void 0)&&T.maxBitrate?m[0].maxBitrate/1e3:0})}else t.codec&&_a(t.codec)&&(!((E=m[0])===null||E===void 0)&&E.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:b.cid,codec:t.codec,maxbr:m[0].maxBitrate/1e3});yield this.engine.negotiate()});let C;if(this.enabledPublishVideoCodecs.length>0)C=(yield Promise.all([this.engine.addTrack(b),y()]))[0];else{C=yield this.engine.addTrack(b);let w;if(C.codecs.forEach(T=>{w===void 0&&(w=T.mimeType)}),w&&t.kind===L.Kind.Video){const T=Mc(w);T!==g&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Ae(t)),{codec:T})),n.videoCodec=T,m=kp(t.source===L.Source.ScreenShare,b.width,b.height,n))}yield y()}const S=new rl(t.kind,C,t,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return S.options=n,t.sid=C.sid,this.log.debug("publishing ".concat(t.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:m,trackInfo:C})),t instanceof Ut?t.startMonitor(this.engine.client):t instanceof Pt&&t.startMonitor(),this.addTrackPublication(S),this.emit($.LocalTrackPublished,S),S})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,r){return R(this,void 0,void 0,function*(){var i;if(this.encryptionType!==Cn.NONE)return;let o;if(this.trackPublications.forEach(p=>{p.track&&p.track===t&&(o=p)}),!o)throw new ar("track is not published");if(!(t instanceof Ut))throw new ar("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=aN(t,n,s);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Ae(t)));return}const l=t.addSimulcastTrack(n,a);if(!l)return;const c=new tp({cid:l.mediaStreamTrack.id,type:L.kindToProto(t.kind),muted:t.isMuted,source:L.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:s.videoCodec,cid:l.mediaStreamTrack.id}]});if(c.layers=Vy(c.width,c.height,a),!this.engine||this.engine.isClosed)throw new vt("cannot publish track when not connected");const u=()=>R(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(t,l,s,a),yield this.engine.negotiate()}),h=(yield Promise.all([this.engine.addTrack(c),u()]))[0];this.log.debug("published ".concat(n," for track ").concat(t.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:h}))})}unpublishTrack(t,n){return R(this,void 0,void 0,function*(){var r,i;if(t instanceof to){const c=this.pendingPublishPromises.get(t);c&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Ae(t))),yield c)}const o=this.getPublicationForTrack(t),s=o?Ae(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}t=o.track,t.off(W.Muted,this.onTrackMuted),t.off(W.Unmuted,this.onTrackUnmuted),t.off(W.Ended,this.handleTrackEnded),t.off(W.UpstreamPaused,this.onTrackUpstreamPaused),t.off(W.UpstreamResumed,this.onTrackUpstreamResumed),t.off(W.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&t.stop();let a=!1;const l=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<nt.FAILED&&l)try{for(const c of this.engine.pcManager.publisher.getTransceivers())c.sender===l&&(c.direction="inactive",a=!0);if(this.engine.removeTrack(l)&&(a=!0),t instanceof Ut){for(const[,c]of t.simulcastCodecs)c.sender&&(this.engine.removeTrack(c.sender)&&(a=!0),c.sender=void 0);t.simulcastCodecs.clear()}}catch(c){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:c}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case L.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case L.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit($.LocalTrackUnpublished,o),o.setTrack(void 0),a&&(yield this.engine.negotiate()),o})}unpublishTracks(t){return R(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof rl)})}republishAllTracks(t){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){r.republishPromise&&(yield r.republishPromise),r.republishPromise=new Promise((o,s)=>R(r,void 0,void 0,function*(){try{const a=[];this.trackPublications.forEach(l=>{l.track&&(n&&(l.options=Object.assign(Object.assign({},l.options),n)),a.push(l))}),yield Promise.all(a.map(l=>R(this,void 0,void 0,function*(){const c=l.track;yield this.unpublishTrack(c,!1),i&&!c.isMuted&&c.source!==L.Source.ScreenShare&&c.source!==L.Source.ScreenShareAudio&&(c instanceof Pt||c instanceof Ut)&&!c.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:l.trackSid})),yield c.restartTrack()),yield this.publishOrRepublishTrack(c,l.options,!0)}))),o()}catch(a){s(a)}finally{this.republishPromise=void 0}})),yield r.republishPromise}()})}publishData(t){return R(this,arguments,void 0,function(n){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const o=i.reliable?yt.RELIABLE:yt.LOSSY,s=i.destinationIdentities,a=i.topic,l=new fa({kind:o,value:{case:"user",value:new CC({participantIdentity:r.identity,payload:n,destinationIdentities:s,topic:a})}});yield r.engine.sendDataPacket(l,o)}()})}publishDtmf(t,n){return R(this,void 0,void 0,function*(){const r=new fa({kind:yt.RELIABLE,value:{case:"sipDtmf",value:new wC({code:t,digit:n})}});yield this.engine.sendDataPacket(r,yt.RELIABLE)})}sendChatMessage(t){return R(this,void 0,void 0,function*(){const n={id:crypto.randomUUID(),message:t,timestamp:Date.now()},r=new fa({value:{case:"chatMessage",value:new Xh(Object.assign(Object.assign({},n),{timestamp:qe.parse(n.timestamp)}))}});return yield this.engine.sendDataPacket(r,yt.RELIABLE),this.emit($.ChatMessage,n),n})}editChatMessage(t,n){return R(this,void 0,void 0,function*(){const r=Object.assign(Object.assign({},n),{message:t,editTimestamp:Date.now()}),i=new fa({value:{case:"chatMessage",value:new Xh(Object.assign(Object.assign({},r),{timestamp:qe.parse(r.timestamp),editTimestamp:qe.parse(r.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,yt.RELIABLE),this.emit($.ChatMessage,r),r})}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}setEnabledPublishCodecs(t){this.enabledPublishVideoCodecs=t.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(t){return t.sid!==this.sid||!super.updateInfo(t)?!1:(t.tracks.forEach(n=>{var r,i;const o=this.trackPublications.get(n.sid);if(o){const s=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Ae(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0)}getPublicationForTrack(t){let n;return this.trackPublications.forEach(r=>{const i=r.track;i&&(t instanceof MediaStreamTrack?(i instanceof Pt||i instanceof Ut)&&i.mediaStreamTrack===t&&(n=r):t===i&&(n=r))}),n}waitForPendingPublicationOfSource(t){return R(this,void 0,void 0,function*(){const n=Array.from(this.pendingPublishPromises.entries()).find(r=>{let[i]=r;return i.source===t});if(n)return n[1]})}}class yg extends xr{constructor(t,n,r,i){super(t,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=Pn.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(W.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const i=new od({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new TC({participantSid:"",trackSids:[this.trackSid]})]});this.emit(W.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?xr.SubscriptionStatus.Unsubscribed:super.isSubscribed?xr.SubscriptionStatus.Subscribed:xr.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?xr.PermissionStatus.Allowed:xr.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(t){!this.isManualOperationAllowed()||this.disabled===!t||(this.disabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.currentVideoQuality===t||(this.currentVideoQuality=t,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===t.height||(this.track instanceof Ia&&(this.videoDimensions=t),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&this.track instanceof Ia&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(t){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==t&&(i&&(i.off(W.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(W.VisibilityChanged,this.handleVisibilityChange),i.off(W.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(W.Unsubscribed,i)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(W.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(W.VisibilityChanged,this.handleVisibilityChange),t.on(W.Ended,this.handleEnded),this.emit(W.Subscribed,t)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(W.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?W.Muted:W.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(W.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(W.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.kind===L.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof Ia&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new RC({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(t.width=Math.ceil(this.videoDimensions.width),t.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?t.quality=this.currentVideoQuality:t.quality=Pn.HIGH,this.emit(W.UpdateSettings,t)}}class yu extends Nw{static fromParticipantInfo(t,n,r){return new yu(t,n.sid,n.identity,n.name,n.metadata,r,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(t,n,r,i,o,s){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:gu.STANDARD;super(n,r||"",i,o,s,a),this.signalClient=t,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(W.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Ae(t))),this.signalClient.sendUpdateTrackSettings(n)}),t.on(W.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(W.SubscriptionPermissionChanged,n=>{this.emit($.TrackSubscriptionPermissionChanged,t,n)}),t.on(W.SubscriptionStatusChanged,n=>{this.emit($.TrackSubscriptionStatusChanged,t,n)}),t.on(W.Subscribed,n=>{this.emit($.TrackSubscribed,n,t)}),t.on(W.Unsubscribed,n=>{this.emit($.TrackUnsubscribed,n,t)}),t.on(W.SubscriptionFailed,n=>{this.emit($.TrackSubscriptionFailed,t.trackSid,n)})}getTrackPublication(t){const n=super.getTrackPublication(t);if(n)return n}getTrackPublicationByName(t){const n=super.getTrackPublicationByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:L.Source.Microphone;this.volumeMap.set(n,t);const r=this.getTrackPublication(n);r&&r.track&&r.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L.Source.Microphone;const n=this.getTrackPublication(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,r,i,o,s){let a=this.getTrackPublicationBySid(n);if(a||n.startsWith("TR")||this.trackPublications.forEach(u=>{!a&&t.kind===u.kind.toString()&&(a=u)}),!a){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit($.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,r,i,o,s-1)},150);return}if(t.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Ae(a))),this.emit($.TrackSubscriptionFailed,n);return}const l=t.kind==="video";let c;return l?c=new Ia(t,n,i,o):c=new us(t,n,i,this.audioContext,this.audioOutput),c.source=a.source,c.isMuted=a.isMuted,c.setMediaStream(r),c.start(),a.setTrack(c),this.volumeMap.has(a.source)&&c instanceof us&&c.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(t){return this.trackPublications.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,r=new Map;return t.tracks.forEach(i=>{var o,s;let a=this.getTrackPublicationBySid(i.sid);if(a)a.updateInfo(i);else{const l=L.kindFromProto(i.type);if(!l)return;a=new yg(l,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),a.updateInfo(i),r.set(i.sid,a);const c=Array.from(this.trackPublications.values()).find(u=>u.source===a?.source);c&&a.source!==L.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Ae(c),newTrack:Ae(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.trackPublications.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Ae(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit($.TrackPublished,i)}),!0}unpublishTrack(t,n){const r=this.trackPublications.get(t);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.trackPublications.delete(t),r.kind){case L.Kind.Audio:this.audioTrackPublications.delete(t);break;case L.Kind.Video:this.videoTrackPublications.delete(t);break}n&&this.emit($.TrackUnpublished,r)}setAudioOutput(t){return R(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTrackPublications.forEach(r=>{var i;r.track instanceof us&&n.push(r.track.setSinkId((i=t.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:t,args:r})),super.emit(t,...r)}}var Te;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"})(Te||(Te={}));const CN=4*1e3;class bu extends vr.EventEmitter{constructor(t){var n,r,i;super(),n=this,this.state=Te.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Se,this.bufferedEvents=[],this.isResuming=!1,this.connect=(o,s,a)=>R(this,void 0,void 0,function*(){var l;if(!_3())throw Vr()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const c=yield this.disconnectLock.lock();if(this.state===Te.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),c(),Promise.resolve();if(this.connectFuture)return c(),this.connectFuture.promise;this.setAndEmitConnectionState(Te.Connecting),((l=this.regionUrlProvider)===null||l===void 0?void 0:l.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),vp(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Hy(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().then(h=>{var p;(p=this.regionUrlProvider)===null||p===void 0||p.setServerReportedRegions(h)}).catch(h=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:h}))}));const u=(h,p,v)=>R(this,void 0,void 0,function*(){var g,b;this.abortController&&this.abortController.abort();const m=new AbortController;this.abortController=m,c?.();try{yield this.attemptConnection(v??o,s,a,m),this.abortController=void 0,h()}catch(y){if(this.regionUrlProvider&&y instanceof Ue&&y.reason!==zt.Cancelled&&y.reason!==zt.NotAllowed){let C=null;try{C=yield this.regionUrlProvider.getNextBestRegionUrl((g=this.abortController)===null||g===void 0?void 0:g.signal)}catch(S){if(S instanceof Ue&&(S.status===401||S.reason===zt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),p(S);return}}C&&!(!((b=this.abortController)===null||b===void 0)&&b.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(y.message,". Retrying with another region: ").concat(C),this.logContext),this.recreateEngine(),yield u(h,p,C)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),p(y))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),p(y)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new ww((h,p)=>{u(h,p,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,a,l,c,u)=>R(this,void 0,void 0,function*(){var d,h,p;const v=yield a.join(o,s,{autoSubscribe:l.autoSubscribe,adaptiveStream:typeof c.adaptiveStream=="object"?!0:c.adaptiveStream,maxRetries:l.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:l.websocketTimeout},u.signal);let g=v.serverInfo;if(g||(g={version:v.serverVersion,region:v.serverRegion}),this.serverInfo=g,this.log.debug("connected to Livekit Server ".concat(Object.entries(g).map(b=>{let[m,y]=b;return"".concat(m,": ").concat(y)}).join(", ")),{room:(d=v.room)===null||d===void 0?void 0:d.name,roomSid:(h=v.room)===null||h===void 0?void 0:h.sid,identity:(p=v.participant)===null||p===void 0?void 0:p.identity}),!g.version)throw new c3("unknown server version");return g.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),c.dynacast=!1),v}),this.applyJoinResponse=o=>{const s=o.participant;if(this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(a){this.log.error(a instanceof Error?a.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:a}))}this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,s,a,l)=>R(this,void 0,void 0,function*(){var c,u,d;this.state===Te.Reconnecting||this.isResuming||!((c=this.engine)===null||c===void 0)&&c.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((u=this.regionUrlProvider)===null||u===void 0)&&u.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},gg),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const h=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,l);this.applyJoinResponse(h),this.setupLocalParticipantEvents(),this.emit(U.SignalConnected)}catch(h){yield this.engine.close(),this.recreateEngine();const p=new Ue("could not establish signal connection");throw h instanceof Error&&(p.message="".concat(p.message,": ").concat(h.message)),h instanceof Ue&&(p.reason=h.reason,p.status=h.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:h})),p}if(l.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Ue("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,l)}catch(h){throw yield this.engine.close(),this.recreateEngine(),h}hn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),hn()&&(document.addEventListener("freeze",this.onPageLeave),(d=navigator.mediaDevices)===null||d===void 0||d.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(Te.Connected),this.emit(U.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return R(n,[...s],void 0,function(){var l=this;let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var u,d,h,p;const v=yield l.disconnectLock.lock();try{if(l.state===Te.Disconnected){l.log.debug("already disconnected",l.logContext);return}l.log.info("disconnect from room",Object.assign({},l.logContext)),(l.state===Te.Connecting||l.state===Te.Reconnecting||l.isResuming)&&(l.log.warn("abort connection attempt",l.logContext),(u=l.abortController)===null||u===void 0||u.abort(),(h=(d=l.connectFuture)===null||d===void 0?void 0:d.reject)===null||h===void 0||h.call(d,new Ue("Client initiated disconnect")),l.connectFuture=void 0),!((p=l.engine)===null||p===void 0)&&p.client.isDisconnected||(yield l.engine.client.sendLeave()),l.engine&&(yield l.engine.close()),l.handleDisconnect(c,os.CLIENT_INITIATED),l.engine=void 0}finally{v()}}()})},this.onPageLeave=()=>R(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>R(this,void 0,void 0,function*(){const o=[],s=zr();if(s&&s.os==="iOS"){const a="livekit-dummy-audio-el";let l=document.getElementById(a);if(!l){l=document.createElement("audio"),l.id=a,l.autoplay=!0,l.hidden=!0;const c=xf();c.enabled=!0;const u=new MediaStream([c]);l.srcObject=u,document.addEventListener("visibilitychange",()=>{l&&(l.srcObject=document.hidden?null:u,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(l),this.once(U.Disconnected,()=>{l?.remove(),l=null})}o.push(l)}this.remoteParticipants.forEach(a=>{a.audioTrackPublications.forEach(l=>{l.track&&l.track.attachedElements.forEach(c=>{o.push(c)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>R(this,void 0,void 0,function*(){const o=[];for(const s of this.remoteParticipants.values())s.videoTrackPublications.forEach(a=>{var l;(l=a.track)===null||l===void 0||l.attachedElements.forEach(c=>{o.includes(c)||o.push(c)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(Te.Reconnecting)&&this.emit(U.Reconnecting)},this.handleSignalRestarted=o=>R(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(Te.Connected),this.emit(U.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{var a;if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}s.identity===""&&(s.identity=(a=this.sidToIdentity.get(s.sid))!==null&&a!==void 0?a:"");let l=this.remoteParticipants.get(s.identity);s.state===Yh.DISCONNECTED?this.handleParticipantDisconnected(s.identity,l):l=this.getOrCreateParticipant(s.identity,s)})},this.handleActiveSpeakersUpdate=o=>{const s=[],a={};o.forEach(l=>{if(a[l.sid]=!0,l.sid===this.localParticipant.sid)this.localParticipant.audioLevel=l.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const c=this.getRemoteParticipantBySid(l.sid);c&&(c.audioLevel=l.level,c.setIsSpeaking(!0),s.push(c))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(l=>{a[l.sid]||(l.audioLevel=0,l.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(U.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(l=>{const c=this.remoteParticipants.get(l.identity);c&&c.sid!==l.sid||s.set(l.sid,l)}),o.forEach(l=>{let c=this.getRemoteParticipantBySid(l.sid);l.sid===this.localParticipant.sid&&(c=this.localParticipant),c&&(c.audioLevel=l.level,c.setIsSpeaking(l.active),l.active?s.set(l.sid,c):s.delete(l.sid))});const a=Array.from(s.values());a.sort((l,c)=>c.audioLevel-l.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(U.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const a=this.getRemoteParticipantBySid(s.participantSid);if(!a)return;const l=a.getTrackPublicationBySid(s.trackSid);if(!l||!l.track)return;const c=L.streamStateFromProto(s.state);c!==l.track.streamState&&(l.track.streamState=c,a.emit($.TrackStreamStateChanged,l,l.track.streamState),this.emitWhenConnected(U.TrackStreamStateChanged,l,l.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.getRemoteParticipantBySid(o.participantSid);if(!s)return;const a=s.getTrackPublicationBySid(o.trackSid);a&&a.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.remoteParticipants.values()).find(l=>l.trackPublications.has(o.trackSid));if(!s)return;const a=s.getTrackPublicationBySid(o.trackSid);a&&a.setSubscriptionError(o.err)},this.handleDataPacket=o=>{const s=this.remoteParticipants.get(o.participantIdentity);o.value.case==="user"?this.handleUserPacket(s,o.value.value,o.kind):o.value.case==="transcription"?this.handleTranscription(s,o.value.value):o.value.case==="sipDtmf"?this.handleSipDtmf(s,o.value.value):o.value.case==="chatMessage"?this.handleChatMessage(s,o.value.value):o.value.case==="metrics"&&this.handleMetrics(o.value.value,s)},this.handleUserPacket=(o,s,a)=>{this.emit(U.DataReceived,s.payload,o,a,s.topic),o?.emit($.DataReceived,s.payload,a)},this.handleSipDtmf=(o,s)=>{this.emit(U.SipDTMFReceived,s,o),o?.emit($.SipDTMFReceived,s)},this.bufferedSegments=new Map,this.handleTranscription=(o,s)=>{const a=s.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(s.transcribedParticipantIdentity),l=a?.trackPublications.get(s.trackId),c=U3(s,this.transcriptionReceivedTimes);l?.emit(W.TranscriptionReceived,c),a?.emit($.TranscriptionReceived,c,l),this.emit(U.TranscriptionReceived,c,a,l)},this.handleChatMessage=(o,s)=>{const a=j3(s);this.emit(U.ChatMessage,a,o)},this.handleMetrics=(o,s)=>{this.emit(U.MetricsReceived,o,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(U.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(U.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(U.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(U.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>R(this,void 0,void 0,function*(){const o=yield _t.getInstance().getDevices(void 0,!1),s=["audiooutput"];for(let a of s){const l=o.filter(c=>c.kind===a);l.length>0&&!l.find(c=>c.deviceId===this.getActiveDevice(a))&&(yield this.switchActiveDevice(a,l[0].deviceId))}this.emit(U.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(U.RoomMetadataChanged,o.metadata),s?.activeRecording!==o.activeRecording&&this.emitWhenConnected(U.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const a=this.getRemoteParticipantBySid(s.participantSid);a&&a.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(U.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(U.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(U.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(U.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(U.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var s;(s=o?.onPublish)===null||s===void 0||s.call(o,this)},this.onLocalTrackPublished=o=>R(this,void 0,void 0,function*(){var s,a,l,c,u,d;(s=o.track)===null||s===void 0||s.on(W.TrackProcessorUpdate,this.onTrackProcessorUpdate),(a=o.track)===null||a===void 0||a.on(W.Restarted,this.onLocalTrackRestarted),(u=(c=(l=o.track)===null||l===void 0?void 0:l.getProcessor())===null||c===void 0?void 0:c.onPublish)===null||u===void 0||u.call(c,this),this.emit(U.LocalTrackPublished,o,this.localParticipant),o.track instanceof Pt&&(yield o.track.checkForSilence())&&this.emit(U.LocalAudioSilenceDetected,o);const h=yield(d=o.track)===null||d===void 0?void 0:d.getDeviceId(),p=Ey(o.source);p&&h&&h!==this.localParticipant.activeDeviceMap.get(p)&&(this.localParticipant.activeDeviceMap.set(p,h),this.emit(U.ActiveDeviceChanged,p,h))}),this.onLocalTrackUnpublished=o=>{var s,a;(s=o.track)===null||s===void 0||s.off(W.TrackProcessorUpdate,this.onTrackProcessorUpdate),(a=o.track)===null||a===void 0||a.off(W.Restarted,this.onLocalTrackRestarted),this.emit(U.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>R(this,void 0,void 0,function*(){const s=yield o.getDeviceId(!1),a=Ey(o.source);a&&s&&s!==this.localParticipant.activeDeviceMap.get(a)&&(this.log.debug("local track restarted, setting ".concat(a," ").concat(s," active"),this.logContext),this.localParticipant.activeDeviceMap.set(a,s),this.emit(U.ActiveDeviceChanged,a,s))}),this.onLocalConnectionQualityChanged=o=>{this.emit(U.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(U.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(U.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(U.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},Z3),t),this.log=Fr((r=this.options.loggerName)!==null&&r!==void 0?r:Jn.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},Ew),t?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},xw),t?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},X3),t?.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new dn,this.localParticipant=new Sp("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Dr(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Dr(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Dr(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(t){return R(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;this.options.e2ee&&(this.e2eeManager=new F3(this.options.e2ee),this.e2eeManager.on(mi.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof Sp&&(this.isE2EEEnabled=n),this.emit(U.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(mi.EncryptionError,n=>this.emit(U.EncryptionError,n)),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get logContext(){var t;return{room:this.name,roomID:(t=this.roomInfo)===null||t===void 0?void 0:t.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return R(this,void 0,void 0,function*(){return this.state===Te.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((t,n)=>{const r=i=>{i.sid!==""&&(this.engine.off(q.RoomUpdate,r),t(i.sid))};this.engine.on(q.RoomUpdate,r),this.once(U.Disconnected,()=>{this.engine.off(q.RoomUpdate,r),n("Room disconnected before room server id was available")})})})}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new hN(this.options),this.engine.on(q.ParticipantUpdate,this.handleParticipantUpdates).on(q.RoomUpdate,this.handleRoomUpdate).on(q.SpeakersChanged,this.handleSpeakersChanged).on(q.StreamStateChanged,this.handleStreamStateUpdate).on(q.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(q.SubscriptionError,this.handleSubscriptionError).on(q.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(q.MediaTrackAdded,(t,n,r)=>{this.onTrackAdded(t,n,r)}).on(q.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(q.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(q.DataPacketReceived,this.handleDataPacket).on(q.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(Te.SignalReconnecting)&&this.emit(U.SignalReconnecting)}).on(q.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(Te.Connected)&&this.emit(U.Reconnected)}).on(q.SignalResumed,()=>{this.bufferedEvents=[],(this.state===Te.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(q.Restarting,this.handleRestarting).on(q.SignalRestarted,this.handleSignalRestarted).on(q.Offline,()=>{this.setAndEmitConnectionState(Te.Reconnecting)&&this.emit(U.Reconnecting)}).on(q.DCBufferStatusChanged,(t,n)=>{this.emit(U.DCBufferStatusChanged,t,n)}).on(q.LocalTrackSubscribed,t=>{const n=this.localParticipant.getTrackPublications().find(r=>{let{trackSid:i}=r;return i===t});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit($.LocalTrackSubscribed,n),this.emitWhenConnected(U.LocalTrackSubscribed,n,this.localParticipant)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return _t.getInstance().getDevices(t,n)}prepareConnection(t,n){return R(this,void 0,void 0,function*(){if(this.state===Te.Disconnected){this.log.debug("prepareConnection to ".concat(t),this.logContext);try{if(vp(new URL(t))&&n){this.regionUrlProvider=new Hy(t,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===Te.Disconnected&&(this.regionUrl=r,yield fetch(Oy(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(Oy(t),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(t){return this.localParticipant.identity===t?this.localParticipant:this.remoteParticipants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return R(this,void 0,void 0,function*(){let r=()=>{},i;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new rr({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new rr({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new rr({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new rr({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>R(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new rr({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>R(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new rr({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new rr({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),r=()=>R(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new sd({reason:os.CLIENT_INITIATED,action:ss.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new rr({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break;case"leave-full-reconnect":i=new rr({scenario:{case:"leaveRequestFullReconnect",value:!0}})}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){return R(this,arguments,void 0,function(r,i){var o=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,l,c,u,d,h,p;let v=!1,g=!0;const b=s?{exact:i}:i;if(r==="audioinput"){const m=(a=o.getActiveDevice(r))!==null&&a!==void 0?a:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=b,v=m!==b;const y=Array.from(o.localParticipant.audioTrackPublications.values()).filter(C=>C.source===L.Source.Microphone);try{g=(yield Promise.all(y.map(C=>{var S;return(S=C.audioTrack)===null||S===void 0?void 0:S.setDeviceId(b)}))).every(C=>C===!0)}catch(C){throw o.options.audioCaptureDefaults.deviceId=m,C}}else if(r==="videoinput"){const m=(l=o.getActiveDevice(r))!==null&&l!==void 0?l:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=b,v=m!==b;const y=Array.from(o.localParticipant.videoTrackPublications.values()).filter(C=>C.source===L.Source.Camera);try{g=(yield Promise.all(y.map(C=>{var S;return(S=C.videoTrack)===null||S===void 0?void 0:S.setDeviceId(b)}))).every(C=>C===!0)}catch(C){throw o.options.videoCaptureDefaults.deviceId=m,C}}else if(r==="audiooutput"){if(!gp()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");o.options.webAudioMix&&(i=(c=yield _t.getInstance().normalizeDeviceId("audiooutput",i))!==null&&c!==void 0?c:""),(u=(p=o.options).audioOutput)!==null&&u!==void 0||(p.audioOutput={});const m=(d=o.getActiveDevice(r))!==null&&d!==void 0?d:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=i,v=m!==b;try{o.options.webAudioMix&&((h=o.audioContext)===null||h===void 0||h.setSinkId(i)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(y=>y.setAudioOutput({deviceId:i})))}catch(y){throw o.options.audioOutput.deviceId=m,y}}return v&&g&&(o.localParticipant.activeDeviceMap.set(r,i),o.emit(U.ActiveDeviceChanged,r,i)),g}()})}setupLocalParticipantEvents(){this.localParticipant.on($.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on($.ParticipantNameChanged,this.onLocalParticipantNameChanged).on($.AttributesChanged,this.onLocalAttributesChanged).on($.TrackMuted,this.onLocalTrackMuted).on($.TrackUnmuted,this.onLocalTrackUnmuted).on($.LocalTrackPublished,this.onLocalTrackPublished).on($.LocalTrackUnpublished,this.onLocalTrackUnpublished).on($.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on($.MediaDevicesError,this.onMediaDevicesError).on($.AudioStreamAcquired,this.startAudio).on($.ChatMessage,this.onLocalChatMessageSent).on($.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(t,n,r){if(this.state===Te.Connecting||this.state===Te.Reconnecting){const u=()=>{this.onTrackAdded(t,n,r),d()},d=()=>{this.off(U.Reconnected,u),this.off(U.Connected,u),this.off(U.Disconnected,d)};this.once(U.Reconnected,u),this.once(U.Connected,u),this.once(U.Disconnected,d);return}if(this.state===Te.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=E3(n.id),o=i[0];let s=i[1],a=t.id;if(s&&s.startsWith("TR")&&(a=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const l=Array.from(this.remoteParticipants.values()).find(u=>u.sid===o);if(!l){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let c;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?c=this.options.adaptiveStream:c={}),l.addSubscribedMediaTrack(t,a,n,r,c)}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==Te.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>{i.unpublishTrack(o.trackSid)})}),this.localParticipant.trackPublications.forEach(i=>{var o,s;i.track&&this.localParticipant.unpublishTrack(i.track,t),t&&((o=i.track)===null||o===void 0||o.detach(),(s=i.track)===null||s===void 0||s.stop())}),this.localParticipant.off($.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off($.ParticipantNameChanged,this.onLocalParticipantNameChanged).off($.AttributesChanged,this.onLocalAttributesChanged).off($.TrackMuted,this.onLocalTrackMuted).off($.TrackUnmuted,this.onLocalTrackUnmuted).off($.LocalTrackPublished,this.onLocalTrackPublished).off($.LocalTrackUnpublished,this.onLocalTrackUnpublished).off($.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off($.MediaDevicesError,this.onMediaDevicesError).off($.AudioStreamAcquired,this.startAudio).off($.ChatMessage,this.onLocalChatMessageSent).off($.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),hn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(Te.Disconnected),this.emit(U.Disconnected,n)}}}handleParticipantDisconnected(t,n){this.remoteParticipants.delete(t),n&&(n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(U.ParticipantDisconnected,n))}acquireAudioContext(){return R(this,void 0,void 0,function*(){var t,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=pg())!==null&&t!==void 0?t:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.webAudioMix&&this.remoteParticipants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(U.AudioPlaybackStatusChanged,r))})}createParticipant(t,n){var r;let i;return n?i=yu.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):i=new yu(this.engine.client,"",t,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(t,n){if(this.remoteParticipants.has(t)){const i=this.remoteParticipants.get(t);return n&&i.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),i}const r=this.createParticipant(t,n);return this.remoteParticipants.set(t,r),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(U.ParticipantConnected,r),r.on($.TrackPublished,i=>{this.emitWhenConnected(U.TrackPublished,i,r)}).on($.TrackSubscribed,(i,o)=>{i.kind===L.Kind.Audio?(i.on(W.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(W.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===L.Kind.Video&&(i.on(W.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(W.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(U.TrackSubscribed,i,o,r)}).on($.TrackUnpublished,i=>{this.emit(U.TrackUnpublished,i,r)}).on($.TrackUnsubscribed,(i,o)=>{this.emit(U.TrackUnsubscribed,i,o,r)}).on($.TrackSubscriptionFailed,i=>{this.emit(U.TrackSubscriptionFailed,i,r)}).on($.TrackMuted,i=>{this.emitWhenConnected(U.TrackMuted,i,r)}).on($.TrackUnmuted,i=>{this.emitWhenConnected(U.TrackUnmuted,i,r)}).on($.ParticipantMetadataChanged,i=>{this.emitWhenConnected(U.ParticipantMetadataChanged,i,r)}).on($.ParticipantNameChanged,i=>{this.emitWhenConnected(U.ParticipantNameChanged,i,r)}).on($.AttributesChanged,i=>{this.emitWhenConnected(U.ParticipantAttributesChanged,i,r)}).on($.ConnectionQualityChanged,i=>{this.emitWhenConnected(U.ConnectionQualityChanged,i,r)}).on($.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(U.ParticipantPermissionsChanged,i,r)}).on($.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(U.TrackSubscriptionStatusChanged,i,o,r)}).on($.TrackSubscriptionFailed,(i,o)=>{this.emit(U.TrackSubscriptionFailed,i,r,o)}).on($.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(U.TrackSubscriptionPermissionChanged,i,o,r)}),n&&r.updateInfo(n),r}sendSyncState(){const t=Array.from(this.remoteParticipants.values()).reduce((r,i)=>(r.push(...i.getTrackPublications()),r),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.remoteParticipants.values())for(const n of t.videoTrackPublications.values())n.isSubscribed&&n instanceof yg&&n.emitTrackUpdate()}getRemoteParticipantBySid(t){const n=this.sidToIdentity.get(t);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=Rt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:t,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,os.STATE_MISMATCH))):t=0},CN)}clearConnectionReconcile(){this.connectionReconcileInterval&&Rt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(U.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(t=>{let[n,r]=t;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.state===Te.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([t,r]);else if(this.state===Te.Connected)return this.emit(t,...r);return!1}simulateParticipants(t){return R(this,void 0,void 0,function*(){var n,r;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new og({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:qe.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new el({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(U.SignalConnected),this.emit(U.Connected),this.setAndEmitConnectionState(Te.Connected),i.video){const s=new rl(L.Kind.Video,new Yo({source:jt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Bn.AUDIO,name:"video-dummy"}),new Ut(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:Iy(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit($.LocalTrackPublished,s)}if(i.audio){const s=new rl(L.Kind.Audio,new Yo({source:jt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Bn.AUDIO}),new Pt(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:xf(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit($.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let a=new el({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:Yh.ACTIVE,tracks:[],joinedAt:qe.parse(Date.now())});const l=this.getOrCreateParticipant(a.identity,a);if(o.video){const c=Iy(160*((r=o.aspectRatios[s%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new Yo({source:jt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Bn.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}if(o.audio){const c=xf(),u=new Yo({source:jt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Bn.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}l.updateInfo(a)}})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(t!==U.ActiveSpeakersChanged){const o=Dw(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(t),Object.assign(Object.assign({},this.logContext),{event:t,args:o}))}return super.emit(t,...r)}}function Dw(e){return e.map(t=>{if(t)return Array.isArray(t)?Dw(t):typeof t=="object"?"logContext"in t&&t.logContext:t})}var zn;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(zn||(zn={}));class As extends vr.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=zn.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=t,this.token=n,this.name=this.constructor.name,this.room=new bu(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(t){return R(this,void 0,void 0,function*(){if(this.status!==zn.IDLE)throw Error("check is running already");this.setStatus(zn.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==zn.SKIPPED&&this.setStatus(this.isSuccess()?zn.SUCCESS:zn.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(){return R(this,void 0,void 0,function*(){return this.room.state===Te.Connected?this.room:(yield this.room.connect(this.url,this.token,this.connectOptions),this.room)})}disconnect(){return R(this,void 0,void 0,function*(){this.room&&this.room.state!==Te.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus(zn.SKIPPED)}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class wN extends As{get description(){return"Can publish audio"}perform(){return R(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield bN();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="audio"||!s.kind&&s.mediaType==="audio")&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class TN extends As{get description(){return"Can publish video"}perform(){return R(this,void 0,void 0,function*(){var t;const n=yield this.connect(),r=yield yN();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,5e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&(s.kind==="video"||!s.kind&&s.mediaType==="video")&&(o+=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class EN extends As{get description(){return"Resuming connection after interruption"}perform(){return R(this,void 0,void 0,function*(){var t;const n=yield this.connect();let r=!1,i=!1,o;const s=new Promise(c=>{setTimeout(c,5e3),o=c}),a=()=>{r=!0};n.on(U.SignalReconnecting,a).on(U.Reconnecting,a).on(U.Reconnected,()=>{i=!0,o(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const l=n.engine.client.onClose;if(l&&l(""),yield s,r){if(!i||n.state!==Te.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class xN extends As{get description(){return"Can connect via TURN"}perform(){return R(this,void 0,void 0,function*(){var t,n;const r=new mg,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,a=!1;for(let l of i.iceServers)for(let c of l.urls)c.startsWith("turn:")?(s=!0,a=!0):c.startsWith("turns:")&&(s=!0,a=!0,o=!0),c.startsWith("stun:")&&(a=!0);a?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(l=>setTimeout(l,0)))})}}class PN extends As{get description(){return"Establishing WebRTC connection"}perform(){return R(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(U.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,o)=>{if(i.candidate){const s=new RTCIceCandidate(i);let a="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(_N(s.address)?a+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(t=!0,a+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Se.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function _N(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class RN extends As{get description(){return"Connecting to signal connection via WebSocket"}perform(){return R(this,void 0,void 0,function*(){var t,n,r;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new mg;const o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((t=o.serverInfo)===null||t===void 0?void 0:t.edition)===EC.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class k8 extends vr.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=t,this.token=n,this.options=r}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:zn.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==zn.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return R(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new t(this.url,this.token,this.options),i=s=>{this.updateCheck(n,s)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(RN)})}checkWebRTC(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(PN)})}checkTURN(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(xN)})}checkReconnect(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(EN)})}checkPublishAudio(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(wN)})}checkPublishVideo(){return R(this,void 0,void 0,function*(){return this.createAndRunCheck(TN)})}}function IN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=e instanceof to?e.mediaStreamTrack:e,i=r.getSettings();let o={facingMode:(n=t.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;Se.trace("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&NN(s)&&(o={facingMode:s,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Se.trace("Try to get facing mode from device label: (".concat(r.label,")"));const s=MN(r.label);s!==void 0&&(o=s)}return o}const Ky=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),ON=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function MN(e){var t;const n=e.trim().toLowerCase();if(n!=="")return Ky.has(n)?Ky.get(n):(t=Array.from(ON.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||t===void 0?void 0:t[1]}function NN(e){return e===void 0||["user","environment","left","right"].includes(e)}const Cp=Math.min,ds=Math.max,ku=Math.round,Ri=e=>({x:e,y:e}),DN={left:"right",right:"left",bottom:"top",top:"bottom"},LN={start:"end",end:"start"};function qy(e,t,n){return ds(e,Cp(t,n))}function ud(e,t){return typeof e=="function"?e(t):e}function ho(e){return e.split("-")[0]}function dd(e){return e.split("-")[1]}function Lw(e){return e==="x"?"y":"x"}function Aw(e){return e==="y"?"height":"width"}function fd(e){return["top","bottom"].includes(ho(e))?"y":"x"}function Uw(e){return Lw(fd(e))}function AN(e,t,n){n===void 0&&(n=!1);const r=dd(e),i=Uw(e),o=Aw(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Su(s)),[s,Su(s)]}function UN(e){const t=Su(e);return[wp(e),t,wp(t)]}function wp(e){return e.replace(/start|end/g,t=>LN[t])}function jN(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function $N(e,t,n,r){const i=dd(e);let o=jN(ho(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(wp)))),o}function Su(e){return e.replace(/left|right|bottom|top/g,t=>DN[t])}function FN(e){return{top:0,right:0,bottom:0,left:0,...e}}function zN(e){return typeof e!="number"?FN(e):{top:e,right:e,bottom:e,left:e}}function Cu(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Jy(e,t,n){let{reference:r,floating:i}=e;const o=fd(t),s=Uw(t),a=Aw(s),l=ho(t),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(dd(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1);break}return p}const VN=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=Jy(c,r,l),h=r,p={},v=0;for(let g=0;g<a.length;g++){const{name:b,fn:m}=a[g],{x:y,y:C,data:S,reset:w}=await m({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=y??u,d=C??d,p={...p,[b]:{...p[b],...S}},w&&v<=50&&(v++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(c=w.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:u,y:d}=Jy(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}};async function jw(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=ud(t,e),v=zN(p),g=a[h?d==="floating"?"reference":"floating":d],b=Cu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(g)))==null||n?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),m=d==="floating"?{...s.floating,x:r,y:i}:s.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),C=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},S=Cu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:y,strategy:l}):m);return{top:(b.top-S.top+v.top)/C.y,bottom:(S.bottom-b.bottom+v.bottom)/C.y,left:(b.left-S.left+v.left)/C.x,right:(S.right-b.right+v.right)/C.x}}const BN=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=ud(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const m=ho(i),y=ho(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(y||!g?[Su(a)]:UN(a));!h&&v!=="none"&&S.push(...$N(a,g,v,C));const w=[a,...S],T=await jw(t,b),E=[];let k=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&E.push(T[m]),d){const A=AN(i,s,C);E.push(T[A[0]],T[A[1]])}if(k=[...k,{placement:i,overflows:E}],!E.every(A=>A<=0)){var P,_;const A=(((P=o.flip)==null?void 0:P.index)||0)+1,Z=w[A];if(Z)return{data:{index:A,overflows:k},reset:{placement:Z}};let X=(_=k.filter(ge=>ge.overflows[0]<=0).sort((ge,Ee)=>ge.overflows[1]-Ee.overflows[1])[0])==null?void 0:_.placement;if(!X)switch(p){case"bestFit":{var M;const ge=(M=k.map(Ee=>[Ee.placement,Ee.overflows.filter(be=>be>0).reduce((be,V)=>be+V,0)]).sort((Ee,be)=>Ee[1]-be[1])[0])==null?void 0:M[0];ge&&(X=ge);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};async function WN(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=ho(n),a=dd(n),l=fd(n)==="y",c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=ud(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const HN=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await WN(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},GN=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:b=>{let{x:m,y}=b;return{x:m,y}}},...l}=ud(e,t),c={x:n,y:r},u=await jw(t,l),d=fd(ho(i)),h=Lw(d);let p=c[h],v=c[d];if(o){const b=h==="y"?"top":"left",m=h==="y"?"bottom":"right",y=p+u[b],C=p-u[m];p=qy(y,p,C)}if(s){const b=d==="y"?"top":"left",m=d==="y"?"bottom":"right",y=v+u[b],C=v-u[m];v=qy(y,v,C)}const g=a.fn({...t,[h]:p,[d]:v});return{...g,data:{x:g.x-n,y:g.y-r}}}}};function hd(){return typeof window<"u"}function Us(e){return $w(e)?(e.nodeName||"").toLowerCase():"#document"}function pn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gr(e){var t;return(t=($w(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $w(e){return hd()?e instanceof Node||e instanceof pn(e).Node:!1}function Qn(e){return hd()?e instanceof Element||e instanceof pn(e).Element:!1}function mr(e){return hd()?e instanceof HTMLElement||e instanceof pn(e).HTMLElement:!1}function Qy(e){return!hd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pn(e).ShadowRoot}function pl(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Yn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function KN(e){return["table","td","th"].includes(Us(e))}function pd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function bg(e){const t=kg(),n=Qn(e)?Yn(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function qN(e){let t=Ii(e);for(;mr(t)&&!xs(t);){if(bg(t))return t;if(pd(t))return null;t=Ii(t)}return null}function kg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xs(e){return["html","body","#document"].includes(Us(e))}function Yn(e){return pn(e).getComputedStyle(e)}function md(e){return Qn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ii(e){if(Us(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Qy(e)&&e.host||Gr(e);return Qy(t)?t.host:t}function Fw(e){const t=Ii(e);return xs(t)?e.ownerDocument?e.ownerDocument.body:e.body:mr(t)&&pl(t)?t:Fw(t)}function Tp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Fw(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=pn(i);if(o){const a=Ep(s);return t.concat(s,s.visualViewport||[],pl(i)?i:[],a&&n?Tp(a):[])}return t.concat(i,Tp(i,[],n))}function Ep(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zw(e){const t=Yn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=mr(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=ku(n)!==o||ku(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function Vw(e){return Qn(e)?e:e.contextElement}function fs(e){const t=Vw(e);if(!mr(t))return Ri(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=zw(t);let s=(o?ku(n.width):n.width)/r,a=(o?ku(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const JN=Ri(0);function Bw(e){const t=pn(e);return!kg()||!t.visualViewport?JN:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function QN(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pn(e)?!1:t}function il(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Vw(e);let s=Ri(1);t&&(r?Qn(r)&&(s=fs(r)):s=fs(e));const a=QN(o,n,r)?Bw(o):Ri(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const h=pn(o),p=r&&Qn(r)?pn(r):r;let v=h,g=Ep(v);for(;g&&r&&p!==v;){const b=fs(g),m=g.getBoundingClientRect(),y=Yn(g),C=m.left+(g.clientLeft+parseFloat(y.paddingLeft))*b.x,S=m.top+(g.clientTop+parseFloat(y.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,d*=b.y,l+=C,c+=S,v=pn(g),g=Ep(v)}}return Cu({width:u,height:d,x:l,y:c})}function YN(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=Gr(r),a=t?pd(t.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Ri(1);const u=Ri(0),d=mr(r);if((d||!d&&!o)&&((Us(r)!=="body"||pl(s))&&(l=md(r)),mr(r))){const h=il(r);c=fs(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function XN(e){return Array.from(e.getClientRects())}function xp(e,t){const n=md(e).scrollLeft;return t?t.left+n:il(Gr(e)).left+n}function ZN(e){const t=Gr(e),n=md(e),r=e.ownerDocument.body,i=ds(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=ds(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+xp(e);const a=-n.scrollTop;return Yn(r).direction==="rtl"&&(s+=ds(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function eD(e,t){const n=pn(e),r=Gr(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const c=kg();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function tD(e,t){const n=il(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=mr(e)?fs(e):Ri(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function Yy(e,t,n){let r;if(t==="viewport")r=eD(e,n);else if(t==="document")r=ZN(Gr(e));else if(Qn(t))r=tD(t,n);else{const i=Bw(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Cu(r)}function Ww(e,t){const n=Ii(e);return n===t||!Qn(n)||xs(n)?!1:Yn(n).position==="fixed"||Ww(n,t)}function nD(e,t){const n=t.get(e);if(n)return n;let r=Tp(e,[],!1).filter(a=>Qn(a)&&Us(a)!=="body"),i=null;const o=Yn(e).position==="fixed";let s=o?Ii(e):e;for(;Qn(s)&&!xs(s);){const a=Yn(s),l=bg(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&i&&["absolute","fixed"].includes(i.position)||pl(s)&&!l&&Ww(e,s))?r=r.filter(c=>c!==s):i=a,s=Ii(s)}return t.set(e,r),r}function rD(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?pd(t)?[]:nD(t,this._c):[].concat(n),r],s=o[0],a=o.reduce((l,c)=>{const u=Yy(t,c,i);return l.top=ds(u.top,l.top),l.right=Cp(u.right,l.right),l.bottom=Cp(u.bottom,l.bottom),l.left=ds(u.left,l.left),l},Yy(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function iD(e){const{width:t,height:n}=zw(e);return{width:t,height:n}}function oD(e,t,n){const r=mr(t),i=Gr(t),o=n==="fixed",s=il(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Ri(0);if(r||!r&&!o)if((Us(t)!=="body"||pl(i))&&(a=md(t)),r){const p=il(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&(l.x=xp(i));let c=0,u=0;if(i&&!r&&!o){const p=i.getBoundingClientRect();u=p.top+a.scrollTop,c=p.left+a.scrollLeft-xp(i,p)}const d=s.left+a.scrollLeft-l.x-c,h=s.top+a.scrollTop-l.y-u;return{x:d,y:h,width:s.width,height:s.height}}function Df(e){return Yn(e).position==="static"}function Xy(e,t){if(!mr(e)||Yn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Gr(e)===n&&(n=n.ownerDocument.body),n}function Hw(e,t){const n=pn(e);if(pd(e))return n;if(!mr(e)){let i=Ii(e);for(;i&&!xs(i);){if(Qn(i)&&!Df(i))return i;i=Ii(i)}return n}let r=Xy(e,t);for(;r&&KN(r)&&Df(r);)r=Xy(r,t);return r&&xs(r)&&Df(r)&&!bg(r)?n:r||qN(e)||n}const sD=async function(e){const t=this.getOffsetParent||Hw,n=this.getDimensions,r=await n(e.floating);return{reference:oD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aD(e){return Yn(e).direction==="rtl"}const lD={convertOffsetParentRelativeRectToViewportRelativeRect:YN,getDocumentElement:Gr,getClippingRect:rD,getOffsetParent:Hw,getElementRects:sD,getClientRects:XN,getDimensions:iD,getScale:fs,isElement:Qn,isRTL:aD},cD=HN,uD=GN,dD=BN,fD=(e,t,n)=>{const r=new Map,i={platform:lD,...n},o={...i.platform,_c:r};return VN(e,t,{...i,platform:o})};var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gw={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(ha,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(g,b){var m=g[b];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?l:console[g]!==void 0?a(console,g):console.log!==void 0?a(console,"log"):t}function u(){for(var g=this.getLevel(),b=0;b<i.length;b++){var m=i[b];this[m]=b<g?t:this.methodFactory(m,g,this.name)}if(this.log=this.debug,typeof console===n&&g<this.levels.SILENT)return"No console available for logging"}function d(g){return function(){typeof console!==n&&(u.call(this),this[g].apply(this,arguments))}}function h(g,b,m){return c(g)||d.apply(this,arguments)}function p(g,b){var m=this,y,C,S,w="loglevel";typeof g=="string"?w+=":"+g:typeof g=="symbol"&&(w=void 0);function T(M){var A=(i[M]||"silent").toUpperCase();if(!(typeof window===n||!w)){try{window.localStorage[w]=A;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+A+";"}catch{}}}function E(){var M;if(!(typeof window===n||!w)){try{M=window.localStorage[w]}catch{}if(typeof M===n)try{var A=window.document.cookie,Z=encodeURIComponent(w),X=A.indexOf(Z+"=");X!==-1&&(M=/^([^;]+)/.exec(A.slice(X+Z.length+1))[1])}catch{}return m.levels[M]===void 0&&(M=void 0),M}}function k(){if(!(typeof window===n||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(M){var A=M;if(typeof A=="string"&&m.levels[A.toUpperCase()]!==void 0&&(A=m.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=m.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+M)}m.name=g,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=b||h,m.getLevel=function(){return S??C??y},m.setLevel=function(M,A){return S=P(M),A!==!1&&T(S),u.call(m)},m.setDefaultLevel=function(M){C=P(M),E()||m.setLevel(M,!1)},m.resetLevel=function(){S=null,k(),u.call(m)},m.enableAll=function(M){m.setLevel(m.levels.TRACE,M)},m.disableAll=function(M){m.setLevel(m.levels.SILENT,M)},m.rebuild=function(){if(s!==m&&(y=P(s.getLevel())),u.call(m),s===m)for(var M in o)o[M].rebuild()},y=P(s?s.getLevel():"WARN");var _=E();_!=null&&(S=P(_)),u.call(m)}s=new p,s.getLogger=function(g){if(typeof g!="symbol"&&typeof g!="string"||g==="")throw new TypeError("You must supply a name when creating a logger.");var b=o[g];return b||(b=o[g]=new p(g,s.methodFactory)),b};var v=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=v),s},s.getLoggers=function(){return o},s.default=s,s})})(Gw);var pD=Gw.exports;const mD=hD(pD);var Pp=function(e,t){return Pp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Pp(e,t)};function Kr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pp(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function gD(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function Kw(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ps(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wu(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Tu(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function hs(e){return this instanceof hs?(this.v=e,this):new hs(e)}function vD(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(v){return Promise.resolve(v).then(p,d)}}function a(p,v){r[p]&&(i[p]=function(g){return new Promise(function(b,m){o.push([p,g,b,m])>1||l(p,g)})},v&&(i[p]=v(i[p])))}function l(p,v){try{c(r[p](v))}catch(g){h(o[0][3],g)}}function c(p){p.value instanceof hs?Promise.resolve(p.value.v).then(u,d):h(o[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function h(p,v){p(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function yD(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ps=="function"?Ps(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){s=e[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}function St(e){return typeof e=="function"}function Sg(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Lf=Sg(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Eu(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ml=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Ps(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(St(u))try{u()}catch(g){o=g instanceof Lf?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=Ps(d),p=h.next();!p.done;p=h.next()){var v=p.value;try{Zy(v)}catch(g){o=o??[],g instanceof Lf?o=Tu(Tu([],wu(o)),wu(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new Lf(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Zy(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Eu(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Eu(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),qw=ml.EMPTY;function Jw(e){return e instanceof ml||e&&"closed"in e&&St(e.remove)&&St(e.add)&&St(e.unsubscribe)}function Zy(e){St(e)?e():e.unsubscribe()}var Qw={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},bD={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Tu([e,t],wu(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Yw(e){bD.setTimeout(function(){throw e})}function _p(){}function Nc(e){e()}var Cg=function(e){Kr(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Jw(n)&&n.add(r)):r.destination=wD,r}return t.create=function(n,r,i){return new Rp(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ml),kD=Function.prototype.bind;function Af(e,t){return kD.call(e,t)}var SD=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Yl(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Yl(r)}else Yl(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Yl(n)}},e}(),Rp=function(e){Kr(t,e);function t(n,r,i){var o=e.call(this)||this,s;if(St(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&Qw.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&Af(n.next,a),error:n.error&&Af(n.error,a),complete:n.complete&&Af(n.complete,a)}):s=n}return o.destination=new SD(s),o}return t}(Cg);function Yl(e){Yw(e)}function CD(e){throw e}var wD={closed:!0,next:_p,error:CD,complete:_p},wg=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Xw(e){return e}function TD(e){return e.length===0?Xw:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var Mt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=xD(t)?t:new Rp(t,n,r);return Nc(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=eb(n),new n(function(i,o){var s=new Rp({next:function(a){try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[wg]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return TD(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=eb(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function eb(e){var t;return(t=e??Qw.Promise)!==null&&t!==void 0?t:Promise}function ED(e){return e&&St(e.next)&&St(e.error)&&St(e.complete)}function xD(e){return e&&e instanceof Cg||ED(e)&&Jw(e)}function PD(e){return St(e?.lift)}function qr(e){return function(t){if(PD(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function po(e,t,n,r,i){return new _D(e,t,n,r,i)}var _D=function(e){Kr(t,e);function t(n,r,i,o,s,a){var l=e.call(this,n)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Cg),RD=Sg(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Oi=function(e){Kr(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new tb(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new RD},t.prototype.next=function(n){var r=this;Nc(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Ps(r.currentObservers),a=s.next();!a.done;a=s.next()){var l=a.value;l.next(n)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Nc(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Nc(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?qw:(this.currentObservers=null,a.push(n),new ml(function(){r.currentObservers=null,Eu(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new Mt;return n.source=this,n},t.create=function(n,r){return new tb(n,r)},t}(Mt),tb=function(e){Kr(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:qw},t}(Oi),Zw=function(e){Kr(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(Oi),ID={now:function(){return Date.now()},delegate:void 0},OD=function(e){Kr(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(ml),nb={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Tu([e,t],wu(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},MD=function(e){Kr(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),nb.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&nb.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Eu(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(OD),rb=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=ID.now,e}(),ND=function(e){Kr(t,e);function t(n,r){r===void 0&&(r=rb.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(rb);new ND(MD);var DD=new Mt(function(e){return e.complete()});function LD(e){return e&&St(e.schedule)}function eT(e){return e[e.length-1]}function Tg(e){return LD(eT(e))?e.pop():void 0}function AD(e,t){return typeof eT(e)=="number"?e.pop():t}var tT=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function nT(e){return St(e?.then)}function rT(e){return St(e[wg])}function iT(e){return Symbol.asyncIterator&&St(e?.[Symbol.asyncIterator])}function oT(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function UD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sT=UD();function aT(e){return St(e?.[sT])}function lT(e){return vD(this,arguments,function(){var t,n,r,i;return Kw(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,hs(t.read())];case 3:return n=o.sent(),r=n.value,i=n.done,i?[4,hs(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,hs(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function cT(e){return St(e?.getReader)}function So(e){if(e instanceof Mt)return e;if(e!=null){if(rT(e))return jD(e);if(tT(e))return $D(e);if(nT(e))return FD(e);if(iT(e))return uT(e);if(aT(e))return zD(e);if(cT(e))return VD(e)}throw oT(e)}function jD(e){return new Mt(function(t){var n=e[wg]();if(St(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $D(e){return new Mt(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function FD(e){return new Mt(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Yw)})}function zD(e){return new Mt(function(t){var n,r;try{for(var i=Ps(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function uT(e){return new Mt(function(t){BD(e,t).catch(function(n){return t.error(n)})})}function VD(e){return uT(lT(e))}function BD(e,t){var n,r,i,o;return gD(this,void 0,void 0,function(){var s,a;return Kw(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=yD(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function no(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function dT(e,t){return t===void 0&&(t=0),qr(function(n,r){n.subscribe(po(r,function(i){return no(r,e,function(){return r.next(i)},t)},function(){return no(r,e,function(){return r.complete()},t)},function(i){return no(r,e,function(){return r.error(i)},t)}))})}function fT(e,t){return t===void 0&&(t=0),qr(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function WD(e,t){return So(e).pipe(fT(t),dT(t))}function HD(e,t){return So(e).pipe(fT(t),dT(t))}function GD(e,t){return new Mt(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function KD(e,t){return new Mt(function(n){var r;return no(n,t,function(){r=e[sT](),no(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return St(r?.return)&&r.return()}})}function hT(e,t){if(!e)throw new Error("Iterable cannot be null");return new Mt(function(n){no(n,t,function(){var r=e[Symbol.asyncIterator]();no(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function qD(e,t){return hT(lT(e),t)}function JD(e,t){if(e!=null){if(rT(e))return WD(e,t);if(tT(e))return GD(e,t);if(nT(e))return HD(e,t);if(iT(e))return hT(e,t);if(aT(e))return KD(e,t);if(cT(e))return qD(e,t)}throw oT(e)}function pT(e,t){return t?JD(e,t):So(e)}Sg(function(e){return function(t){t===void 0&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function Nt(e,t){return qr(function(n,r){var i=0;n.subscribe(po(r,function(o){r.next(e.call(t,o,i++))}))})}function QD(e,t,n,r,i,o,s,a){var l=[],c=0,u=0,d=!1,h=function(){d&&!l.length&&!c&&t.complete()},p=function(g){return c<r?v(g):l.push(g)},v=function(g){c++;var b=!1;So(n(g,u++)).subscribe(po(t,function(m){t.next(m)},function(){b=!0},void 0,function(){if(b)try{c--;for(var m=function(){var y=l.shift();s||v(y)};l.length&&c<r;)m();h()}catch(y){t.error(y)}}))};return e.subscribe(po(t,p,function(){d=!0,h()})),function(){}}function mT(e,t,n){return n===void 0&&(n=1/0),St(t)?mT(function(r,i){return Nt(function(o,s){return t(r,o,i,s)})(So(e(r,i)))},n):(typeof t=="number"&&(n=t),qr(function(r,i){return QD(r,i,e,n)}))}function gT(e){return e===void 0&&(e=1/0),mT(Xw,e)}function YD(){return gT(1)}function Ip(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return YD()(pT(e,Tg(e)))}function XD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Tg(e),r=AD(e,1/0),i=e;return i.length?i.length===1?So(i[0]):gT(r)(pT(i,n)):DD}function vT(e,t){return qr(function(n,r){var i=0;n.subscribe(po(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function ZD(e,t,n,r,i){return function(o,s){var a=n,l=t,c=0;o.subscribe(po(s,function(u){var d=c++;l=a?e(l,u,d):(a=!0,u),s.next(l)},i))}}function e4(e){return qr(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}function t4(e,t){return qr(ZD(e,t,arguments.length>=2,!0))}function Xn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Tg(e);return qr(function(r,i){(n?Ip(e,r,n):Ip(e,r)).subscribe(i)})}function ib(e){return qr(function(t,n){So(e).subscribe(po(n,function(){return n.complete()},_p)),!n.closed&&t.subscribe(n)})}var n4=Object.defineProperty,r4=Object.defineProperties,i4=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertySymbols,o4=Object.prototype.hasOwnProperty,s4=Object.prototype.propertyIsEnumerable,sb=(e,t,n)=>t in e?n4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qi=(e,t)=>{for(var n in t||(t={}))o4.call(t,n)&&sb(e,n,t[n]);if(ob)for(var n of ob(t))s4.call(t,n)&&sb(e,n,t[n]);return e},Xl=(e,t)=>r4(e,i4(t)),gn=(e,t,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(e,t)).next())}),yT="lk";function gd(e){return typeof e>"u"?!1:a4(e)||l4(e)}function a4(e){var t;return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof((t=e.publication)==null?void 0:t.track)<"u":!1}function l4(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u":!1}function c4(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u":!1}function Eg(e){if(typeof e=="string"||typeof e=="number")return`${e}`;if(c4(e))return`${e.participant.identity}_${e.source}_placeholder`;if(gd(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}function u4(e){return e instanceof Sp}function d4(e,t){return gn(this,null,function*(){const{x:n,y:r}=yield fD(e,t,{placement:"top",middleware:[cD(6),dD(),uD({padding:5})]});return{x:n,y:r}})}function f4(e,t){return!e.contains(t.target)}var h4=[U.ConnectionStateChanged,U.RoomMetadataChanged,U.ActiveSpeakersChanged,U.ConnectionQualityChanged,U.ParticipantConnected,U.ParticipantDisconnected,U.ParticipantPermissionsChanged,U.ParticipantMetadataChanged,U.ParticipantNameChanged,U.ParticipantAttributesChanged,U.TrackMuted,U.TrackUnmuted,U.TrackPublished,U.TrackUnpublished,U.TrackStreamStateChanged,U.TrackSubscriptionFailed,U.TrackSubscriptionPermissionChanged,U.TrackSubscriptionStatusChanged],p4=[...h4,U.LocalTrackPublished,U.LocalTrackUnpublished];$.TrackPublished,$.TrackUnpublished,$.TrackMuted,$.TrackUnmuted,$.TrackStreamStateChanged,$.TrackSubscribed,$.TrackUnsubscribed,$.TrackSubscriptionPermissionChanged,$.TrackSubscriptionFailed,$.LocalTrackPublished,$.LocalTrackUnpublished;var m4=[$.ConnectionQualityChanged,$.IsSpeakingChanged,$.ParticipantMetadataChanged,$.ParticipantPermissionsChanged,$.TrackMuted,$.TrackUnmuted,$.TrackPublished,$.TrackUnpublished,$.TrackStreamStateChanged,$.TrackSubscriptionFailed,$.TrackSubscriptionPermissionChanged,$.TrackSubscriptionStatusChanged];[...m4,$.LocalTrackPublished,$.LocalTrackUnpublished];var _e=mD.getLogger("lk-components-js");_e.setDefaultLevel("WARN");function g4(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var v4=[],y4={showChat:!1,unreadMessages:0,showSettings:!1};function bT(e){return typeof e=="object"}function kT(e){return Array.isArray(e)&&e.filter(bT).length>0}function Mn(e){return`${yT}-${e}`}function b4(e){const t=Op(e),n=ST(e.participant).pipe(Nt(()=>Op(e)),Xn(t));return{className:Mn(e.source===L.Source.Camera||e.source===L.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function Op(e){if(gd(e))return e.publication;{const{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(i=>i.source===t&&i.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw new Error("At least one of source and name needs to be defined")}}function xg(e,...t){return new Mt(n=>{const r=()=>{n.next(e)};return t.forEach(i=>{e.on(i,r)}),()=>{t.forEach(i=>{e.off(i,r)})}}).pipe(Xn(e))}function vd(e,t){return new Mt(n=>{const r=(...i)=>{n.next(i)};return e.on(t,r),()=>{e.off(t,r)}})}function k4(e){return vd(e,U.ConnectionStateChanged).pipe(Nt(([t])=>t),Xn(e.state))}function S4(e,t,n=!0){var r;const i=()=>gn(this,null,function*(){try{const a=yield bu.getLocalDevices(e,n);o.next(a)}catch(a){t?.(a)}}),o=new Oi,s=o.pipe(e4(()=>{var a;(a=navigator?.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator?.mediaDevices)==null||r.addEventListener("devicechange",i)}return Ip(bu.getLocalDevices(e,n).catch(a=>(t?.(a),[])),s)}function C4(e){return vd(e,U.DataReceived)}function w4(e){return vd(e,U.ChatMessage)}function T4(e){return xg(e,U.AudioPlaybackStatusChanged).pipe(Nt(t=>({canPlayAudio:t.canPlaybackAudio})))}function E4(e){return xg(e,U.VideoPlaybackStatusChanged).pipe(Nt(t=>({canPlayVideo:t.canPlaybackVideo})))}function x4(e,t){return vd(e,U.ActiveDeviceChanged).pipe(vT(([n])=>n===t),Nt(([n,r])=>(_e.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),Xn(e.getActiveDevice(t)))}function Pg(e,...t){return new Mt(n=>{const r=()=>{n.next(e)};return t.forEach(i=>{e.on(i,r)}),()=>{t.forEach(i=>{e.off(i,r)})}}).pipe(Xn(e))}function ST(e){return Pg(e,$.TrackMuted,$.TrackUnmuted,$.ParticipantPermissionsChanged,$.TrackPublished,$.TrackUnpublished,$.LocalTrackPublished,$.LocalTrackUnpublished,$.MediaDevicesError,$.TrackSubscriptionStatusChanged).pipe(Nt(t=>{const{isMicrophoneEnabled:n,isCameraEnabled:r,isScreenShareEnabled:i}=t,o=t.getTrackPublication(L.Source.Microphone),s=t.getTrackPublication(L.Source.Camera);return{isCameraEnabled:r,isMicrophoneEnabled:n,isScreenShareEnabled:i,cameraTrack:s,microphoneTrack:o,participant:t}}))}function P4(e){return e?Pg(e,$.ParticipantMetadataChanged,$.ParticipantNameChanged).pipe(Nt(({name:t,identity:n,metadata:r})=>({name:t,identity:n,metadata:r})),Xn({name:e.name,identity:e.identity,metadata:e.metadata})):void 0}function _4(e){return _g(e,$.ConnectionQualityChanged).pipe(Nt(([t])=>t),Xn(e.connectionQuality))}function _g(e,t){return new Mt(n=>{const r=(...i)=>{n.next(i)};return e.on(t,r),()=>{e.off(t,r)}})}function CT(e){var t,n,r,i;return Pg(e.participant,$.TrackMuted,$.TrackUnmuted,$.TrackSubscribed,$.TrackUnsubscribed,$.LocalTrackPublished,$.LocalTrackUnpublished).pipe(Nt(o=>{var s,a;const l=(s=e.publication)!=null?s:o.getTrackPublication(e.source);return(a=l?.isMuted)!=null?a:!0}),Xn((i=(r=(t=e.publication)==null?void 0:t.isMuted)!=null?r:(n=e.participant.getTrackPublication(e.source))==null?void 0:n.isMuted)!=null?i:!0))}function R4(e){return _g(e,$.IsSpeakingChanged).pipe(Nt(([t])=>t))}function I4(e){return _g(e,$.ParticipantPermissionsChanged).pipe(Nt(()=>e.permissions),Xn(e.permissions))}function O4(e,t,n,r,i){const{localParticipant:o}=t,s=(u,d)=>{let h=!1;switch(u){case L.Source.Camera:h=d.isCameraEnabled;break;case L.Source.Microphone:h=d.isMicrophoneEnabled;break;case L.Source.ScreenShare:h=d.isScreenShareEnabled;break}return h},a=ST(o).pipe(Nt(u=>s(e,u.participant)),Xn(s(e,o))),l=new Oi,c=(u,d)=>gn(this,null,function*(){try{switch(d??(d=n),l.next(!0),e){case L.Source.Camera:return yield o.setCameraEnabled(u??!o.isCameraEnabled,d,r),o.isCameraEnabled;case L.Source.Microphone:return yield o.setMicrophoneEnabled(u??!o.isMicrophoneEnabled,d,r),o.isMicrophoneEnabled;case L.Source.ScreenShare:return yield o.setScreenShareEnabled(u??!o.isScreenShareEnabled,d,r),o.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(h){if(i&&h instanceof Error){i?.(h);return}else throw h}finally{l.next(!1)}});return{className:Mn("button"),toggle:c,enabledObserver:a,pendingObserver:l.asObservable()}}function M4(){let e=!1;const t=new Oi,n=new Oi,r=i=>gn(this,null,function*(){n.next(!0),e=i??!e,t.next(e),n.next(!1)});return{className:Mn("button"),toggle:r,enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}function N4(e,t,n){const r=new Zw(void 0),i=t?x4(t,e):r.asObservable(),o=(s,...a)=>gn(this,[s,...a],function*(l,c={}){var u,d,h;if(t){_e.debug(`Switching active device of kind "${e}" with id ${l}.`),yield t.switchActiveDevice(e,l,c.exact);const p=(u=t.getActiveDevice(e))!=null?u:l;p!==l&&l!=="default"&&_e.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${p}) instead.`);let v;e==="audioinput"?v=(d=t.localParticipant.getTrackPublication(L.Source.Microphone))==null?void 0:d.track:e==="videoinput"&&(v=(h=t.localParticipant.getTrackPublication(L.Source.Camera))==null?void 0:h.track);const g=l==="default"&&!v||l==="default"&&v?.mediaStreamTrack.label.startsWith("Default");r.next(g?l:p)}else if(n){yield n.setDeviceId(c.exact?{exact:l}:l);const p=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:p)}else r.value!==l&&(_e.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:Mn("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}}function D4(e){const t=n=>{e.disconnect(n)};return{className:Mn("disconnect-button"),disconnect:t}}function L4(e){const t=Mn("connection-quality"),n=_4(e);return{className:t,connectionQualityObserver:n}}function A4(e){let t="track-muted-indicator-camera";switch(e.source){case L.Source.Camera:t="track-muted-indicator-camera";break;case L.Source.Microphone:t="track-muted-indicator-microphone";break}const n=Mn(t),r=CT(e);return{className:n,mediaMutedObserver:r}}function U4(e){return{className:"lk-participant-name",infoObserver:P4(e)}}function j4(){return{className:Mn("participant-tile")}}var ab={CHAT:"lk-chat-topic",CHAT_UPDATE:"lk-chat-update-topic"};function Mp(e,t){return gn(this,arguments,function*(n,r,i={}){const{reliable:o,destinationIdentities:s,topic:a}=i;yield n.publishData(r,{destinationIdentities:s,topic:a,reliable:o})})}function $4(e,t,n){const r=Array.isArray(t)?t:[t],i=C4(e).pipe(vT(([,,,a])=>t===void 0||a!==void 0&&r.includes(a)),Nt(([a,l,,c])=>{const u={payload:a,topic:c,from:l};return n?.(u),u}));let o;const s=new Mt(a=>{o=a});return{messageObservable:i,isSendingObservable:s,send:(a,...l)=>gn(this,[a,...l],function*(c,u={}){o.next(!0);try{yield Mp(e.localParticipant,c,Qi({topic:r[0]},u))}finally{o.next(!1)}})}}function F4(e){return{chatObservable:w4(e),send:t=>gn(this,null,function*(){return yield e.localParticipant.sendChatMessage(t)}),edit:(t,n)=>gn(this,null,function*(){return yield e.localParticipant.editChatMessage(t,n)})}}var z4=new TextEncoder,V4=new TextDecoder,Zl=new Map,B4=e=>z4.encode(JSON.stringify(e)),W4=e=>JSON.parse(V4.decode(e));function H4(e,t){var n,r;const i=new Oi,o=()=>{var k,P,_;return((k=e.serverInfo)==null?void 0:k.edition)===1||!!((P=e.serverInfo)!=null&&P.version)&&Es((_=e.serverInfo)==null?void 0:_.version,"1.17.2")>0},{messageDecoder:s,messageEncoder:a,channelTopic:l,updateChannelTopic:c}=t??{},u=l??ab.CHAT,d=c??ab.CHAT_UPDATE;let h=!1;Zl.has(e)||(h=!0);const p=(n=Zl.get(e))!=null?n:new Map,v=(r=p.get(u))!=null?r:new Oi;if(p.set(u,v),Zl.set(e,p),h){const{messageObservable:k}=$4(e,[u,d]);k.pipe(ib(i)).subscribe(v)}const{chatObservable:g,send:b}=F4(e),m=s??W4,y=XD(v.pipe(Nt(k=>{const P=m(k.payload),_=Xl(Qi({},P),{from:k.from});if(!G4(_))return _})),g.pipe(Nt(([k,P])=>Xl(Qi({},k),{from:P})))).pipe(t4((k,P)=>{var _;if(!P)return k;if("id"in P&&k.find(M=>{var A,Z;return((A=M.from)==null?void 0:A.identity)===((Z=P.from)==null?void 0:Z.identity)&&M.id===P.id})){const M=k.findIndex(A=>A.id===P.id);if(M>-1){const A=k[M];k[M]=Xl(Qi({},P),{timestamp:A.timestamp,editTimestamp:(_=P.editTimestamp)!=null?_:P.timestamp})}return[...k]}return[...k,P]},[]),ib(i)),C=new Zw(!1),S=a??B4,w=k=>gn(this,null,function*(){C.next(!0);try{const P=yield b(k),_=S(Xl(Qi({},P),{ignore:o()}));return yield Mp(e.localParticipant,_,{reliable:!0,topic:u}),P}finally{C.next(!1)}}),T=(k,P)=>gn(this,null,function*(){const _=Date.now(),M=typeof P=="string"?{id:P,message:"",timestamp:_}:P;C.next(!0);try{const A=yield e.localParticipant.editChatMessage(k,M),Z=S(A);return yield Mp(e.localParticipant,Z,{topic:d,reliable:!0}),A}finally{C.next(!1)}});function E(){i.next(),i.complete(),Zl.delete(e)}return e.once(U.Disconnected,E),{messageObservable:y,isSendingObservable:C,send:w,update:T}}function G4(e){return e.ignore==!0}function K4(){const e=t=>gn(this,null,function*(){_e.info("Start Audio for room: ",t),yield t.startAudio()});return{className:Mn("start-audio-button"),roomAudioPlaybackAllowedObservable:T4,handleStartAudioPlayback:e}}function q4(){const e=t=>gn(this,null,function*(){_e.info("Start Video for room: ",t),yield t.startVideo()});return{className:Mn("start-audio-button"),roomVideoPlaybackAllowedObservable:E4,handleStartVideoPlayback:e}}function J4(){return{className:[Mn("button"),Mn("chat-toggle")].join(" ")}}function Q4(){return{className:"lk-room-container"}}function lb(e,t,n=!0){const r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],i=[];return r.forEach(o=>{t.forEach(s=>{const a=Array.from(o.trackPublications.values()).filter(l=>l.source===s&&(!n||l.track)).map(l=>({participant:o,publication:l,source:l.source}));i.push(...a)})}),{trackReferences:i,participants:r}}function Y4(e,t,n){var r,i;const o=(r=n.additionalRoomEvents)!=null?r:p4,s=(i=n.onlySubscribed)!=null?i:!0,a=Array.from(new Set([U.ParticipantConnected,U.ParticipantDisconnected,U.ConnectionStateChanged,U.LocalTrackPublished,U.LocalTrackUnpublished,U.TrackPublished,U.TrackUnpublished,U.TrackSubscriptionStatusChanged,...o]).values());return xg(e,...a).pipe(Nt(l=>{const c=lb(l,t,s);return _e.debug(`TrackReference[] was updated. (length ${c.trackReferences.length})`,c),c}),Xn(lb(e,t,s)))}function X4(e,t){if(typeof localStorage>"u"){_e.error("Local storage is not available.");return}try{if(t){const n=Object.fromEntries(Object.entries(t).filter(([,r])=>r!==""));localStorage.setItem(e,JSON.stringify(n))}}catch(n){_e.error(`Error setting item to local storage: ${n}`)}}function Z4(e){if(typeof localStorage>"u"){_e.error("Local storage is not available.");return}try{const t=localStorage.getItem(e);if(!t){_e.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(t){_e.error(`Error getting item from local storage: ${t}`);return}}function eL(e){return{load:()=>Z4(e),save:t=>X4(e,t)}}var tL=`${yT}-user-choices`,oa={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:""},{load:nL,save:rL}=eL(tL);function iL(e,t=!1){t!==!0&&rL(e)}function oL(e,t=!1){var n,r,i,o,s;const a={videoEnabled:(n=e?.videoEnabled)!=null?n:oa.videoEnabled,audioEnabled:(r=e?.audioEnabled)!=null?r:oa.audioEnabled,videoDeviceId:(i=e?.videoDeviceId)!=null?i:oa.videoDeviceId,audioDeviceId:(o=e?.audioDeviceId)!=null?o:oa.audioDeviceId,username:(s=e?.username)!=null?s:oa.username};if(t)return a;{const l=nL();return Qi(Qi({},a),l??{})}}function sL(e,t){if(t.msg==="show_chat")return{...e,showChat:!0,unreadMessages:0};if(t.msg==="hide_chat")return{...e,showChat:!1};if(t.msg==="toggle_chat"){const n={...e,showChat:!e.showChat};return n.showChat===!0&&(n.unreadMessages=0),n}else return t.msg==="unread_msg"?{...e,unreadMessages:t.count}:t.msg==="toggle_settings"?{...e,showSettings:!e.showSettings}:{...e}}function aL(e,t){return t.msg==="set_pin"?[t.trackReference]:t.msg==="clear_pin"?[]:{...e}}const Rg=f.createContext(void 0);function wT(){const e=f.useContext(Rg);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function lL(e){const[t,n]=f.useReducer(aL,v4),[r,i]=f.useReducer(sL,y4);return e??{pin:{dispatch:n,state:t},widget:{dispatch:i,state:r}}}function TT(){return f.useContext(Rg)}const Ig=f.createContext(void 0);function Og(){return f.useContext(Ig)}function yd(e){const t=Og(),n=e??t;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const cL=f.createContext(void 0);function uL(){return f.useContext(cL)}function bd(e){const t=uL(),n=Og(),r=e??t??n?.participant;if(!r)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}const Mg=f.createContext(void 0);function kd(){const e=f.useContext(Mg);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function Sd(){return f.useContext(Mg)}function Cd(e){const t=Sd(),n=e??t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}const dL=f.createContext(void 0);function ET(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ET(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xT(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ET(e))&&(r&&(r+=" "),r+=t);return r}function fL(...e){return(...t)=>{for(const n of e)if(typeof n=="function")try{n(...t)}catch(r){console.error(r)}}}function Jr(...e){const t={...e[0]};for(let n=1;n<e.length;n++){const r=e[n];for(const i in r){const o=t[i],s=r[i];typeof o=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?t[i]=fL(o,s):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?t[i]=xT(o,s):t[i]=s!==void 0?s:o}}return t}const hL={connect:!0,audio:!1,video:!1};function pL(e){const{token:t,serverUrl:n,options:r,room:i,connectOptions:o,connect:s,audio:a,video:l,screen:c,onConnected:u,onDisconnected:d,onError:h,onMediaDeviceFailure:p,onEncryptionError:v,simulateParticipants:g,...b}={...hL,...e};r&&i&&_e.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[m,y]=f.useState();f.useEffect(()=>{y(i??new bu(r))},[i]);const C=f.useMemo(()=>{const{className:S}=Q4();return Jr(b,{className:S})},[b]);return f.useEffect(()=>{if(!m)return;const S=()=>{const E=m.localParticipant;_e.debug("trying to publish local tracks"),Promise.all([E.setMicrophoneEnabled(!!a,typeof a!="boolean"?a:void 0),E.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),E.setScreenShareEnabled(!!c,typeof c!="boolean"?c:void 0)]).catch(k=>{_e.warn(k),h?.(k)})},w=E=>{const k=tl.getFailure(E);p?.(k)},T=E=>{v?.(E)};return m.on(U.SignalConnected,S).on(U.MediaDevicesError,w).on(U.EncryptionError,T),()=>{m.off(U.SignalConnected,S).off(U.MediaDevicesError,w).off(U.EncryptionError,T)}},[m,a,l,c,h,v,p]),f.useEffect(()=>{if(m){if(g){m.simulateParticipants({participants:{count:g},publish:{audio:!0,useRealTracks:!0}});return}if(!t){_e.debug("no token yet");return}if(!n){_e.warn("no livekit url provided"),h?.(Error("no livekit url provided"));return}s?(_e.debug("connecting"),m.connect(n,t,o).catch(S=>{_e.warn(S),h?.(S)})):(_e.debug("disconnecting because connect is false"),m.disconnect())}},[s,t,JSON.stringify(o),m,h,n,g]),f.useEffect(()=>{if(!m)return;const S=w=>{switch(w){case Te.Disconnected:d&&d();break;case Te.Connected:u&&u();break}};return m.on(U.ConnectionStateChanged,S),()=>{m.off(U.ConnectionStateChanged,S)}},[t,u,d,m]),f.useEffect(()=>{if(m)return()=>{_e.info("disconnecting on onmount"),m.disconnect()}},[m]),{room:m,htmlProps:C}}const mL=f.forwardRef(function(e,t){const{room:n,htmlProps:r}=pL(e);return f.createElement("div",{ref:t,...r},n&&f.createElement(Mg.Provider,{value:n},f.createElement(dL.Provider,{value:e.featureFlags},e.children)))});function vn(e,t,n=!0){const[r,i]=f.useState(t);return f.useEffect(()=>{if(n&&i(t),typeof window>"u"||!e)return;const o=e.subscribe(i);return()=>o.unsubscribe()},[e,n]),r}function gL(e){const t=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=f.useState(t(e));function i(){r(t(e))}return f.useEffect(()=>{const o=window.matchMedia(e);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[e]),n}function vL(e={}){const t=bd(e.participant),{className:n,connectionQualityObserver:r}=f.useMemo(()=>L4(t),[t]),i=vn(r,Tn.Unknown);return{className:n,quality:i}}function PT(e){const t=Cd(e),n=f.useMemo(()=>k4(t),[t]);return vn(n,t.state)}function yL(e){const t=kd(),n=PT(t);return{buttonProps:f.useMemo(()=>{const{className:r,disconnect:i}=D4(t);return Jr(e,{className:r,onClick:()=>i(e.stopTracks??!0),disabled:n===Te.Disconnected})},[t,e,n])}}function bL(e){if(e.publication instanceof rl){const t=e.publication.track;if(t){const{facingMode:n}=IN(t);return n}}return"undefined"}function cb(e,t={}){var n,r;const i=typeof e=="string"?t.participant:e.participant,o=bd(i),s=typeof e=="string"?{participant:o,source:e}:e,[a,l]=f.useState(!!((n=s.publication)!=null&&n.isMuted||(r=o.getTrackPublication(s.source))!=null&&r.isMuted));return f.useEffect(()=>{const c=CT(s).subscribe(l);return()=>c.unsubscribe()},[Eg(s)]),a}function kL(e){const t=bd(e),n=f.useMemo(()=>R4(t),[t]);return vn(n,t.isSpeaking)}function SL(){const e=kd(),t=f.useMemo(()=>I4(e.localParticipant),[e]);return vn(t,e.localParticipant.permissions)}function CL({kind:e,room:t,track:n,requestPermissions:r,onError:i}){const o=Sd(),s=f.useMemo(()=>S4(e,i,r),[e,r,i]),a=vn(s,[]),[l,c]=f.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:h}=f.useMemo(()=>N4(e,t??o,n),[e,t,o,n]);return f.useEffect(()=>{const p=d.subscribe(v=>{_e.info("setCurrentDeviceId",v),v&&c(v)});return()=>{p?.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:l,setActiveMediaDevice:h}}function wL({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){const i=yd(e),o=f.useMemo(()=>{const{className:h}=j4();return Jr(r,{className:h,onClick:p=>{var v;if((v=r.onClick)==null||v.call(r,p),typeof t=="function"){const g=i.publication??i.participant.getTrackPublication(i.source);t({participant:i.participant,track:g})}}})},[r,t,i.publication,i.source,i.participant]),s=i.participant.getTrackPublication(L.Source.Microphone),a=f.useMemo(()=>({participant:i.participant,source:L.Source.Microphone,publication:s}),[s,i.participant]),l=cb(i),c=cb(a),u=kL(i.participant),d=bL(i);return{elementProps:{"data-lk-audio-muted":c,"data-lk-video-muted":l,"data-lk-speaking":n===!0?!1:u,"data-lk-local-participant":i.participant.isLocal,"data-lk-source":i.source,"data-lk-facing-mode":d,...o}}}function TL({room:e,props:t}){const n=Cd(e),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=f.useMemo(()=>K4(),[]),s=f.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=vn(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:f.useMemo(()=>Jr(t,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[t,r,a,o,n]),canPlayAudio:a}}function EL({room:e,props:t}){const n=Cd(e),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=f.useMemo(()=>q4(),[]),s=f.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=vn(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:f.useMemo(()=>Jr(t,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[t,r,a,o,n]),canPlayVideo:a}}function xL({props:e}){const{dispatch:t,state:n}=wT().widget,{className:r}=f.useMemo(()=>J4(),[]);return{mergedProps:f.useMemo(()=>Jr(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}function PL(e){var t,n;const r=yd(e),{className:i,mediaMutedObserver:o}=f.useMemo(()=>A4(r),[Eg(r)]);return{isMuted:vn(o,!!((t=r.publication)!=null&&t.isMuted||(n=r.participant.getTrackPublication(r.source))!=null&&n.isMuted)),className:i}}function _L({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:i,onDeviceError:o,...s}){var a;const l=Sd(),c=(a=l?.localParticipant)==null?void 0:a.getTrackPublication(e),u=f.useRef(!1),{toggle:d,className:h,pendingObserver:p,enabledObserver:v}=f.useMemo(()=>l?O4(e,l,r,i,o):M4(),[l,e,JSON.stringify(r),i]),g=vn(p,!1),b=vn(v,n??!!(c!=null&&c.isEnabled));f.useEffect(()=>{t?.(b,u.current),u.current=!1},[b,t]),f.useEffect(()=>{n!==void 0&&(_e.debug("forcing initial toggle state",e,n),d(n))},[]);const m=f.useMemo(()=>Jr(s,{className:h}),[s,h]),y=f.useCallback(C=>{var S;u.current=!0,d().catch(()=>u.current=!1),(S=s.onClick)==null||S.call(s,C)},[s,d]);return{toggle:d,enabled:b,pending:g,track:c,buttonProps:{...m,"aria-pressed":b,"data-lk-source":e,"data-lk-enabled":b,disabled:g,onClick:y}}}function RL(e=[L.Source.Camera,L.Source.Microphone,L.Source.ScreenShare,L.Source.ScreenShareAudio,L.Source.Unknown],t={}){const n=Cd(t.room),[r,i]=f.useState([]),[o,s]=f.useState([]),a=f.useMemo(()=>e.map(l=>bT(l)?l.source:l),[JSON.stringify(e)]);return f.useEffect(()=>{const l=Y4(n,a,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:c,participants:u})=>{_e.debug("setting track bundles",c,u),i(c),s(u)});return()=>l.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),f.useMemo(()=>{if(kT(e)){const l=OL(e,o),c=Array.from(r);return o.forEach(u=>{l.has(u.identity)&&(l.get(u.identity)??[]).forEach(d=>{if(r.find(({participant:p,publication:v})=>u.identity===p.identity&&v.source===d))return;_e.debug(`Add ${d} placeholder for participant ${u.identity}.`);const h={participant:u,source:d};c.push(h)})}),c}else return r},[r,o,e])}function IL(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}function OL(e,t){const n=new Map;if(kT(e)){const r=e.filter(i=>i.withPlaceholder).map(i=>i.source);t.forEach(i=>{const o=i.getTrackPublications().map(a=>{var l;return(l=a.track)==null?void 0:l.source}).filter(a=>a!==void 0),s=Array.from(IL(new Set(r),new Set(o)));s.length>0&&n.set(i.identity,s)})}return n}function ML(e){const t=kd(),n=PT(t),r=f.useMemo(()=>n===Te.Disconnected,[n]),i=f.useMemo(()=>H4(t,e),[t,e,r]),o=vn(i.isSendingObservable,!1),s=vn(i.messageObservable,[]);return{send:i.send,update:i.update,chatMessages:s,isSending:o}}function NL(e={}){const[t,n]=f.useState(oL(e.defaults,e.preventLoad??!1)),r=f.useCallback(l=>{n(c=>({...c,audioEnabled:l}))},[]),i=f.useCallback(l=>{n(c=>({...c,videoEnabled:l}))},[]),o=f.useCallback(l=>{n(c=>({...c,audioDeviceId:l}))},[]),s=f.useCallback(l=>{n(c=>({...c,videoDeviceId:l}))},[]),a=f.useCallback(l=>{n(c=>({...c,username:l}))},[]);return f.useEffect(()=>{iL(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:i,saveAudioInputDeviceId:o,saveVideoInputDeviceId:s,saveUsername:a}}const DL=e=>{const t=n=>{let r=1-Math.max(-100,Math.min(-10,n))*-1/100;return r=Math.sqrt(r),r};return e.map(n=>n===-1/0?0:t(n))},LL={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function AL(e,t={}){var n;const r=e instanceof L?e:(n=e?.publication)==null?void 0:n.track,i={...LL,...t},[o,s]=f.useState(new Array(i.bands).fill(0));return f.useEffect(()=>{if(!r||!(r!=null&&r.mediaStream))return;const{analyser:a,cleanup:l}=D3(r,i.analyserOptions),c=a.frequencyBinCount,u=new Float32Array(c),d=setInterval(()=>{a.getFloatFrequencyData(u);let h=new Float32Array(u.length);for(let b=0;b<u.length;b++)h[b]=u[b];h=h.slice(t.loPass,t.hiPass);const p=DL(h),v=Math.ceil(p.length/i.bands),g=[];for(let b=0;b<i.bands;b++){const m=p.slice(b*v,(b+1)*v).reduce((y,C)=>y+=C,0);g.push(m/v)}s(g)},i.updateInterval);return()=>{l(),clearInterval(d)}},[r,r?.mediaStream,JSON.stringify(t)]),o}const _T=f.forwardRef(function(e,t){const{mergedProps:n}=xL({props:e});return f.createElement("button",{ref:t,...n},e.children)}),UL=f.forwardRef(function(e,t){const{buttonProps:n}=yL(e);return f.createElement("button",{ref:t,...n},e.children)}),jL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},f.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),f.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),$L=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},f.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),FL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),zL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},f.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),f.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),VL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},f.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),BL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},f.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),f.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),WL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},f.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),f.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),HL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},f.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),f.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),GL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),KL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("g",{opacity:.25},f.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),qL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("g",{opacity:.25},f.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),f.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),JL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},f.createElement("g",{opacity:.25},f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),f.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),QL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},f.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),f.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),YL=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},f.createElement("g",{fill:"currentColor"},f.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),f.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"})));function XL(e){return e!==void 0}function Co(...e){return Jr(...e.filter(XL))}function Ng(e,t,n){return f.Children.map(e,r=>f.isValidElement(r)&&f.Children.only(e)?(r.props.class&&(t??(t={}),t.class=xT(r.props.class,t.class),t.style={...r.props.style,...t.style}),f.cloneElement(r,{...t,key:n})):r)}function ZL(e){var t,n;if(typeof window<"u"&&typeof process<"u"&&(((t=process==null?void 0:process.env)==null?void 0:t.NODE_ENV)==="dev"||((n=process==null?void 0:process.env)==null?void 0:n.NODE_ENV)==="development")){const r=document.querySelector(".lk-room-container");r&&!getComputedStyle(r).getPropertyValue("--lk-has-imported-styles")&&_e.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}const Uf=f.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:i,exactMatch:o,track:s,requestPermissions:a,onError:l,...c},u){const d=Sd(),h=f.useCallback(S=>{d&&d.emit(U.MediaDevicesError,S),l?.(S)},[d,l]),{devices:p,activeDeviceId:v,setActiveMediaDevice:g,className:b}=CL({kind:e,room:d,track:s,requestPermissions:a,onError:h});f.useEffect(()=>{t!==void 0&&g(t)},[g]),f.useEffect(()=>{typeof r=="function"&&r(p)},[r,p]),f.useEffect(()=>{v&&v!==""&&n?.(v)},[v]);const m=async S=>{try{await g(S,{exact:o})}catch(w){if(w instanceof Error)i?.(w);else throw w}},y=f.useMemo(()=>Co(c,{className:b},{className:"lk-list"}),[b,c]);function C(S,w,T){return S===w||T===0&&w==="default"}return f.createElement("ul",{ref:u,...y},p.map((S,w)=>f.createElement("li",{key:S.deviceId,id:S.deviceId,"data-lk-active":C(S.deviceId,v,w),"aria-selected":C(S.deviceId,v,w),role:"option"},f.createElement("button",{className:"lk-button",onClick:()=>m(S.deviceId)},S.label))))}),e6=f.forwardRef(function({label:e,...t},n){const r=kd(),{mergedProps:i,canPlayAudio:o}=TL({room:r,props:t}),{mergedProps:s,canPlayVideo:a}=EL({room:r,props:i}),{style:l,...c}=s;return l.display=o&&a?"none":"block",f.createElement("button",{ref:n,style:l,...c},e??`Start ${o?"Video":"Audio"}`)});function RT(e,t){switch(e){case L.Source.Microphone:return t?f.createElement(HL,null):f.createElement(WL,null);case L.Source.Camera:return t?f.createElement($L,null):f.createElement(jL,null);case L.Source.ScreenShare:return t?f.createElement(YL,null):f.createElement(QL,null);default:return}}function t6(e){switch(e){case Tn.Excellent:return f.createElement(GL,null);case Tn.Good:return f.createElement(KL,null);case Tn.Poor:return f.createElement(qL,null);default:return f.createElement(JL,null)}}const jf=f.forwardRef(function({showIcon:e,...t},n){const{buttonProps:r,enabled:i}=_L(t);return f.createElement("button",{ref:n,...r},(e??!0)&&RT(t.source,i),t.children)}),n6=f.forwardRef(function(e,t){const{className:n,quality:r}=vL(e),i=f.useMemo(()=>({...Co(e,{className:n}),"data-lk-quality":r}),[r,e,n]);return f.createElement("div",{ref:t,...i},e.children??t6(r))}),r6=f.forwardRef(function({participant:e,...t},n){const r=bd(e),{className:i,infoObserver:o}=f.useMemo(()=>U4(r),[r]),{identity:s,name:a}=vn(o,{name:r.name,identity:r.identity,metadata:r.metadata}),l=f.useMemo(()=>Co(t,{className:i,"data-lk-participant-name":a}),[t,i,a]);return f.createElement("span",{ref:n,...l},a!==""?a:s,t.children)}),i6=f.forwardRef(function({trackRef:e,show:t="always",...n},r){const{className:i,isMuted:o}=PL(e),s=t==="always"||t==="muted"&&o||t==="unmuted"&&!o,a=f.useMemo(()=>Co(n,{className:i}),[i,n]);return s?f.createElement("div",{ref:r,...a,"data-lk-muted":o},n.children??RT(e.source,!o)):null});function o6(e,t={}){const[n,r]=f.useState(Op(e)),[i,o]=f.useState(n?.isMuted),[s,a]=f.useState(n?.isSubscribed),[l,c]=f.useState(n?.track),[u,d]=f.useState("landscape"),h=f.useRef(),{className:p,trackObserver:v}=f.useMemo(()=>b4(e),[e.participant.sid??e.participant.identity,e.source,gd(e)&&e.publication.trackSid]);return f.useEffect(()=>{const g=v.subscribe(b=>{_e.debug("update track",b),r(b),o(b?.isMuted),a(b?.isSubscribed),c(b?.track)});return()=>g?.unsubscribe()},[v]),f.useEffect(()=>{var g,b;return l&&(h.current&&l.detach(h.current),(g=t.element)!=null&&g.current&&!(u4(e.participant)&&l?.kind==="audio")&&l.attach(t.element.current)),h.current=(b=t.element)==null?void 0:b.current,()=>{h.current&&l?.detach(h.current)}},[l,t.element]),f.useEffect(()=>{var g,b;if(typeof((g=n?.dimensions)==null?void 0:g.width)=="number"&&typeof((b=n?.dimensions)==null?void 0:b.height)=="number"){const m=n.dimensions.width>n.dimensions.height?"landscape":"portrait";d(m)}},[n]),{publication:n,isMuted:i,isSubscribed:s,track:l,elementProps:Co(t.props,{className:p,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":u}})}}var s6=typeof ha=="object"&&ha&&ha.Object===Object&&ha,a6=typeof self=="object"&&self&&self.Object===Object&&self;s6||a6||Function("return this")();const l6=f.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,muted:r,...i},o){const s=yd(e),a=f.useRef(null);f.useImperativeHandle(o,()=>a.current);const{elementProps:l,isSubscribed:c,track:u,publication:d}=o6(s,{element:a,props:i});return f.useEffect(()=>{t?.(!!c)},[c,t]),f.useEffect(()=>{u===void 0||n===void 0||(u instanceof us?u.setVolume(n):_e.warn("Volume can only be set on remote audio tracks."))},[n,u]),f.useEffect(()=>{d===void 0||r===void 0||(d instanceof yg?d.setEnabled(!r):_e.warn("Can only call setEnabled on remote track publications."))},[r,d,u]),f.createElement("audio",{ref:a,...l})});function c6({tracks:e,...t}){return f.createElement(f.Fragment,null,e.map(n=>f.createElement(Ig.Provider,{value:n,key:Eg(n)},Ng(t.children))))}function u6({value:e,onPinChange:t,onWidgetChange:n,children:r}){const i=lL(e);return f.useEffect(()=>{_e.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),f.useEffect(()=>{_e.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),f.createElement(Rg.Provider,{value:i},r)}const d6=e=>{const t=[];for(let n=0;n<e;n++)t.push([n,e-1-n]);return t},ub=e=>[[Math.floor(e/2)],[-1]],f6=(e,t,n)=>{const[r,i]=f.useState(0),[o,s]=f.useState([[]]);f.useEffect(()=>{if(e==="thinking")s(ub(t));else if(e==="connecting"||e==="initializing"){const l=[...d6(t)];s(l)}else s(e==="listening"?ub(t):e===void 0?[new Array(t).fill(0).map((l,c)=>c)]:[[]]);i(0)},[e,t]);const a=f.useRef(null);return f.useEffect(()=>{let l=performance.now();const c=u=>{u-l>=n&&(i(d=>d+1),l=u),a.current=requestAnimationFrame(c)};return a.current=requestAnimationFrame(c),()=>{a.current!==null&&cancelAnimationFrame(a.current)}},[n,t,e,o.length]),o[r%o.length]},h6=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]),p6=(e,t)=>{if(e===void 0)return 1e3;let n=h6.get(e);if(n)switch(e){case"connecting":n/=t;break}return n},m6=f.forwardRef(function({state:e,options:t,barCount:n=15,trackRef:r,children:i,...o},s){const a=Co(o,{className:"lk-audio-bar-visualizer"});let l=Og();r&&(l=r);const c=AL(l,{bands:n,loPass:100,hiPass:200}),u=t?.minHeight??20,d=t?.maxHeight??100,h=f6(e,n,p6(e,n)??100);return f.createElement("div",{ref:s,...a,"data-lk-va-state":e},c.map((p,v)=>i?Ng(i,{"data-lk-highlighted":h.includes(v),"data-lk-bar-index":v,class:"lk-audio-bar",style:{height:`${Math.min(d,Math.max(u,p*100+5))}%`}}):f.createElement("span",{key:v,"data-lk-highlighted":h.includes(v),"data-lk-bar-index":v,className:`lk-audio-bar ${h.includes(v)&&"lk-highlighted"}`,style:{height:`${Math.min(d,Math.max(u,p*100+5))}%`}})))}),g6=f.forwardRef(function({children:e,disableSpeakingIndicator:t,onParticipantClick:n,trackRef:r,...i},o){const s=yd(r),{elementProps:a}=wL({trackRef:s,htmlProps:i,disableSpeakingIndicator:t,onParticipantClick:n});return f.createElement("div",{ref:o,style:{position:"relative",minHeight:"160px"},...a},f.createElement(Ig.Provider,{value:s},e??f.createElement(f.Fragment,null,gd(s)&&f.createElement(l6,{trackRef:s}),f.createElement(m6,{barCount:7,options:{minHeight:8}}),f.createElement("div",{className:"lk-participant-metadata"},f.createElement("div",{className:"lk-participant-metadata-item"},f.createElement(i6,{trackRef:s}),f.createElement(r6,null)),f.createElement(n6,{className:"lk-participant-metadata-item"})))))}),v6=f.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:r,...i},o){var s,a,l;const c=f.useMemo(()=>r?r(e.message):e.message,[e.message,r]),u=!!e.editTimestamp,d=new Date(e.timestamp),h=navigator?navigator.language:"en-US";return f.createElement("li",{ref:o,className:"lk-chat-entry",title:d.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":(s=e.from)!=null&&s.isLocal?"local":"remote",...i},(!n||!t||u)&&f.createElement("span",{className:"lk-meta-data"},!t&&f.createElement("strong",{className:"lk-participant-name"},((a=e.from)==null?void 0:a.name)??((l=e.from)==null?void 0:l.identity)),(!n||u)&&f.createElement("span",{className:"lk-timestamp"},u&&"edited ",d.toLocaleTimeString(h,{timeStyle:"short"}))),f.createElement("span",{className:"lk-message-body"},c))});function y6({messageFormatter:e,messageDecoder:t,messageEncoder:n,channelTopic:r,...i}){const o=f.useRef(null),s=f.useRef(null),a=f.useMemo(()=>({messageDecoder:t,messageEncoder:n,channelTopic:r}),[t,n,r]),{send:l,chatMessages:c,isSending:u}=ML(a),d=TT(),h=f.useRef(0);async function p(v){v.preventDefault(),o.current&&o.current.value.trim()!==""&&l&&(await l(o.current.value),o.current.value="",o.current.focus())}return f.useEffect(()=>{var v;s&&((v=s.current)==null||v.scrollTo({top:s.current.scrollHeight}))},[s,c]),f.useEffect(()=>{var v,g,b,m,y;if(!d||c.length===0)return;if((v=d.widget.state)!=null&&v.showChat&&c.length>0&&h.current!==((g=c[c.length-1])==null?void 0:g.timestamp)){h.current=(b=c[c.length-1])==null?void 0:b.timestamp;return}const C=c.filter(w=>!h.current||w.timestamp>h.current).length,{widget:S}=d;C>0&&((m=S.state)==null?void 0:m.unreadMessages)!==C&&((y=S.dispatch)==null||y.call(S,{msg:"unread_msg",count:C}))},[c,d?.widget]),f.createElement("div",{...i,className:"lk-chat"},f.createElement("div",{className:"lk-chat-header"},"Messages",f.createElement(_T,{className:"lk-close-button"},f.createElement(FL,null))),f.createElement("ul",{className:"lk-list lk-chat-messages",ref:s},i.children?c.map((v,g)=>Ng(i.children,{entry:v,key:v.id??g,messageFormatter:e})):c.map((v,g,b)=>{const m=g>=1&&b[g-1].from===v.from,y=g>=1&&v.timestamp-b[g-1].timestamp<6e4;return f.createElement(v6,{key:v.id??g,hideName:m,hideTimestamp:m===!1?!1:y,entry:v,messageFormatter:e})})),f.createElement("form",{className:"lk-chat-form",onSubmit:p},f.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:u,ref:o,type:"text",placeholder:"Enter a message...",onInput:v=>v.stopPropagation(),onKeyDown:v=>v.stopPropagation(),onKeyUp:v=>v.stopPropagation()}),f.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:u},"Send")))}function db({kind:e,initialSelection:t,onActiveDeviceChange:n,tracks:r,requestPermissions:i=!1,...o}){const[s,a]=f.useState(!1),[l,c]=f.useState([]),[u,d]=f.useState(!0),[h,p]=f.useState(i),v=(y,C)=>{_e.debug("handle device change"),a(!1),n?.(y,C)},g=f.useRef(null),b=f.useRef(null);f.useLayoutEffect(()=>{s&&p(!0)},[s]),f.useLayoutEffect(()=>{g.current&&b.current&&(l||u)&&d4(g.current,b.current).then(({x:y,y:C})=>{b.current&&Object.assign(b.current.style,{left:`${y}px`,top:`${C}px`})}),d(!1)},[g,b,l,u]);const m=f.useCallback(y=>{b.current&&y.target!==g.current&&s&&f4(b.current,y)&&a(!1)},[s,b,g]);return f.useEffect(()=>(document.addEventListener("click",m),window.addEventListener("resize",()=>d(!0)),()=>{document.removeEventListener("click",m),window.removeEventListener("resize",()=>d(!0))}),[m,d]),f.createElement(f.Fragment,null,f.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":s,...o,onClick:()=>a(!s),ref:g},o.children),!o.disabled&&f.createElement("div",{className:"lk-device-menu",ref:b,style:{visibility:s?"visible":"hidden"}},e?f.createElement(Uf,{initialSelection:t,onActiveDeviceChange:y=>v(e,y),onDeviceListChange:c,kind:e,track:r?.[e],requestPermissions:h}):f.createElement(f.Fragment,null,f.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),f.createElement(Uf,{kind:"audioinput",onActiveDeviceChange:y=>v("audioinput",y),onDeviceListChange:c,track:r?.audioinput,requestPermissions:h}),f.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),f.createElement(Uf,{kind:"videoinput",onActiveDeviceChange:y=>v("videoinput",y),onDeviceListChange:c,track:r?.videoinput,requestPermissions:h}))))}function b6(){f.useEffect(()=>{ZL()},[])}function k6({props:e}){const{dispatch:t,state:n}=wT().widget,r="lk-button lk-settings-toggle";return{mergedProps:f.useMemo(()=>Jr(e,{className:r,onClick:()=>{t&&t({msg:"toggle_settings"})},"aria-pressed":n!=null&&n.showSettings?"true":"false"}),[e,r,t,n])}}const S6=f.forwardRef(function(e,t){const{mergedProps:n}=k6({props:e});return f.createElement("button",{ref:t,...n},e.children)});function C6({variation:e,controls:t,saveUserChoices:n=!0,onDeviceError:r,...i}){var o;const[s,a]=f.useState(!1),l=TT();f.useEffect(()=>{var P,_;((P=l?.widget.state)==null?void 0:P.showChat)!==void 0&&a((_=l?.widget.state)==null?void 0:_.showChat)},[(o=l?.widget.state)==null?void 0:o.showChat]);const c=gL(`(max-width: ${s?1e3:760}px)`)?"minimal":"verbose";e??(e=c);const u={leave:!0,...t},d=SL();d?(u.camera??(u.camera=d.canPublish),u.microphone??(u.microphone=d.canPublish),u.screenShare??(u.screenShare=d.canPublish),u.chat??(u.chat=d.canPublishData&&t?.chat)):(u.camera=!1,u.chat=!1,u.microphone=!1,u.screenShare=!1);const h=f.useMemo(()=>e==="minimal"||e==="verbose",[e]),p=f.useMemo(()=>e==="textOnly"||e==="verbose",[e]),v=g4(),[g,b]=f.useState(!1),m=f.useCallback(P=>{b(P)},[b]),y=Co({className:"lk-control-bar"},i),{saveAudioInputEnabled:C,saveVideoInputEnabled:S,saveAudioInputDeviceId:w,saveVideoInputDeviceId:T}=NL({preventSave:!n}),E=f.useCallback((P,_)=>_?C(P):null,[C]),k=f.useCallback((P,_)=>_?S(P):null,[S]);return f.createElement("div",{...y},u.microphone&&f.createElement("div",{className:"lk-button-group"},f.createElement(jf,{source:L.Source.Microphone,showIcon:h,onChange:E,onDeviceError:P=>r?.({source:L.Source.Microphone,error:P})},p&&"Microphone"),f.createElement("div",{className:"lk-button-group-menu"},f.createElement(db,{kind:"audioinput",onActiveDeviceChange:(P,_)=>w(_??"")}))),u.camera&&f.createElement("div",{className:"lk-button-group"},f.createElement(jf,{source:L.Source.Camera,showIcon:h,onChange:k,onDeviceError:P=>r?.({source:L.Source.Camera,error:P})},p&&"Camera"),f.createElement("div",{className:"lk-button-group-menu"},f.createElement(db,{kind:"videoinput",onActiveDeviceChange:(P,_)=>T(_??"")}))),u.screenShare&&v&&f.createElement(jf,{source:L.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:h,onChange:m,onDeviceError:P=>r?.({source:L.Source.ScreenShare,error:P})},p&&(g?"Stop screen share":"Share screen")),u.chat&&f.createElement(_T,null,h&&f.createElement(zL,null),p&&"Chat"),u.settings&&f.createElement(S6,null,h&&f.createElement(VL,null),p&&"Settings"),u.leave&&f.createElement(UL,null,h&&f.createElement(BL,null),p&&"Leave"),f.createElement(e6,null))}function w6({...e}){const[t,n]=f.useState({showChat:!1,unreadMessages:0}),r=RL([L.Source.Microphone]);return b6(),f.createElement(u6,{onWidgetChange:n},f.createElement("div",{className:"lk-audio-conference",...e},f.createElement("div",{className:"lk-audio-conference-stage"},f.createElement(c6,{tracks:r},f.createElement(g6,null))),f.createElement(C6,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),t.showChat&&f.createElement(y6,null)))}const T6="wss://playvoice-im1h8cr0.livekit.cloud";function E6(){const[e,t]=f.useState(null),[n,r]=f.useState(!0);return f.useEffect(()=>{async function i(){try{const s=await(await fetch("http://localhost:3333/chat-token")).json();t(s.token)}catch(o){console.error("Erro ao buscar token:",o)}finally{r(!1)}}i()},[]),n?O.jsx("p",{children:"Carregando..."}):e?O.jsx(mL,{token:e,serverUrl:T6,connect:!0,children:O.jsx(w6,{})}):O.jsx("p",{children:"Erro ao obter o token."})}function We(...e){return YS(Xm(e))}function x6({className:e,...t}){return O.jsxs("nav",{className:We("flex items-center space-x-4 lg:space-x-6",e),...t,children:[O.jsx("a",{href:"/examples/dashboard",className:"text-sm font-medium transition-colors hover:text-primary",children:"Overview"}),O.jsx("a",{href:"/chat-voice",className:"text-sm font-medium text-muted-foreground transition-colors hover:text-primary",children:"Chat Voice"}),O.jsx("a",{href:"/examples/dashboard",className:"text-sm font-medium text-muted-foreground transition-colors hover:text-primary",children:"Products"}),O.jsx("a",{href:"/examples/dashboard",className:"text-sm font-medium text-muted-foreground transition-colors hover:text-primary",children:"Settings"})]})}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}function P6(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function IT(...e){return t=>e.forEach(n=>P6(n,t))}function Jt(...e){return f.useCallback(IT(...e),e)}const _s=f.forwardRef((e,t)=>{const{children:n,...r}=e,i=f.Children.toArray(n),o=i.find(R6);if(o){const s=o.props.children,a=i.map(l=>l===o?f.Children.count(s)>1?f.Children.only(null):f.isValidElement(s)?s.props.children:null:l);return f.createElement(Np,oe({},r,{ref:t}),f.isValidElement(s)?f.cloneElement(s,void 0,a):null)}return f.createElement(Np,oe({},r,{ref:t}),n)});_s.displayName="Slot";const Np=f.forwardRef((e,t)=>{const{children:n,...r}=e;return f.isValidElement(n)?f.cloneElement(n,{...I6(r,n.props),ref:t?IT(t,n.ref):n.ref}):f.Children.count(n)>1?f.Children.only(null):null});Np.displayName="SlotClone";const _6=({children:e})=>f.createElement(f.Fragment,null,e);function R6(e){return f.isValidElement(e)&&e.type===_6}function I6(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}const fb=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,hb=Xm,OT=(e,t)=>n=>{var r;if(t?.variants==null)return hb(e,n?.class,n?.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(c=>{const u=n?.[c],d=o?.[c];if(u===null)return null;const h=fb(u)||fb(d);return i[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(v=>{let[g,b]=v;return Array.isArray(b)?b.includes({...o,...a}[g]):{...o,...a}[g]===b})?[...c,d,h]:c},[]);return hb(e,s,l,n?.class,n?.className)},O6=OT("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_n=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const s=r?_s:"button";return O.jsx(s,{className:We(O6({variant:t,size:n,className:e})),ref:o,...i})});_n.displayName="Button";function MT(){const{user:e}=tg();return O.jsxs("div",{className:"flex items-center justify-between bg-[#101010] px-2 py-4",children:[O.jsx(Kh,{to:"/dashboard",children:O.jsx("section",{children:O.jsx("img",{src:"/PlayVoiceLogo.png",alt:"Logo PlayVoice",className:"h-12 w-16"})})}),O.jsxs("section",{className:"flex items-center",children:[O.jsx(_n,{className:"bg-[#1A3472] text-white hover:bg-[#253d75]",children:"Ver Jogos"}),O.jsx(_n,{variant:"ghost",className:"hover:bg-transparent",children:O.jsx("img",{src:"/games/LOL.png",alt:"League of Legends",className:"w-12 h-12"})}),O.jsx(_n,{variant:"ghost",className:"hover:bg-transparent",children:O.jsx("img",{src:"/games/ADD.png",alt:"League of Legends",className:"w-12 h-12"})})]}),O.jsx("section",{className:"flex items-center gap-2",children:O.jsxs(W_,{children:[e?.name,O.jsx(vR,{userProfileUrl:"/profile"})]})})]})}const NT=f.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));NT.displayName="Card";const DT=f.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("flex flex-col space-y-1.5 p-6",e),...t}));DT.displayName="CardHeader";const M6=f.forwardRef(({className:e,...t},n)=>O.jsx("h3",{ref:n,className:We("text-2xl font-semibold leading-none tracking-tight",e),...t}));M6.displayName="CardTitle";const N6=f.forwardRef(({className:e,...t},n)=>O.jsx("p",{ref:n,className:We("text-sm text-muted-foreground",e),...t}));N6.displayName="CardDescription";const LT=f.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We("p-6 pt-0",e),...t}));LT.displayName="CardContent";const D6=f.forwardRef(({className:e,...t},n)=>O.jsx("div",{ref:n,className:We(" flex items-center p-6 pt-0",e),...t}));D6.displayName="CardFooter";function ot(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}function js(e,t=[]){let n=[];function r(o,s){const a=f.createContext(s),l=n.length;n=[...n,s];function c(d){const{scope:h,children:p,...v}=d,g=h?.[e][l]||a,b=f.useMemo(()=>v,Object.values(v));return f.createElement(g.Provider,{value:b},p)}function u(d,h){const p=h?.[e][l]||a,v=f.useContext(p);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const i=()=>{const o=n.map(s=>f.createContext(s));return function(a){const l=a?.[e]||o;return f.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,L6(i,...t)]}function L6(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}const ol=globalThis?.document?f.useLayoutEffect:()=>{},A6=$b["useId".toString()]||(()=>{});let U6=0;function Dc(e){const[t,n]=f.useState(A6());return ol(()=>{e||n(r=>r??String(U6++))},[e]),e||(t?`radix-${t}`:"")}function Ft(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function gl({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=j6({defaultProp:t,onChange:n}),o=e!==void 0,s=o?e:r,a=Ft(n),l=f.useCallback(c=>{if(o){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else i(c)},[o,e,i,a]);return[s,l]}function j6({defaultProp:e,onChange:t}){const n=f.useState(e),[r]=n,i=f.useRef(r),o=Ft(t);return f.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}const $6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],dt=$6.reduce((e,t)=>{const n=f.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?_s:t;return f.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),f.createElement(a,oe({},s,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function F6(e,t){e&&Ns.flushSync(()=>e.dispatchEvent(t))}function z6(e,t=globalThis?.document){const n=Ft(e);f.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const Dp="dismissableLayer.update",V6="dismissableLayer.pointerDownOutside",B6="dismissableLayer.focusOutside";let pb;const W6=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),H6=f.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=e,u=f.useContext(W6),[d,h]=f.useState(null),p=(n=d?.ownerDocument)!==null&&n!==void 0?n:globalThis?.document,[,v]=f.useState({}),g=Jt(t,k=>h(k)),b=Array.from(u.layers),[m]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=b.indexOf(m),C=d?b.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,w=C>=y,T=G6(k=>{const P=k.target,_=[...u.branches].some(M=>M.contains(P));!w||_||(o?.(k),a?.(k),k.defaultPrevented||l?.())},p),E=K6(k=>{const P=k.target;[...u.branches].some(M=>M.contains(P))||(s?.(k),a?.(k),k.defaultPrevented||l?.())},p);return z6(k=>{C===u.layers.size-1&&(i?.(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},p),f.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(pb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),mb(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=pb)}},[d,p,r,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),mb())},[d,u]),f.useEffect(()=>{const k=()=>v({});return document.addEventListener(Dp,k),()=>document.removeEventListener(Dp,k)},[]),f.createElement(dt.div,oe({},c,{ref:g,style:{pointerEvents:S?w?"auto":"none":void 0,...e.style},onFocusCapture:ot(e.onFocusCapture,E.onFocusCapture),onBlurCapture:ot(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ot(e.onPointerDownCapture,T.onPointerDownCapture)}))});function G6(e,t=globalThis?.document){const n=Ft(e),r=f.useRef(!1),i=f.useRef(()=>{});return f.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let u=function(){AT(V6,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=u,t.addEventListener("click",i.current,{once:!0})):u()}r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function K6(e,t=globalThis?.document){const n=Ft(e),r=f.useRef(!1);return f.useEffect(()=>{const i=o=>{o.target&&!r.current&&AT(B6,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mb(){const e=new CustomEvent(Dp);document.dispatchEvent(e)}function AT(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?F6(i,o):i.dispatchEvent(o)}const $f="focusScope.autoFocusOnMount",Ff="focusScope.autoFocusOnUnmount",gb={bubbles:!1,cancelable:!0},q6=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,l]=f.useState(null),c=Ft(i),u=Ft(o),d=f.useRef(null),h=Jt(t,g=>l(g)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let y=function(T){if(p.paused||!a)return;const E=T.target;a.contains(E)?d.current=E:si(d.current,{select:!0})},C=function(T){if(p.paused||!a)return;const E=T.relatedTarget;E!==null&&(a.contains(E)||si(d.current,{select:!0}))},S=function(T){const E=document.activeElement;for(const k of T)k.removedNodes.length>0&&(a!=null&&a.contains(E)||si(a))};var g=y,b=C,m=S;document.addEventListener("focusin",y),document.addEventListener("focusout",C);const w=new MutationObserver(S);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",C),w.disconnect()}}},[r,a,p.paused]),f.useEffect(()=>{if(a){yb.add(p);const g=document.activeElement;if(!a.contains(g)){const m=new CustomEvent($f,gb);a.addEventListener($f,c),a.dispatchEvent(m),m.defaultPrevented||(J6(eA(UT(a)),{select:!0}),document.activeElement===g&&si(a))}return()=>{a.removeEventListener($f,c),setTimeout(()=>{const m=new CustomEvent(Ff,gb);a.addEventListener(Ff,u),a.dispatchEvent(m),m.defaultPrevented||si(g??document.body,{select:!0}),a.removeEventListener(Ff,u),yb.remove(p)},0)}}},[a,c,u,p]);const v=f.useCallback(g=>{if(!n&&!r||p.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,m=document.activeElement;if(b&&m){const y=g.currentTarget,[C,S]=Q6(y);C&&S?!g.shiftKey&&m===S?(g.preventDefault(),n&&si(C,{select:!0})):g.shiftKey&&m===C&&(g.preventDefault(),n&&si(S,{select:!0})):m===y&&g.preventDefault()}},[n,r,p.paused]);return f.createElement(dt.div,oe({tabIndex:-1},s,{ref:h,onKeyDown:v}))});function J6(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(si(r,{select:t}),document.activeElement!==n)return}function Q6(e){const t=UT(e),n=vb(t,e),r=vb(t.reverse(),e);return[n,r]}function UT(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vb(e,t){for(const n of e)if(!Y6(n,{upTo:t}))return n}function Y6(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function X6(e){return e instanceof HTMLInputElement&&"select"in e}function si(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&X6(e)&&t&&e.select()}}const yb=Z6();function Z6(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=bb(e,t),e.unshift(t)},remove(t){var n;e=bb(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function bb(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function eA(e){return e.filter(t=>t.tagName!=="A")}const tA=f.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?Wk.createPortal(f.createElement(dt.div,oe({},i,{ref:t})),r):null});function nA(e,t){return f.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const Ai=e=>{const{present:t,children:n}=e,r=rA(t),i=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),o=Jt(r.ref,i.ref);return typeof n=="function"||r.isPresent?f.cloneElement(i,{ref:o}):null};Ai.displayName="Presence";function rA(e){const[t,n]=f.useState(),r=f.useRef({}),i=f.useRef(e),o=f.useRef("none"),s=e?"mounted":"unmounted",[a,l]=nA(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const c=ec(r.current);o.current=a==="mounted"?c:"none"},[a]),ol(()=>{const c=r.current,u=i.current;if(u!==e){const h=o.current,p=ec(c);e?l("MOUNT"):p==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),ol(()=>{if(t){const c=d=>{const p=ec(r.current).includes(d.animationName);d.target===t&&p&&Ns.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===t&&(o.current=ec(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:f.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function ec(e){return e?.animationName||"none"}let zf=0;function iA(){f.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:kb()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:kb()),zf++,()=>{zf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),zf--}},[])}function kb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var ur=function(){return ur=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ur.apply(this,arguments)};function jT(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function oA(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Lc="right-scroll-bar-position",Ac="width-before-scroll-bar",sA="with-scroll-bars-hidden",aA="--removed-body-scroll-bar-size";function lA(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function cA(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}function uA(e,t){return cA(t||null,function(n){return e.forEach(function(r){return lA(r,n)})})}function dA(e){return e}function fA(e,t){t===void 0&&(t=dA);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var s=t(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function hA(e){e===void 0&&(e={});var t=fA(null);return t.options=ur({async:!0,ssr:!1},e),t}var $T=function(e){var t=e.sideCar,n=jT(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,ur({},n))};$T.isSideCarExport=!0;function pA(e,t){return e.useMedium(t),$T}var FT=hA(),Vf=function(){},wd=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:Vf,onWheelCapture:Vf,onTouchMoveCapture:Vf}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,g=e.allowPinchZoom,b=e.as,m=b===void 0?"div":b,y=jT(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),C=h,S=uA([n,t]),w=ur(ur({},y),i);return f.createElement(f.Fragment,null,u&&f.createElement(C,{sideCar:FT,removeScrollBar:c,shards:d,noIsolation:p,inert:v,setCallbacks:o,allowPinchZoom:!!g,lockRef:n}),s?f.cloneElement(f.Children.only(a),ur(ur({},w),{ref:S})):f.createElement(m,ur({},w,{className:l,ref:S}),a))});wd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wd.classNames={fullWidth:Ac,zeroRight:Lc};var Sb,mA=function(){if(Sb)return Sb;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gA(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mA();return t&&e.setAttribute("nonce",t),e}function vA(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function yA(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bA=function(){var e=0,t=null;return{add:function(n){e==0&&(t=gA())&&(vA(t,n),yA(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kA=function(){var e=bA();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},zT=function(){var e=kA(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},SA={left:0,top:0,right:0,gap:0},Bf=function(e){return parseInt(e||"",10)||0},CA=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Bf(n),Bf(r),Bf(i)]},wA=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return SA;var t=CA(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},TA=zT(),EA=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(sA,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Lc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ac,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Lc," .").concat(Lc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ac," .").concat(Ac,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(aA,": ").concat(a,`px;
  }
`)},xA=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r,o=f.useMemo(function(){return wA(i)},[i]);return f.createElement(TA,{styles:EA(o,!t,i,n?"":"!important")})},Lp=!1;if(typeof window<"u")try{var tc=Object.defineProperty({},"passive",{get:function(){return Lp=!0,!0}});window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{Lp=!1}var Oo=Lp?{passive:!1}:!1,PA=function(e){return e.tagName==="TEXTAREA"},VT=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!PA(e)&&n[t]==="visible")},_A=function(e){return VT(e,"overflowY")},RA=function(e){return VT(e,"overflowX")},Cb=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=BT(e,n);if(r){var i=WT(e,n),o=i[1],s=i[2];if(o>s)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},IA=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},OA=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},BT=function(e,t){return e==="v"?_A(t):RA(t)},WT=function(e,t){return e==="v"?IA(t):OA(t)},MA=function(e,t){return e==="h"&&t==="rtl"?-1:1},NA=function(e,t,n,r,i){var o=MA(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,l=t.contains(a),c=!1,u=s>0,d=0,h=0;do{var p=WT(e,a),v=p[0],g=p[1],b=p[2],m=g-b-o*v;(v||m)&&BT(e,a)&&(d+=m,h+=v),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(i&&d===0||!i&&s>d)||!u&&(i&&h===0||!i&&-s>h))&&(c=!0),c},nc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},wb=function(e){return[e.deltaX,e.deltaY]},Tb=function(e){return e&&"current"in e?e.current:e},DA=function(e,t){return e[0]===t[0]&&e[1]===t[1]},LA=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},AA=0,Mo=[];function UA(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),i=f.useState(AA++)[0],o=f.useState(function(){return zT()})[0],s=f.useRef(e);f.useEffect(function(){s.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=oA([e.lockRef.current],(e.shards||[]).map(Tb),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=f.useCallback(function(g,b){if("touches"in g&&g.touches.length===2)return!s.current.allowPinchZoom;var m=nc(g),y=n.current,C="deltaX"in g?g.deltaX:y[0]-m[0],S="deltaY"in g?g.deltaY:y[1]-m[1],w,T=g.target,E=Math.abs(C)>Math.abs(S)?"h":"v";if("touches"in g&&E==="h"&&T.type==="range")return!1;var k=Cb(E,T);if(!k)return!0;if(k?w=E:(w=E==="v"?"h":"v",k=Cb(E,T)),!k)return!1;if(!r.current&&"changedTouches"in g&&(C||S)&&(r.current=w),!w)return!0;var P=r.current||w;return NA(P,b,g,P==="h"?C:S,!0)},[]),l=f.useCallback(function(g){var b=g;if(!(!Mo.length||Mo[Mo.length-1]!==o)){var m="deltaY"in b?wb(b):nc(b),y=t.current.filter(function(w){return w.name===b.type&&w.target===b.target&&DA(w.delta,m)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var C=(s.current.shards||[]).map(Tb).filter(Boolean).filter(function(w){return w.contains(b.target)}),S=C.length>0?a(b,C[0]):!s.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),c=f.useCallback(function(g,b,m,y){var C={name:g,delta:b,target:m,should:y};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(S){return S!==C})},1)},[]),u=f.useCallback(function(g){n.current=nc(g),r.current=void 0},[]),d=f.useCallback(function(g){c(g.type,wb(g),g.target,a(g,e.lockRef.current))},[]),h=f.useCallback(function(g){c(g.type,nc(g),g.target,a(g,e.lockRef.current))},[]);f.useEffect(function(){return Mo.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Oo),document.addEventListener("touchmove",l,Oo),document.addEventListener("touchstart",u,Oo),function(){Mo=Mo.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,Oo),document.removeEventListener("touchmove",l,Oo),document.removeEventListener("touchstart",u,Oo)}},[]);var p=e.removeScrollBar,v=e.inert;return f.createElement(f.Fragment,null,v?f.createElement(o,{styles:LA(i)}):null,p?f.createElement(xA,{gapMode:"margin"}):null)}const jA=pA(FT,UA);var HT=f.forwardRef(function(e,t){return f.createElement(wd,ur({},e,{ref:t,sideCar:jA}))});HT.classNames=wd.classNames;const $A=HT;var FA=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},No=new WeakMap,rc=new WeakMap,ic={},Wf=0,GT=function(e){return e&&(e.host||GT(e.parentNode))},zA=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=GT(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},VA=function(e,t,n,r){var i=zA(t,Array.isArray(e)?e:[e]);ic[n]||(ic[n]=new WeakMap);var o=ic[n],s=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else{var p=h.getAttribute(r),v=p!==null&&p!=="false",g=(No.get(h)||0)+1,b=(o.get(h)||0)+1;No.set(h,g),o.set(h,b),s.push(h),g===1&&v&&rc.set(h,!0),b===1&&h.setAttribute(n,"true"),v||h.setAttribute(r,"true")}})};return u(t),a.clear(),Wf++,function(){s.forEach(function(d){var h=No.get(d)-1,p=o.get(d)-1;No.set(d,h),o.set(d,p),h||(rc.has(d)||d.removeAttribute(r),rc.delete(d)),p||d.removeAttribute(n)}),Wf--,Wf||(No=new WeakMap,No=new WeakMap,rc=new WeakMap,ic={})}},BA=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||FA(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),VA(r,i,n,"aria-hidden")):function(){return null}};const KT="Dialog",[qT,S8]=js(KT),[WA,Zn]=qT(KT),HA=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,a=f.useRef(null),l=f.useRef(null),[c=!1,u]=gl({prop:r,defaultProp:i,onChange:o});return f.createElement(WA,{scope:t,triggerRef:a,contentRef:l,contentId:Dc(),titleId:Dc(),descriptionId:Dc(),open:c,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(d=>!d),[u]),modal:s},n)},GA="DialogTrigger",KA=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Zn(GA,n),o=Jt(t,i.triggerRef);return f.createElement(dt.button,oe({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Dg(i.open)},r,{ref:o,onClick:ot(e.onClick,i.onOpenToggle)}))}),JT="DialogPortal",[qA,QT]=qT(JT,{forceMount:void 0}),JA=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,o=Zn(JT,t);return f.createElement(qA,{scope:t,forceMount:n},f.Children.map(r,s=>f.createElement(Ai,{present:n||o.open},f.createElement(tA,{asChild:!0,container:i},s))))},Ap="DialogOverlay",QA=f.forwardRef((e,t)=>{const n=QT(Ap,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Zn(Ap,e.__scopeDialog);return o.modal?f.createElement(Ai,{present:r||o.open},f.createElement(YA,oe({},i,{ref:t}))):null}),YA=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Zn(Ap,n);return f.createElement($A,{as:_s,allowPinchZoom:!0,shards:[i.contentRef]},f.createElement(dt.div,oe({"data-state":Dg(i.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),sl="DialogContent",XA=f.forwardRef((e,t)=>{const n=QT(sl,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Zn(sl,e.__scopeDialog);return f.createElement(Ai,{present:r||o.open},o.modal?f.createElement(ZA,oe({},i,{ref:t})):f.createElement(e9,oe({},i,{ref:t})))}),ZA=f.forwardRef((e,t)=>{const n=Zn(sl,e.__scopeDialog),r=f.useRef(null),i=Jt(t,n.contentRef,r);return f.useEffect(()=>{const o=r.current;if(o)return BA(o)},[]),f.createElement(YT,oe({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ot(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=n.triggerRef.current)===null||s===void 0||s.focus()}),onPointerDownOutside:ot(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:ot(e.onFocusOutside,o=>o.preventDefault())}))}),e9=f.forwardRef((e,t)=>{const n=Zn(sl,e.__scopeDialog),r=f.useRef(!1),i=f.useRef(!1);return f.createElement(YT,oe({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s;if((s=e.onCloseAutoFocus)===null||s===void 0||s.call(e,o),!o.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),o.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:o=>{var s,a;(s=e.onInteractOutside)===null||s===void 0||s.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=o.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}}))}),YT=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,a=Zn(sl,n),l=f.useRef(null),c=Jt(t,l);return iA(),f.createElement(f.Fragment,null,f.createElement(q6,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},f.createElement(H6,oe({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Dg(a.open)},s,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),t9="DialogTitle",n9=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Zn(t9,n);return f.createElement(dt.h2,oe({id:i.titleId},r,{ref:t}))}),r9="DialogDescription",i9=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Zn(r9,n);return f.createElement(dt.p,oe({id:i.descriptionId},r,{ref:t}))}),o9="DialogClose",s9=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Zn(o9,n);return f.createElement(dt.button,oe({type:"button"},r,{ref:t,onClick:ot(e.onClick,()=>i.onOpenChange(!1))}))});function Dg(e){return e?"open":"closed"}const a9=HA,l9=KA,XT=JA,ZT=QA,eE=XA,tE=n9,nE=i9,c9=s9,Up=a9,jp=l9,rE=({className:e,...t})=>O.jsx(XT,{className:We(e),...t});rE.displayName=XT.displayName;const iE=f.forwardRef(({className:e,...t},n)=>O.jsx(ZT,{ref:n,className:We("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));iE.displayName=ZT.displayName;const xu=f.forwardRef(({className:e,children:t,...n},r)=>O.jsxs(rE,{children:[O.jsx(iE,{}),O.jsxs(eE,{ref:r,className:We("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",e),...n,children:[t,O.jsxs(c9,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[O.jsx(eg,{className:"h-4 w-4"}),O.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xu.displayName=eE.displayName;const Pu=({className:e,...t})=>O.jsx("div",{className:We("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Pu.displayName="DialogHeader";const _u=f.forwardRef(({className:e,...t},n)=>O.jsx(tE,{ref:n,className:We("text-lg font-semibold leading-none tracking-tight",e),...t}));_u.displayName=tE.displayName;const u9=f.forwardRef(({className:e,...t},n)=>O.jsx(nE,{ref:n,className:We("text-sm text-muted-foreground",e),...t}));u9.displayName=nE.displayName;const Ru=f.forwardRef(({className:e,type:t,...n},r)=>O.jsx("input",{type:t,className:We("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Ru.displayName="Input";const d9=f.createContext(void 0);function Lg(e){const t=f.useContext(d9);return e||t||"ltr"}function f9(e,[t,n]){return Math.min(n,Math.max(t,e))}function h9(e,t){return f.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const oE="ScrollArea",[sE,C8]=js(oE),[p9,Nn]=sE(oE),m9=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:o=600,...s}=e,[a,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState(null),[p,v]=f.useState(null),[g,b]=f.useState(null),[m,y]=f.useState(0),[C,S]=f.useState(0),[w,T]=f.useState(!1),[E,k]=f.useState(!1),P=Jt(t,M=>l(M)),_=Lg(i);return f.createElement(p9,{scope:n,type:r,dir:_,scrollHideDelay:o,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:w,onScrollbarXEnabledChange:T,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:E,onScrollbarYEnabledChange:k,onCornerWidthChange:y,onCornerHeightChange:S},f.createElement(dt.div,oe({dir:_},s,{ref:P,style:{position:"relative","--radix-scroll-area-corner-width":m+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})))}),g9="ScrollAreaViewport",v9=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,o=Nn(g9,n),s=f.useRef(null),a=Jt(t,s,o.onViewportChange);return f.createElement(f.Fragment,null,f.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),f.createElement(dt.div,oe({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style}}),f.createElement("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Qr="ScrollAreaScrollbar",aE=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Nn(Qr,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=i,a=e.orientation==="horizontal";return f.useEffect(()=>(a?o(!0):s(!0),()=>{a?o(!1):s(!1)}),[a,o,s]),i.type==="hover"?f.createElement(y9,oe({},r,{ref:t,forceMount:n})):i.type==="scroll"?f.createElement(b9,oe({},r,{ref:t,forceMount:n})):i.type==="auto"?f.createElement(lE,oe({},r,{ref:t,forceMount:n})):i.type==="always"?f.createElement(Ag,oe({},r,{ref:t})):null}),y9=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Nn(Qr,e.__scopeScrollArea),[o,s]=f.useState(!1);return f.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),s(!0)},u=()=>{l=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),f.createElement(Ai,{present:n||o},f.createElement(lE,oe({"data-state":o?"visible":"hidden"},r,{ref:t})))}),b9=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Nn(Qr,e.__scopeScrollArea),o=e.orientation==="horizontal",s=Ed(()=>l("SCROLL_END"),100),[a,l]=h9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),f.useEffect(()=>{const c=i.viewport,u=o?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const p=c[u];d!==p&&(l("SCROLL"),s()),d=p};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,o,l,s]),f.createElement(Ai,{present:n||a!=="hidden"},f.createElement(Ag,oe({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:ot(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ot(e.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),lE=f.forwardRef((e,t)=>{const n=Nn(Qr,e.__scopeScrollArea),{forceMount:r,...i}=e,[o,s]=f.useState(!1),a=e.orientation==="horizontal",l=Ed(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;s(a?c:u)}},10);return Rs(n.viewport,l),Rs(n.content,l),f.createElement(Ai,{present:r||o},f.createElement(Ag,oe({"data-state":o?"visible":"hidden"},i,{ref:t})))}),Ag=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Nn(Qr,e.__scopeScrollArea),o=f.useRef(null),s=f.useRef(0),[a,l]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=fE(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:h=>s.current=h};function d(h,p){return P9(h,s.current,a,p)}return n==="horizontal"?f.createElement(k9,oe({},u,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const h=i.viewport.scrollLeft,p=Eb(h,a,i.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}})):n==="vertical"?f.createElement(S9,oe({},u,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const h=i.viewport.scrollTop,p=Eb(h,a);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}})):null}),k9=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=Nn(Qr,e.__scopeScrollArea),[s,a]=f.useState(),l=f.useRef(null),c=Jt(t,l,o.onScrollbarXChange);return f.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),f.createElement(uE,oe({"data-orientation":"horizontal"},i,{ref:c,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Td(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),pE(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&s&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Iu(s.paddingLeft),paddingEnd:Iu(s.paddingRight)}})}}))}),S9=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=Nn(Qr,e.__scopeScrollArea),[s,a]=f.useState(),l=f.useRef(null),c=Jt(t,l,o.onScrollbarYChange);return f.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),f.createElement(uE,oe({"data-orientation":"vertical"},i,{ref:c,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Td(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(o.viewport){const h=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),pE(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&s&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Iu(s.paddingTop),paddingEnd:Iu(s.paddingBottom)}})}}))}),[C9,cE]=sE(Qr),uE=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:s,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,p=Nn(Qr,n),[v,g]=f.useState(null),b=Jt(t,P=>g(P)),m=f.useRef(null),y=f.useRef(""),C=p.viewport,S=r.content-r.viewport,w=Ft(u),T=Ft(l),E=Ed(d,10);function k(P){if(m.current){const _=P.clientX-m.current.left,M=P.clientY-m.current.top;c({x:_,y:M})}}return f.useEffect(()=>{const P=_=>{const M=_.target;v?.contains(M)&&w(_,S)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[C,v,S,w]),f.useEffect(T,[r,T]),Rs(v,E),Rs(p.content,E),f.createElement(C9,{scope:n,scrollbar:v,hasThumb:i,onThumbChange:Ft(o),onThumbPointerUp:Ft(s),onThumbPositionChange:T,onThumbPointerDown:Ft(a)},f.createElement(dt.div,oe({},h,{ref:b,style:{position:"absolute",...h.style},onPointerDown:ot(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),m.current=v.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k(P))}),onPointerMove:ot(e.onPointerMove,k),onPointerUp:ot(e.onPointerUp,P=>{const _=P.target;_.hasPointerCapture(P.pointerId)&&_.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=y.current,m.current=null})})))}),$p="ScrollAreaThumb",w9=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=cE($p,e.__scopeScrollArea);return f.createElement(Ai,{present:n||i.hasThumb},f.createElement(T9,oe({ref:t},r)))}),T9=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,o=Nn($p,n),s=cE($p,n),{onThumbPositionChange:a}=s,l=Jt(t,d=>s.onThumbChange(d)),c=f.useRef(),u=Ed(()=>{c.current&&(c.current(),c.current=void 0)},100);return f.useEffect(()=>{const d=o.viewport;if(d){const h=()=>{if(u(),!c.current){const p=_9(d,a);c.current=p,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[o.viewport,u,a]),f.createElement(dt.div,oe({"data-state":s.hasThumb?"visible":"hidden"},i,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ot(e.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),v=d.clientX-p.left,g=d.clientY-p.top;s.onThumbPointerDown({x:v,y:g})}),onPointerUp:ot(e.onPointerUp,s.onThumbPointerUp)}))}),dE="ScrollAreaCorner",E9=f.forwardRef((e,t)=>{const n=Nn(dE,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?f.createElement(x9,oe({},e,{ref:t})):null}),x9=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Nn(dE,n),[o,s]=f.useState(0),[a,l]=f.useState(0),c=!!(o&&a);return Rs(i.scrollbarX,()=>{var u;const d=((u=i.scrollbarX)===null||u===void 0?void 0:u.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),Rs(i.scrollbarY,()=>{var u;const d=((u=i.scrollbarY)===null||u===void 0?void 0:u.offsetWidth)||0;i.onCornerWidthChange(d),s(d)}),c?f.createElement(dt.div,oe({},r,{ref:t,style:{width:o,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function Iu(e){return e?parseInt(e,10):0}function fE(e,t){const n=e/t;return isNaN(n)?0:n}function Td(e){const t=fE(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function P9(e,t,n,r="ltr"){const i=Td(n),o=i/2,s=t||o,a=i-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return hE([l,c],d)(e)}function Eb(e,t,n="ltr"){const r=Td(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,s=t.content-t.viewport,a=o-r,l=n==="ltr"?[0,s]:[s*-1,0],c=f9(e,l);return hE([0,s],[0,a])(c)}function hE(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function pE(e,t){return e>0&&e<t}const _9=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},s=n.left!==o.left,a=n.top!==o.top;(s||a)&&t(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Ed(e,t){const n=Ft(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Rs(e,t){const n=Ft(t);ol(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const mE=m9,R9=v9,I9=E9,gE=f.forwardRef(({className:e,children:t,...n},r)=>O.jsxs(mE,{ref:r,className:We("relative overflow-hidden",e),...n,children:[O.jsx(R9,{className:"h-full w-full rounded-[inherit]",children:t}),O.jsx(vE,{}),O.jsx(I9,{})]}));gE.displayName=mE.displayName;const vE=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>O.jsx(aE,{ref:r,orientation:t,className:We("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 border-t border-t-transparent p-[1px]",e),...n,children:O.jsx(w9,{className:"relative flex-1 rounded-full bg-border"})}));vE.displayName=aE.displayName;function O9(e){const t=e+"CollectionProvider",[n,r]=js(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:v,children:g}=p,b=D.useRef(null),m=D.useRef(new Map).current;return D.createElement(i,{scope:v,itemMap:m,collectionRef:b},g)},a=e+"CollectionSlot",l=D.forwardRef((p,v)=>{const{scope:g,children:b}=p,m=o(a,g),y=Jt(v,m.collectionRef);return D.createElement(_s,{ref:y},b)}),c=e+"CollectionItemSlot",u="data-radix-collection-item",d=D.forwardRef((p,v)=>{const{scope:g,children:b,...m}=p,y=D.useRef(null),C=Jt(v,y),S=o(c,g);return D.useEffect(()=>(S.itemMap.set(y,{ref:y,...m}),()=>void S.itemMap.delete(y))),D.createElement(_s,{[u]:"",ref:C},b)});function h(p){const v=o(e+"CollectionConsumer",p);return D.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const m=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((S,w)=>m.indexOf(S.ref.current)-m.indexOf(w.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:s,Slot:l,ItemSlot:d},h,r]}const Hf="rovingFocusGroup.onEntryFocus",M9={bubbles:!1,cancelable:!0},Ug="RovingFocusGroup",[Fp,yE,N9]=O9(Ug),[D9,bE]=js(Ug,[N9]),[L9,A9]=D9(Ug),U9=f.forwardRef((e,t)=>f.createElement(Fp.Provider,{scope:e.__scopeRovingFocusGroup},f.createElement(Fp.Slot,{scope:e.__scopeRovingFocusGroup},f.createElement(j9,oe({},e,{ref:t}))))),j9=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=e,d=f.useRef(null),h=Jt(t,d),p=Lg(o),[v=null,g]=gl({prop:s,defaultProp:a,onChange:l}),[b,m]=f.useState(!1),y=Ft(c),C=yE(n),S=f.useRef(!1),[w,T]=f.useState(0);return f.useEffect(()=>{const E=d.current;if(E)return E.addEventListener(Hf,y),()=>E.removeEventListener(Hf,y)},[y]),f.createElement(L9,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:v,onItemFocus:f.useCallback(E=>g(E),[g]),onItemShiftTab:f.useCallback(()=>m(!0),[]),onFocusableItemAdd:f.useCallback(()=>T(E=>E+1),[]),onFocusableItemRemove:f.useCallback(()=>T(E=>E-1),[])},f.createElement(dt.div,oe({tabIndex:b||w===0?-1:0,"data-orientation":r},u,{ref:h,style:{outline:"none",...e.style},onMouseDown:ot(e.onMouseDown,()=>{S.current=!0}),onFocus:ot(e.onFocus,E=>{const k=!S.current;if(E.target===E.currentTarget&&k&&!b){const P=new CustomEvent(Hf,M9);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const _=C().filter(ge=>ge.focusable),M=_.find(ge=>ge.active),A=_.find(ge=>ge.id===v),X=[M,A,..._].filter(Boolean).map(ge=>ge.ref.current);kE(X)}}S.current=!1}),onBlur:ot(e.onBlur,()=>m(!1))})))}),$9="RovingFocusGroupItem",F9=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=e,a=Dc(),l=o||a,c=A9($9,n),u=c.currentTabStopId===l,d=yE(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return f.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),f.createElement(Fp.ItemSlot,{scope:n,id:l,focusable:r,active:i},f.createElement(dt.span,oe({tabIndex:u?0:-1,"data-orientation":c.orientation},s,{ref:t,onMouseDown:ot(e.onMouseDown,v=>{r?c.onItemFocus(l):v.preventDefault()}),onFocus:ot(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:ot(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=B9(v,c.orientation,c.dir);if(g!==void 0){v.preventDefault();let m=d().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")m.reverse();else if(g==="prev"||g==="next"){g==="prev"&&m.reverse();const y=m.indexOf(v.currentTarget);m=c.loop?W9(m,y+1):m.slice(y+1)}setTimeout(()=>kE(m))}})})))}),z9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function V9(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function B9(e,t,n){const r=V9(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return z9[r]}function kE(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function W9(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const H9=U9,G9=F9,SE=f.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:i,...o}=e,[s=!1,a]=gl({prop:n,onChange:i,defaultProp:r});return f.createElement(dt.button,oe({type:"button","aria-pressed":s,"data-state":s?"on":"off","data-disabled":e.disabled?"":void 0},o,{ref:t,onClick:ot(e.onClick,()=>{e.disabled||a(!s)})}))}),CE=SE,xd="ToggleGroup",[wE,w8]=js(xd,[bE]),TE=bE(),K9=D.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const i=r;return D.createElement(q9,oe({},i,{ref:t}))}if(n==="multiple"){const i=r;return D.createElement(J9,oe({},i,{ref:t}))}throw new Error(`Missing prop \`type\` expected on \`${xd}\``)}),[EE,xE]=wE(xd),q9=D.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=e,[s,a]=gl({prop:n,defaultProp:r,onChange:i});return D.createElement(EE,{scope:e.__scopeToggleGroup,type:"single",value:s?[s]:[],onItemActivate:a,onItemDeactivate:D.useCallback(()=>a(""),[a])},D.createElement(PE,oe({},o,{ref:t})))}),J9=D.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=e,[s=[],a]=gl({prop:n,defaultProp:r,onChange:i}),l=D.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=D.useCallback(u=>a((d=[])=>d.filter(h=>h!==u)),[a]);return D.createElement(EE,{scope:e.__scopeToggleGroup,type:"multiple",value:s,onItemActivate:l,onItemDeactivate:c},D.createElement(PE,oe({},o,{ref:t})))}),[Q9,Y9]=wE(xd),PE=D.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:o,dir:s,loop:a=!0,...l}=e,c=TE(n),u=Lg(s),d={role:"group",dir:u,...l};return D.createElement(Q9,{scope:n,rovingFocus:i,disabled:r},i?D.createElement(H9,oe({asChild:!0},c,{orientation:o,dir:u,loop:a}),D.createElement(dt.div,oe({},d,{ref:t}))):D.createElement(dt.div,oe({},d,{ref:t})))}),zp="ToggleGroupItem",X9=D.forwardRef((e,t)=>{const n=xE(zp,e.__scopeToggleGroup),r=Y9(zp,e.__scopeToggleGroup),i=TE(e.__scopeToggleGroup),o=n.value.includes(e.value),s=r.disabled||e.disabled,a={...e,pressed:o,disabled:s},l=D.useRef(null);return r.rovingFocus?D.createElement(G9,oe({asChild:!0},i,{focusable:!s,active:o,ref:l}),D.createElement(xb,oe({},a,{ref:t}))):D.createElement(xb,oe({},a,{ref:t}))}),xb=D.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...i}=e,o=xE(zp,n),s={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a=o.type==="single"?s:void 0;return D.createElement(SE,oe({},a,i,{ref:t,onPressedChange:l=>{l?o.onItemActivate(r):o.onItemDeactivate(r)}}))}),_E=K9,RE=X9,IE=OT("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Z9=f.forwardRef(({className:e,variant:t,size:n,...r},i)=>O.jsx(CE,{ref:i,className:We(IE({variant:t,size:n,className:e})),...r}));Z9.displayName=CE.displayName;const OE=f.createContext({size:"default",variant:"default"}),ME=f.forwardRef(({className:e,variant:t,size:n,children:r,...i},o)=>O.jsx(_E,{ref:o,className:We("flex items-center justify-center gap-1",e),...i,children:O.jsx(OE.Provider,{value:{variant:t,size:n},children:r})}));ME.displayName=_E.displayName;const NE=f.forwardRef(({className:e,children:t,variant:n,size:r,...i},o)=>{const s=f.useContext(OE);return O.jsx(RE,{ref:o,className:We(IE({variant:s.variant||n,size:s.size||r}),e),...i,children:t})});NE.displayName=RE.displayName;const Pb=[{name:"KamiKat",avatarUrl:"http://localhost:3333/uploads/teste1.jpg",messages:[]},{name:"brTT",avatarUrl:"http://localhost:3333/uploads/teste1.jpg",messages:[]},{name:"LeoManeiro",avatarUrl:"http://localhost:3333/uploads/teste1.jpg",messages:[]}],DE=()=>{const[e,t]=D.useState(!1),[n,r]=D.useState(Pb[0].name),[i,o]=D.useState(Pb),s=v=>{v.trim()&&o(g=>g.map(b=>b.name===n?{...b,messages:[...b.messages,v]}:b))};function a(){if(!e)return null;const v=i.find(g=>g.name===n);return O.jsxs(NT,{className:"absolute bottom-0 right-64 flex h-80 w-96 flex-col border-none",children:[O.jsx(DT,{className:"flex-row items-center space-x-1 space-y-0 rounded-md bg-[#101010] p-0",children:O.jsx(eg,{className:"h-4 w-4 cursor-pointer hover:text-gray-300",onClick:()=>t(!1)})}),O.jsx(LT,{className:"flex-1 p-0",children:O.jsxs("div",{className:"flex h-full w-full items-start bg-[#242424] pt-6",children:[O.jsx(ME,{type:"single",defaultValue:n,className:"flex h-full w-max flex-col justify-start border-r border-white/20 px-1",children:i.map(g=>O.jsx(NE,{className:"h-max w-full py-0.5 data-[state=on]:bg-[#101010] hover:bg-[#101010] hover:text-white hover:opacity-80",value:g.name,onClick:()=>r(g.name),children:O.jsx("span",{className:"w-full text-start",children:g.name})},g.name))}),O.jsxs("div",{className:"flex h-full w-full flex-col justify-end gap-y-2 px-2 py-3",children:[O.jsx("div",{className:"grid w-full grid-flow-row gap-y-1",children:v?.messages.map((g,b)=>O.jsx("span",{className:`self-end rounded-md bg-[#101010] px-2 py-0.5 text-sm ${b%2===0?"justify-self-start":"justify-self-end"} min-h-min`,children:g},b))}),O.jsxs("div",{className:"flex h-max items-center justify-between rounded-md bg-[#101010] pr-2",children:[O.jsx(Ru,{className:"h-6 w-full rounded-md border-none bg-[#101010] text-sm text-white",onKeyDown:g=>{g.key==="Enter"&&(s(g.currentTarget.value),g.currentTarget.value="")}}),O.jsx(iO,{className:"h-4 w-4 cursor-pointer hover:text-gray-300",onClick:g=>{const b=g.currentTarget.previousElementSibling;b&&(s(b.value),b.value="")}})]})]})]})})]})}const[l,c]=f.useState(!1),[u,d]=f.useState(""),p=["4Lan","paiTT","Cmeras"].filter(v=>v.toLowerCase().includes(u.toLowerCase()));return O.jsxs("div",{className:"h-full w-64 bg-[#101010] text-white",children:[O.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-700 p-2",children:[O.jsx("span",{className:"text-lg font-semibold",children:"Amigos"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs(Up,{open:l,onOpenChange:c,children:[O.jsx(jp,{asChild:!0,children:O.jsx(_n,{variant:"ghost",children:O.jsx(sO,{className:"h-5 w-5 cursor-pointer hover:text-gray-300"})})}),O.jsxs(xu,{className:"bg-zinc-900 text-white sm:max-w-[425px]",children:[O.jsx(Pu,{className:"flex flex-row items-center justify-between",children:O.jsx(_u,{children:"Adicionar Amigo"})}),O.jsxs("div",{className:"flex flex-col space-y-4",children:[O.jsx(Ru,{placeholder:"Pesquisar amigos...",value:u,onChange:v=>d(v.target.value),className:"border-zinc-700 bg-zinc-800 text-white placeholder-zinc-400"}),O.jsx(gE,{className:"h-[200px]",children:p.map(v=>O.jsx("div",{className:"cursor-pointer px-4 py-2 hover:bg-zinc-800",children:v},v))})]})]})]}),O.jsx(_n,{variant:"ghost",children:O.jsx(rO,{className:"h-5 w-5 cursor-pointer hover:text-gray-300"})})]})]}),O.jsx("div",{className:"space-y-4 p-4",children:i.map((v,g)=>O.jsxs("div",{className:"flex items-center space-x-3",children:[O.jsx("img",{src:v.avatarUrl,alt:v.name,className:"h-10 w-10 rounded-full"}),O.jsx("div",{className:"flex-1",children:O.jsx("span",{className:"text-sm font-medium",children:v.name})}),O.jsx(tO,{className:"h-5 w-5 cursor-pointer hover:text-gray-300",onClick:()=>{t(!0),r(v.name)}}),O.jsx(eO,{className:"h-5 w-5 cursor-pointer hover:text-gray-300"})]},g))}),O.jsx(a,{})]})};function e8(){return O.jsxs("div",{className:"flex flex-col flex-1 min-h-screen",children:[O.jsx(MT,{}),O.jsx("div",{className:"absolute top-32 left-0",children:O.jsx(x6,{className:"mx-6"})}),O.jsx("main",{className:"w-full grid flex-1",children:O.jsx("div",{className:"justify-self-end",children:O.jsx(DE,{})})})]})}function t8(){return O.jsxs("main",{className:"flex w-full min-h-screen items-center justify-center p-8",children:[O.jsxs("div",{className:"flex flex-col w-2/3 items-center justify-center gap-4",children:[O.jsx("img",{src:"/PlayVoiceLogo.png",alt:"Logo PlayVoice",className:"h-[370px] w-[500px]"}),O.jsx("h1",{className:"text-3xl font-bold text-white",children:"Bem-vindo ao PlayVoice"}),O.jsx("p",{className:"text-lg text-[#A5A5A5]",children:"O aplicativo definitivo de comunicao para gamers!"})]}),O.jsxs("div",{className:"flex flex-col w-2/3 items-center justify-center gap-4",children:[O.jsx(Kh,{to:"/sign-in",children:O.jsx(_n,{className:"bg-[#1A3472] text-white py-3 px-8 hover:bg-[#253d75]",children:"Entrar"})}),O.jsx(Kh,{to:"sign-up",children:O.jsx(_n,{className:"bg-[#1A3472] text-white py-3 px-8 hover:bg-[#253d75]",children:"Cadastrar-se"})})]})]})}function n8(){return O.jsx("main",{className:"min-h-[640px] flex items-center justify-center",children:O.jsx(hR,{appearance:{layout:{logoImageUrl:"/PlayVoiceLogo.png",unsafe_disableDevelopmentModeWarnings:!0},elements:{card:"bg-[#101010]",footerItem:"bg-[#101010]",footer:{background:"#101010"},footerAction:"bg-[#101010]",footerActionText:"text-[#ffffff]",footerActionLink:"text-[#ffffff]",socialButtonsBlockButton:"bg-white hover:bg-gray-300",headerTitle:"text-white",formFieldLabel:"text-[#ffffff]",dividerText:"text-[#ffffff]",formButtonPrimary:"bg-[#0F172A] hover:bg-slate-600 text-[#ffffff] text-sm"}},path:"/sign-in",signUpUrl:"/sign-up",signUpForceRedirectUrl:"/dashboard",forceRedirectUrl:"/dashboard"})})}function r8(){return O.jsx("main",{className:"flex min-h-[640px] items-center justify-center",children:O.jsx(pR,{appearance:{layout:{logoImageUrl:"/PlayVoiceLogo.png",unsafe_disableDevelopmentModeWarnings:!0},elements:{card:"bg-[#101010]",footerItem:"bg-[#101010]",footer:{background:"#101010"},footerAction:"bg-[#101010]",footerActionText:"text-[#ffffff]",footerActionLink:"text-[#ffffff]",socialButtonsBlockButton:"bg-white hover:bg-gray-300",headerTitle:"text-white",formFieldLabel:"text-[#ffffff]",dividerText:"text-[#ffffff]",formButtonPrimary:"bg-[#0F172A] hover:bg-slate-400 text-[#ffffff] text-sm"}},path:"/sign-up",signInUrl:"/sign-in",afterSignOutUrl:"/sign-in"})})}const LE="Avatar",[i8,T8]=js(LE),[o8,AE]=i8(LE),s8=f.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,o]=f.useState("idle");return f.createElement(o8,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:o},f.createElement(dt.span,oe({},r,{ref:t})))}),a8="AvatarImage",l8=f.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...o}=e,s=AE(a8,n),a=d8(r),l=Ft(c=>{i(c),s.onImageLoadingStatusChange(c)});return ol(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?f.createElement(dt.img,oe({},o,{ref:t,src:r})):null}),c8="AvatarFallback",u8=f.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,o=AE(c8,n),[s,a]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),s&&o.imageLoadingStatus!=="loaded"?f.createElement(dt.span,oe({},i,{ref:t})):null});function d8(e){const[t,n]=f.useState("idle");return f.useEffect(()=>{if(!e){n("error");return}let r=!0;const i=new window.Image,o=s=>()=>{r&&n(s)};return n("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=e,()=>{r=!1}},[e]),t}const UE=s8,jE=l8,$E=u8,FE=f.forwardRef(({className:e,...t},n)=>O.jsx(UE,{ref:n,className:We("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));FE.displayName=UE.displayName;const zE=f.forwardRef(({className:e,...t},n)=>O.jsx(jE,{ref:n,className:We("aspect-square h-full w-full",e),...t}));zE.displayName=jE.displayName;const f8=f.forwardRef(({className:e,...t},n)=>O.jsx($E,{ref:n,className:We("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));f8.displayName=$E.displayName;const VE=f.forwardRef(({className:e,...t},n)=>O.jsx("textarea",{className:We("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));VE.displayName="Textarea";function h8(){const{user:e,updateUser:t}=tg(),[n,r]=f.useState(!1),[i,o]=f.useState(!1),[s,a]=f.useState(e.name),[l,c]=f.useState(e.description),u=()=>{t({id:e.id,name:s}),r(!1)},d=()=>{t({id:e.id,description:l}),o(!1)};return O.jsxs("div",{className:"flex flex-col flex-1 min-h-screen",children:[O.jsx(MT,{}),O.jsxs("main",{className:"w-full grid grid-cols-[1fr_min-content] flex-1",children:[O.jsx("div",{className:"relative p-4",children:O.jsxs("div",{className:"relative p-4",children:[O.jsxs("div",{className:"rounded-xl bg-profile bg-cover bg-[0_-80px] p-4 flex items-center gap-x-4",children:[O.jsx(FE,{className:"relative w-24 h-24",children:O.jsx(zE,{src:e.image,alt:"profile"})}),O.jsxs(Up,{open:n,onOpenChange:r,children:[O.jsx(jp,{asChild:!0,children:O.jsxs(_n,{variant:"ghost",className:"flex items-center gap-2 hover:bg-transparent",children:[O.jsx("h2",{className:"text-2xl font-bold",children:e?.name?.split(" ").slice(0,2).join(" ")}),O.jsx(K0,{className:"w-4 h-4"})]})}),O.jsxs(xu,{children:[O.jsx(Pu,{children:O.jsx(_u,{children:"Edite seu nome"})}),O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsx(Ru,{defaultValue:e.name,onChange:h=>a(h.target.value),placeholder:"Digite seu nome..."}),O.jsx(_n,{onClick:u,children:"Salvar"})]})]})]})]}),O.jsxs("div",{className:"mt-4",children:[O.jsx("span",{className:"block text-2xl font-bold",children:"Descrio"}),O.jsxs(Up,{open:i,onOpenChange:o,children:[O.jsx(jp,{asChild:!0,children:O.jsx(_n,{variant:"ghost",className:"w-full text-left hover:bg-transparent p-0",children:O.jsxs("div",{className:"flex items-start w-full gap-2",children:[O.jsx("span",{className:We("block text-2xl mt-4 text-justify",{"opacity-50":!e.description}),children:e.description??"Adicione uma descrio..."}),O.jsx(K0,{className:"w-4 h-4 mt-6"})]})})}),O.jsxs(xu,{children:[O.jsx(Pu,{children:O.jsx(_u,{children:"Edite sua Descrio"})}),O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsx(VE,{defaultValue:e.description,onChange:h=>c(h.target.value),placeholder:"adicionar descrio...",className:"min-h-[100px]"}),O.jsx(_n,{onClick:d,children:"Salvar"})]})]})]})]}),O.jsxs("div",{className:"mt-4 flex flex-col gap-y-4",children:[O.jsx("span",{className:"text-xl font-semibold",children:"Ultimos Jogos jogados"}),O.jsx("div",{children:O.jsx("img",{src:"/games/LOL.png",alt:"League of Legends",className:"w-20 h-20"})})]})]})}),O.jsx("div",{className:"justify-self-end",children:O.jsx(DE,{})})]})]})}const p8="pk_test_Y2xvc2UtZ3J1Yi03MS5jbGVyay5hY2NvdW50cy5kZXYk",m8=J5([{element:O.jsx(hO,{}),children:[{path:"/",element:O.jsx(t8,{})},{path:"/sign-in/*",element:O.jsx(n8,{})},{path:"/sign-up/*",element:O.jsx(r8,{})}]},{element:O.jsx(fO,{}),children:[{path:"/dashboard",element:O.jsx(e8,{})},{path:"/chat-voice",element:O.jsx(E6,{})},{path:"/profile",element:O.jsx(h8,{})}]}]);Gf.createRoot(document.getElementById("root")).render(O.jsx(D.StrictMode,{children:O.jsx(PS,{publishableKey:p8,children:O.jsx(gI,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:O.jsx("div",{className:"min-w-screen min-h-screen bg-black",children:O.jsx(iI,{router:m8})})})})}));
